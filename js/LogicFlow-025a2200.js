import{a3 as t,a as e,r,o as n,f as o,s as i,a1 as a}from"./index-f20dec1b.js";import{y as u,x as c}from"./preact.module-1889502f.js";var s,l,f={},p={get exports(){return f},set exports(t){f=t}};s=f,window,l=function(){
/******/
return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={
/******/
i:n,
/******/
l:!1,
/******/
exports:{}
/******/};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?
/******/function(){return t.default}:
/******/function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=215)}([
/* 0 */
/***/
function(t,e,r){(function(t,n){r.d(e,"a",(function(){return w})),r.d(e,"b",(function(){return tr})),r.d(e,"c",(function(){return Vt})),r.d(e,"d",(function(){return Et})),r.d(e,"e",(function(){return yt})),r.d(e,"f",(function(){return ht})),r.d(e,"g",(function(){return xt})),r.d(e,"h",(function(){return dr})),r.d(e,"i",(function(){return ut})),r.d(e,"j",(function(){return wt})),r.d(e,"k",(function(){return ee})),r.d(e,"l",(function(){return ie})),r.d(e,"m",(function(){return nt})),r.d(e,"n",(function(){return fe})),r.d(e,"o",(function(){return j})),r.d(e,"p",(function(){return Pe})),r.d(e,"q",(function(){return pe})),r.d(e,"r",(function(){return me})),r.d(e,"s",(function(){return pr})),r.d(e,"t",(function(){return ye})),r.d(e,"u",(function(){return ne})),r.d(e,"v",(function(){return we})),r.d(e,"w",(function(){return xe})),r.d(e,"x",(function(){return Ee})),r.d(e,"y",(function(){return Je})),r.d(e,"z",(function(){return er})),r.d(e,"A",(function(){return fr})),r.d(e,"B",(function(){return je})),r.d(e,"C",(function(){return Z})),r.d(e,"D",(function(){return ke})),r.d(e,"E",(function(){return se})),r.d(e,"F",(function(){return ce})),r.d(e,"G",(function(){return re})),r.d(e,"H",(function(){return Qt})),r.d(e,"I",(function(){return Ne})),r.d(e,"J",(function(){return Ce})),r.d(e,"K",(function(){return ft})),r.d(e,"L",(function(){return Se})),r.d(e,"M",(function(){return Re}));var o="An invariant failed, however the error is obfuscated because this is a production build.",i=[];Object.freeze(i);var a={};function u(){return++Lt.mobxGuid}function c(t){throw s(!1,t),"X"}function s(t,e){if(!t)throw new Error("[mobx] "+(e||o))}function l(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}Object.freeze(a);var f=function(){};function p(t){return null!==t&&"object"==typeof t}function d(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function h(t,e,r){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:r})}function y(t,e){var r="isMobX"+t;return e.prototype[r]=!0,function(t){return p(t)&&!0===t[r]}}function v(t){return t instanceof Map}function g(t){return t instanceof Set}function b(t){var e=new Set;for(var r in t)e.add(r);return Object.getOwnPropertySymbols(t).forEach((function(r){Object.getOwnPropertyDescriptor(t,r).enumerable&&e.add(r)})),Array.from(e)}function m(t){return t&&t.toString?t.toString():new String(t).toString()}function O(t){return null===t?null:"object"==typeof t?""+t:t}var _="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:
/* istanbul ignore next */Object.getOwnPropertyNames,w=Symbol("mobx administration"),x=
/** @class */function(){function t(t){void 0===t&&(t="Atom@"+u()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=J.NOT_TRACKING}return t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(t){return t()}))},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(t){return t()}))},t.prototype.reportObserved=function(){return Xt(this)},t.prototype.reportChanged=function(){var t;Ft(),(t=this).lowestObserverState!==J.STALE&&(t.lowestObserverState=J.STALE,t.observers.forEach((function(e){e.dependenciesState===J.UP_TO_DATE&&(e.isTracing!==$.NONE&&Ut(e,t),e.onBecomeStale()),e.dependenciesState=J.STALE}))),Gt()},t.prototype.toString=function(){return this.name},t}(),E=y("Atom",x);function j(t,e,r){void 0===e&&(e=f),void 0===r&&(r=f);var n,o=new x(t);return e!==f&&le("onBecomeObserved",o,e,n),r!==f&&se(o,r),o}var S={identity:function(t,e){return t===e},structural:function(t,e){return yr(t,e)},default:function(t,e){return Object.is(t,e)},shallow:function(t,e){return yr(t,e,1)}},P=function(t,e){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},A=function(){return A=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},A.apply(this,arguments)};
/*! *****************************************************************************
            	Copyright (c) Microsoft Corporation. All rights reserved.
            	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
            	this file except in compliance with the License. You may obtain a copy of the
            	License at http://www.apache.org/licenses/LICENSE-2.0
            
            	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
            	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
            	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
            	MERCHANTABLITY OR NON-INFRINGEMENT.
            
            	See the Apache Version 2.0 License for specific language governing permissions
            	and limitations under the License.
            	***************************************************************************** */function k(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function M(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function T(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(M(arguments[e]));return t}var D=Symbol("mobx did run lazy initializers"),N=Symbol("mobx pending decorators"),C={},R={};function I(t){var e,r;if(!0!==t[D]){var n=t[N];if(n){h(t,D,!0);var o=T(Object.getOwnPropertySymbols(n),Object.keys(n));try{for(var i=k(o),a=i.next();!a.done;a=i.next()){var u=n[a.value];u.propertyCreator(t,u.prop,u.descriptor,u.decoratorTarget,u.decoratorArguments)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}}}function L(t,e){return function(){var r,n,o=function(n,o,i,a){if(!0===a)return e(n,o,i,n,r),null;if(!Object.prototype.hasOwnProperty.call(n,N)){var u=n[N];h(n,N,A({},u))}return n[N][o]={prop:o,propertyCreator:e,descriptor:i,decoratorTarget:n,decoratorArguments:r},function(t,e){var r=e?C:R;return r[t]||(r[t]={configurable:!0,enumerable:e,get:function(){return I(this),this[t]},set:function(e){I(this),this[t]=e}})}(o,t)};return(2===(n=arguments).length||3===n.length)&&("string"==typeof n[1]||"symbol"==typeof n[1])||4===n.length&&!0===n[3]?(r=i,o.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),o)}}function z(t,e,r){return Ee(t)?t:Array.isArray(t)?Z.array(t,{name:r}):d(t)?Z.object(t,void 0,{name:r}):v(t)?Z.map(t,{name:r}):g(t)?Z.set(t,{name:r}):t}function B(t){return t}function H(e){s(e);var r=L(!0,(function(t,r,n,o,i){var a=n?n.initializer?n.initializer.call(t):n.value:void 0;ar(t).addObservableProp(r,a,e)})),n=(
// Extra process checks, as this happens during module initialization
void 0!==t&&t.env,r);return n.enhancer=e,n}var F={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function G(t){return null==t?F:"string"==typeof t?{name:t,deep:!0,proxy:!0}:t}Object.freeze(F);var X=H(z),U=H((function(t,e,r){return null==t||fr(t)||Je(t)||er(t)||or(t)?t:Array.isArray(t)?Z.array(t,{name:r,deep:!1}):d(t)?Z.object(t,void 0,{name:r,deep:!1}):v(t)?Z.map(t,{name:r,deep:!1}):g(t)?Z.set(t,{name:r,deep:!1}):c(!1)})),Y=H(B),V=H((function(t,e,r){return yr(t,e)?e:t}));function W(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?B:z}var K={box:function(t,e){arguments.length>2&&q("box");var r=G(e);return new Pt(t,W(r),r.name,!0,r.equals)},array:function(t,e){arguments.length>2&&q("array");var r=G(e);return function(t,e,r,n){void 0===r&&(r="ObservableArray@"+u()),void 0===n&&(n=!1);var o,i,a,c=new We(r,e,n);o=c.values,i=w,a=c,Object.defineProperty(o,i,{enumerable:!1,writable:!1,configurable:!0,value:a});var s=new Proxy(c.values,Ve);if(c.proxy=s,t&&t.length){var l=jt(!0);c.spliceWithArray(0,0,t),St(l)}return s}(t,W(r),r.name)},map:function(t,e){arguments.length>2&&q("map");var r=G(e);return new tr(t,W(r),r.name)},set:function(t,e){arguments.length>2&&q("set");var r=G(e);return new nr(t,W(r),r.name)},object:function(t,e,r){"string"==typeof arguments[1]&&q("object");var n=G(r);if(!1===n.proxy)return pe({},t,e,n);var o=de(n),i=function(t){var e=new Proxy(t,Be);return t[w].proxy=e,e}(pe({},void 0,void 0,n));return he(i,t,e,o),i},ref:Y,shallow:U,deep:X,struct:V},Z=function(t,e,r){if("string"==typeof arguments[1]||"symbol"==typeof arguments[1])return X.apply(null,arguments);if(Ee(t))return t;var n=d(t)?Z.object(t,e,r):Array.isArray(t)?Z.array(t,e):v(t)?Z.map(t,e):g(t)?Z.set(t,e):t;if(n!==t)return n;c(!1)};function q(t){c(
// "production" !== "production" &&
"Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(K).forEach((function(t){return Z[t]=K[t]}));var J,Q,$,tt,et=L(!1,(function(t,e,r,n,o){var i=r.get,a=r.set,u=o[0]||{};ar(t).addComputedProp(t,e,A({get:i,set:a,context:t},u))})),rt=et({equals:S.structural}),nt=function(t,e,r){if("string"==typeof e)return et.apply(null,arguments);if(null!==t&&"object"==typeof t&&1===arguments.length)return et.apply(null,arguments);var n="object"==typeof e?e:{};return n.get=t,n.set="function"==typeof e?e:n.set,n.name=n.name||t.name||"",new kt(n)};nt.struct=rt,(Q=J||(J={}))[Q.NOT_TRACKING=-1]="NOT_TRACKING",Q[Q.UP_TO_DATE=0]="UP_TO_DATE",Q[Q.POSSIBLY_STALE=1]="POSSIBLY_STALE",Q[Q.STALE=2]="STALE",(tt=$||($={}))[tt.NONE=0]="NONE",tt[tt.LOG=1]="LOG",tt[tt.BREAK=2]="BREAK";var ot=function(t){this.cause=t};function it(t){return t instanceof ot}function at(t){switch(t.dependenciesState){case J.UP_TO_DATE:return!1;case J.NOT_TRACKING:case J.STALE:return!0;case J.POSSIBLY_STALE:for(var e=ht(!0),r=pt(),n=t.observing,o=n.length,i=0;i<o;i++){var a=n[i];if(Mt(a)){if(Lt.disableErrorBoundaries)a.get();else try{a.get()}catch(u){return dt(r),yt(e),!0}if(t.dependenciesState===J.STALE)return dt(r),yt(e),!0}}return vt(t),dt(r),yt(e),!1}}function ut(){return null!==Lt.trackingDerivation}function ct(t){var e=t.observers.size>0;Lt.computationDepth>0&&e&&c(!1),Lt.allowStateChanges||!e&&"strict"!==Lt.enforceActions||c(!1)}function st(t,e,r){var n=ht(!0);vt(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++Lt.runId;var o,i=Lt.trackingDerivation;if(Lt.trackingDerivation=t,!0===Lt.disableErrorBoundaries)o=e.call(r);else try{o=e.call(r)}catch(a){o=new ot(a)}return Lt.trackingDerivation=i,function(t){for(var e=t.observing,r=t.observing=t.newObserving,n=J.UP_TO_DATE,o=0,i=t.unboundDepsCount,a=0;a<i;a++)0===(u=r[a]).diffValue&&(u.diffValue=1,o!==a&&(r[o]=u),o++),u.dependenciesState>n&&(n=u.dependenciesState);for(r.length=o,t.newObserving=null,i=e.length;i--;)0===(u=e[i]).diffValue&&Bt(u,t),u.diffValue=0;for(;o--;){var u;1===(u=r[o]).diffValue&&(u.diffValue=0,zt(u,t))}n!==J.UP_TO_DATE&&(t.dependenciesState=n,t.onBecomeStale())}(t),yt(n),o}function lt(t){var e=t.observing;t.observing=[];for(var r=e.length;r--;)Bt(e[r],t);t.dependenciesState=J.NOT_TRACKING}function ft(t){var e=pt();try{return t()}finally{dt(e)}}function pt(){var t=Lt.trackingDerivation;return Lt.trackingDerivation=null,t}function dt(t){Lt.trackingDerivation=t}function ht(t){var e=Lt.allowStateReads;return Lt.allowStateReads=t,e}function yt(t){Lt.allowStateReads=t}function vt(t){if(t.dependenciesState!==J.UP_TO_DATE){t.dependenciesState=J.UP_TO_DATE;for(var e=t.observing,r=e.length;r--;)e[r].lowestObserverState=J.UP_TO_DATE}}var gt=0,bt=1,mt=Object.getOwnPropertyDescriptor((function(){}),"name");function Ot(t,e,r){var n=function(){return _t(0,e,r||this,arguments)};return n.isMobxAction=!0,n}function _t(t,e,r,n){var o=wt();try{return e.apply(r,n)}catch(i){throw o.error=i,i}finally{xt(o)}}function wt(t,e,r){var n=pt();Ft();var o={prevDerivation:n,prevAllowStateChanges:jt(!0),prevAllowStateReads:ht(!0),notifySpy:!1,startTime:0,actionId:bt++,parentActionId:gt};return gt=o.actionId,o}function xt(t){gt!==t.actionId&&c("invalid action stack. did you forget to finish an action?"),gt=t.parentActionId,void 0!==t.error&&(Lt.suppressReactionErrors=!0),St(t.prevAllowStateChanges),yt(t.prevAllowStateReads),Gt(),dt(t.prevDerivation),t.notifySpy,Lt.suppressReactionErrors=!1}function Et(t,e){var r,n=jt(t);try{r=e()}finally{St(n)}return r}function jt(t){var e=Lt.allowStateChanges;return Lt.allowStateChanges=t,e}function St(t){Lt.allowStateChanges=t}mt&&mt.configurable;var Pt=
/** @class */function(t){function e(e,r,n,o,i){void 0===n&&(n="ObservableValue@"+u()),void 0===o&&(o=!0),void 0===i&&(i=S.default);var a=t.call(this,n)||this;return a.enhancer=r,a.name=n,a.equals=i,a.hasUnreportedChange=!1,a.value=r(e,void 0,n),a}return function(t,e){function r(){this.constructor=t}P(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){this.value,(t=this.prepareNewValue(t))!==Lt.UNCHANGED&&this.setNewValue(t)},e.prototype.prepareNewValue=function(t){if(ct(this),He(this)){var e=Ge(this,{object:this,type:"update",newValue:t});if(!e)return Lt.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?Lt.UNCHANGED:t},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),Xe(this)&&Ye(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return Fe(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),Ue(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return O(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(x),At=y("ObservableValue",Pt),kt=
/** @class */function(){function t(t){this.dependenciesState=J.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=J.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+u(),this.value=new ot(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=$.NONE,s(t.get,"missing option for computed: get"),this.derivation=t.get,this.name=t.name||"ComputedValue@"+u(),t.set&&(this.setter=Ot(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?S.structural:S.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return t.prototype.onBecomeStale=function(){var t;(t=this).lowestObserverState===J.UP_TO_DATE&&(t.lowestObserverState=J.POSSIBLY_STALE,t.observers.forEach((function(e){e.dependenciesState===J.UP_TO_DATE&&(e.dependenciesState=J.POSSIBLY_STALE,e.isTracing!==$.NONE&&Ut(e,t),e.onBecomeStale())})))},t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(t){return t()}))},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(t){return t()}))},t.prototype.get=function(){var t;this.isComputing&&c("Cycle detected in computation "+this.name+": "+this.derivation),0!==Lt.inBatch||0!==this.observers.size||this.keepAlive?(Xt(this),at(this)&&this.trackAndCompute()&&(t=this).lowestObserverState!==J.STALE&&(t.lowestObserverState=J.STALE,t.observers.forEach((function(e){e.dependenciesState===J.POSSIBLY_STALE?e.dependenciesState=J.STALE:e.dependenciesState===J.UP_TO_DATE&&(t.lowestObserverState=J.UP_TO_DATE)})))):at(this)&&(this.warnAboutUntrackedRead(),Ft(),this.value=this.computeValue(!1),Gt());var e=this.value;if(it(e))throw e.cause;return e},t.prototype.peek=function(){var t=this.computeValue(!1);if(it(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){s(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else s(!1,!1)},t.prototype.trackAndCompute=function(){var t=this.value,e=
/* see #1208 */this.dependenciesState===J.NOT_TRACKING,r=this.computeValue(!0),n=e||it(t)||it(r)||!this.equals(t,r);return n&&(this.value=r),n},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,Lt.computationDepth++,t)e=st(this,this.derivation,this.scope);else if(!0===Lt.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(r){e=new ot(r)}return Lt.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(lt(this),this.value=void 0)},t.prototype.observe=function(t,e){var r=this,n=!0,o=void 0;return ie((function(){var i=r.get();if(!n||e){var a=pt();t({type:"update",object:r,newValue:i,oldValue:o}),dt(a)}n=!1,o=i}))},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return O(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(),Mt=y("ComputedValue",kt),Tt=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Dt={};function Nt(){return"undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:Dt}var Ct,Rt=!0,It=!1,Lt=((Ct=Nt()).__mobxInstanceCount>0&&!Ct.__mobxGlobals&&(Rt=!1),Ct.__mobxGlobals&&Ct.__mobxGlobals.version!==(new Tt).version&&(Rt=!1),Rt?Ct.__mobxGlobals?(Ct.__mobxInstanceCount+=1,Ct.__mobxGlobals.UNCHANGED||(Ct.__mobxGlobals.UNCHANGED={}),Ct.__mobxGlobals):(Ct.__mobxInstanceCount=1,Ct.__mobxGlobals=new Tt):(setTimeout((function(){It||c("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new Tt));function zt(t,e){t.observers.add(e),t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function Bt(t,e){t.observers.delete(e),0===t.observers.size&&Ht(t)}function Ht(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,Lt.pendingUnobservations.push(t))}function Ft(){Lt.inBatch++}function Gt(){if(0==--Lt.inBatch){Zt();for(var t=Lt.pendingUnobservations,e=0;e<t.length;e++){var r=t[e];r.isPendingUnobservation=!1,0===r.observers.size&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBecomeUnobserved()),r instanceof kt&&r.suspend())}Lt.pendingUnobservations=[]}}function Xt(t){var e=Lt.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.size&&Lt.inBatch>0&&Ht(t),!1)}function Ut(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===$.BREAK){var r=[];Yt(ye(t),r,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof kt?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+r.join("\n")+"\n*/\n    ")()}}function Yt(t,e,r){e.length>=1e3?e.push("(and many more)"):(e.push(""+new Array(r).join("\t")+t.name),t.dependencies&&t.dependencies.forEach((function(t){return Yt(t,e,r+1)})))}var Vt=
/** @class */function(){function t(t,e,r,n){void 0===t&&(t="Reaction@"+u()),void 0===n&&(n=!1),this.name=t,this.onInvalidate=e,this.errorHandler=r,this.requiresObservable=n,this.observing=[],this.newObserving=[],this.dependenciesState=J.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+u(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=$.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Lt.pendingReactions.push(this),Zt())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(Ft(),this._isScheduled=!1,at(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(t){this.reportExceptionInDerivation(t)}}Gt()}},t.prototype.track=function(t){if(!this.isDisposed){Ft(),this._isRunning=!0;var e=st(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&lt(this),it(e)&&this.reportExceptionInDerivation(e.cause),Gt()}},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{if(Lt.disableErrorBoundaries)throw t;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Lt.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,t),Lt.globalReactionErrorHandlers.forEach((function(r){return r(t,e)}))}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ft(),lt(this),Gt()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t[w]=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=!1;"boolean"==typeof t[t.length-1]&&(r=t.pop());var n=function(t){switch(t.length){case 0:return Lt.trackingDerivation;case 1:return pr(t[0]);case 2:return pr(t[0],t[1])}}(t);if(!n)return c(!1);n.isTracing===$.NONE&&console.log("[mobx.trace] '"+n.name+"' tracing enabled"),n.isTracing=r?$.BREAK:$.LOG}(this,t)},t}(),Wt=100,Kt=function(t){return t()};function Zt(){Lt.inBatch>0||Lt.isRunningReactions||Kt(qt)}function qt(){Lt.isRunningReactions=!0;for(var t=Lt.pendingReactions,e=0;t.length>0;){++e===Wt&&(console.error("Reaction doesn't converge to a stable state after "+Wt+" iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var r=t.splice(0),n=0,o=r.length;n<o;n++)r[n].runReaction()}Lt.isRunningReactions=!1}var Jt=y("Reaction",Vt);function Qt(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function $t(){c(!1)}function te(t){return function(e,r,n){if(n){if(n.value)return{value:Ot(t,n.value),enumerable:!1,configurable:!0,writable:!0};var o=n.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Ot(t,o.call(this))}}}return function(t){return function(e,r,n){Object.defineProperty(e,r,{configurable:!0,enumerable:!1,get:function(){},set:function(e){h(this,r,ee(t,e))}})}}(t).apply(this,arguments)}}var ee=function(t,e,r,n){return 1===arguments.length&&"function"==typeof t?Ot(t.name||"<unnamed action>",t):2===arguments.length&&"function"==typeof e?Ot(t,e):1===arguments.length&&"string"==typeof t?te(t):!0!==n?te(e).apply(null,arguments):void h(t,e,Ot(t.name||e,r.value,this))};function re(t,e){return"string"==typeof t||t.name,_t(0,"function"==typeof t?t:e,this,void 0)}function ne(t){return"function"==typeof t&&!0===t.isMobxAction}function oe(t,e,r){h(t,e,Ot(e,r.bind(t)))}function ie(t,e){void 0===e&&(e=a);var r,n=e&&e.name||t.name||"Autorun@"+u();if(e.scheduler||e.delay){var o=ue(e),i=!1;r=new Vt(n,(function(){i||(i=!0,o((function(){i=!1,r.isDisposed||r.track(c)})))}),e.onError,e.requiresObservable)}else r=new Vt(n,(function(){this.track(c)}),e.onError,e.requiresObservable);function c(){t(r)}return r.schedule(),r.getDisposer()}ee.bound=function(t,e,r,n){return!0===n?(oe(t,e,r.value),null):r?{configurable:!0,enumerable:!1,get:function(){return oe(this,e,r.value||r.initializer.call(this)),this[e]},set:$t}:{enumerable:!1,configurable:!0,set:function(t){oe(this,e,t)},get:function(){}}};var ae=function(t){return t()};function ue(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:ae}function ce(t,e,r){void 0===r&&(r=a);var n,o,i,c=r.name||"Reaction@"+u(),s=ee(c,r.onError?(n=r.onError,o=e,function(){try{return o.apply(this,arguments)}catch(t){n.call(this,t)}}):e),l=!r.scheduler&&!r.delay,f=ue(r),p=!0,d=!1,h=r.compareStructural?S.structural:r.equals||S.default,y=new Vt(c,(function(){p||l?v():d||(d=!0,f(v))}),r.onError,r.requiresObservable);function v(){if(d=!1,!y.isDisposed){var e=!1;y.track((function(){var r=t(y);e=p||!h(i,r),i=r})),p&&r.fireImmediately&&s(i,y),p||!0!==e||s(i,y),p&&(p=!1)}}return y.schedule(),y.getDisposer()}function se(t,e,r){return le("onBecomeUnobserved",t,e,r)}function le(t,e,r,n){var o="function"==typeof n?pr(e,r):pr(e),i="function"==typeof n?n:r,a=t+"Listeners";return o[a]?o[a].add(i):o[a]=new Set([i]),"function"!=typeof o[t]?c(!1):function(){var t=o[a];t&&(t.delete(i),0===t.size&&delete o[a])}}function fe(t){var e,r,n=t.enforceActions,o=t.computedRequiresReaction,i=t.computedConfigurable,a=t.disableErrorBoundaries,u=t.reactionScheduler,s=t.reactionRequiresObservable,l=t.observableRequiresReaction;if(!0===t.isolateGlobalState&&((Lt.pendingReactions.length||Lt.inBatch||Lt.isRunningReactions)&&c("isolateGlobalState should be called before MobX is running any reactions"),It=!0,Rt&&(0==--Nt().__mobxInstanceCount&&(Nt().__mobxGlobals=void 0),Lt=new Tt)),void 0!==n){var f=void 0;switch(n){case!0:case"observed":f=!0;break;case!1:case"never":f=!1;break;case"strict":case"always":f="strict";break;default:c("Invalid value for 'enforceActions': '"+n+"', expected 'never', 'always' or 'observed'")}Lt.enforceActions=f,Lt.allowStateChanges=!0!==f&&"strict"!==f}void 0!==o&&(Lt.computedRequiresReaction=!!o),void 0!==s&&(Lt.reactionRequiresObservable=!!s),void 0!==l&&(Lt.observableRequiresReaction=!!l,Lt.allowStateReads=!Lt.observableRequiresReaction),void 0!==i&&(Lt.computedConfigurable=!!i),void 0!==a&&(!0===a&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),Lt.disableErrorBoundaries=!!a),u&&(e=u,r=Kt,Kt=function(t){return e((function(){return r(t)}))})}function pe(t,e,r,n){var o=de(n=G(n));return I(t),ar(t,n.name,o.enhancer),e&&he(t,e,r,o),t}function de(t){return t.defaultDecorator||(!1===t.deep?Y:X)}function he(t,e,r,n){var o,i;Ft();try{var a=_(e);try{for(var u=k(a),c=u.next();!c.done;c=u.next()){var s=c.value,l=Object.getOwnPropertyDescriptor(e,s),f=(r&&s in r?r[s]:l.get?et:n)(t,s,l,!0);f&&Object.defineProperty(t,s,f)}}catch(p){o={error:p}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}finally{Gt()}}function ye(t,e){return ve(pr(t,e))}function ve(t){var e,r,n={name:t.name};return t.observing&&t.observing.length>0&&(n.dependencies=(e=t.observing,r=[],e.forEach((function(t){-1===r.indexOf(t)&&r.push(t)})),r).map(ve)),n}var ge=0;function be(){this.message="FLOW_CANCELLED"}function me(t){1!==arguments.length&&c("Flow expects 1 argument and cannot be used as decorator");var e=t.name||"<unnamed flow>";return function(){var r,n=arguments,o=++ge,i=ee(e+" - runid: "+o+" - init",t).apply(this,n),a=void 0,u=new Promise((function(t,n){var u=0;function c(t){var r;a=void 0;try{r=ee(e+" - runid: "+o+" - yield "+u++,i.next).call(i,t)}catch(c){return n(c)}l(r)}function s(t){var r;a=void 0;try{r=ee(e+" - runid: "+o+" - yield "+u++,i.throw).call(i,t)}catch(c){return n(c)}l(r)}function l(e){if(!e||"function"!=typeof e.then)return e.done?t(e.value):(a=Promise.resolve(e.value)).then(c,s);e.then(l,n)}r=n,c(void 0)}));return u.cancel=ee(e+" - runid: "+o+" - cancel",(function(){try{a&&Oe(a);var t=i.return(void 0),e=Promise.resolve(t.value);e.then(f,f),Oe(e),r(new be)}catch(n){r(n)}})),u}}function Oe(t){"function"==typeof t.cancel&&t.cancel()}function _e(t,e){if(null==t)return!1;if(void 0!==e){if(!1===fr(t))return!1;if(!t[w].values.has(e))return!1;var r=pr(t,e);return Mt(r)}return Mt(t)}function we(t){return arguments.length>1?c(!1):_e(t)}function xe(t,e){return"string"!=typeof e?c(!1):_e(t,e)}function Ee(t){return 1!==arguments.length&&c(!1),function(t,e){return null!=t&&(void 0!==e?!!fr(t)&&t[w].values.has(e):fr(t)||!!t[w]||E(t)||Jt(t)||Mt(t))}(t)}function je(t){return fr(t)?t[w].getKeys():er(t)||or(t)?Array.from(t.keys()):Je(t)?t.map((function(t,e){return e})):c(!1)}function Se(t){return fr(t)?je(t).map((function(e){return t[e]})):er(t)?je(t).map((function(e){return t.get(e)})):or(t)?Array.from(t.values()):Je(t)?t.slice():c(!1)}function Pe(t){return fr(t)?je(t).map((function(e){return[e,t[e]]})):er(t)?je(t).map((function(e){return[e,t.get(e)]})):or(t)?Array.from(t.entries()):Je(t)?t.map((function(t,e){return[e,t]})):c(!1)}function Ae(t,e,r){if(2!==arguments.length||or(t))if(fr(t)){var n=t[w];n.values.get(e)?n.write(e,r):n.addObservableProp(e,r,n.defaultEnhancer)}else if(er(t))t.set(e,r);else if(or(t))t.add(e);else{if(!Je(t))return c(!1);"number"!=typeof e&&(e=parseInt(e,10)),s(e>=0,"Not a valid index: '"+e+"'"),Ft(),e>=t.length&&(t.length=e+1),t[e]=r,Gt()}else{Ft();var o=e;try{for(var i in o)Ae(t,i,o[i])}finally{Gt()}}}function ke(t,e,r,n){return"function"==typeof r?function(t,e,r,n){return dr(t,e).observe(r,n)}(t,e,r,n):function(t,e,r){return dr(t).observe(e,r)}(t,e,r)}be.prototype=Object.create(Error.prototype);var Me={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Te(t,e,r,n){return n.detectCycles&&t.set(e,r),r}function De(t,e,r){if(!e.recurseEverything&&!Ee(t))return t;if("object"!=typeof t)return t;if(null===t)return null;if(t instanceof Date)return t;if(At(t))return De(t.get(),e,r);if(Ee(t)&&je(t),!0===e.detectCycles&&null!==t&&r.has(t))return r.get(t);if(Je(t)||Array.isArray(t)){var n=Te(r,t,[],e),o=t.map((function(t){return De(t,e,r)}));n.length=o.length;for(var i=0,a=o.length;i<a;i++)n[i]=o[i];return n}if(or(t)||Object.getPrototypeOf(t)===Set.prototype){if(!1===e.exportMapsAsObjects){var u=Te(r,t,new Set,e);return t.forEach((function(t){u.add(De(t,e,r))})),u}var c=Te(r,t,[],e);return t.forEach((function(t){c.push(De(t,e,r))})),c}if(er(t)||Object.getPrototypeOf(t)===Map.prototype){if(!1===e.exportMapsAsObjects){var s=Te(r,t,new Map,e);return t.forEach((function(t,n){s.set(n,De(t,e,r))})),s}var l=Te(r,t,{},e);return t.forEach((function(t,n){l[n]=De(t,e,r)})),l}var f=Te(r,t,{},e);return b(t).forEach((function(n){f[n]=De(t[n],e,r)})),f}function Ne(t,e){var r;return"boolean"==typeof e&&(e={detectCycles:e}),e||(e=Me),e.detectCycles=void 0===e.detectCycles?!0===e.recurseEverything:!0===e.detectCycles,e.detectCycles&&(r=new Map),De(t,e,r)}function Ce(t,e){void 0===e&&(e=void 0),Ft();try{return t.apply(e)}finally{Gt()}}function Re(t,e,r){return 1===arguments.length||e&&"object"==typeof e?function(t,e){var r,n=new Promise((function(n,o){var i=Ie(t,n,A(A({},e),{onError:o}));r=function(){i(),o("WHEN_CANCELLED")}}));return n.cancel=r,n}(t,e):Ie(t,e,r||{})}function Ie(t,e,r){var n;"number"==typeof r.timeout&&(n=setTimeout((function(){if(!i[w].isDisposed){i();var t=new Error("WHEN_TIMEOUT");if(!r.onError)throw t;r.onError(t)}}),r.timeout)),r.name=r.name||"When@"+u();var o=Ot(r.name+"-effect",e),i=ie((function(e){t()&&(e.dispose(),n&&clearTimeout(n),o())}),r);return i}function Le(t){return t[w]}function ze(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t}var Be={has:function(t,e){if(e===w||"constructor"===e||e===D)return!0;var r=Le(t);return ze(e)?r.has(e):e in t},get:function(t,e){if(e===w||"constructor"===e||e===D)return t[e];var r=Le(t),n=r.values.get(e);if(n instanceof x){var o=n.get();return void 0===o&&r.has(e),o}return ze(e)&&r.has(e),t[e]},set:function(t,e,r){return!!ze(e)&&(Ae(t,e,r),!0)},deleteProperty:function(t,e){return!!ze(e)&&(Le(t).remove(e),!0)},ownKeys:function(t){return Le(t).keysAtom.reportObserved(),Reflect.ownKeys(t)},preventExtensions:function(t){return c("Dynamic observable objects cannot be frozen"),!1}};function He(t){return void 0!==t.interceptors&&t.interceptors.length>0}function Fe(t,e){var r=t.interceptors||(t.interceptors=[]);return r.push(e),l((function(){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}))}function Ge(t,e){var r=pt();try{for(var n=T(t.interceptors||[]),o=0,i=n.length;o<i&&(s(!(e=n[o](e))||e.type,"Intercept handlers should return nothing or a change object"),e);o++);return e}finally{dt(r)}}function Xe(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function Ue(t,e){var r=t.changeListeners||(t.changeListeners=[]);return r.push(e),l((function(){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}))}function Ye(t,e){var r=pt(),n=t.changeListeners;if(n){for(var o=0,i=(n=n.slice()).length;o<i;o++)n[o](e);dt(r)}}var Ve={get:function(t,e){return e===w?t[w]:"length"===e?t[w].getArrayLength():"number"==typeof e?Ke.get.call(t,e):"string"!=typeof e||isNaN(e)?Ke.hasOwnProperty(e)?Ke[e]:t[e]:Ke.get.call(t,parseInt(e))},set:function(t,e,r){return"length"===e&&t[w].setArrayLength(r),"number"==typeof e&&Ke.set.call(t,e,r),"symbol"==typeof e||isNaN(e)?t[e]=r:Ke.set.call(t,parseInt(e),r),!0},preventExtensions:function(t){return c("Observable arrays cannot be frozen"),!1}},We=
/** @class */function(){function t(t,e,r){this.owned=r,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new x(t||"ObservableArray@"+u()),this.enhancer=function(r,n){return e(r,n,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return Fe(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Ue(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!=typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var r=new Array(t-e),n=0;n<t-e;n++)r[n]=void 0;this.spliceWithArray(e,0,r)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=e},t.prototype.spliceWithArray=function(t,e,r){var n=this;ct(this.atom);var o=this.values.length;if(void 0===t?t=0:t>o?t=o:t<0&&(t=Math.max(0,o+t)),e=1===arguments.length?o-t:null==e?0:Math.max(0,Math.min(e,o-t)),void 0===r&&(r=i),He(this)){var a=Ge(this,{object:this.proxy,type:"splice",index:t,removedCount:e,added:r});if(!a)return i;e=a.removedCount,r=a.added}r=0===r.length?r:r.map((function(t){return n.enhancer(t,void 0)}));var u=this.spliceItemsIntoValues(t,e,r);return 0===e&&0===r.length||this.notifyArraySplice(t,r,u),this.dehanceValues(u)},t.prototype.spliceItemsIntoValues=function(t,e,r){var n;if(r.length<1e4)return(n=this.values).splice.apply(n,T([t,e],r));var o=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(r,this.values.slice(t+e)),o},t.prototype.notifyArrayChildUpdate=function(t,e,r){var n=!this.owned&&!1,o=Xe(this),i=o||n?{object:this.proxy,type:"update",index:t,newValue:e,oldValue:r}:null;this.atom.reportChanged(),o&&Ye(this,i)},t.prototype.notifyArraySplice=function(t,e,r){var n=!this.owned&&!1,o=Xe(this),i=o||n?{object:this.proxy,type:"splice",index:t,removed:r,added:e,removedCount:r.length,addedCount:e.length}:null;this.atom.reportChanged(),o&&Ye(this,i)},t}(),Ke={intercept:function(t){return this[w].intercept(t)},observe:function(t,e){return void 0===e&&(e=!1),this[w].observe(t,e)},clear:function(){return this.splice(0)},replace:function(t){var e=this[w];return e.spliceWithArray(0,e.values.length,t)},
/**
               * Converts this array back to a (shallow) javascript structure.
               * For a deep clone use mobx.toJS
               */
toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},
/*
               * functions that do alter the internal structure of the array, (based on lib.es6.d.ts)
               * since these functions alter the inner structure of the array, the have side effects.
               * Because the have side effects, they should not be used in computed function,
               * and for that reason the do not call dependencyState.notifyObserved
               */
splice:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=this[w];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray(t);case 2:return o.spliceWithArray(t,e)}return o.spliceWithArray(t,e,r)},spliceWithArray:function(t,e,r){return this[w].spliceWithArray(t,e,r)},push:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this[w];return r.spliceWithArray(r.values.length,0,t),r.values.length},pop:function(){return this.splice(Math.max(this[w].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this[w];return r.spliceWithArray(0,0,t),r.values.length},reverse:function(){var t=this.slice();return t.reverse.apply(t,arguments)},sort:function(t){var e=this.slice();return e.sort.apply(e,arguments)},remove:function(t){var e=this[w],r=e.dehanceValues(e.values).indexOf(t);return r>-1&&(this.splice(r,1),!0)},get:function(t){var e=this[w];if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(t,e){var r=this[w],n=r.values;if(t<n.length){ct(r.atom);var o=n[t];if(He(r)){var i=Ge(r,{type:"update",object:r.proxy,index:t,newValue:e});if(!i)return;e=i.newValue}(e=r.enhancer(e,o))!==o&&(n[t]=e,r.notifyArrayChildUpdate(t,e,o))}else{if(t!==n.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+n.length);r.spliceWithArray(t,0,[e])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach((function(t){"function"==typeof Array.prototype[t]&&(Ke[t]=function(){var e=this[w];e.atom.reportObserved();var r=e.dehanceValues(e.values);return r[t].apply(r,arguments)})})),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach((function(t){"function"==typeof Array.prototype[t]&&(Ke[t]=function(e,r){var n=this,o=this[w];return o.atom.reportObserved(),o.dehanceValues(o.values)[t]((function(t,o){return e.call(r,t,o,n)}),r)})})),["reduce","reduceRight"].forEach((function(t){Ke[t]=function(){var e=this,r=this[w];r.atom.reportObserved();var n=arguments[0];return arguments[0]=function(t,o,i){return o=r.dehanceValue(o),n(t,o,i,e)},r.values[t].apply(r.values,arguments)}}));var Ze,qe=y("ObservableArrayAdministration",We);function Je(t){return p(t)&&qe(t[w])}var Qe,$e={},tr=
/** @class */function(){function t(t,e,r){if(void 0===e&&(e=z),void 0===r&&(r="ObservableMap@"+u()),this.enhancer=e,this.name=r,this[Ze]=$e,this._keysAtom=j(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){var e=this;if(!Lt.trackingDerivation)return this._has(t);var r=this._hasMap.get(t);if(!r){var n=r=new Pt(this._has(t),B,this.name+"."+m(t)+"?",!1);this._hasMap.set(t,n),se(n,(function(){return e._hasMap.delete(t)}))}return r.get()},t.prototype.set=function(t,e){var r=this._has(t);if(He(this)){var n=Ge(this,{type:r?"update":"add",object:this,newValue:e,name:t});if(!n)return this;e=n.newValue}return r?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if(ct(this._keysAtom),He(this)&&!(n=Ge(this,{type:"delete",object:this,name:t})))return!1;if(this._has(t)){var r=Xe(this),n=r?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return Ce((function(){e._keysAtom.reportChanged(),e._updateHasMapEntry(t,!1),e._data.get(t).setNewValue(void 0),e._data.delete(t)})),r&&Ye(this,n),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var r=this._hasMap.get(t);r&&r.setNewValue(e)},t.prototype._updateValue=function(t,e){var r=this._data.get(t);if((e=r.prepareNewValue(e))!==Lt.UNCHANGED){var n=Xe(this),o=n?{type:"update",object:this,oldValue:r.value,name:t,newValue:e}:null;r.setNewValue(e),n&&Ye(this,o)}},t.prototype._addValue=function(t,e){var r=this;ct(this._keysAtom),Ce((function(){var n=new Pt(e,r.enhancer,r.name+"."+m(t),!1);r._data.set(t,n),e=n.value,r._updateHasMapEntry(t,!0),r._keysAtom.reportChanged()}));var n=Xe(this);n&&Ye(this,n?{type:"add",object:this,name:t,newValue:e}:null)},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},t.prototype.values=function(){var t=this,e=this.keys();return mr({next:function(){var r=e.next(),n=r.done,o=r.value;return{done:n,value:n?void 0:t.get(o)}}})},t.prototype.entries=function(){var t=this,e=this.keys();return mr({next:function(){var r=e.next(),n=r.done,o=r.value;return{done:n,value:n?void 0:[o,t.get(o)]}}})},t.prototype[(Ze=w,Symbol.iterator)]=function(){return this.entries()},t.prototype.forEach=function(t,e){var r,n;try{for(var o=k(this),i=o.next();!i.done;i=o.next()){var a=M(i.value,2),u=a[0],c=a[1];t.call(e,c,u,this)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.merge=function(t){var e=this;return er(t)&&(t=t.toJS()),Ce((function(){var r=jt(!0);try{d(t)?b(t).forEach((function(r){return e.set(r,t[r])})):Array.isArray(t)?t.forEach((function(t){var r=M(t,2),n=r[0],o=r[1];return e.set(n,o)})):v(t)?(t.constructor!==Map&&c("Cannot initialize from classes that inherit from Map: "+t.constructor.name),t.forEach((function(t,r){return e.set(r,t)}))):null!=t&&c("Cannot initialize map from "+t)}finally{St(r)}})),this},t.prototype.clear=function(){var t=this;Ce((function(){ft((function(){var e,r;try{for(var n=k(t.keys()),o=n.next();!o.done;o=n.next()){var i=o.value;t.delete(i)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}}))}))},t.prototype.replace=function(t){var e=this;return Ce((function(){var r,n,o,i,a=function(t){if(v(t)||er(t))return t;if(Array.isArray(t))return new Map(t);if(d(t)){var e=new Map;for(var r in t)e.set(r,t[r]);return e}return c("Cannot convert to map from '"+t+"'")}(t),u=new Map,s=!1;try{for(var l=k(e._data.keys()),f=l.next();!f.done;f=l.next()){var p=f.value;if(!a.has(p))if(e.delete(p))s=!0;else{var h=e._data.get(p);u.set(p,h)}}}catch(j){r={error:j}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}try{for(var y=k(a.entries()),g=y.next();!g.done;g=y.next()){var b=M(g.value,2),m=(p=b[0],h=b[1],e._data.has(p));if(e.set(p,h),e._data.has(p)){var O=e._data.get(p);u.set(p,O),m||(s=!0)}}}catch(S){o={error:S}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(o)throw o.error}}if(!s)if(e._data.size!==u.size)e._keysAtom.reportChanged();else for(var _=e._data.keys(),w=u.keys(),x=_.next(),E=w.next();!x.done;){if(x.value!==E.value){e._keysAtom.reportChanged();break}x=_.next(),E=w.next()}e._data=u})),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t,e,r={};try{for(var n=k(this),o=n.next();!o.done;o=n.next()){var i=M(o.value,2),a=i[0],u=i[1];r["symbol"==typeof a?a:m(a)]=u}}catch(c){t={error:c}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},t.prototype.toJS=function(){return new Map(this)},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+Array.from(this.keys()).map((function(e){return m(e)+": "+t.get(e)})).join(", ")+" }]"},t.prototype.observe=function(t,e){return Ue(this,t)},t.prototype.intercept=function(t){return Fe(this,t)},t}(),er=y("ObservableMap",tr),rr={},nr=
/** @class */function(){function t(t,e,r){if(void 0===e&&(e=z),void 0===r&&(r="ObservableSet@"+u()),this.name=r,this[Qe]=rr,this._data=new Set,this._atom=j(this.name),this[Symbol.toStringTag]="Set","function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(t,n){return e(t,n,r)},t&&this.replace(t)}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.clear=function(){var t=this;Ce((function(){ft((function(){var e,r;try{for(var n=k(t._data.values()),o=n.next();!o.done;o=n.next()){var i=o.value;t.delete(i)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}}))}))},t.prototype.forEach=function(t,e){var r,n;try{for(var o=k(this),i=o.next();!i.done;i=o.next()){var a=i.value;t.call(e,a,a,this)}}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this;if(ct(this._atom),He(this)&&!(n=Ge(this,{type:"add",object:this,newValue:t})))return this;if(!this.has(t)){Ce((function(){e._data.add(e.enhancer(t,void 0)),e._atom.reportChanged()}));var r=Xe(this),n=r?{type:"add",object:this,newValue:t}:null;r&&Ye(this,n)}return this},t.prototype.delete=function(t){var e=this;if(He(this)&&!(n=Ge(this,{type:"delete",object:this,oldValue:t})))return!1;if(this.has(t)){var r=Xe(this),n=r?{type:"delete",object:this,oldValue:t}:null;return Ce((function(){e._atom.reportChanged(),e._data.delete(t)})),r&&Ye(this,n),!0}return!1},t.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},t.prototype.entries=function(){var t=0,e=Array.from(this.keys()),r=Array.from(this.values());return mr({next:function(){var n=t;return t+=1,n<r.length?{value:[e[n],r[n]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var t=this,e=0,r=Array.from(this._data.values());return mr({next:function(){return e<r.length?{value:t.dehanceValue(r[e++]),done:!1}:{done:!0}}})},t.prototype.replace=function(t){var e=this;return or(t)&&(t=t.toJS()),Ce((function(){var r=jt(!0);try{Array.isArray(t)||g(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&c("Cannot initialize set from "+t)}finally{St(r)}})),this},t.prototype.observe=function(t,e){return Ue(this,t)},t.prototype.intercept=function(t){return Fe(this,t)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},t.prototype[(Qe=w,Symbol.iterator)]=function(){return this.values()},t}(),or=y("ObservableSet",nr),ir=
/** @class */function(){function t(t,e,r,n){void 0===e&&(e=new Map),this.target=t,this.values=e,this.name=r,this.defaultEnhancer=n,this.keysAtom=new x(r+".keys")}return t.prototype.read=function(t){return this.values.get(t).get()},t.prototype.write=function(t,e){var r=this.target,n=this.values.get(t);if(n instanceof kt)n.set(e);else{if(He(this)){if(!(i=Ge(this,{type:"update",object:this.proxy||r,name:t,newValue:e})))return;e=i.newValue}if((e=n.prepareNewValue(e))!==Lt.UNCHANGED){var o=Xe(this),i=o?{type:"update",object:this.proxy||r,oldValue:n.value,name:t,newValue:e}:null;n.setNewValue(e),o&&Ye(this,i)}}},t.prototype.has=function(t){var e=this.pendingKeys||(this.pendingKeys=new Map),r=e.get(t);if(r)return r.get();var n=!!this.values.get(t);return r=new Pt(n,B,this.name+"."+m(t)+"?",!1),e.set(t,r),r.get()},t.prototype.addObservableProp=function(t,e,r){void 0===r&&(r=this.defaultEnhancer);var n=this.target;if(He(this)){var o=Ge(this,{object:this.proxy||n,name:t,type:"add",newValue:e});if(!o)return;e=o.newValue}var i=new Pt(e,r,this.name+"."+m(t),!1);this.values.set(t,i),e=i.value,Object.defineProperty(n,t,function(t){return ur[t]||(ur[t]={configurable:!0,enumerable:!0,get:function(){return this[w].read(t)},set:function(e){this[w].write(t,e)}})}(t)),this.notifyPropertyAddition(t,e)},t.prototype.addComputedProp=function(t,e,r){var n,o,i,a=this.target;r.name=r.name||this.name+"."+m(e),this.values.set(e,new kt(r)),(t===a||(n=t,o=e,!(i=Object.getOwnPropertyDescriptor(n,o))||!1!==i.configurable&&!1!==i.writable))&&Object.defineProperty(t,e,function(t){return cr[t]||(cr[t]={configurable:Lt.computedConfigurable,enumerable:!1,get:function(){return sr(this).read(t)},set:function(e){sr(this).write(t,e)}})}(e))},t.prototype.remove=function(t){if(this.values.has(t)){var e=this.target;if(He(this)&&!(a=Ge(this,{object:this.proxy||e,name:t,type:"remove"})))return;try{Ft();var r=Xe(this),n=this.values.get(t),o=n&&n.get();if(n&&n.set(void 0),this.keysAtom.reportChanged(),this.values.delete(t),this.pendingKeys){var i=this.pendingKeys.get(t);i&&i.set(!1)}delete this.target[t];var a=r?{type:"remove",object:this.proxy||e,oldValue:o,name:t}:null;r&&Ye(this,a)}finally{Gt()}}},t.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return Ue(this,t)},t.prototype.intercept=function(t){return Fe(this,t)},t.prototype.notifyPropertyAddition=function(t,e){var r=Xe(this),n=r?{type:"add",object:this.proxy||this.target,name:t,newValue:e}:null;if(r&&Ye(this,n),this.pendingKeys){var o=this.pendingKeys.get(t);o&&o.set(!0)}this.keysAtom.reportChanged()},t.prototype.getKeys=function(){var t,e;this.keysAtom.reportObserved();var r=[];try{for(var n=k(this.values),o=n.next();!o.done;o=n.next()){var i=M(o.value,2),a=i[0];i[1]instanceof Pt&&r.push(a)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},t}();function ar(t,e,r){if(void 0===e&&(e=""),void 0===r&&(r=z),Object.prototype.hasOwnProperty.call(t,w))return t[w];d(t)||(e=(t.constructor.name||"ObservableObject")+"@"+u()),e||(e="ObservableObject@"+u());var n=new ir(t,new Map,m(e),r);return h(t,w,n),n}var ur=Object.create(null),cr=Object.create(null);function sr(t){var e=t[w];return e||(I(t),t[w])}var lr=y("ObservableObjectAdministration",ir);function fr(t){return!!p(t)&&(I(t),lr(t[w]))}function pr(t,e){if("object"==typeof t&&null!==t){if(Je(t))return void 0!==e&&c(!1),t[w].atom;if(or(t))return t[w];if(er(t)){var r=t;return void 0===e?r._keysAtom:((n=r._data.get(e)||r._hasMap.get(e))||c(!1),n)}var n;if(I(t),e&&!t[w]&&t[e],fr(t))return e?((n=t[w].values.get(e))||c(!1),n):c(!1);if(E(t)||Mt(t)||Jt(t))return t}else if("function"==typeof t&&Jt(t[w]))return t[w];return c(!1)}function dr(t,e){return t||c("Expecting some object"),void 0!==e?dr(pr(t,e)):E(t)||Mt(t)||Jt(t)||er(t)||or(t)?t:(I(t),t[w]?t[w]:void c(!1))}var hr=Object.prototype.toString;function yr(t,e,r){return void 0===r&&(r=-1),vr(t,e,r)}function vr(t,e,r,n,o){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;if("function"!==i&&"object"!==i&&"object"!=typeof e)return!1;var a=hr.call(t);if(a!==hr.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":r>=0&&r++}t=gr(t),e=gr(e);var u="[object Array]"===a;if(!u){if("object"!=typeof t||"object"!=typeof e)return!1;var c=t.constructor,s=e.constructor;if(c!==s&&!("function"==typeof c&&c instanceof c&&"function"==typeof s&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}if(0===r)return!1;r<0&&(r=-1),o=o||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return o[l]===e;if(n.push(t),o.push(e),u){if((l=t.length)!==e.length)return!1;for(;l--;)if(!vr(t[l],e[l],r-1,n,o))return!1}else{var f=Object.keys(t),p=void 0;if(l=f.length,Object.keys(e).length!==l)return!1;for(;l--;)if(!br(e,p=f[l])||!vr(t[p],e[p],r-1,n,o))return!1}return n.pop(),o.pop(),!0}function gr(t){return Je(t)?t.slice():v(t)||er(t)||g(t)||or(t)?Array.from(t.entries()):t}function br(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function mr(t){return t[Symbol.iterator]=Or,t}function Or(){return this}if("undefined"==typeof Proxy||"undefined"==typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Qt,extras:{getDebugName:function(t,e){return(void 0!==e?pr(t,e):fr(t)||er(t)||or(t)?dr(t):pr(t)).name}},$mobx:w})}).call(this,r(155),r(82))},
/* 1 */
/***/
function(t,e,r){r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return b})),r.d(e,"c",(function(){return B})),r.d(e,"d",(function(){return H})),r.d(e,"e",(function(){return y})),r.d(e,"f",(function(){return g})),r.d(e,"g",(function(){return y})),r.d(e,"h",(function(){return z})),r.d(e,"i",(function(){return o})),r.d(e,"j",(function(){return L})),r.d(e,"k",(function(){return S}));var n,o,i,a,u,c,s,l={},f=[],p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function d(t,e){for(var r in e)t[r]=e[r];return t}function h(t){var e=t.parentNode;e&&e.removeChild(t)}function y(t,e,r){var o,i,a,u={};for(a in e)"key"==a?o=e[a]:"ref"==a?i=e[a]:u[a]=e[a];if(arguments.length>2&&(u.children=arguments.length>3?n.call(arguments,2):r),"function"==typeof t&&null!=t.defaultProps)for(a in t.defaultProps)void 0===u[a]&&(u[a]=t.defaultProps[a]);return v(t,u,o,i,null)}function v(t,e,r,n,a){var u={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==a?++i:a};return null==a&&null!=o.vnode&&o.vnode(u),u}function g(){return{current:null}}function b(t){return t.children}function m(t,e){this.props=t,this.context=e}function O(t,e){if(null==e)return t.__?O(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e)return r.__e;return"function"==typeof t.type?O(t):null}function _(t){var e,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return _(t)}}function w(t){(!t.__d&&(t.__d=!0)&&a.push(t)&&!x.__r++||c!==o.debounceRendering)&&((c=o.debounceRendering)||u)(x)}function x(){for(var t;x.__r=a.length;)t=a.sort((function(t,e){return t.__v.__b-e.__v.__b})),a=[],t.some((function(t){var e,r,n,o,i,a;t.__d&&(i=(o=(e=t).__v).__e,(a=e.__P)&&(r=[],(n=d({},o)).__v=o.__v+1,D(a,o,n,e.__n,void 0!==a.ownerSVGElement,null!=o.__h?[i]:null,r,null==i?O(o):i,o.__h),N(r,o),o.__e!=i&&_(o)))}))}function E(t,e,r,n,o,i,a,u,c,s){var p,d,h,y,g,m,_,w=n&&n.__k||f,x=w.length;for(r.__k=[],p=0;p<e.length;p++)if(null!=(y=r.__k[p]=null==(y=e[p])||"boolean"==typeof y?null:"string"==typeof y||"number"==typeof y||"bigint"==typeof y?v(null,y,null,null,y):Array.isArray(y)?v(b,{children:y},null,null,null):y.__b>0?v(y.type,y.props,y.key,null,y.__v):y)){if(y.__=r,y.__b=r.__b+1,null===(h=w[p])||h&&y.key==h.key&&y.type===h.type)w[p]=void 0;else for(d=0;d<x;d++){if((h=w[d])&&y.key==h.key&&y.type===h.type){w[d]=void 0;break}h=null}D(t,y,h=h||l,o,i,a,u,c,s),g=y.__e,(d=y.ref)&&h.ref!=d&&(_||(_=[]),h.ref&&_.push(h.ref,null,y),_.push(d,y.__c||g,y)),null!=g?(null==m&&(m=g),"function"==typeof y.type&&y.__k===h.__k?y.__d=c=j(y,c,t):c=P(t,y,h,w,g,c),"function"==typeof r.type&&(r.__d=c)):c&&h.__e==c&&c.parentNode!=t&&(c=O(h))}for(r.__e=m,p=x;p--;)null!=w[p]&&("function"==typeof r.type&&null!=w[p].__e&&w[p].__e==r.__d&&(r.__d=O(n,p+1)),R(w[p],w[p]));if(_)for(p=0;p<_.length;p++)C(_[p],_[++p],_[++p])}function j(t,e,r){for(var n,o=t.__k,i=0;o&&i<o.length;i++)(n=o[i])&&(n.__=t,e="function"==typeof n.type?j(n,e,r):P(r,n,n,o,n.__e,e));return e}function S(t,e){return e=e||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some((function(t){S(t,e)})):e.push(t)),e}function P(t,e,r,n,o,i){var a,u,c;if(void 0!==e.__d)a=e.__d,e.__d=void 0;else if(null==r||o!=i||null==o.parentNode)t:if(null==i||i.parentNode!==t)t.appendChild(o),a=null;else{for(u=i,c=0;(u=u.nextSibling)&&c<n.length;c+=2)if(u==o)break t;t.insertBefore(o,i),a=i}return void 0!==a?a:o.nextSibling}function A(t,e,r){"-"===e[0]?t.setProperty(e,r):t[e]=null==r?"":"number"!=typeof r||p.test(e)?r:r+"px"}function k(t,e,r,n,o){var i;t:if("style"===e)if("string"==typeof r)t.style.cssText=r;else{if("string"==typeof n&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||A(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||A(t.style,e,r[e])}else if("o"===e[0]&&"n"===e[1])i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=r,r?n||t.addEventListener(e,i?T:M,i):t.removeEventListener(e,i?T:M,i);else if("dangerouslySetInnerHTML"!==e){if(o)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==r?"":r;break t}catch(a){}"function"==typeof r||(null!=r&&(!1!==r||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,r):t.removeAttribute(e))}}function M(t){this.l[t.type+!1](o.event?o.event(t):t)}function T(t){this.l[t.type+!0](o.event?o.event(t):t)}function D(t,e,r,i,a,u,c,s,f){var p,y,v,g,_,w,x,j,S,P,A,M=e.type;if(void 0!==e.constructor)return null;null!=r.__h&&(f=r.__h,s=e.__e=r.__e,e.__h=null,u=[s]),(p=o.__b)&&p(e);try{t:if("function"==typeof M){if(j=e.props,S=(p=M.contextType)&&i[p.__c],P=p?S?S.props.value:p.__:i,r.__c?x=(y=e.__c=r.__c).__=y.__E:("prototype"in M&&M.prototype.render?e.__c=y=new M(j,P):(e.__c=y=new m(j,P),y.constructor=M,y.render=I),S&&S.sub(y),y.props=j,y.state||(y.state={}),y.context=P,y.__n=i,v=y.__d=!0,y.__h=[]),null==y.__s&&(y.__s=y.state),null!=M.getDerivedStateFromProps&&(y.__s==y.state&&(y.__s=d({},y.__s)),d(y.__s,M.getDerivedStateFromProps(j,y.__s))),g=y.props,_=y.state,v)null==M.getDerivedStateFromProps&&null!=y.componentWillMount&&y.componentWillMount(),null!=y.componentDidMount&&y.__h.push(y.componentDidMount);else{if(null==M.getDerivedStateFromProps&&j!==g&&null!=y.componentWillReceiveProps&&y.componentWillReceiveProps(j,P),!y.__e&&null!=y.shouldComponentUpdate&&!1===y.shouldComponentUpdate(j,y.__s,P)||e.__v===r.__v){y.props=j,y.state=y.__s,e.__v!==r.__v&&(y.__d=!1),y.__v=e,e.__e=r.__e,e.__k=r.__k,e.__k.forEach((function(t){t&&(t.__=e)})),y.__h.length&&c.push(y);break t}null!=y.componentWillUpdate&&y.componentWillUpdate(j,y.__s,P),null!=y.componentDidUpdate&&y.__h.push((function(){y.componentDidUpdate(g,_,w)}))}y.context=P,y.props=j,y.state=y.__s,(p=o.__r)&&p(e),y.__d=!1,y.__v=e,y.__P=t,p=y.render(y.props,y.state,y.context),y.state=y.__s,null!=y.getChildContext&&(i=d(d({},i),y.getChildContext())),v||null==y.getSnapshotBeforeUpdate||(w=y.getSnapshotBeforeUpdate(g,_)),A=null!=p&&p.type===b&&null==p.key?p.props.children:p,E(t,Array.isArray(A)?A:[A],e,r,i,a,u,c,s,f),y.base=e.__e,e.__h=null,y.__h.length&&c.push(y),x&&(y.__E=y.__=null),y.__e=!1}else null==u&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=function(t,e,r,o,i,a,u,c){var s,f,p,d=r.props,y=e.props,v=e.type,g=0;if("svg"===v&&(i=!0),null!=a)for(;g<a.length;g++)if((s=a[g])&&"setAttribute"in s==!!v&&(v?s.localName===v:3===s.nodeType)){t=s,a[g]=null;break}if(null==t){if(null===v)return document.createTextNode(y);t=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,y.is&&y),a=null,c=!1}if(null===v)d===y||c&&t.data===y||(t.data=y);else{if(a=a&&n.call(t.childNodes),f=(d=r.props||l).dangerouslySetInnerHTML,p=y.dangerouslySetInnerHTML,!c){if(null!=a)for(d={},g=0;g<t.attributes.length;g++)d[t.attributes[g].name]=t.attributes[g].value;(p||f)&&(p&&(f&&p.__html==f.__html||p.__html===t.innerHTML)||(t.innerHTML=p&&p.__html||""))}if(function(t,e,r,n,o){var i;for(i in r)"children"===i||"key"===i||i in e||k(t,i,null,r[i],n);for(i in e)o&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||r[i]===e[i]||k(t,i,e[i],r[i],n)}(t,y,d,i,c),p)e.__k=[];else if(g=e.props.children,E(t,Array.isArray(g)?g:[g],e,r,o,i&&"foreignObject"!==v,a,u,a?a[0]:r.__k&&O(r,0),c),null!=a)for(g=a.length;g--;)null!=a[g]&&h(a[g]);c||("value"in y&&void 0!==(g=y.value)&&(g!==d.value||g!==t.value||"progress"===v&&!g)&&k(t,"value",g,d.value,!1),"checked"in y&&void 0!==(g=y.checked)&&g!==t.checked&&k(t,"checked",g,d.checked,!1))}return t}(r.__e,e,r,i,a,u,c,f);(p=o.diffed)&&p(e)}catch(T){e.__v=null,(f||null!=u)&&(e.__e=s,e.__h=!!f,u[u.indexOf(s)]=null),o.__e(T,e,r)}}function N(t,e){o.__c&&o.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(r){o.__e(r,e.__v)}}))}function C(t,e,r){try{"function"==typeof t?t(e):t.current=e}catch(n){o.__e(n,r)}}function R(t,e,r){var n,i;if(o.unmount&&o.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||C(n,null,e)),null!=(n=t.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(a){o.__e(a,e)}n.base=n.__P=null}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&R(n[i],e,"function"!=typeof t.type);r||null==t.__e||h(t.__e),t.__e=t.__d=void 0}function I(t,e,r){return this.constructor(t,r)}function L(t,e,r){var i,a,u;o.__&&o.__(t,e),a=(i="function"==typeof r)?null:r&&r.__k||e.__k,u=[],D(e,t=(!i&&r||e).__k=y(b,null,[t]),a||l,l,void 0!==e.ownerSVGElement,!i&&r?[r]:a?null:e.firstChild?n.call(e.childNodes):null,u,!i&&r?r:a?a.__e:e.firstChild,i),N(u,t)}function z(t,e){L(t,e,z)}function B(t,e,r){var o,i,a,u=d({},t.props);for(a in e)"key"==a?o=e[a]:"ref"==a?i=e[a]:u[a]=e[a];return arguments.length>2&&(u.children=arguments.length>3?n.call(arguments,2):r),v(t.type,u,o||t.key,i||t.ref,null)}function H(t,e){var r={__c:e="__cC"+s++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var r,n;return this.getChildContext||(r=[],(n={})[e]=this,this.getChildContext=function(){return n},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&r.some(w)},this.sub=function(t){r.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){r.splice(r.indexOf(t),1),e&&e.call(t)}}),t.children}};return r.Provider.__=r.Consumer.contextType=r}n=f.slice,o={__e:function(t,e){for(var r,n,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((n=r.constructor)&&null!=n.getDerivedStateFromError&&(r.setState(n.getDerivedStateFromError(t)),o=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t),o=r.__d),o)return r.__E=r}catch(i){t=i}throw t}},i=0,m.prototype.setState=function(t,e){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=d({},this.state),"function"==typeof t&&(t=t(d({},r),this.props)),t&&d(r,t),null!=t&&this.__v&&(e&&this.__h.push(e),w(this))},m.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),w(this))},m.prototype.render=b,a=[],u="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,x.__r=0,s=0},
/* 2 */
/***/
function(t,e,r){var n=r(116),o=r(44),i=r(178);n||o(Object.prototype,"toString",i,{unsafe:!0})},
/* 3 */
/***/
function(t,e,r){var n=r(39),o=r(83),i=r(70),a=r(56),u=r(111),c="Array Iterator",s=a.set,l=a.getterFor(c);t.exports=u(Array,"Array",(function(t,e){s(this,{type:c,target:n(t),
// target
index:0,
// next index
kind:e})}),(function(){var t=l(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},
/* 4 */
/***/
function(t,e,r){var n=r(7),o=r(147),i=r(148),a=r(3),u=r(57),c=r(27),s=c("iterator"),l=c("toStringTag"),f=a.values,p=function(t,e){if(t){if(t[s]!==f)try{u(t,s,f)}catch(n){t[s]=f}if(t[l]||u(t,l,e),o[e])for(var r in a)if(t[r]!==a[r])try{u(t,r,a[r])}catch(n){t[r]=a[r]}}};for(var d in o)p(n[d]&&n[d].prototype,d);p(i,"DOMTokenList")},
/* 5 */
/***/
function(t,e,r){var n=r(16),o=r(7),i=r(46),a=r(76),u=r(35),c=r(15),s=r(64),l=r(36),f=r(109),p=r(18),d=r(34),h=r(99),y=r(28),v=r(33),g=r(58),b=r(88),m=r(32),O=r(38),_=r(39),w=r(87),x=r(40),E=r(71),j=r(54),S=r(66),P=r(72),A=r(139),k=r(112),M=r(51),T=r(37),D=r(93),N=r(101),C=r(44),R=r(84),I=r(91),L=r(69),z=r(85),B=r(27),H=r(149),F=r(150),G=r(73),X=r(56),U=r(74).forEach,Y=I("hidden"),V="Symbol",W="prototype",K=B("toPrimitive"),Z=X.set,q=X.getterFor(V),J=Object[W],Q=o.Symbol,$=Q&&Q[W],tt=o.TypeError,et=o.QObject,rt=i("JSON","stringify"),nt=M.f,ot=T.f,it=A.f,at=D.f,ut=c([].push),ct=R("symbols"),st=R("op-symbols"),lt=R("string-to-symbol-registry"),ft=R("symbol-to-string-registry"),pt=R("wks"),dt=!et||!et[W]||!et[W].findChild,ht=l&&p((function(){return 7!=j(ot({},"a",{get:function(){return ot(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=nt(J,e);n&&delete J[e],ot(t,e,r),n&&t!==J&&ot(J,e,n)}:ot,yt=function(t,e){var r=ct[t]=j($);return Z(r,{type:V,tag:t,description:e}),l||(r.description=e),r},vt=function(t,e,r){t===J&&vt(st,e,r),m(t);var n=w(e);return m(r),d(ct,n)?(r.enumerable?(d(t,Y)&&t[Y][n]&&(t[Y][n]=!1),r=j(r,{enumerable:E(0,!1)})):(d(t,Y)||ot(t,Y,E(1,{})),t[Y][n]=!0),ht(t,n,r)):ot(t,n,r)},gt=function(t,e){m(t);var r=_(e),n=S(r).concat(_t(r));return U(n,(function(e){l&&!u(bt,r,e)||vt(t,e,r[e])})),t},bt=function(t){var e=w(t),r=u(at,this,e);return!(this===J&&d(ct,e)&&!d(st,e))&&(!(r||!d(this,e)||!d(ct,e)||d(this,Y)&&this[Y][e])||r)},mt=function(t,e){var r=_(t),n=w(e);if(r!==J||!d(ct,n)||d(st,n)){var o=nt(r,n);return!o||!d(ct,n)||d(r,Y)&&r[Y][n]||(o.enumerable=!0),o}},Ot=function(t){var e=it(_(t)),r=[];return U(e,(function(t){d(ct,t)||d(L,t)||ut(r,t)})),r},_t=function(t){var e=t===J,r=it(e?st:_(t)),n=[];return U(r,(function(t){!d(ct,t)||e&&!d(J,t)||ut(n,ct[t])})),n};if(f||(Q=function(){if(g($,this))throw tt("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?x(arguments[0]):void 0,e=z(t),r=function(t){this===J&&u(r,st,t),d(this,Y)&&d(this[Y],e)&&(this[Y][e]=!1),ht(this,e,E(1,t))};return l&&dt&&ht(J,e,{configurable:!0,set:r}),yt(e,t)},C($=Q[W],"toString",(function(){return q(this).tag})),C(Q,"withoutSetter",(function(t){return yt(z(t),t)})),D.f=bt,T.f=vt,M.f=mt,P.f=A.f=Ot,k.f=_t,H.f=function(t){return yt(B(t),t)},l&&(ot($,"description",{configurable:!0,get:function(){return q(this).description}}),s||C(J,"propertyIsEnumerable",bt,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:Q}),U(S(pt),(function(t){F(t)})),n({target:V,stat:!0,forced:!f},{
// `Symbol.for` method
// https://tc39.es/ecma262/#sec-symbol.for
for:function(t){var e=x(t);if(d(lt,e))return lt[e];var r=Q(e);return lt[e]=r,ft[r]=e,r},
// `Symbol.keyFor` method
// https://tc39.es/ecma262/#sec-symbol.keyfor
keyFor:function(t){if(!b(t))throw tt(t+" is not a symbol");if(d(ft,t))return ft[t]},useSetter:function(){dt=!0},useSimple:function(){dt=!1}}),n({target:"Object",stat:!0,forced:!f,sham:!l},{
// `Object.create` method
// https://tc39.es/ecma262/#sec-object.create
create:function(t,e){return void 0===e?j(t):gt(j(t),e)},
// `Object.defineProperty` method
// https://tc39.es/ecma262/#sec-object.defineproperty
defineProperty:vt,
// `Object.defineProperties` method
// https://tc39.es/ecma262/#sec-object.defineproperties
defineProperties:gt,
// `Object.getOwnPropertyDescriptor` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors
getOwnPropertyDescriptor:mt}),n({target:"Object",stat:!0,forced:!f},{
// `Object.getOwnPropertyNames` method
// https://tc39.es/ecma262/#sec-object.getownpropertynames
getOwnPropertyNames:Ot,
// `Object.getOwnPropertySymbols` method
// https://tc39.es/ecma262/#sec-object.getownpropertysymbols
getOwnPropertySymbols:_t}),n({target:"Object",stat:!0,forced:p((function(){k.f(1)}))},{getOwnPropertySymbols:function(t){return k.f(O(t))}}),rt&&n({target:"JSON",stat:!0,forced:!f||p((function(){var t=Q();return"[null]"!=rt([t])||"{}"!=rt({a:t})||"{}"!=rt(Object(t))}))},{
// eslint-disable-next-line no-unused-vars -- required for `.length`
stringify:function(t,e,r){var n=N(arguments),o=e;if((v(e)||void 0!==t)&&!b(t))return h(e)||(e=function(t,e){if(y(o)&&(e=u(o,this,t,e)),!b(e))return e}),n[1]=e,a(rt,null,n)}}),!$[K]){var wt=$.valueOf;C($,K,(function(t){return u(wt,this)}))}G(Q,V),L[Y]=!0},
/* 6 */
/***/
function(t,e,r){var n=r(146).charAt,o=r(40),i=r(56),a=r(111),u="String Iterator",c=i.set,s=i.getterFor(u);a(String,"String",(function(t){c(this,{type:u,string:o(t),index:0})}),(function(){var t,e=s(this),r=e.string,o=e.index;return o>=r.length?{value:void 0,done:!0}:(t=n(r,o),e.index+=t.length,{value:t,done:!1})}))},
/* 7 */
/***/
function(t,e,r){(function(e){var r=function(t){return t&&t.Math==Math&&t};t.exports=// eslint-disable-next-line es/no-global-this -- safe
r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||// eslint-disable-next-line no-restricted-globals -- safe
r("object"==typeof self&&self)||r("object"==typeof e&&e)||// eslint-disable-next-line no-new-func -- fallback
function(){return this}()||Function("return this")()}).call(this,r(82))},
/* 8 */
/***/
function(t,e,r){var n=r(16),o=r(36),i=r(7),a=r(15),u=r(34),c=r(28),s=r(58),l=r(40),f=r(37).f,p=r(134),d=i.Symbol,h=d&&d.prototype;if(o&&c(d)&&(!("description"in h)||// Safari 12 bug
void 0!==d().description)){var y={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=s(h,this)?new d(t):void 0===t?d():d(t);return""===t&&(y[e]=!0),e};p(v,d),v.prototype=h,h.constructor=v;var g="Symbol(test)"==String(d("test")),b=a(h.toString),m=a(h.valueOf),O=/^Symbol\((.*)\)[^)]+$/,_=a("".replace),w=a("".slice);f(h,"description",{configurable:!0,get:function(){var t=m(this),e=b(t);if(u(y,t))return"";var r=g?w(e,7,-1):_(e,O,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:v})}},
/* 9 */
/***/
function(t,e,r){r(150)("iterator")},
/* 10 */
/***/
function(t,e,r){r.d(e,"a",(function(){
/* reexport */
return a.a})),r.d(e,"c",(function(){
/* reexport */
return a.e})),r.d(e,"h",(function(){
/* reexport */
return O})),r.d(e,"i",(function(){
/* reexport */
return g})),r.d(e,"j",(function(){
/* reexport */
return y})),r.d(e,"b",(function(){
/* binding */
return M})),r.d(e,"e",(function(){
/* binding */
return C})),r.d(e,"f",(function(){
/* binding */
return T})),r.d(e,"g",(function(){
/* binding */
return ut}));var n,o,i,a=r(1),u=0,c=[],s=a.i.__b,l=a.i.__r,f=a.i.diffed,p=a.i.__c,d=a.i.unmount;function h(t,e){a.i.__h&&a.i.__h(o,t,u||e),u=0;var r=o.__H||(o.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function y(t){return u=1,v(P,t)}function v(t,e,r){var i=h(n++,2);return i.t=t,i.__c||(i.__=[r?r(e):P(void 0,e),function(t){var e=i.t(i.__[0],t);i.__[0]!==e&&(i.__=[e,i.__[1]],i.__c.setState({}))}],i.__c=o),i.__}function g(t,e){var r=h(n++,3);!a.i.__s&&S(r.__H,e)&&(r.__=t,r.__H=e,o.__H.__h.push(r))}function b(t,e){var r=h(n++,4);!a.i.__s&&S(r.__H,e)&&(r.__=t,r.__H=e,o.__h.push(r))}function m(t,e){var r=h(n++,7);return S(r.__H,e)&&(r.__=t(),r.__H=e,r.__h=t),r.__}function O(t,e){return u=8,m((function(){return t}),e)}function _(){var t;for(c.sort((function(t,e){return t.__v.__b-e.__v.__b}));t=c.pop();)if(t.__P)try{t.__H.__h.forEach(E),t.__H.__h.forEach(j),t.__H.__h=[]}catch(e){t.__H.__h=[],a.i.__e(e,t.__v)}}a.i.__b=function(t){o=null,s&&s(t)},a.i.__r=function(t){l&&l(t),n=0;var e=(o=t.__c).__H;e&&(e.__h.forEach(E),e.__h.forEach(j),e.__h=[])},a.i.diffed=function(t){f&&f(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==c.push(e)&&i===a.i.requestAnimationFrame||((i=a.i.requestAnimationFrame)||x)(_)),o=null},a.i.__c=function(t,e){e.some((function(t){try{t.__h.forEach(E),t.__h=t.__h.filter((function(t){return!t.__||j(t)}))}catch(r){e.some((function(t){t.__h&&(t.__h=[])})),e=[],a.i.__e(r,t.__v)}})),p&&p(t,e)},a.i.unmount=function(t){d&&d(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach((function(t){try{E(t)}catch(r){e=r}})),e&&a.i.__e(e,r.__v))};var w="function"==typeof requestAnimationFrame;function x(t){var e,r=function(){clearTimeout(n),w&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);w&&(e=requestAnimationFrame(r))}function E(t){var e=o,r=t.__c;"function"==typeof r&&(t.__c=void 0,r()),o=e}function j(t){var e=o;t.__c=t.__(),o=e}function S(t,e){return!t||t.length!==e.length||e.some((function(e,r){return e!==t[r]}))}function P(t,e){return"function"==typeof e?e(t):e}function A(t,e){for(var r in e)t[r]=e[r];return t}function k(t,e){for(var r in t)if("__source"!==r&&!(r in e))return!0;for(var n in e)if("__source"!==n&&t[n]!==e[n])return!0;return!1}function M(t){this.props=t}function T(t,e){function r(t){var r=this.props.ref,n=r==t.ref;return!n&&r&&(r.call?r(null):r.current=null),e?!e(this.props,t)||!n:k(this.props,t)}function n(e){return this.shouldComponentUpdate=r,Object(a.e)(t,e)}return n.displayName="Memo("+(t.displayName||t.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(M.prototype=new a.a).isPureReactComponent=!0,M.prototype.shouldComponentUpdate=function(t,e){return k(this.props,t)||k(this.state,e)};var D=a.i.__b;a.i.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),D&&D(t)};var N="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function C(t){function e(e,r){var n=A({},e);return delete n.ref,t(n,!(r=e.ref||r)||"object"==typeof r&&!("current"in r)?null:r)}return e.$$typeof=N,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var R=function(t,e){return null==t?null:Object(a.k)(Object(a.k)(t).map(e))},I={map:R,forEach:R,count:function(t){return t?Object(a.k)(t).length:0},only:function(t){var e=Object(a.k)(t);if(1!==e.length)throw"Children.only";return e[0]},toArray:a.k},L=a.i.__e;a.i.__e=function(t,e,r){if(t.then)for(var n,o=e;o=o.__;)if((n=o.__c)&&n.__c)return null==e.__e&&(e.__e=r.__e,e.__k=r.__k),n.__c(t,e);L(t,e,r)};var z=a.i.unmount;function B(t,e,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(t){"function"==typeof t.__c&&t.__c()})),t.__c.__H=null),null!=(t=A({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return B(t,e,r)}))),t}function H(t,e,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return H(t,e,r)})),t.__c&&t.__c.__P===e&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}function F(){this.__u=0,this.t=null,this.__b=null}function G(t){var e=t.__.__c;return e&&e.__e&&e.__e(t)}function X(){this.u=null,this.o=null}a.i.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&!0===t.__h&&(t.type=null),z&&z(t)},(F.prototype=new a.a).__c=function(t,e){var r=e.__c,n=this;null==n.t&&(n.t=[]),n.t.push(r);var o=G(n.__v),i=!1,a=function(){i||(i=!0,r.__R=null,o?o(u):u())};r.__R=a;var u=function(){if(!--n.__u){if(n.state.__e){var t=n.state.__e;n.__v.__k[0]=H(t,t.__c.__P,t.__c.__O)}var e;for(n.setState({__e:n.__b=null});e=n.t.pop();)e.forceUpdate()}},c=!0===e.__h;n.__u++||c||n.setState({__e:n.__b=n.__v.__k[0]}),t.then(a,a)},F.prototype.componentWillUnmount=function(){this.t=[]},F.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=B(this.__b,r,n.__O=n.__P)}this.__b=null}var o=e.__e&&Object(a.e)(a.b,null,t.fallback);return o&&(o.__h=null),[Object(a.e)(a.b,null,e.__e?null:t.children),o]};var U=function(t,e,r){if(++r[1]===r[0]&&t.o.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.o.size))for(r=t.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.u=r=r[2]}};function Y(t){return this.getChildContext=function(){return t.context},t.children}function V(t){var e=this,r=t.i;e.componentWillUnmount=function(){Object(a.j)(null,e.l),e.l=null,e.i=null},e.i&&e.i!==r&&e.componentWillUnmount(),t.__v?(e.l||(e.i=r,e.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(t){this.childNodes.push(t),e.i.appendChild(t)},insertBefore:function(t,r){this.childNodes.push(t),e.i.appendChild(t)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),e.i.removeChild(t)}}),Object(a.j)(Object(a.e)(Y,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}(X.prototype=new a.a).__e=function(t){var e=this,r=G(e.__v),n=e.o.get(t);return n[0]++,function(o){var i=function(){e.props.revealOrder?(n.push(o),U(e,t,n)):o()};r?r(i):i()}},X.prototype.render=function(t){this.u=null,this.o=new Map;var e=Object(a.k)(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var r=e.length;r--;)this.o.set(e[r],this.u=[1,0,this.u]);return t.children},X.prototype.componentDidUpdate=X.prototype.componentDidMount=function(){var t=this;this.o.forEach((function(e,r){U(t,r,e)}))};var W="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,K=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Z="undefined"!=typeof document,q=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(t)};a.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(t){Object.defineProperty(a.a.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})}));var J=a.i.event;function Q(){}function $(){return this.cancelBubble}function tt(){return this.defaultPrevented}a.i.event=function(t){return J&&(t=J(t)),t.persist=Q,t.isPropagationStopped=$,t.isDefaultPrevented=tt,t.nativeEvent=t};var et,rt={configurable:!0,get:function(){return this.class}},nt=a.i.vnode;a.i.vnode=function(t){var e=t.type,r=t.props,n=r;if("string"==typeof e){var o=-1===e.indexOf("-");for(var i in n={},r){var u=r[i];Z&&"children"===i&&"noscript"===e||"value"===i&&"defaultValue"in r&&null==u||("defaultValue"===i&&"value"in r&&null==r.value?i="value":"download"===i&&!0===u?u="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!q(r.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(i)?i=i.toLowerCase():o&&K.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===u&&(u=void 0),n[i]=u)}"select"==e&&n.multiple&&Array.isArray(n.value)&&(n.value=Object(a.k)(r.children).forEach((function(t){t.props.selected=-1!=n.value.indexOf(t.props.value)}))),"select"==e&&null!=n.defaultValue&&(n.value=Object(a.k)(r.children).forEach((function(t){t.props.selected=n.multiple?-1!=n.defaultValue.indexOf(t.props.value):n.defaultValue==t.props.value}))),t.props=n,r.class!=r.className&&(rt.enumerable="className"in r,null!=r.className&&(n.class=r.className),Object.defineProperty(n,"className",rt))}t.$$typeof=W,nt&&nt(t)};var ot=a.i.__r;a.i.__r=function(t){ot&&ot(t),et=t.__c};var it={ReactCurrentDispatcher:{current:{readContext:function(t){return et.__n[t.__c].props.value}}}};function at(t){return!!t&&t.$$typeof===W}var ut=function(t,e){return t(e)},ct=a.b,st={useState:y,useReducer:v,useEffect:g,useLayoutEffect:b,useRef:function(t){return u=5,m((function(){return{current:t}}),[])},useImperativeHandle:function(t,e,r){u=6,b((function(){"function"==typeof t?t(e()):t&&(t.current=e())}),null==r?r:r.concat(t))},useMemo:m,useCallback:O,useContext:function(t){var e=o.context[t.__c],r=h(n++,9);return r.c=t,e?(null==r.__&&(r.__=!0,e.sub(o)),e.props.value):t.__},useDebugValue:function(t,e){a.i.useDebugValue&&a.i.useDebugValue(e?e(t):t)},version:"17.0.2",Children:I,render:function(t,e,r){return null==e.__k&&(e.textContent=""),Object(a.j)(t,e),"function"==typeof r&&r(),t?t.__c:null},hydrate:function(t,e,r){return Object(a.h)(t,e),"function"==typeof r&&r(),t?t.__c:null},unmountComponentAtNode:function(t){return!!t.__k&&(Object(a.j)(null,t),!0)},createPortal:function(t,e){return Object(a.e)(V,{__v:t,i:e})},createElement:a.e,createContext:a.d,createFactory:function(t){return a.e.bind(null,t)},cloneElement:function(t){return at(t)?a.c.apply(null,arguments):t},createRef:a.f,Fragment:a.b,isValidElement:at,findDOMNode:function(t){return t&&(t.base||1===t.nodeType&&t)||null},Component:a.a,PureComponent:M,memo:T,forwardRef:C,flushSync:function(t,e){return t(e)},unstable_batchedUpdates:ut,StrictMode:ct,Suspense:F,SuspenseList:X,lazy:function(t){var e,r,n;function o(o){if(e||(e=t()).then((function(t){r=t.default||t}),(function(t){n=t})),n)throw n;if(!r)throw e;return Object(a.e)(r,o)}return o.displayName="Lazy",o.__f=!0,o},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:it};e.d=st},
/* 11 */
/***/
function(t,e,r){var n=r(7),o=r(147),i=r(148),a=r(179),u=r(57),c=function(t){if(t&&t.forEach!==a)try{u(t,"forEach",a)}catch(e){t.forEach=a}};for(var s in o)o[s]&&c(n[s]&&n[s].prototype);c(i)},
/* 12 */
/***/
function(t,e,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(97)})},
/* 13 */
/***/
function(t,e,r){var n=r(16),o=r(18),i=r(38),a=r(96),u=r(137);n({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!u},{getPrototypeOf:function(t){return a(i(t))}})},
/* 14 */
/***/
function(t,e,r){var n=r(16),o=r(46),i=r(76),a=r(199),u=r(157),c=r(32),s=r(33),l=r(54),f=r(18),p=o("Reflect","construct"),d=Object.prototype,h=[].push,y=f((function(){function t(){}return!(p((function(){}),[],t)instanceof t)})),v=!f((function(){p((function(){}))})),g=y||v;n({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(t,e){u(t),c(e);var r=arguments.length<3?t:u(arguments[2]);if(v&&!y)return p(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return i(h,n,e),new(i(a,t,n))}var o=r.prototype,f=l(s(o)?o:d),g=i(t,f,e);return s(g)?g:f}})},
/* 15 */
/***/
function(t,e){var r=Function.prototype,n=r.bind,o=r.call,i=n&&n.bind(o);t.exports=n?function(t){return t&&i(o,t)}:function(t){return t&&function(){return o.apply(t,arguments)}}},
/* 16 */
/***/
function(t,e,r){var n=r(7),o=r(51).f,i=r(57),a=r(44),u=r(108),c=r(134),s=r(95);t.exports=function(t,e){var r,l,f,p,d,h=t.target,y=t.global,v=t.stat;if(r=y?n:v?n[h]||u(h,{}):(n[h]||{}).prototype)for(l in e){if(p=e[l],f=t.noTargetGet?(d=o(r,l))&&d.value:r[l],!s(y?l:h+(v?".":"#")+l,t.forced)&&void 0!==f){if(typeof p==typeof f)continue;c(p,f)}(t.sham||f&&f.sham)&&i(p,"sham",!0),a(r,l,p,t)}}},
/* 17 */
/***/
function(t,e,r){var n=r(16),o=r(7),i=r(99),a=r(100),u=r(33),c=r(67),s=r(43),l=r(39),f=r(61),p=r(27),d=r(75),h=r(101),y=d("slice"),v=p("species"),g=o.Array,b=Math.max;n({target:"Array",proto:!0,forced:!y},{slice:function(t,e){var r,n,o,p=l(this),d=s(p),y=c(t,d),m=c(void 0===e?d:e,d);if(i(p)&&(r=p.constructor,(a(r)&&(r===g||i(r.prototype))||u(r)&&null===(r=r[v]))&&(r=void 0),r===g||void 0===r))return h(p,y,m);for(n=new(void 0===r?g:r)(b(m-y,0)),o=0;y<m;y++,o++)y in p&&f(n,o,p[y]);return n.length=o,n}})},
/* 18 */
/***/
function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},
/* 19 */
/***/
function(t,e,r){var n=r(16),o=r(102);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},
/* 20 */
/***/
function(t,e,r){var n=r(16),o=r(38),i=r(66);n({target:"Object",stat:!0,forced:r(18)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},
/* 21 */
/***/
function(t,e,r){var n=r(16),o=r(18),i=r(39),a=r(51).f,u=r(36),c=o((function(){a(1)}));n({target:"Object",stat:!0,forced:!u||c,sham:!u},{getOwnPropertyDescriptor:function(t,e){return a(i(t),e)}})},
/* 22 */
/***/
function(t,e,r){var n=r(16),o=r(74).filter;n({target:"Array",proto:!0,forced:!r(75)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},
/* 23 */
/***/
function(t,e,r){var n=r(16),o=r(36),i=r(135),a=r(39),u=r(51),c=r(61);n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){for(var e,r,n=a(t),o=u.f,s=i(n),l={},f=0;s.length>f;)void 0!==(r=o(n,e=s[f++]))&&c(l,e,r);return l}})},
/* 24 */
/***/
function(t,e,r){var n=r(36),o=r(94).EXISTS,i=r(15),a=r(37).f,u=Function.prototype,c=i(u.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=i(s.exec);n&&!o&&a(u,"name",{configurable:!0,get:function(){try{return l(s,c(this))[1]}catch(t){return""}}})},
/* 25 */
/***/
function(t,e,r){var n=r(16),o=r(182);n({target:"Array",stat:!0,forced:!r(118)((function(t){Array.from(t)}))},{from:o})},
/* 27 */
/***/,function(t,e,r){var n=r(7),o=r(84),i=r(34),a=r(85),u=r(109),c=r(128),s=o("wks"),l=n.Symbol,f=l&&l.for,p=c?l:l&&l.withoutSetter||a;t.exports=function(t){if(!i(s,t)||!u&&"string"!=typeof s[t]){var e="Symbol."+t;u&&i(l,t)?s[t]=l[t]:s[t]=c&&f?f(e):p(e)}return s[t]}},
/* 28 */
/***/
function(t,e){t.exports=function(t){return"function"==typeof t}},
/* 29 */
/***/
function(t,e,r){var n=r(16),o=r(7),i=r(18),a=r(99),u=r(33),c=r(38),s=r(43),l=r(61),f=r(119),p=r(75),d=r(27),h=r(65),y=d("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",b=o.TypeError,m=h>=51||!i((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),O=p("concat"),_=function(t){if(!u(t))return!1;var e=t[y];return void 0!==e?!!e:a(t)};n({target:"Array",proto:!0,forced:!m||!O},{
// eslint-disable-next-line no-unused-vars -- required for `.length`
concat:function(t){var e,r,n,o,i,a=c(this),u=f(a,0),p=0;for(e=-1,n=arguments.length;e<n;e++)if(_(i=-1===e?a:arguments[e])){if(p+(o=s(i))>v)throw b(g);for(r=0;r<o;r++,p++)r in i&&l(u,p,i[r])}else{if(p>=v)throw b(g);l(u,p++,i)}return u.length=p,u}})},
/* 30 */
/***/
function(t,e,r){var n=r(16),o=r(198);n({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},
/* 31 */
/***/
function(t,e,r){var n=r(105),o="object"==typeof self&&self&&self.Object===Object&&self,i=n.a||o||Function("return this")();e.a=i},
/* 32 */
/***/
function(t,e,r){var n=r(7),o=r(33),i=n.String,a=n.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not an object")}},
/* 33 */
/***/
function(t,e,r){var n=r(28);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},
/* 34 */
/***/
function(t,e,r){var n=r(15),o=r(38),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},
/* 35 */
/***/
function(t,e){var r=Function.prototype.call;t.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},
/* 36 */
/***/
function(t,e,r){var n=r(18);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},
/* 37 */
/***/
function(t,e,r){var n=r(7),o=r(36),i=r(129),a=r(32),u=r(87),c=n.TypeError,s=Object.defineProperty;e.f=o?s:function(t,e,r){if(a(t),e=u(e),a(r),i)try{return s(t,e,r)}catch(n){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},
/* 38 */
/***/
function(t,e,r){var n=r(7),o=r(45),i=n.Object;t.exports=function(t){return i(o(t))}},
/* 39 */
/***/
function(t,e,r){var n=r(81),o=r(45);t.exports=function(t){return n(o(t))}},
/* 40 */
/***/
function(t,e,r){var n=r(7),o=r(98),i=n.String;t.exports=function(t){if("Symbol"===o(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},
/* 41 */
/***/
function(t,e,r){var n=r(16),o=r(74).map;n({target:"Array",proto:!0,forced:!r(75)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},
/* 42 */
/***/
function(t,e,r){(function(t){r.d(e,"d",(function(){return i})),r.d(e,"c",(function(){return a})),r.d(e,"b",(function(){return u})),r.d(e,"a",(function(){return s}));var n=r(10),o=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function i(){var t=o(Object(n.j)(0),2)[1];return Object(n.h)((function(){t((function(t){return t+1}))}),[])}function a(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype}function u(t){return"function"==typeof Symbol?Symbol.for(t):"__$mobx-react "+t+"__"}var c={};function s(){return"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:c}}).call(this,r(82))},
/* 43 */
/***/
function(t,e,r){var n=r(90);t.exports=function(t){return n(t.length)}},
/* 44 */
/***/
function(t,e,r){var n=r(7),o=r(28),i=r(34),a=r(57),u=r(108),c=r(92),s=r(56),l=r(94).CONFIGURABLE,f=s.get,p=s.enforce,d=String(String).split("String");(t.exports=function(t,e,r,c){var s,f=!!c&&!!c.unsafe,h=!!c&&!!c.enumerable,y=!!c&&!!c.noTargetGet,v=c&&void 0!==c.name?c.name:e;o(r)&&("Symbol("===String(v).slice(0,7)&&(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(r,"name")||l&&r.name!==v)&&a(r,"name",v),(s=p(r)).source||(s.source=d.join("string"==typeof v?v:""))),t!==n?(f?!y&&t[e]&&(h=!0):delete t[e],h?t[e]=r:a(t,e,r)):h?t[e]=r:u(e,r)})(Function.prototype,"toString",(function(){return o(this)&&f(this).source||c(this)}))},
/* 45 */
/***/
function(t,e,r){var n=r(7).TypeError;t.exports=function(t){if(null==t)throw n("Can't call method on "+t);return t}},
/* 46 */
/***/
function(t,e,r){var n=r(7),o=r(28),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(n[t]):n[t]&&n[t][e]}},
/* 47 */
/***/
function(t,e,r){var n=r(16),o=r(35),i=r(33),a=r(32),u=r(200),c=r(51),s=r(96);n({target:"Reflect",stat:!0},{get:function t(e,r){var n,l,f=arguments.length<3?e:arguments[2];return a(e)===f?e[r]:(n=c.f(e,r))?u(n)?n.value:void 0===n.get?void 0:o(n.get,f):i(l=s(e))?t(l,r,f):void 0}})},
/* 48 */
/***/
function(t,e,r){(function(t){var n=r(31),o=r(165),i=s&&!s.nodeType&&s,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,u=a&&a.exports===i?n.a.Buffer:void 0,c=(u?u.isBuffer:void 0)||o.a;e.a=c}).call(this,r(121)(t))},
/* 49 */
/***/
function(t,e,r){(function(t){var n=r(105),o=s&&!s.nodeType&&s,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&n.a.process,u=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();e.a=u}).call(this,r(121)(t))},
/* 50 */
/***/
function(t,e,r){var n=r(15),o=n({}.toString),i=n("".slice);t.exports=function(t){return i(o(t),8,-1)}},
/* 51 */
/***/
function(t,e,r){var n=r(36),o=r(35),i=r(93),a=r(71),u=r(39),c=r(87),s=r(34),l=r(129),f=Object.getOwnPropertyDescriptor;e.f=n?f:function(t,e){if(t=u(t),e=c(e),l)try{return f(t,e)}catch(r){}if(s(t,e))return a(!o(i.f,t,e),t[e])}},
/* 52 */
/***/
function(t,e,r){var n=r(16),o=r(213).entries;n({target:"Object",stat:!0},{entries:function(t){return o(t)}})},
/* 53 */
/***/
function(t,e,r){var n=r(46);t.exports=n("navigator","userAgent")||""},
/* 54 */
/***/
function(t,e,r){var n,o=r(32),i=r(168),a=r(110),u=r(69),c=r(133),s=r(86),l=r(91),f="prototype",p="script",d=l("IE_PROTO"),h=function(){},y=function(t){return"<"+p+">"+t+"</"+p+">"},v=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},g=function(){try{n=new ActiveXObject("htmlfile")}catch(i){}var t,e,r;g="undefined"!=typeof document?document.domain&&n?v(n):(e=s("iframe"),r="java"+p+":",e.style.display="none",c.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(y("document.F=Object")),t.close(),t.F):v(n);for(var o=a.length;o--;)delete g[f][a[o]];return g()};u[d]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(h[f]=o(t),r=new h,h[f]=null,r[d]=t):r=g(),void 0===e?r:i(r,e)}},
/* 55 */
/***/
function(t,e,r){var n=r(7),o=r(28),i=r(89),a=n.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not a function")}},
/* 56 */
/***/
function(t,e,r){var n,o,i,a=r(170),u=r(7),c=r(15),s=r(33),l=r(57),f=r(34),p=r(107),d=r(91),h=r(69),y="Object already initialized",v=u.TypeError,g=u.WeakMap;if(a||p.state){var b=p.state||(p.state=new g),m=c(b.get),O=c(b.has),_=c(b.set);n=function(t,e){if(O(b,t))throw new v(y);return e.facade=t,_(b,t,e),e},o=function(t){return m(b,t)||{}},i=function(t){return O(b,t)}}else{var w=d("state");h[w]=!0,n=function(t,e){if(f(t,w))throw new v(y);return e.facade=t,l(t,w,e),e},o=function(t){return f(t,w)?t[w]:{}},i=function(t){return f(t,w)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!s(e)||(r=o(e)).type!==t)throw v("Incompatible receiver, "+t+" required");return r}}}},
/* 57 */
/***/
function(t,e,r){var n=r(36),o=r(37),i=r(71);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},
/* 58 */
/***/
function(t,e,r){var n=r(15);t.exports=n({}.isPrototypeOf)},
/* 59 */
/***/
function(t,e,r){var n=r(55);t.exports=function(t,e){var r=t[e];return null==r?void 0:n(r)}},
/* 60 */
/***/
function(t,e,r){r(173)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r(177))},
/* 61 */
/***/
function(t,e,r){var n=r(87),o=r(37),i=r(71);t.exports=function(t,e,r){var a=n(e);a in t?o.f(t,a,i(0,r)):t[a]=r}},
/* 62 */
/***/
function(t,e,r){var n=r(15),o=r(55),i=n(n.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?i(t,e):function(){return t.apply(e,arguments)}}},
/* 63 */
/***/
function(t,e,r){var n=r(16),o=r(214),i=r(83);n({target:"Array",proto:!0},{fill:o}),i("fill")},
/* 64 */
/***/
function(t,e){t.exports=!1},
/* 65 */
/***/
function(t,e,r){var n,o,i=r(7),a=r(53),u=i.process,c=i.Deno,s=u&&u.versions||c&&c.version,l=s&&s.v8;l&&(o=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},
/* 66 */
/***/
function(t,e,r){var n=r(131),o=r(110);t.exports=Object.keys||function(t){return n(t,o)}},
/* 67 */
/***/
function(t,e,r){var n=r(68),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},
/* 68 */
/***/
function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){var e=+t;return e!=e||0===e?0:(e>0?n:r)(e)}},
/* 69 */
/***/
function(t,e){t.exports={}},
/* 70 */
/***/
function(t,e){t.exports={}},
/* 71 */
/***/
function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},
/* 72 */
/***/
function(t,e,r){var n=r(131),o=r(110).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},
/* 73 */
/***/
function(t,e,r){var n=r(37).f,o=r(34),i=r(27)("toStringTag");t.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},
/* 74 */
/***/
function(t,e,r){var n=r(62),o=r(15),i=r(81),a=r(38),u=r(43),c=r(119),s=o([].push),l=function(t){var e=1==t,r=2==t,o=3==t,l=4==t,f=6==t,p=7==t,d=5==t||f;return function(h,y,v,g){for(var b,m,O=a(h),_=i(O),w=n(y,v),x=u(_),E=0,j=g||c,S=e?j(h,x):r||p?j(h,0):void 0;x>E;E++)if((d||E in _)&&(m=w(b=_[E],E,O),t))if(e)S[E]=m;else if(m)switch(t){case 3:return!0;case 5:return b;case 6:return E;case 2:s(S,b)}else switch(t){case 4:return!1;case 7:s(S,b)}return f?-1:o||l?l:S}};t.exports={
// `Array.prototype.forEach` method
// https://tc39.es/ecma262/#sec-array.prototype.foreach
forEach:l(0),
// `Array.prototype.map` method
// https://tc39.es/ecma262/#sec-array.prototype.map
map:l(1),
// `Array.prototype.filter` method
// https://tc39.es/ecma262/#sec-array.prototype.filter
filter:l(2),
// `Array.prototype.some` method
// https://tc39.es/ecma262/#sec-array.prototype.some
some:l(3),
// `Array.prototype.every` method
// https://tc39.es/ecma262/#sec-array.prototype.every
every:l(4),
// `Array.prototype.find` method
// https://tc39.es/ecma262/#sec-array.prototype.find
find:l(5),
// `Array.prototype.findIndex` method
// https://tc39.es/ecma262/#sec-array.prototype.findIndex
findIndex:l(6),
// `Array.prototype.filterReject` method
// https://github.com/tc39/proposal-array-filtering
filterReject:l(7)}},
/* 75 */
/***/
function(t,e,r){var n=r(18),o=r(27),i=r(65),a=o("species");t.exports=function(t){return i>=51||!n((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},
/* 76 */
/***/
function(t,e){var r=Function.prototype,n=r.apply,o=r.bind,i=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(o?i.bind(n):function(){return i.apply(n,arguments)})},
/* 77 */
/***/
function(t,e,r){var n=r(16),o=r(15),i=r(81),a=r(39),u=r(120),c=o([].join),s=i!=Object,l=u("join",",");n({target:"Array",proto:!0,forced:s||!l},{join:function(t){return c(a(this),void 0===t?",":t)}})},
/* 78 */
/***/
function(t,e,r){var n=r(76),o=r(35),i=r(15),a=r(122),u=r(154),c=r(32),s=r(45),l=r(156),f=r(123),p=r(90),d=r(40),h=r(59),y=r(113),v=r(124),g=r(102),b=r(151),m=r(18),O=b.UNSUPPORTED_Y,_=4294967295,w=Math.min,x=[].push,E=i(/./.exec),j=i(x),S=i("".slice),P=!m((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));a("split",(function(t,e,r){var i;return i="c"=="abbc".split(/(b)*/)[1]||// eslint-disable-next-line regexp/no-empty-group -- required for testing
4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||// eslint-disable-next-line regexp/no-empty-capturing-group, regexp/no-empty-group -- required for testing
".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var i=d(s(this)),a=void 0===r?_:r>>>0;if(0===a)return[];if(void 0===t)return[i];if(!u(t))return o(e,i,t,a);for(var c,l,f,p=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,b=new RegExp(t.source,h+"g");(c=o(g,b,i))&&!((l=b.lastIndex)>v&&(j(p,S(i,v,c.index)),c.length>1&&c.index<i.length&&n(x,p,y(c,1)),f=c[0].length,v=l,p.length>=a));)b.lastIndex===c.index&&b.lastIndex++;return v===i.length?!f&&E(b,"")||j(p,""):j(p,S(i,v)),p.length>a?y(p,0,a):p}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:o(e,this,t,r)}:e,[
// `String.prototype.split` method
// https://tc39.es/ecma262/#sec-string.prototype.split
function(e,r){var n=s(this),a=null==e?void 0:h(e,t);return a?o(a,e,n,r):o(i,d(n),e,r)},
// `RegExp.prototype[@@split]` method
// https://tc39.es/ecma262/#sec-regexp.prototype-@@split
// NOTE: This cannot be properly polyfilled in engines that don't support
// the 'y' flag.
function(t,n){var o=c(this),a=d(t),u=r(i,o,a,n,i!==e);if(u.done)return u.value;var s=l(o,RegExp),h=o.unicode,y=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(O?"g":"y"),g=new s(O?"^(?:"+o.source+")":o,y),b=void 0===n?_:n>>>0;if(0===b)return[];if(0===a.length)return null===v(g,a)?[a]:[];for(var m=0,x=0,E=[];x<a.length;){g.lastIndex=O?0:x;var P,A=v(g,O?S(a,x):a);if(null===A||(P=w(p(g.lastIndex+(O?x:0)),a.length))===m)x=f(a,x,h);else{if(j(E,S(a,m,x)),E.length===b)return E;for(var k=1;k<=A.length-1;k++)if(j(E,A[k]),E.length===b)return E;x=m=P}}return j(E,S(a,m)),E}]}),!P,O)},
/* 79 */
/***/
function(t,e,r){var n=r(36),o=r(7),i=r(15),a=r(95),u=r(44),c=r(34),s=r(143),l=r(58),f=r(88),p=r(130),d=r(18),h=r(72).f,y=r(51).f,v=r(37).f,g=r(196),b=r(159).trim,m="Number",O=o[m],_=O.prototype,w=o.TypeError,x=i("".slice),E=i("".charCodeAt),j=function(t){var e=p(t,"number");return"bigint"==typeof e?e:S(e)},S=function(t){var e,r,n,o,i,a,u,c,s=p(t,"number");if(f(s))throw w("Cannot convert a Symbol value to a number");if("string"==typeof s&&s.length>2)if(s=b(s),43===(e=E(s,0))||45===e){if(88===(r=E(s,2))||120===r)return NaN}else if(48===e){switch(E(s,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+s}for(a=(i=x(s,2)).length,u=0;u<a;u++)if((c=E(i,u))<48||c>o)return NaN;return parseInt(i,n)}return+s};if(a(m,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var P,A=function(t){var e=arguments.length<1?0:O(j(t)),r=this;return l(_,r)&&d((function(){g(r)}))?s(Object(e),r,A):e},k=n?h(O):
// ES3:
"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),M=0;k.length>M;M++)c(O,P=k[M])&&!c(A,P)&&v(A,P,y(O,P));A.prototype=_,_.constructor=A,u(o,m,A)}},
/* 80 */
/***/
function(t,e,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},
/* 81 */
/***/
function(t,e,r){var n=r(7),o=r(15),i=r(18),a=r(50),u=n.Object,c=o("".split);t.exports=i((function(){return!u("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?c(t,""):u(t)}:u},
/* 82 */
/***/
function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"==typeof window&&(r=window)}t.exports=r},
/* 83 */
/***/
function(t,e,r){var n=r(27),o=r(54),i=r(37),a=n("unscopables"),u=Array.prototype;null==u[a]&&i.f(u,a,{configurable:!0,value:o(null)}),t.exports=function(t){u[a][t]=!0}},
/* 84 */
/***/
function(t,e,r){var n=r(64),o=r(107);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.3",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},
/* 85 */
/***/
function(t,e,r){var n=r(15),o=0,i=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},
/* 86 */
/***/
function(t,e,r){var n=r(7),o=r(33),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},
/* 87 */
/***/
function(t,e,r){var n=r(130),o=r(88);t.exports=function(t){var e=n(t,"string");return o(e)?e:e+""}},
/* 88 */
/***/
function(t,e,r){var n=r(7),o=r(46),i=r(28),a=r(58),u=r(128),c=n.Object;t.exports=u?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return i(e)&&a(e.prototype,c(t))}},
/* 89 */
/***/
function(t,e,r){var n=r(7).String;t.exports=function(t){try{return n(t)}catch(e){return"Object"}}},
/* 90 */
/***/
function(t,e,r){var n=r(68),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},
/* 91 */
/***/
function(t,e,r){var n=r(84),o=r(85),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},
/* 92 */
/***/
function(t,e,r){var n=r(15),o=r(28),i=r(107),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},
/* 93 */
/***/
function(t,e,r){var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!n.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:n},
/* 94 */
/***/
function(t,e,r){var n=r(36),o=r(34),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,u=o(i,"name"),c=u&&"something"===function(){}.name,s=u&&(!n||n&&a(i,"name").configurable);t.exports={EXISTS:u,PROPER:c,CONFIGURABLE:s}},
/* 95 */
/***/
function(t,e,r){var n=r(18),o=r(28),i=/#|\.prototype\./,a=function(t,e){var r=c[u(t)];return r==l||r!=s&&(o(e)?n(e):!!e)},u=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=a.data={},s=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},
/* 96 */
/***/
function(t,e,r){var n=r(7),o=r(34),i=r(28),a=r(38),u=r(91),c=r(137),s=u("IE_PROTO"),l=n.Object,f=l.prototype;t.exports=c?l.getPrototypeOf:function(t){var e=a(t);if(o(e,s))return e[s];var r=e.constructor;return i(r)&&e instanceof r?r.prototype:e instanceof l?f:null}},
/* 97 */
/***/
function(t,e,r){var n=r(15),o=r(32),i=r(172);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(a){}return function(r,n){return o(r),i(n),e?t(r,n):r.__proto__=n,r}}():void 0)},
/* 98 */
/***/
function(t,e,r){var n=r(7),o=r(116),i=r(28),a=r(50),u=r(27)("toStringTag"),c=n.Object,s="Arguments"==a(function(){return arguments}());t.exports=o?a:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(r){}}(e=c(t),u))?r:s?a(e):"Object"==(n=a(e))&&i(e.callee)?"Arguments":n}},
/* 99 */
/***/
function(t,e,r){var n=r(50);t.exports=Array.isArray||function(t){return"Array"==n(t)}},
/* 100 */
/***/
function(t,e,r){var n=r(15),o=r(18),i=r(28),a=r(98),u=r(46),c=r(92),s=function(){},l=[],f=u("Reflect","construct"),p=/^\s*(?:class|function)\b/,d=n(p.exec),h=!p.exec(s),y=function(t){if(!i(t))return!1;try{return f(s,l,t),!0}catch(e){return!1}};t.exports=!f||o((function(){var t;return y(y.call)||!y(Object)||!y((function(){t=!0}))||t}))?function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return h||!!d(p,c(t))}:y},
/* 101 */
/***/
function(t,e,r){var n=r(15);t.exports=n([].slice)},
/* 102 */
/***/
function(t,e,r){var n,o,i=r(35),a=r(15),u=r(40),c=r(184),s=r(151),l=r(84),f=r(54),p=r(56).get,d=r(185),h=r(186),y=l("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,g=v,b=a("".charAt),m=a("".indexOf),O=a("".replace),_=a("".slice),w=(o=/b*/g,i(v,n=/a/,"a"),i(v,o,"a"),0!==n.lastIndex||0!==o.lastIndex),x=s.BROKEN_CARET,E=void 0!==/()??/.exec("")[1];(w||E||x||d||h)&&(g=function(t){var e,r,n,o,a,s,l,d=this,h=p(d),j=u(t),S=h.raw;if(S)return S.lastIndex=d.lastIndex,e=i(g,S,j),d.lastIndex=S.lastIndex,e;var P=h.groups,A=x&&d.sticky,k=i(c,d),M=d.source,T=0,D=j;if(A&&(k=O(k,"y",""),-1===m(k,"g")&&(k+="g"),D=_(j,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==b(j,d.lastIndex-1))&&(M="(?: "+M+")",D=" "+D,T++),r=new RegExp("^(?:"+M+")",k)),E&&(r=new RegExp("^"+M+"$(?!\\s)",k)),w&&(n=d.lastIndex),o=i(v,A?r:d,D),A?o?(o.input=_(o.input,T),o[0]=_(o[0],T),o.index=d.lastIndex,d.lastIndex+=o[0].length):d.lastIndex=0:w&&o&&(d.lastIndex=d.global?o.index+o[0].length:n),E&&o&&o.length>1&&i(y,o[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&P)for(o.groups=s=f(null),a=0;a<P.length;a++)s[(l=P[a])[0]]=o[l[1]];return o}),t.exports=g},
/* 103 */
/***/
function(t,e,r){var n=r(16),o=r(7),i=r(67),a=r(68),u=r(43),c=r(38),s=r(119),l=r(61),f=r(75)("splice"),p=o.TypeError,d=Math.max,h=Math.min,y=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var r,n,o,f,g,b,m=c(this),O=u(m),_=i(t,O),w=arguments.length;if(0===w?r=n=0:1===w?(r=0,n=O-_):(r=w-2,n=h(d(a(e),0),O-_)),O+r-n>y)throw p(v);for(o=s(m,n),f=0;f<n;f++)(g=_+f)in m&&l(o,f,m[g]);if(o.length=n,r<n){for(f=_;f<O-n;f++)b=f+r,(g=f+n)in m?m[b]=m[g]:delete m[b];for(f=O;f>O-n+r;f--)delete m[f-1]}else if(r>n)for(f=O-n;f>_;f--)b=f+r-1,(g=f+n-1)in m?m[b]=m[g]:delete m[b];for(f=0;f<r;f++)m[f+_]=arguments[f+2];return m.length=O-n+r,o}})},
/* 104 */
/***/
function(t,e,r){var n=r(16),o=r(201);n({target:"String",proto:!0,forced:r(202)("anchor")},{anchor:function(t){return o(this,"a","name",t)}})},
/* 105 */
/***/
function(t,e,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.a=r}).call(this,r(82))},
/* 106 */
/***/
function(t,e,r){(function(t){var n=r(31),o=s&&!s.nodeType&&s,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o?n.a.Buffer:void 0,u=a?a.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var r=t.length,n=u?u(r):new t.constructor(r);return t.copy(n),n}}).call(this,r(121)(t))},
/* 107 */
/***/
function(t,e,r){var n=r(7),o=r(108),i="__core-js_shared__",a=n[i]||o(i,{});t.exports=a},
/* 108 */
/***/
function(t,e,r){var n=r(7),o=Object.defineProperty;t.exports=function(t,e){try{o(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},
/* 109 */
/***/
function(t,e,r){var n=r(65),o=r(18);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||// Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances
!Symbol.sham&&n&&n<41}))},
/* 110 */
/***/
function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},
/* 111 */
/***/
function(t,e,r){var n=r(16),o=r(35),i=r(64),a=r(94),u=r(28),c=r(171),s=r(96),l=r(97),f=r(73),p=r(57),d=r(44),h=r(27),y=r(70),v=r(136),g=a.PROPER,b=a.CONFIGURABLE,m=v.IteratorPrototype,O=v.BUGGY_SAFARI_ITERATORS,_=h("iterator"),w="keys",x="values",E="entries",j=function(){return this};t.exports=function(t,e,r,a,h,v,S){c(r,e,a);var P,A,k,M=function(t){if(t===h&&R)return R;if(!O&&t in N)return N[t];switch(t){case w:case x:case E:return function(){return new r(this,t)}}return function(){return new r(this)}},T=e+" Iterator",D=!1,N=t.prototype,C=N[_]||N["@@iterator"]||h&&N[h],R=!O&&C||M(h),I="Array"==e&&N.entries||C;if(I&&(P=s(I.call(new t)))!==Object.prototype&&P.next&&(i||s(P)===m||(l?l(P,m):u(P[_])||d(P,_,j)),f(P,T,!0,!0),i&&(y[T]=j)),g&&h==x&&C&&C.name!==x&&(!i&&b?p(N,"name",x):(D=!0,R=function(){return o(C,this)})),h)if(A={values:M(x),keys:v?R:M(w),entries:M(E)},S)for(k in A)(O||D||!(k in N))&&d(N,k,A[k]);else n({target:e,proto:!0,forced:O||D},A);return i&&!S||N[_]===R||d(N,_,R,{name:h}),y[e]=R,A}},
/* 112 */
/***/
function(t,e){e.f=Object.getOwnPropertySymbols},
/* 113 */
/***/
function(t,e,r){var n=r(7),o=r(67),i=r(43),a=r(61),u=n.Array,c=Math.max;t.exports=function(t,e,r){for(var n=i(t),s=o(e,n),l=o(void 0===r?n:r,n),f=u(c(l-s,0)),p=0;s<l;s++,p++)a(f,p,t[s]);return f.length=p,f}},
/* 114 */
/***/
function(t,e,r){var n=r(7),o=r(62),i=r(35),a=r(32),u=r(89),c=r(140),s=r(43),l=r(58),f=r(141),p=r(115),d=r(142),h=n.TypeError,y=function(t,e){this.stopped=t,this.result=e},v=y.prototype;t.exports=function(t,e,r){var n,g,b,m,O,_,w,x=r&&r.that,E=!(!r||!r.AS_ENTRIES),j=!(!r||!r.IS_ITERATOR),S=!(!r||!r.INTERRUPTED),P=o(e,x),A=function(t){return n&&d(n,"normal",t),new y(!0,t)},k=function(t){return E?(a(t),S?P(t[0],t[1],A):P(t[0],t[1])):S?P(t,A):P(t)};if(j)n=t;else{if(!(g=p(t)))throw h(u(t)+" is not iterable");if(c(g)){for(b=0,m=s(t);m>b;b++)if((O=k(t[b]))&&l(v,O))return O;return new y(!1)}n=f(t,g)}for(_=n.next;!(w=i(_,n)).done;){try{O=k(w.value)}catch(M){d(n,"throw",M)}if("object"==typeof O&&O&&l(v,O))return O}return new y(!1)}},
/* 115 */
/***/
function(t,e,r){var n=r(98),o=r(59),i=r(70),a=r(27)("iterator");t.exports=function(t){if(null!=t)return o(t,a)||o(t,"@@iterator")||i[n(t)]}},
/* 116 */
/***/
function(t,e,r){var n={};n[r(27)("toStringTag")]="z",t.exports="[object z]"===String(n)},
/* 117 */
/***/
function(t,e,r){var n=r(7),o=r(58),i=n.TypeError;t.exports=function(t,e){if(o(e,t))return t;throw i("Incorrect invocation")}},
/* 118 */
/***/
function(t,e,r){var n=r(27)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(u){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(u){}return r}},
/* 119 */
/***/
function(t,e,r){var n=r(180);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},
/* 120 */
/***/
function(t,e,r){var n=r(18);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},
/* 121 */
/***/
function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},
/* 122 */
/***/
function(t,e,r){r(19);var n=r(15),o=r(44),i=r(102),a=r(18),u=r(27),c=r(57),s=u("species"),l=RegExp.prototype;t.exports=function(t,e,r,f){var p=u(t),d=!a((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),h=d&&!a((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[s]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return e=!0,null},r[p](""),!e}));if(!d||!h||r){var y=n(/./[p]),v=e(p,""[t],(function(t,e,r,o,a){var u=n(t),c=e.exec;return c===i||c===l.exec?d&&!a?{done:!0,value:y(e,r,o)}:{done:!0,value:u(r,e,o)}:{done:!1}}));o(String.prototype,t,v[0]),o(l,p,v[1])}f&&c(l[p],"sham",!0)}},
/* 123 */
/***/
function(t,e,r){var n=r(146).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},
/* 124 */
/***/
function(t,e,r){var n=r(7),o=r(35),i=r(32),a=r(28),u=r(50),c=r(102),s=n.TypeError;t.exports=function(t,e){var r=t.exec;if(a(r)){var n=o(r,t,e);return null!==n&&i(n),n}if("RegExp"===u(t))return o(c,t,e);throw s("RegExp#exec called on incompatible receiver")}},
/* 125 */
/***/
function(t,e,r){var n=r(76),o=r(35),i=r(15),a=r(122),u=r(18),c=r(32),s=r(28),l=r(68),f=r(90),p=r(40),d=r(45),h=r(123),y=r(59),v=r(197),g=r(124),b=r(27)("replace"),m=Math.max,O=Math.min,_=i([].concat),w=i([].push),x=i("".indexOf),E=i("".slice),j="$0"==="a".replace(/./,"$0"),S=!!/./[b]&&""===/./[b]("a","$0");a("replace",(function(t,e,r){var i=S?"$":"$0";return[
// `String.prototype.replace` method
// https://tc39.es/ecma262/#sec-string.prototype.replace
function(t,r){var n=d(this),i=null==t?void 0:y(t,b);return i?o(i,t,n,r):o(e,p(n),t,r)},
// `RegExp.prototype[@@replace]` method
// https://tc39.es/ecma262/#sec-regexp.prototype-@@replace
function(t,o){var a=c(this),u=p(t);if("string"==typeof o&&-1===x(o,i)&&-1===x(o,"$<")){var d=r(e,a,u,o);if(d.done)return d.value}var y=s(o);y||(o=p(o));var b=a.global;if(b){var j=a.unicode;a.lastIndex=0}for(var S=[];;){var P=g(a,u);if(null===P)break;if(w(S,P),!b)break;""===p(P[0])&&(a.lastIndex=h(u,f(a.lastIndex),j))}for(var A,k="",M=0,T=0;T<S.length;T++){for(var D=p((P=S[T])[0]),N=m(O(l(P.index),u.length),0),C=[],R=1;R<P.length;R++)w(C,void 0===(A=P[R])?A:String(A));var I=P.groups;if(y){var L=_([D],C,N,u);void 0!==I&&w(L,I);var z=p(n(o,void 0,L))}else z=v(D,u,N,C,I,o);N>=M&&(k+=E(u,M,N)+z,M=N+D.length)}return k+E(u,M)}]}),!!u((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!j||S)},
/* 126 */
/***/
function(t,e,r){var n=r(50),o=r(7);t.exports="process"==n(o.process)},
/* 127 */
/***/
function(t,e,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},
/* 128 */
/***/
function(t,e,r){var n=r(109);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},
/* 129 */
/***/
function(t,e,r){var n=r(36),o=r(18),i=r(86);t.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},
/* 130 */
/***/
function(t,e,r){var n=r(7),o=r(35),i=r(33),a=r(88),u=r(59),c=r(169),s=r(27),l=n.TypeError,f=s("toPrimitive");t.exports=function(t,e){if(!i(t)||a(t))return t;var r,n=u(t,f);if(n){if(void 0===e&&(e="default"),r=o(n,t,e),!i(r)||a(r))return r;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(t,e)}},
/* 131 */
/***/
function(t,e,r){var n=r(15),o=r(34),i=r(39),a=r(132).indexOf,u=r(69),c=n([].push);t.exports=function(t,e){var r,n=i(t),s=0,l=[];for(r in n)!o(u,r)&&o(n,r)&&c(l,r);for(;e.length>s;)o(n,r=e[s++])&&(~a(l,r)||c(l,r));return l}},
/* 132 */
/***/
function(t,e,r){var n=r(39),o=r(67),i=r(43),a=function(t){return function(e,r,a){var u,c=n(e),s=i(c),l=o(a,s);if(t&&r!=r){for(;s>l;)if((u=c[l++])!=u)return!0}else for(;s>l;l++)if((t||l in c)&&c[l]===r)return t||l||0;return!t&&-1}};t.exports={
// `Array.prototype.includes` method
// https://tc39.es/ecma262/#sec-array.prototype.includes
includes:a(!0),
// `Array.prototype.indexOf` method
// https://tc39.es/ecma262/#sec-array.prototype.indexof
indexOf:a(!1)}},
/* 133 */
/***/
function(t,e,r){var n=r(46);t.exports=n("document","documentElement")},
/* 134 */
/***/
function(t,e,r){var n=r(34),o=r(135),i=r(51),a=r(37);t.exports=function(t,e){for(var r=o(e),u=a.f,c=i.f,s=0;s<r.length;s++){var l=r[s];n(t,l)||u(t,l,c(e,l))}}},
/* 135 */
/***/
function(t,e,r){var n=r(46),o=r(15),i=r(72),a=r(112),u=r(32),c=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(u(t)),r=a.f;return r?c(e,r(t)):e}},
/* 136 */
/***/
function(t,e,r){var n,o,i,a=r(18),u=r(28),c=r(54),s=r(96),l=r(44),f=r(27),p=r(64),d=f("iterator"),h=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(n=o):h=!0),null==n||a((function(){var t={};return n[d].call(t)!==t}))?n={}:p&&(n=c(n)),u(n[d])||l(n,d,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:h}},
/* 137 */
/***/
function(t,e,r){var n=r(18);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},
/* 138 */
/***/
function(t,e,r){var n=r(16),o=r(15),i=r(69),a=r(33),u=r(34),c=r(37).f,s=r(72),l=r(139),f=r(174),p=r(85),d=r(176),h=!1,y=p("meta"),v=0,g=function(t){c(t,y,{value:{objectID:"O"+v++,
// object ID
weakData:{}}})},b=t.exports={enable:function(){b.enable=function(){},h=!0;var t=s.f,e=o([].splice),r={};r[y]=1,t(r).length&&(s.f=function(r){for(var n=t(r),o=0,i=n.length;o<i;o++)if(n[o]===y){e(n,o,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!u(t,y)){if(!f(t))return"F";if(!e)return"E";g(t)}return t[y].objectID},getWeakData:function(t,e){if(!u(t,y)){if(!f(t))return!0;if(!e)return!1;g(t)}return t[y].weakData},onFreeze:function(t){return d&&h&&f(t)&&!u(t,y)&&g(t),t}};i[y]=!0},
/* 139 */
/***/
function(t,e,r){var n=r(50),o=r(39),i=r(72).f,a=r(113),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"Window"==n(t)?function(t){try{return i(t)}catch(e){return a(u)}}(t):i(o(t))}},
/* 140 */
/***/
function(t,e,r){var n=r(27),o=r(70),i=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},
/* 141 */
/***/
function(t,e,r){var n=r(7),o=r(35),i=r(55),a=r(32),u=r(89),c=r(115),s=n.TypeError;t.exports=function(t,e){var r=arguments.length<2?c(t):e;if(i(r))return a(o(r,t));throw s(u(t)+" is not iterable")}},
/* 142 */
/***/
function(t,e,r){var n=r(35),o=r(32),i=r(59);t.exports=function(t,e,r){var a,u;o(t);try{if(!(a=i(t,"return"))){if("throw"===e)throw r;return r}a=n(a,t)}catch(c){u=!0,a=c}if("throw"===e)throw r;if(u)throw a;return o(a),r}},
/* 143 */
/***/
function(t,e,r){var n=r(28),o=r(33),i=r(97);t.exports=function(t,e,r){var a,u;
// it can work only with native `setPrototypeOf`
return i&&// we haven't completely correct pre-ES6 way for getting `new.target`, so use this
n(a=e.constructor)&&a!==r&&o(u=a.prototype)&&u!==r.prototype&&i(t,u),t}},
/* 144 */
/***/
function(t,e,r){var n=r(44);t.exports=function(t,e,r){for(var o in e)n(t,o,e[o],r);return t}},
/* 145 */
/***/
function(t,e,r){var n=r(46),o=r(37),i=r(27),a=r(36),u=i("species");t.exports=function(t){var e=n(t),r=o.f;a&&e&&!e[u]&&r(e,u,{configurable:!0,get:function(){return this}})}},
/* 146 */
/***/
function(t,e,r){var n=r(15),o=r(68),i=r(40),a=r(45),u=n("".charAt),c=n("".charCodeAt),s=n("".slice),l=function(t){return function(e,r){var n,l,f=i(a(e)),p=o(r),d=f.length;return p<0||p>=d?t?"":void 0:(n=c(f,p))<55296||n>56319||p+1===d||(l=c(f,p+1))<56320||l>57343?t?u(f,p):n:t?s(f,p,p+2):l-56320+(n-55296<<10)+65536}};t.exports={
// `String.prototype.codePointAt` method
// https://tc39.es/ecma262/#sec-string.prototype.codepointat
codeAt:l(!1),
// `String.prototype.at` method
// https://github.com/mathiasbynens/String.prototype.at
charAt:l(!0)}},
/* 147 */
/***/
function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},
/* 148 */
/***/
function(t,e,r){var n=r(86)("span").classList,o=n&&n.constructor&&n.constructor.prototype;t.exports=o===Object.prototype?void 0:o},
/* 149 */
/***/
function(t,e,r){var n=r(27);e.f=n},
/* 150 */
/***/
function(t,e,r){var n=r(181),o=r(34),i=r(149),a=r(37).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},
/* 151 */
/***/
function(t,e,r){var n=r(18),o=r(7).RegExp,i=n((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),a=i||n((function(){return!o("a","y").sticky})),u=i||n((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:u,MISSED_STICKY:a,UNSUPPORTED_Y:i}},
/* 152 */
/***/
function(t,e,r){var n=r(16),o=r(132).includes,i=r(83);n({target:"Array",proto:!0},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},
/* 153 */
/***/
function(t,e,r){var n=r(16),o=r(15),i=r(193),a=r(45),u=r(40),c=r(194),s=o("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~s(u(a(this)),u(i(t)),arguments.length>1?arguments[1]:void 0)}})},
/* 154 */
/***/
function(t,e,r){var n=r(33),o=r(50),i=r(27)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},
/* 155 */
/***/
function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(n){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var c,s=[],l=!1,f=-1;function p(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&d())}function d(){if(!l){var t=u(p);l=!0;for(var e=s.length;e;){for(c=s,s=[];++f<e;)c&&c[f].run();f=-1,e=s.length}c=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(r){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];s.push(new h(t,e)),1!==s.length||l||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},
/* 156 */
/***/
function(t,e,r){var n=r(32),o=r(157),i=r(27)("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||null==(r=n(a)[i])?e:o(r)}},
/* 157 */
/***/
function(t,e,r){var n=r(7),o=r(100),i=r(89),a=n.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not a constructor")}},
/* 158 */
/***/
function(t,e,r){var n=r(16),o=r(159).trim;n({target:"String",proto:!0,forced:r(195)("trim")},{trim:function(){return o(this)}})},
/* 159 */
/***/
function(t,e,r){var n=r(15),o=r(45),i=r(40),a=r(160),u=n("".replace),c="["+a+"]",s=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),f=function(t){return function(e){var r=i(o(e));return 1&t&&(r=u(r,s,"")),2&t&&(r=u(r,l,"")),r}};t.exports={
// `String.prototype.{ trimLeft, trimStart }` methods
// https://tc39.es/ecma262/#sec-string.prototype.trimstart
start:f(1),
// `String.prototype.{ trimRight, trimEnd }` methods
// https://tc39.es/ecma262/#sec-string.prototype.trimend
end:f(2),
// `String.prototype.trim` method
// https://tc39.es/ecma262/#sec-string.prototype.trim
trim:f(3)}},
/* 160 */
/***/
function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},
/* 161 */
/***/
function(t,e,r){var n=r(35),o=r(122),i=r(32),a=r(90),u=r(40),c=r(45),s=r(59),l=r(123),f=r(124);o("match",(function(t,e,r){return[
// `String.prototype.match` method
// https://tc39.es/ecma262/#sec-string.prototype.match
function(e){var r=c(this),o=null==e?void 0:s(e,t);return o?n(o,e,r):new RegExp(e)[t](u(r))},
// `RegExp.prototype[@@match]` method
// https://tc39.es/ecma262/#sec-regexp.prototype-@@match
function(t){var n=i(this),o=u(t),c=r(e,n,o);if(c.done)return c.value;if(!n.global)return f(n,o);var s=n.unicode;n.lastIndex=0;for(var p,d=[],h=0;null!==(p=f(n,o));){var y=u(p[0]);d[h]=y,""===y&&(n.lastIndex=l(o,a(n.lastIndex),s)),h++}return 0===h?null:d}]}))},
/* 162 */
/***/
function(t,e,r){var n,o,i,a,u=r(7),c=r(76),s=r(62),l=r(28),f=r(34),p=r(18),d=r(133),h=r(101),y=r(86),v=r(163),g=r(126),b=u.setImmediate,m=u.clearImmediate,O=u.process,_=u.Dispatch,w=u.Function,x=u.MessageChannel,E=u.String,j=0,S={},P="onreadystatechange";try{n=u.location}catch(D){}var A=function(t){if(f(S,t)){var e=S[t];delete S[t],e()}},k=function(t){return function(){A(t)}},M=function(t){A(t.data)},T=function(t){u.postMessage(E(t),n.protocol+"//"+n.host)};b&&m||(b=function(t){var e=h(arguments,1);return S[++j]=function(){c(l(t)?t:w(t),void 0,e)},o(j),j},m=function(t){delete S[t]},g?o=function(t){O.nextTick(k(t))}:_&&_.now?o=function(t){_.now(k(t))}:x&&!v?(a=(i=new x).port2,i.port1.onmessage=M,o=s(a.postMessage,a)):u.addEventListener&&l(u.postMessage)&&!u.importScripts&&n&&"file:"!==n.protocol&&!p(T)?(o=T,u.addEventListener("message",M,!1)):o=P in y("script")?function(t){d.appendChild(y("script"))[P]=function(){d.removeChild(this),A(t)}}:function(t){setTimeout(k(t),0)}),t.exports={set:b,clear:m}},
/* 163 */
/***/
function(t,e,r){var n=r(53);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},
/* 164 */
/***/
function(t,e,r){var n=r(55),o=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new o(t)}},
/* 165 */
/***/
function(t,e,r){e.a=function(){return!1}},
/* 166 */
/***/
function(t,e,r){(function(t){r.d(e,"a",(function(){return m}));var n=r(0);function o(t,e){void 0===e&&(e="Illegal state"),t||function(t){throw new Error("[mobx-utils] "+t)}(e)}var i,a=function(t){return t&&t!==Object.prototype&&Object.getOwnPropertyNames(t).concat(a(Object.getPrototypeOf(t))||[])},u=function(t){return function(t){var e=a(t);return e.filter((function(t,r){return e.indexOf(t)===r}))}(t).filter((function(t){return"constructor"!==t&&!~t.indexOf("__")}))},c="pending",s="fulfilled",l="rejected";function f(t){switch(this.state){case c:return t.pending&&t.pending(this.value);case l:return t.rejected&&t.rejected(this.value);case s:return t.fulfilled?t.fulfilled(this.value):this.value}}function p(t,e){if(o(arguments.length<=2,"fromPromise expects up to two arguments"),o("function"==typeof t||"object"==typeof t&&t&&"function"==typeof t.then,"Please pass a promise or function to fromPromise"),!0===t.isPromiseBasedObservable)return t;"function"==typeof t&&(t=new Promise(t));var r=t;t.then(Object(n.k)("observableFromPromise-resolve",(function(t){r.value=t,r.state=s})),Object(n.k)("observableFromPromise-reject",(function(t){r.value=t,r.state=l}))),r.isPromiseBasedObservable=!0,r.case=f;var i=e&&e.state===s?e.value:void 0;return Object(n.q)(r,{value:i,state:c},{},{deep:!1}),r}(i=p||(p={})).reject=Object(n.k)("fromPromise.reject",(function(t){var e=i(Promise.reject(t));return e.state=l,e.value=t,e})),i.resolve=Object(n.k)("fromPromise.resolve",(function(t){void 0===t&&(t=void 0);var e=i(Promise.resolve(t));return e.state=s,e.value=t,e}));var d=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};!function(){function t(t,e){var r=this;Object(n.G)((function(){r.current=e,r.subscription=t.subscribe(r)}))}t.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},t.prototype.next=function(t){this.current=t},t.prototype.complete=function(){this.dispose()},t.prototype.error=function(t){this.current=t,this.dispose()},d([n.C.ref],t.prototype,"current",void 0),d([n.k.bound],t.prototype,"next",null),d([n.k.bound],t.prototype,"complete",null),d([n.k.bound],t.prototype,"error",null)}();var h=function(){return h=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},h.apply(this,arguments)},y=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},v=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];function g(t){if(!t)return"ROOT";for(var e=[];t.parent;)e.push(t.path),t=t.parent;return e.reverse().join("/")}function b(t){return Object(n.A)(t)||Object(n.y)(t)||Object(n.z)(t)}function m(t,e){var r=new WeakMap;function o(n){var o=r.get(n.object);!function(t,e){switch(t.type){case"add":i(t.newValue,e,t.name);break;case"update":a(t.oldValue),i(t.newValue,e,t.name||""+t.index);break;case"remove":case"delete":a(t.oldValue);break;case"splice":t.removed.map(a),t.added.forEach((function(r,n){return i(r,e,""+(t.index+n))}));for(var n=t.index+t.addedCount;n<t.object.length;n++)if(b(t.object[n])){var o=r.get(t.object[n]);o&&(o.path=""+n)}}}(n,o),e(n,g(o),t)}function i(t,e,a){if(b(t)){var u=r.get(t);if(u){if(u.parent!==e||u.path!==a)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+g(e)+"/"+a+"', but it already exists at '"+g(u.parent)+"/"+u.path+"'")}else{var c={parent:e,path:a,dispose:Object(n.D)(t,o)};r.set(t,c),Object(n.p)(t).forEach((function(t){var e=t[0];return i(t[1],c,e)}))}}}function a(t){if(b(t)){var e=r.get(t);if(!e)return;r.delete(t),e.dispose(),Object(n.L)(t).forEach(a)}}return i(t,void 0,""),function(){a(t)}}!function(){function t(t){var e=this;this.model=t,this.localValues=n.C.map({}),this.localComputedValues=n.C.map({}),this.isPropertyDirty=function(t){return e.localValues.has(t)},o(Object(n.A)(t),"createViewModel expects an observable object"),u(t).forEach((function(r){if(r!==n.a&&"__mobxDidRunLazyInitializers"!==r){if(o(-1===v.indexOf(r),"The propertyname "+r+" is reserved and cannot be used with viewModels"),Object(n.w)(t,r)){var i=Object(n.h)(t,r).derivation;e.localComputedValues.set(r,Object(n.m)(i.bind(e)))}var a=Object.getOwnPropertyDescriptor(t,r),u=a?{enumerable:a.enumerable}:{};Object.defineProperty(e,r,h(h({},u),{configurable:!0,get:function(){return Object(n.w)(t,r)?e.localComputedValues.get(r).get():e.isPropertyDirty(r)?e.localValues.get(r):e.model[r]},set:Object(n.k)((function(t){t!==e.model[r]?e.localValues.set(r,t):e.localValues.delete(r)}))}))}}))}Object.defineProperty(t.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),t.prototype.submit=function(){var t=this;Object(n.B)(this.localValues).forEach((function(e){var r=t.localValues.get(e),o=t.model[e];Object(n.y)(o)?o.replace(r):Object(n.z)(o)?(o.clear(),o.merge(r)):Object(n.v)(r)||(t.model[e]=r)})),this.localValues.clear()},t.prototype.reset=function(){this.localValues.clear()},t.prototype.resetProperty=function(t){this.localValues.delete(t)},y([n.m],t.prototype,"isDirty",null),y([n.m],t.prototype,"changedValues",null),y([n.k.bound],t.prototype,"submit",null),y([n.k.bound],t.prototype,"reset",null),y([n.k.bound],t.prototype,"resetProperty",null)}();var O,_=(O=function(t,e){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});!function(t){function e(e,r,o){var i=void 0===o?{}:o,a=i.name,u=void 0===a?"ogm"+(1e3*Math.random()|0):a,c=i.keyToName,s=void 0===c?function(t){return""+t}:c,l=t.call(this)||this;l._keyToName=s,l._groupBy=r,l._ogmInfoKey=Symbol("ogmInfo"+u),l._base=e;for(var f=0;f<e.length;f++)l._addItem(e[f]);return l._disposeBaseObserver=Object(n.D)(l._base,(function(t){if("splice"===t.type)Object(n.J)((function(){for(var e=0,r=t.removed;e<r.length;e++){var n=r[e];l._removeItem(n)}for(var o=0,i=t.added;o<i.length;o++){var a=i[o];l._addItem(a)}}));else{if("update"!==t.type)throw new Error("illegal state");Object(n.J)((function(){l._removeItem(t.oldValue),l._addItem(t.newValue)}))}})),l}_(e,t),e.prototype.clear=function(){throw new Error("not supported")},e.prototype.delete=function(t){throw new Error("not supported")},e.prototype.set=function(t,e){throw new Error("not supported")},e.prototype.dispose=function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var e=this._base[t];e[this._ogmInfoKey].reaction(),delete e[this._ogmInfoKey]}},e.prototype._getGroupArr=function(e){var r=t.prototype.get.call(this,e);return void 0===r&&(r=Object(n.C)([],{name:"GroupArray["+this._keyToName(e)+"]",deep:!1}),t.prototype.set.call(this,e,r)),r},e.prototype._removeFromGroupArr=function(e,r){var n=t.prototype.get.call(this,e);1===n.length?t.prototype.delete.call(this,e):(r===n.length-1||(n[r]=n[n.length-1],n[r][this._ogmInfoKey].groupArrIndex=r),n.length--)},e.prototype._addItem=function(t){var e=this,r=this._groupBy(t),o=this._getGroupArr(r),i={groupByValue:r,groupArrIndex:o.length,reaction:Object(n.F)((function(){return e._groupBy(t)}),(function(r,n){var o=t[e._ogmInfoKey];e._removeFromGroupArr(o.groupByValue,o.groupArrIndex);var i=e._getGroupArr(r),a=i.length;i.push(t),o.groupByValue=r,o.groupArrIndex=a}))};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:i}),o.push(t)},e.prototype._removeItem=function(t){var e=t[this._ogmInfoKey];this._removeFromGroupArr(e.groupByValue,e.groupArrIndex),e.reaction(),delete t[this._ogmInfoKey]}}(n.b),Promise.resolve(),"undefined"!=typeof queueMicrotask||void 0!==t&&t.nextTick}).call(this,r(155))},
/* 167 */
/***/
function(t,e,r){var n;!function(o,i,a){if(o){for(var u,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},f={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p=1;p<20;++p)c[111+p]="f"+p;for(p=0;p<=9;++p)c[p+96]=p.toString();m.prototype.bind=function(t,e,r){var n=this;return t=t instanceof Array?t:[t],n._bindMultiple.call(n,t,e,r),n},m.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},m.prototype.trigger=function(t,e){var r=this;return r._directMap[t+":"+e]&&r._directMap[t+":"+e]({},t),r},m.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},m.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(b(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var r=t.composedPath()[0];r!==t.target&&(e=r)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},m.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},m.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(c[e]=t[e]);u=null},m.init=function(){var t=m(i);for(var e in t)"_"!==e.charAt(0)&&(m[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},m.init(),o.Mousetrap=m,t.exports&&(t.exports=m),void 0===(n=function(){return m}.call(e,r,e,t))||(t.exports=n)}function d(t,e,r){t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent("on"+e,r)}function h(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return c[t.which]?c[t.which]:s[t.which]?s[t.which]:String.fromCharCode(t.which).toLowerCase()}function y(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function v(t,e,r){return r||(r=function(){if(!u)for(var t in u={},c)t>95&&t<112||c.hasOwnProperty(t)&&(u[c[t]]=t);return u}()[t]?"keydown":"keypress"),"keypress"==r&&e.length&&(r="keydown"),r}function g(t,e){var r,n,o,i=[];for(r=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),o=0;o<r.length;++o)n=r[o],f[n]&&(n=f[n]),e&&"keypress"!=e&&l[n]&&(n=l[n],i.push("shift")),y(n)&&i.push(n);return{key:n,modifiers:i,action:e=v(n,i,e)}}function b(t,e){return null!==t&&t!==i&&(t===e||b(t.parentNode,e))}function m(t){var e=this;if(t=t||i,!(e instanceof m))return new m(t);e.target=t,e._callbacks={},e._directMap={};var r,n={},o=!1,a=!1,u=!1;function c(t){t=t||{};var e,r=!1;for(e in n)t[e]?r=!0:n[e]=0;r||(u=!1)}function s(t,r,o,i,a,u){var c,s,l,f,p=[],d=o.type;if(!e._callbacks[t])return[];for("keyup"==d&&y(t)&&(r=[t]),c=0;c<e._callbacks[t].length;++c)if(s=e._callbacks[t][c],(i||!s.seq||n[s.seq]==s.level)&&d==s.action&&("keypress"==d&&!o.metaKey&&!o.ctrlKey||(l=r,f=s.modifiers,l.sort().join(",")===f.sort().join(",")))){var h=!i&&s.combo==a,v=i&&s.seq==i&&s.level==u;(h||v)&&e._callbacks[t].splice(c,1),p.push(s)}return p}function l(t,r,n,o){e.stopCallback(r,r.target||r.srcElement,n,o)||!1===t(r,n)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(r),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(r))}function f(t){"number"!=typeof t.which&&(t.which=t.keyCode);var r=h(t);r&&("keyup"!=t.type||o!==r?e.handleKey(r,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):o=!1)}function p(t,e,i,a){function s(e){return function(){u=e,++n[t],clearTimeout(r),r=setTimeout(c,1e3)}}function f(e){l(i,e,t),"keyup"!==a&&(o=h(e)),setTimeout(c,10)}n[t]=0;for(var p=0;p<e.length;++p){var d=p+1===e.length?f:s(a||g(e[p+1]).action);v(e[p],d,a,t,p)}}function v(t,r,n,o,i){e._directMap[t+":"+n]=r;var a,u=(t=t.replace(/\s+/g," ")).split(" ");u.length>1?p(t,u,r,n):(a=g(t,n),e._callbacks[a.key]=e._callbacks[a.key]||[],s(a.key,a.modifiers,{type:a.action},o,t,i),e._callbacks[a.key][o?"unshift":"push"]({callback:r,modifiers:a.modifiers,action:a.action,seq:o,level:i,combo:t}))}e._handleKey=function(t,e,r){var n,o=s(t,e,r),i={},f=0,p=!1;for(n=0;n<o.length;++n)o[n].seq&&(f=Math.max(f,o[n].level));for(n=0;n<o.length;++n)if(o[n].seq){if(o[n].level!=f)continue;p=!0,i[o[n].seq]=1,l(o[n].callback,r,o[n].combo,o[n].seq)}else p||l(o[n].callback,r,o[n].combo);var d="keypress"==r.type&&a;r.type!=u||y(t)||d||c(i),a=p&&"keydown"==r.type},e._bindMultiple=function(t,e,r){for(var n=0;n<t.length;++n)v(t[n],e,r)},d(t,"keypress",f),d(t,"keydown",f),d(t,"keyup",f)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},
/* 168 */
/***/
function(t,e,r){var n=r(36),o=r(37),i=r(32),a=r(39),u=r(66);t.exports=n?Object.defineProperties:function(t,e){i(t);for(var r,n=a(e),c=u(e),s=c.length,l=0;s>l;)o.f(t,r=c[l++],n[r]);return t}},
/* 169 */
/***/
function(t,e,r){var n=r(7),o=r(35),i=r(28),a=r(33),u=n.TypeError;t.exports=function(t,e){var r,n;if("string"===e&&i(r=t.toString)&&!a(n=o(r,t)))return n;if(i(r=t.valueOf)&&!a(n=o(r,t)))return n;if("string"!==e&&i(r=t.toString)&&!a(n=o(r,t)))return n;throw u("Can't convert object to primitive value")}},
/* 170 */
/***/
function(t,e,r){var n=r(7),o=r(28),i=r(92),a=n.WeakMap;t.exports=o(a)&&/native code/.test(i(a))},
/* 171 */
/***/
function(t,e,r){var n=r(136).IteratorPrototype,o=r(54),i=r(71),a=r(73),u=r(70),c=function(){return this};t.exports=function(t,e,r,s){var l=e+" Iterator";return t.prototype=o(n,{next:i(+!s,r)}),a(t,l,!1,!0),u[l]=c,t}},
/* 172 */
/***/
function(t,e,r){var n=r(7),o=r(28),i=n.String,a=n.TypeError;t.exports=function(t){if("object"==typeof t||o(t))return t;throw a("Can't set "+i(t)+" as a prototype")}},
/* 173 */
/***/
function(t,e,r){var n=r(16),o=r(7),i=r(15),a=r(95),u=r(44),c=r(138),s=r(114),l=r(117),f=r(28),p=r(33),d=r(18),h=r(118),y=r(73),v=r(143);t.exports=function(t,e,r){var g=-1!==t.indexOf("Map"),b=-1!==t.indexOf("Weak"),m=g?"set":"add",O=o[t],_=O&&O.prototype,w=O,x={},E=function(t){var e=i(_[t]);u(_,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(b&&!p(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return b&&!p(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(b&&!p(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(a(t,!f(O)||!(b||_.forEach&&!d((function(){(new O).entries().next()})))))w=r.getConstructor(e,t,g,m),c.enable();else if(a(t,!0)){var j=new w,S=j[m](b?{}:-0,1)!=j,P=d((function(){j.has(1)})),A=h((function(t){new O(t)})),k=!b&&d((function(){for(var t=new O,e=5;e--;)t[m](e,e);return!t.has(-0)}));A||((w=e((function(t,e){l(t,_);var r=v(new O,t,w);return null!=e&&s(e,r[m],{that:r,AS_ENTRIES:g}),r}))).prototype=_,_.constructor=w),(P||k)&&(E("delete"),E("has"),g&&E("get")),(k||S)&&E(m),b&&_.clear&&delete _.clear}return x[t]=w,n({global:!0,forced:w!=O},x),y(w,t),b||r.setStrong(w,t,g),w}},
/* 174 */
/***/
function(t,e,r){var n=r(18),o=r(33),i=r(50),a=r(175),u=Object.isExtensible,c=n((function(){}));t.exports=c||a?function(t){return!!o(t)&&(!a||"ArrayBuffer"!=i(t))&&(!u||u(t))}:u},
/* 175 */
/***/
function(t,e,r){var n=r(18);t.exports=n((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},
/* 176 */
/***/
function(t,e,r){var n=r(18);t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},
/* 177 */
/***/
function(t,e,r){var n=r(37).f,o=r(54),i=r(144),a=r(62),u=r(117),c=r(114),s=r(111),l=r(145),f=r(36),p=r(138).fastKey,d=r(56),h=d.set,y=d.getterFor;t.exports={getConstructor:function(t,e,r,s){var l=t((function(t,n){u(t,d),h(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=n&&c(n,t[s],{that:t,AS_ENTRIES:r})})),d=l.prototype,v=y(e),g=function(t,e,r){var n,o,i=v(t),a=b(t,e);return a?a.value=r:(i.last=a={index:o=p(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=a),n&&(n.next=a),f?i.size++:t.size++,"F"!==o&&(i.index[o]=a)),t},b=function(t,e){var r,n=v(t),o=p(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return i(d,{
// `{ Map, Set }.prototype.clear()` methods
// https://tc39.es/ecma262/#sec-map.prototype.clear
// https://tc39.es/ecma262/#sec-set.prototype.clear
clear:function(){for(var t=v(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,f?t.size=0:this.size=0},
// `{ Map, Set }.prototype.delete(key)` methods
// https://tc39.es/ecma262/#sec-map.prototype.delete
// https://tc39.es/ecma262/#sec-set.prototype.delete
delete:function(t){var e=this,r=v(e),n=b(e,t);if(n){var o=n.next,i=n.previous;delete r.index[n.index],n.removed=!0,i&&(i.next=o),o&&(o.previous=i),r.first==n&&(r.first=o),r.last==n&&(r.last=i),f?r.size--:e.size--}return!!n},
// `{ Map, Set }.prototype.forEach(callbackfn, thisArg = undefined)` methods
// https://tc39.es/ecma262/#sec-map.prototype.foreach
// https://tc39.es/ecma262/#sec-set.prototype.foreach
forEach:function(t){for(var e,r=v(this),n=a(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},
// `{ Map, Set}.prototype.has(key)` methods
// https://tc39.es/ecma262/#sec-map.prototype.has
// https://tc39.es/ecma262/#sec-set.prototype.has
has:function(t){return!!b(this,t)}}),i(d,r?{
// `Map.prototype.get(key)` method
// https://tc39.es/ecma262/#sec-map.prototype.get
get:function(t){var e=b(this,t);return e&&e.value},
// `Map.prototype.set(key, value)` method
// https://tc39.es/ecma262/#sec-map.prototype.set
set:function(t,e){return g(this,0===t?0:t,e)}}:{
// `Set.prototype.add(value)` method
// https://tc39.es/ecma262/#sec-set.prototype.add
add:function(t){return g(this,t=0===t?0:t,t)}}),f&&n(d,"size",{get:function(){return v(this).size}}),l},setStrong:function(t,e,r){var n=e+" Iterator",o=y(e),i=y(n);s(t,e,(function(t,e){h(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),l(e)}}},
/* 178 */
/***/
function(t,e,r){var n=r(116),o=r(98);t.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},
/* 179 */
/***/
function(t,e,r){var n=r(74).forEach,o=r(120)("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},
/* 180 */
/***/
function(t,e,r){var n=r(7),o=r(99),i=r(100),a=r(33),u=r(27)("species"),c=n.Array;t.exports=function(t){var e;return o(t)&&(e=t.constructor,(i(e)&&(e===c||o(e.prototype))||a(e)&&null===(e=e[u]))&&(e=void 0)),void 0===e?c:e}},
/* 181 */
/***/
function(t,e,r){var n=r(7);t.exports=n},
/* 182 */
/***/
function(t,e,r){var n=r(7),o=r(62),i=r(35),a=r(38),u=r(183),c=r(140),s=r(100),l=r(43),f=r(61),p=r(141),d=r(115),h=n.Array;t.exports=function(t){var e=a(t),r=s(this),n=arguments.length,y=n>1?arguments[1]:void 0,v=void 0!==y;v&&(y=o(y,n>2?arguments[2]:void 0));var g,b,m,O,_,w,x=d(e),E=0;if(!x||this==h&&c(x))for(g=l(e),b=r?new this(g):h(g);g>E;E++)w=v?y(e[E],E):e[E],f(b,E,w);else for(_=(O=p(e,x)).next,b=r?new this:[];!(m=i(_,O)).done;E++)w=v?u(O,y,[m.value,E],!0):m.value,f(b,E,w);return b.length=E,b}},
/* 183 */
/***/
function(t,e,r){var n=r(32),o=r(142);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(a){o(t,"throw",a)}}},
/* 184 */
/***/
function(t,e,r){var n=r(32);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},
/* 185 */
/***/
function(t,e,r){var n=r(18),o=r(7).RegExp;t.exports=n((function(){var t=o(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},
/* 186 */
/***/
function(t,e,r){var n=r(18),o=r(7).RegExp;t.exports=n((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},
/* 187 */
/***/
function(t,e,r){var n=r(16),o=r(15),i=r(55),a=r(38),u=r(43),c=r(40),s=r(18),l=r(188),f=r(120),p=r(189),d=r(190),h=r(65),y=r(191),v=[],g=o(v.sort),b=o(v.push),m=s((function(){v.sort(void 0)})),O=s((function(){v.sort(null)})),_=f("sort"),w=!s((function(){if(h)return h<70;if(!(p&&p>3)){if(d)return!0;if(y)return y<603;var t,e,r,n,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)v.push({k:e+n,v:r})}for(v.sort((function(t,e){return e.v-t.v})),n=0;n<v.length;n++)e=v[n].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));n({target:"Array",proto:!0,forced:m||!O||!_||!w},{sort:function(t){void 0!==t&&i(t);var e=a(this);if(w)return void 0===t?g(e):g(e,t);var r,n,o=[],s=u(e);for(n=0;n<s;n++)n in e&&b(o,e[n]);for(l(o,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:c(e)>c(r)?1:-1}}(t)),r=o.length,n=0;n<r;)e[n]=o[n++];for(;n<s;)delete e[n++];return e}})},
/* 188 */
/***/
function(t,e,r){var n=r(113),o=Math.floor,i=function(t,e){var r=t.length,c=o(r/2);return r<8?a(t,e):u(t,i(n(t,0,c),e),i(n(t,c),e),e)},a=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},u=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,u=0;a<o||u<i;)t[a+u]=a<o&&u<i?n(e[a],r[u])<=0?e[a++]:r[u++]:a<o?e[a++]:r[u++];return t};t.exports=i},
/* 189 */
/***/
function(t,e,r){var n=r(53).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},
/* 190 */
/***/
function(t,e,r){var n=r(53);t.exports=/MSIE|Trident/.test(n)},
/* 191 */
/***/
function(t,e,r){var n=r(53).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},
/* 192 */
/***/
function(t,e,r){var n=r(16),o=r(74).find,i=r(83),a="find",u=!0;a in[]&&Array(1)[a]((function(){u=!1})),n({target:"Array",proto:!0,forced:u},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(a)},
/* 193 */
/***/
function(t,e,r){var n=r(7),o=r(154),i=n.TypeError;t.exports=function(t){if(o(t))throw i("The method doesn't accept regular expressions");return t}},
/* 194 */
/***/
function(t,e,r){var n=r(27)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,"/./"[t](e)}catch(o){}}return!1}},
/* 195 */
/***/
function(t,e,r){var n=r(94).PROPER,o=r(18),i=r(160);t.exports=function(t){return o((function(){return!!i[t]()||"​᠎"!=="​᠎"[t]()||n&&i[t].name!==t}))}},
/* 196 */
/***/
function(t,e,r){var n=r(15);t.exports=n(1..valueOf)},
/* 197 */
/***/
function(t,e,r){var n=r(15),o=r(38),i=Math.floor,a=n("".charAt),u=n("".replace),c=n("".slice),s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,n,f,p){var d=r+t.length,h=n.length,y=l;return void 0!==f&&(f=o(f),y=s),u(p,y,(function(o,u){var s;switch(a(u,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,r);case"'":return c(e,d);case"<":s=f[c(u,1,-1)];break;default:var l=+u;if(0===l)return o;if(l>h){var p=i(l/10);return 0===p?o:p<=h?void 0===n[p-1]?a(u,1):n[p-1]+a(u,1):o}s=n[l-1]}return void 0===s?"":s}))}},
/* 198 */
/***/
function(t,e,r){var n=r(36),o=r(15),i=r(35),a=r(18),u=r(66),c=r(112),s=r(93),l=r(38),f=r(81),p=Object.assign,d=Object.defineProperty,h=o([].concat);t.exports=!p||a((function(){if(n&&1!==p({b:1},p(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol(),o="abcdefghijklmnopqrst";return t[r]=7,o.split("").forEach((function(t){e[t]=t})),7!=p({},t)[r]||u(p({},e)).join("")!=o}))?function(t,e){for(var r=l(t),o=arguments.length,a=1,p=c.f,d=s.f;o>a;)for(var y,v=f(arguments[a++]),g=p?h(u(v),p(v)):u(v),b=g.length,m=0;b>m;)y=g[m++],n&&!i(d,v,y)||(r[y]=v[y]);return r}:p},
/* 199 */
/***/
function(t,e,r){var n=r(7),o=r(15),i=r(55),a=r(33),u=r(34),c=r(101),s=n.Function,l=o([].concat),f=o([].join),p={},d=function(t,e,r){if(!u(p,e)){for(var n=[],o=0;o<e;o++)n[o]="a["+o+"]";p[e]=s("C,a","return new C("+f(n,",")+")")}return p[e](t,r)};t.exports=s.bind||function(t){var e=i(this),r=e.prototype,n=c(arguments,1),o=function(){var r=l(n,c(arguments));return this instanceof o?d(e,r.length,r):e.apply(t,r)};return a(r)&&(o.prototype=r),o}},
/* 200 */
/***/
function(t,e,r){var n=r(34);t.exports=function(t){return void 0!==t&&(n(t,"value")||n(t,"writable"))}},
/* 201 */
/***/
function(t,e,r){var n=r(15),o=r(45),i=r(40),a=/"/g,u=n("".replace);t.exports=function(t,e,r,n){var c=i(o(t)),s="<"+e;return""!==r&&(s+=" "+r+'="'+u(i(n),a,"&quot;")+'"'),s+">"+c+"</"+e+">"}},
/* 202 */
/***/
function(t,e,r){var n=r(18);t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},
/* 203 */
/***/
function(t,e,r){var n=r(16),o=Math.hypot,i=Math.abs,a=Math.sqrt;n({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{
// eslint-disable-next-line no-unused-vars -- required for `.length`
hypot:function(t,e){for(var r,n,o=0,u=0,c=arguments.length,s=0;u<c;)s<(r=i(arguments[u++]))?(o=o*(n=s/r)*n+1,s=r):o+=r>0?(n=r/s)*n:r;return s===1/0?1/0:s*a(o)}})},
/* 204 */
/***/
function(t,e,r){var n,o,i,a,u=r(16),c=r(64),s=r(7),l=r(46),f=r(35),p=r(205),d=r(44),h=r(144),y=r(97),v=r(73),g=r(145),b=r(55),m=r(28),O=r(33),_=r(117),w=r(92),x=r(114),E=r(118),j=r(156),S=r(162).set,P=r(206),A=r(209),k=r(210),M=r(164),T=r(211),D=r(56),N=r(95),C=r(27),R=r(212),I=r(126),L=r(65),z=C("species"),B="Promise",H=D.getterFor(B),F=D.set,G=D.getterFor(B),X=p&&p.prototype,U=p,Y=X,V=s.TypeError,W=s.document,K=s.process,Z=M.f,q=Z,J=!!(W&&W.createEvent&&s.dispatchEvent),Q=m(s.PromiseRejectionEvent),$="unhandledrejection",tt=!1,et=N(B,(function(){var t=w(U),e=t!==String(U);if(!e&&66===L)return!0;if(c&&!Y.finally)return!0;if(L>=51&&/native code/.test(t))return!1;var r=new U((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};return(r.constructor={})[z]=n,!(tt=r.then((function(){}))instanceof n)||!e&&R&&!Q})),rt=et||!E((function(t){U.all(t).catch((function(){}))})),nt=function(t){var e;return!(!O(t)||!m(e=t.then))&&e},ot=function(t,e){if(!t.notified){t.notified=!0;var r=t.reactions;P((function(){for(var n=t.value,o=1==t.state,i=0;r.length>i;){var a,u,c,s=r[i++],l=o?s.ok:s.fail,p=s.resolve,d=s.reject,h=s.domain;try{l?(o||(2===t.rejection&&ct(t),t.rejection=1),!0===l?a=n:(h&&h.enter(),a=l(n),h&&(h.exit(),c=!0)),a===s.promise?d(V("Promise-chain cycle")):(u=nt(a))?f(u,a,p,d):p(a)):d(n)}catch(y){h&&!c&&h.exit(),d(y)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&at(t)}))}},it=function(t,e,r){var n,o;J?((n=W.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),s.dispatchEvent(n)):n={promise:e,reason:r},!Q&&(o=s["on"+t])?o(n):t===$&&k("Unhandled promise rejection",r)},at=function(t){f(S,s,(function(){var e,r=t.facade,n=t.value;if(ut(t)&&(e=T((function(){I?K.emit("unhandledRejection",n,r):it($,r,n)})),t.rejection=I||ut(t)?2:1,e.error))throw e.value}))},ut=function(t){return 1!==t.rejection&&!t.parent},ct=function(t){f(S,s,(function(){var e=t.facade;I?K.emit("rejectionHandled",e):it("rejectionhandled",e,t.value)}))},st=function(t,e,r){return function(n){t(e,n,r)}},lt=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,ot(t,!0))},ft=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw V("Promise can't be resolved itself");var n=nt(e);n?P((function(){var r={done:!1};try{f(n,e,st(ft,r,t),st(lt,r,t))}catch(o){lt(r,o,t)}})):(t.value=e,t.state=1,ot(t,!1))}catch(o){lt({done:!1},o,t)}}};if(et&&(Y=(U=function(t){_(this,Y),b(t),f(n,this);var e=H(this);try{t(st(ft,e),st(lt,e))}catch(r){lt(e,r)}}).prototype,(n=function(t){F(this,{type:B,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(Y,{
// `Promise.prototype.then` method
// https://tc39.es/ecma262/#sec-promise.prototype.then
then:function(t,e){var r=G(this),n=r.reactions,o=Z(j(this,U));return o.ok=!m(t)||t,o.fail=m(e)&&e,o.domain=I?K.domain:void 0,r.parent=!0,n[n.length]=o,0!=r.state&&ot(r,!1),o.promise},
// `Promise.prototype.catch` method
// https://tc39.es/ecma262/#sec-promise.prototype.catch
catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n,e=H(t);this.promise=t,this.resolve=st(ft,e),this.reject=st(lt,e)},M.f=Z=function(t){return t===U||t===i?new o(t):q(t)},!c&&m(p)&&X!==Object.prototype)){a=X.then,tt||(d(X,"then",(function(t,e){var r=this;return new U((function(t,e){f(a,r,t,e)})).then(t,e)}),{unsafe:!0}),d(X,"catch",Y.catch,{unsafe:!0}));try{delete X.constructor}catch(pt){}y&&y(X,Y)}u({global:!0,wrap:!0,forced:et},{Promise:U}),v(U,B,!1,!0),g(B),i=l(B),u({target:B,stat:!0,forced:et},{
// `Promise.reject` method
// https://tc39.es/ecma262/#sec-promise.reject
reject:function(t){var e=Z(this);return f(e.reject,void 0,t),e.promise}}),u({target:B,stat:!0,forced:c||et},{
// `Promise.resolve` method
// https://tc39.es/ecma262/#sec-promise.resolve
resolve:function(t){return A(c&&this===i?U:this,t)}}),u({target:B,stat:!0,forced:rt},{
// `Promise.all` method
// https://tc39.es/ecma262/#sec-promise.all
all:function(t){var e=this,r=Z(e),n=r.resolve,o=r.reject,i=T((function(){var r=b(e.resolve),i=[],a=0,u=1;x(t,(function(t){var c=a++,s=!1;u++,f(r,e,t).then((function(t){s||(s=!0,i[c]=t,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise},
// `Promise.race` method
// https://tc39.es/ecma262/#sec-promise.race
race:function(t){var e=this,r=Z(e),n=r.reject,o=T((function(){var o=b(e.resolve);x(t,(function(t){f(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}})},
/* 205 */
/***/
function(t,e,r){var n=r(7);t.exports=n.Promise},
/* 206 */
/***/
function(t,e,r){var n,o,i,a,u,c,s,l,f=r(7),p=r(62),d=r(51).f,h=r(162).set,y=r(163),v=r(207),g=r(208),b=r(126),m=f.MutationObserver||f.WebKitMutationObserver,O=f.document,_=f.process,w=f.Promise,x=d(f,"queueMicrotask"),E=x&&x.value;E||(n=function(){var t,e;for(b&&(t=_.domain)&&t.exit();o;){e=o.fn,o=o.next;try{e()}catch(r){throw o?a():i=void 0,r}}i=void 0,t&&t.enter()},y||b||g||!m||!O?!v&&w&&w.resolve?((s=w.resolve(void 0)).constructor=w,l=p(s.then,s),a=function(){l(n)}):b?a=function(){_.nextTick(n)}:(h=p(h,f),a=function(){h(n)}):(u=!0,c=O.createTextNode(""),new m(n).observe(c,{characterData:!0}),a=function(){c.data=u=!u})),t.exports=E||function(t){var e={fn:t,next:void 0};i&&(i.next=e),o||(o=e,a()),i=e}},
/* 207 */
/***/
function(t,e,r){var n=r(53),o=r(7);t.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==o.Pebble},
/* 208 */
/***/
function(t,e,r){var n=r(53);t.exports=/web0s(?!.*chrome)/i.test(n)},
/* 209 */
/***/
function(t,e,r){var n=r(32),o=r(33),i=r(164);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=i.f(t);return(0,r.resolve)(e),r.promise}},
/* 210 */
/***/
function(t,e,r){var n=r(7);t.exports=function(t,e){var r=n.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,e))}},
/* 211 */
/***/
function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},
/* 212 */
/***/
function(t,e){t.exports="object"==typeof window},
/* 213 */
/***/
function(t,e,r){var n=r(36),o=r(15),i=r(66),a=r(39),u=o(r(93).f),c=o([].push),s=function(t){return function(e){for(var r,o=a(e),s=i(o),l=s.length,f=0,p=[];l>f;)r=s[f++],n&&!u(o,r)||c(p,t?[r,o[r]]:o[r]);return p}};t.exports={
// `Object.entries` method
// https://tc39.es/ecma262/#sec-object.entries
entries:s(!0),
// `Object.values` method
// https://tc39.es/ecma262/#sec-object.values
values:s(!1)}},
/* 214 */
/***/
function(t,e,r){var n=r(38),o=r(67),i=r(43);t.exports=function(t){for(var e=n(this),r=i(e),a=arguments.length,u=o(a>1?arguments[1]:void 0,r),c=a>2?arguments[2]:void 0,s=void 0===c?r:o(c,r);s>u;)e[u++]=t;return e}},
/* 215 */
/***/
function(t,e,r){r.r(e),r.d(e,"observer",(function(){
/* binding */
return cO})),r.d(e,"LogicFlow",(function(){
/* reexport */
return uO})),r.d(e,"h",(function(){
/* reexport */
return $.g})),r.d(e,"LogicFlowUtil",(function(){
/* reexport */
return n})),r.d(e,"BaseNode",(function(){
/* reexport */
return sv})),r.d(e,"RectNode",(function(){
/* reexport */
return vv})),r.d(e,"CircleNode",(function(){
/* reexport */
return xv})),r.d(e,"PolygonNode",(function(){
/* reexport */
return Cv})),r.d(e,"DiamondNode",(function(){
/* reexport */
return Fv})),r.d(e,"EllipseNode",(function(){
/* reexport */
return Qv})),r.d(e,"TextNode",(function(){
/* reexport */
return ug})),r.d(e,"HtmlNode",(function(){
/* reexport */
return vg})),r.d(e,"BaseEdge",(function(){
/* reexport */
return $g})),r.d(e,"LineEdge",(function(){
/* reexport */
return lb})),r.d(e,"PolylineEdge",(function(){
/* reexport */
return Pb})),r.d(e,"BezierEdge",(function(){
/* reexport */
return Ib})),r.d(e,"Arrow",(function(){
/* reexport */
return Ub})),r.d(e,"BaseEdgeModel",(function(){
/* reexport */
return Pc})),r.d(e,"BezierEdgeModel",(function(){
/* reexport */
return rd})),r.d(e,"LineEdgeModel",(function(){
/* reexport */
return Fc})),r.d(e,"PolylineEdgeModel",(function(){
/* reexport */
return es})),r.d(e,"BaseNodeModel",(function(){
/* reexport */
return yd})),r.d(e,"CircleNodeModel",(function(){
/* reexport */
return Md})),r.d(e,"DiamondNodeModel",(function(){
/* reexport */
return Kd})),r.d(e,"EllipseNodeModel",(function(){
/* reexport */
return sh})),r.d(e,"PolygonNodeModel",(function(){
/* reexport */
return jh})),r.d(e,"RectNodeModel",(function(){
/* reexport */
return Xh})),r.d(e,"TextNodeModel",(function(){
/* reexport */
return ey})),r.d(e,"HtmlNodeModel",(function(){
/* reexport */
return py})),r.d(e,"EditConfigModel",(function(){
/* reexport */
return Ei})),r.d(e,"GraphModel",(function(){
/* reexport */
return wl})),r.d(e,"SnaplineModel",(function(){
/* reexport */
return by})),r.d(e,"Keyboard",(function(){
/* reexport */
return qm})),r.d(e,"get",(function(){
/* reexport */
return mp})),r.d(e,"defaults",(function(){
/* reexport */
return wp}));var n={};r.r(n),r.d(n,"createUuid",(function(){return Eu})),r.d(n,"refreshGraphId",(function(){return ju})),r.d(n,"createDrag",(function(){return Ws})),r.d(n,"StepDrag",(function(){return ul}));var o=r(0),i=r(10);if(!i.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!o.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var a=r(42),u=Object(a.b)("observerBatching");function c(t){t()}function s(t){return Object(o.t)(t)}var l,f=1e4,p=1e4,d=new Set;function h(){void 0===l&&(l=setTimeout(y,p))}function y(){l=void 0;var t=Date.now();d.forEach((function(e){var r=e.current;r&&t>=r.cleanAt&&(r.reaction.dispose(),e.current=null,d.delete(e))})),d.size>0&&h()}var v=!1,g=[],b={};function m(t){return"observer"+t}function O(t,e,r){void 0===e&&(e="observed"),void 0===r&&(r=b);var n,u=function(t){return function(){v?g.push(t):t()}}((r.useForceUpdate||a.d)()),c=i.d.useRef(null);if(!c.current){var l=new o.c(m(e),(function(){p.mounted?u():(l.dispose(),c.current=null)})),p=function(t){return{cleanAt:Date.now()+f,reaction:t}}(l);c.current=p,n=c,d.add(n),h()}var y=c.current.reaction;return i.d.useDebugValue(y,s),i.d.useEffect((function(){var t;return t=c,d.delete(t),c.current?c.current.mounted=!0:(c.current={reaction:new o.c(m(e),(function(){u()})),cleanAt:1/0},u()),function(){c.current.reaction.dispose(),c.current=null}}),[]),function(t){v=!0,g=[];try{var e=t();v=!1;var r=g.length>0?g:void 0;return i.d.useLayoutEffect((function(){r&&r.forEach((function(t){return t()}))}),[r]),e}finally{v=!1}}((function(){var e,r;if(y.track((function(){try{e=t()}catch(n){r=n}})),r)throw r;return e}))}var _=function(){return _=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},_.apply(this,arguments)};function w(t,e){var r,n,o,a=_({forwardRef:!1},e),u=t.displayName||t.name,c=function(e,r){return O((function(){return t(e,r)}),u)};return c.displayName=u,r=a.forwardRef?Object(i.f)(Object(i.e)(c)):Object(i.f)(c),n=t,o=r,Object.keys(n).forEach((function(t){E[t]||Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(n,t))})),r.displayName=u,r}var x,E={$$typeof:!0,render:!0,compare:!0,type:!0};function j(t){var e=t.children,r=t.render,n=e||r;return"function"!=typeof n?null:O(n)}function S(t,e,r,n,o){var i="children"===e?"render":"children",a="function"==typeof t[e],u="function"==typeof t[i];return a&&u?new Error("MobX Observer: Do not use children and render in the same time in`"+r):a||u?null:new Error("Invalid prop `"+o+"` of type `"+typeof t[e]+"` supplied to `"+r+"`, expected `function`.")}j.propTypes={children:S,render:S},j.displayName="Observer",(x=i.g)||(x=c),Object(o.n)({reactionScheduler:x}),Object(a.a)()[u]=!0;var P=0,A={};function k(t){return A[t]||(A[t]=function(t){if("function"==typeof Symbol)return Symbol(t);var e="__$mobx-react "+t+" ("+P+")";return P++,e}(t)),A[t]}function M(t,e){if(T(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++)if(!Object.hasOwnProperty.call(e,r[o])||!T(t[r[o]],e[r[o]]))return!1;return!0}function T(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function D(t,e,r){Object.hasOwnProperty.call(t,e)?t[e]=r:Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:r})}var N=k("patchMixins"),C=k("patchedDefinition");function R(t,e){for(var r=this,n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];e.locks++;try{var a;return null!=t&&(a=t.apply(this,o)),a}finally{e.locks--,0===e.locks&&e.methods.forEach((function(t){t.apply(r,o)}))}}function I(t,e){return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];R.call.apply(R,[this,t,e].concat(n))}}function L(t,e,r){var n=function(t,e){var r=t[N]=t[N]||{},n=r[e]=r[e]||{};return n.locks=n.locks||0,n.methods=n.methods||[],n}(t,e);n.methods.indexOf(r)<0&&n.methods.push(r);var o=Object.getOwnPropertyDescriptor(t,e);if(!o||!o[C]){var i=t[e],a=z(t,e,o?o.enumerable:void 0,n,i);Object.defineProperty(t,e,a)}}function z(t,e,r,n,o){var i,a=I(o,n);return(i={})[C]=!0,i.get=function(){return a},i.set=function(o){if(this===t)a=I(o,n);else{var i=z(this,e,r,n,o);Object.defineProperty(this,e,i)}},i.configurable=!0,i.enumerable=r,i}var B=o.a||"$mobx",H=k("isMobXReactObserver"),F=k("isUnmounted"),G=k("skipRender"),X=k("isForcingUpdate");function U(t){var e=t.prototype;if(t[H]){var r=Y(e);console.warn("The provided component class ("+r+") \n                has already been declared as an observer component.")}else t[H]=!0;if(e.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(t.__proto__!==i.b)if(e.shouldComponentUpdate){if(e.shouldComponentUpdate!==W)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else e.shouldComponentUpdate=W;K(e,"props"),K(e,"state");var n=e.render;return e.render=function(){return V.call(this,n)},L(e,"componentWillUnmount",(function(){var t;if(null===(t=this.render[B])||void 0===t||t.dispose(),this[F]=!0,!this.render[B]){var e=Y(this);console.warn("The reactive render of an observer class component ("+e+") \n                was overriden after MobX attached. This may result in a memory leak if the \n                overriden reactive render was not properly disposed.")}})),t}function Y(t){return t.displayName||t.name||t.constructor&&(t.constructor.displayName||t.constructor.name)||"<component>"}function V(t){var e=this;D(this,G,!1),D(this,X,!1);var r=Y(this),n=t.bind(this),a=!1,u=new o.c(r+".render()",(function(){if(!a&&(a=!0,!0!==e[F])){var t=!0;try{D(e,X,!0),e[G]||i.a.prototype.forceUpdate.call(e),t=!1}finally{D(e,X,!1),t&&u.dispose()}}}));function c(){a=!1;var t=void 0,e=void 0;if(u.track((function(){try{e=Object(o.d)(!1,n)}catch(r){t=r}})),t)throw t;return e}return u.reactComponent=this,c[B]=u,this.render=c,c.call(this)}function W(t,e){return this.state!==e||!M(this.props,t)}function K(t,e){var r=k("reactProp_"+e+"_valueHolder"),n=k("reactProp_"+e+"_atomHolder");function i(){return this[n]||D(this,n,Object(o.o)("reactive "+e)),this[n]}Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){var t=!1;return o.f&&o.e&&(t=Object(o.f)(!0)),i.call(this).reportObserved(),o.f&&o.e&&Object(o.e)(t),this[r]},set:function(t){this[X]||M(this[r],t)?D(this,r,t):(D(this,r,t),D(this,G,!0),i.call(this).reportChanged(),D(this,G,!1))}})}var Z="function"==typeof Symbol&&Symbol.for,q=Z?Symbol.for("react.forward_ref"):"function"==typeof i.e&&Object(i.e)((function(t){return null})).$$typeof,J=Z?Symbol.for("react.memo"):"function"==typeof i.f&&Object(i.f)((function(t){return null})).$$typeof;function Q(t){if(!0===t.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),J&&t.$$typeof===J)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(q&&t.$$typeof===q){var e=t.render;if("function"!=typeof e)throw new Error("render property of ForwardRef was not a function");return Object(i.e)((function(){var t=arguments;return Object(i.c)(j,null,(function(){return e.apply(void 0,t)}))}))}return"function"!=typeof t||t.prototype&&t.prototype.render||t.isReactClass||Object.prototype.isPrototypeOf.call(i.a,t)?U(t):w(t)}if(!i.a)throw new Error("mobx-react requires React to be available");if(!o.C)throw new Error("mobx-react requires mobx to be available");var $=r(1);r(3),r(60),r(2),r(6),r(4),r(11),r(41),r(24),r(20),r(5),r(22),r(21),r(23),r(8),r(9),r(17),r(25),r(19),r(29),r(187),r(192),r(103),r(152),r(153);var tt=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},et=function(){this.__data__=[],this.size=0},rt=function(t,e){return t===e||t!=t&&e!=e},nt=function(t,e){for(var r=t.length;r--;)if(rt(t[r][0],e))return r;return-1},ot=Array.prototype.splice,it=function(t){var e=this.__data__,r=nt(e,t);return!(r<0||(r==e.length-1?e.pop():ot.call(e,r,1),--this.size,0))},at=function(t){var e=this.__data__,r=nt(e,t);return r<0?void 0:e[r][1]},ut=function(t){return nt(this.__data__,t)>-1},ct=function(t,e){var r=this.__data__,n=nt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function st(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}st.prototype.clear=et,st.prototype.delete=it,st.prototype.get=at,st.prototype.has=ut,st.prototype.set=ct;var lt,ft=st,pt=function(){this.__data__=new ft,this.size=0},dt=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},ht=function(t){return this.__data__.get(t)},yt=function(t){return this.__data__.has(t)},vt=r(31),gt=vt.a.Symbol,bt=Object.prototype,mt=bt.hasOwnProperty,Ot=bt.toString,_t=gt?gt.toStringTag:void 0,wt=function(t){var e=mt.call(t,_t),r=t[_t];try{t[_t]=void 0;var n=!0}catch(i){}var o=Ot.call(t);return n&&(e?t[_t]=r:delete t[_t]),o},xt=Object.prototype.toString,Et=function(t){return xt.call(t)},jt="[object Null]",St="[object Undefined]",Pt=gt?gt.toStringTag:void 0,At=function(t){return null==t?void 0===t?St:jt:Pt&&Pt in Object(t)?wt(t):Et(t)},kt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Mt="[object AsyncFunction]",Tt="[object Function]",Dt="[object GeneratorFunction]",Nt="[object Proxy]",Ct=function(t){if(!kt(t))return!1;var e=At(t);return e==Tt||e==Dt||e==Mt||e==Nt},Rt=vt.a["__core-js_shared__"],It=(lt=/[^.]+$/.exec(Rt&&Rt.keys&&Rt.keys.IE_PROTO||""))?"Symbol(src)_1."+lt:"",Lt=function(t){return!!It&&It in t},zt=Function.prototype.toString,Bt=function(t){if(null!=t){try{return zt.call(t)}catch(e){}try{return t+""}catch(e){}}return""},Ht=/^\[object .+?Constructor\]$/,Ft=Function.prototype,Gt=Object.prototype,Xt=Ft.toString,Ut=Gt.hasOwnProperty,Yt=RegExp("^"+Xt.call(Ut).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=function(t){return!(!kt(t)||Lt(t))&&(Ct(t)?Yt:Ht).test(Bt(t))},Wt=function(t,e){return null==t?void 0:t[e]},Kt=function(t,e){var r=Wt(t,e);return Vt(r)?r:void 0},Zt=Kt(vt.a,"Map"),qt=Kt(Object,"create"),Jt=function(){this.__data__=qt?qt(null):{},this.size=0},Qt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$t="__lodash_hash_undefined__",te=Object.prototype.hasOwnProperty,ee=function(t){var e=this.__data__;if(qt){var r=e[t];return r===$t?void 0:r}return te.call(e,t)?e[t]:void 0},re=Object.prototype.hasOwnProperty,ne=function(t){var e=this.__data__;return qt?void 0!==e[t]:re.call(e,t)},oe="__lodash_hash_undefined__",ie=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=qt&&void 0===e?oe:e,this};function ae(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ae.prototype.clear=Jt,ae.prototype.delete=Qt,ae.prototype.get=ee,ae.prototype.has=ne,ae.prototype.set=ie;var ue=ae,ce=function(){this.size=0,this.__data__={hash:new ue,map:new(Zt||ft),string:new ue}},se=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},le=function(t,e){var r=t.__data__;return se(e)?r["string"==typeof e?"string":"hash"]:r.map},fe=function(t){var e=le(this,t).delete(t);return this.size-=e?1:0,e},pe=function(t){return le(this,t).get(t)},de=function(t){return le(this,t).has(t)},he=function(t,e){var r=le(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function ye(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ye.prototype.clear=ce,ye.prototype.delete=fe,ye.prototype.get=pe,ye.prototype.has=de,ye.prototype.set=he;var ve=ye,ge=200,be=function(t,e){var r=this.__data__;if(r instanceof ft){var n=r.__data__;if(!Zt||n.length<ge-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ve(n)}return r.set(t,e),this.size=r.size,this};function me(t){var e=this.__data__=new ft(t);this.size=e.size}me.prototype.clear=pt,me.prototype.delete=dt,me.prototype.get=ht,me.prototype.has=yt,me.prototype.set=be;var Oe=me,_e="__lodash_hash_undefined__",we=function(t){return this.__data__.set(t,_e),this},xe=function(t){return this.__data__.has(t)};function Ee(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ve;++e<r;)this.add(t[e])}Ee.prototype.add=Ee.prototype.push=we,Ee.prototype.has=xe;var je=Ee,Se=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1},Pe=function(t,e){return t.has(e)},Ae=1,ke=2,Me=function(t,e,r,n,o,i){var a=r&Ae,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var s=i.get(t),l=i.get(e);if(s&&l)return s==e&&l==t;var f=-1,p=!0,d=r&ke?new je:void 0;for(i.set(t,e),i.set(e,t);++f<u;){var h=t[f],y=e[f];if(n)var v=a?n(y,h,f,e,t,i):n(h,y,f,t,e,i);if(void 0!==v){if(v)continue;p=!1;break}if(d){if(!Se(e,(function(t,e){if(!Pe(d,e)&&(h===t||o(h,t,r,n,i)))return d.push(e)}))){p=!1;break}}else if(h!==y&&!o(h,y,r,n,i)){p=!1;break}}return i.delete(t),i.delete(e),p},Te=vt.a.Uint8Array,De=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r},Ne=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},Ce=1,Re=2,Ie="[object Boolean]",Le="[object Date]",ze="[object Error]",Be="[object Map]",He="[object Number]",Fe="[object RegExp]",Ge="[object Set]",Xe="[object String]",Ue="[object Symbol]",Ye="[object ArrayBuffer]",Ve="[object DataView]",We=gt?gt.prototype:void 0,Ke=We?We.valueOf:void 0,Ze=function(t,e,r,n,o,i,a){switch(r){case Ve:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ye:return!(t.byteLength!=e.byteLength||!i(new Te(t),new Te(e)));case Ie:case Le:case He:return rt(+t,+e);case ze:return t.name==e.name&&t.message==e.message;case Fe:case Xe:return t==e+"";case Be:var u=De;case Ge:var c=n&Ce;if(u||(u=Ne),t.size!=e.size&&!c)return!1;var s=a.get(t);if(s)return s==e;n|=Re,a.set(t,e);var l=Me(u(t),u(e),n,o,i,a);return a.delete(t),l;case Ue:if(Ke)return Ke.call(t)==Ke.call(e)}return!1},qe=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},Je=Array.isArray,Qe=function(t,e,r){var n=e(t);return Je(t)?n:qe(n,r(t))},$e=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i},tr=function(){return[]},er=Object.prototype.propertyIsEnumerable,rr=Object.getOwnPropertySymbols,nr=rr?function(t){return null==t?[]:(t=Object(t),$e(rr(t),(function(e){return er.call(t,e)})))}:tr,or=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},ir=function(t){return null!=t&&"object"==typeof t},ar="[object Arguments]",ur=function(t){return ir(t)&&At(t)==ar},cr=Object.prototype,sr=cr.hasOwnProperty,lr=cr.propertyIsEnumerable,fr=ur(function(){return arguments}())?ur:function(t){return ir(t)&&sr.call(t,"callee")&&!lr.call(t,"callee")},pr=fr,dr=r(48),hr=9007199254740991,yr=/^(?:0|[1-9]\d*)$/,vr=function(t,e){var r=typeof t;return!!(e=null==e?hr:e)&&("number"==r||"symbol"!=r&&yr.test(t))&&t>-1&&t%1==0&&t<e},gr=9007199254740991,br=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=gr},mr={};mr["[object Float32Array]"]=mr["[object Float64Array]"]=mr["[object Int8Array]"]=mr["[object Int16Array]"]=mr["[object Int32Array]"]=mr["[object Uint8Array]"]=mr["[object Uint8ClampedArray]"]=mr["[object Uint16Array]"]=mr["[object Uint32Array]"]=!0,mr["[object Arguments]"]=mr["[object Array]"]=mr["[object ArrayBuffer]"]=mr["[object Boolean]"]=mr["[object DataView]"]=mr["[object Date]"]=mr["[object Error]"]=mr["[object Function]"]=mr["[object Map]"]=mr["[object Number]"]=mr["[object Object]"]=mr["[object RegExp]"]=mr["[object Set]"]=mr["[object String]"]=mr["[object WeakMap]"]=!1;var Or=function(t){return ir(t)&&br(t.length)&&!!mr[At(t)]},_r=function(t){return function(e){return t(e)}},wr=r(49),xr=wr.a&&wr.a.isTypedArray,Er=xr?_r(xr):Or,jr=Object.prototype.hasOwnProperty,Sr=function(t,e){var r=Je(t),n=!r&&pr(t),o=!r&&!n&&Object(dr.a)(t),i=!r&&!n&&!o&&Er(t),a=r||n||o||i,u=a?or(t.length,String):[],c=u.length;for(var s in t)!e&&!jr.call(t,s)||a&&(// Safari 9 has enumerable `arguments.length` in strict mode.
"length"==s||// Node.js 0.10 has enumerable non-index properties on buffers.
o&&("offset"==s||"parent"==s)||// PhantomJS 2 has enumerable non-index properties on typed arrays.
i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||// Skip index properties.
vr(s,c))||u.push(s);return u},Pr=Object.prototype,Ar=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Pr)},kr=function(t,e){return function(r){return t(e(r))}},Mr=kr(Object.keys,Object),Tr=Object.prototype.hasOwnProperty,Dr=function(t){if(!Ar(t))return Mr(t);var e=[];for(var r in Object(t))Tr.call(t,r)&&"constructor"!=r&&e.push(r);return e},Nr=function(t){return null!=t&&br(t.length)&&!Ct(t)},Cr=function(t){return Nr(t)?Sr(t):Dr(t)},Rr=function(t){return Qe(t,Cr,nr)},Ir=1,Lr=Object.prototype.hasOwnProperty,zr=function(t,e,r,n,o,i){var a=r&Ir,u=Rr(t),c=u.length;if(c!=Rr(e).length&&!a)return!1;for(var s=c;s--;){var l=u[s];if(!(a?l in e:Lr.call(e,l)))return!1}var f=i.get(t),p=i.get(e);if(f&&p)return f==e&&p==t;var d=!0;i.set(t,e),i.set(e,t);for(var h=a;++s<c;){var y=t[l=u[s]],v=e[l];if(n)var g=a?n(v,y,l,e,t,i):n(y,v,l,t,e,i);if(!(void 0===g?y===v||o(y,v,r,n,i):g)){d=!1;break}h||(h="constructor"==l)}if(d&&!h){var b=t.constructor,m=e.constructor;b==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m||(d=!1)}return i.delete(t),i.delete(e),d},Br=Kt(vt.a,"DataView"),Hr=Kt(vt.a,"Promise"),Fr=Kt(vt.a,"Set"),Gr=Kt(vt.a,"WeakMap"),Xr="[object Map]",Ur="[object Promise]",Yr="[object Set]",Vr="[object WeakMap]",Wr="[object DataView]",Kr=Bt(Br),Zr=Bt(Zt),qr=Bt(Hr),Jr=Bt(Fr),Qr=Bt(Gr),$r=At;(Br&&$r(new Br(new ArrayBuffer(1)))!=Wr||Zt&&$r(new Zt)!=Xr||Hr&&$r(Hr.resolve())!=Ur||Fr&&$r(new Fr)!=Yr||Gr&&$r(new Gr)!=Vr)&&($r=function(t){var e=At(t),r="[object Object]"==e?t.constructor:void 0,n=r?Bt(r):"";if(n)switch(n){case Kr:return Wr;case Zr:return Xr;case qr:return Ur;case Jr:return Yr;case Qr:return Vr}return e});var tn=$r,en=1,rn="[object Arguments]",nn="[object Array]",on="[object Object]",an=Object.prototype.hasOwnProperty,un=function(t,e,r,n,o,i){var a=Je(t),u=Je(e),c=a?nn:tn(t),s=u?nn:tn(e),l=(c=c==rn?on:c)==on,f=(s=s==rn?on:s)==on,p=c==s;if(p&&Object(dr.a)(t)){if(!Object(dr.a)(e))return!1;a=!0,l=!1}if(p&&!l)return i||(i=new Oe),a||Er(t)?Me(t,e,r,n,o,i):Ze(t,e,c,r,n,o,i);if(!(r&en)){var d=l&&an.call(t,"__wrapped__"),h=f&&an.call(e,"__wrapped__");if(d||h){var y=d?t.value():t,v=h?e.value():e;return i||(i=new Oe),o(y,v,r,n,i)}}return!!p&&(i||(i=new Oe),zr(t,e,r,n,o,i))},cn=function t(e,r,n,o,i){return e===r||(null==e||null==r||!ir(e)&&!ir(r)?e!=e&&r!=r:un(e,r,n,o,t,i))},sn=1,ln=2,fn=function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var u=r[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var c=(u=r[o])[0],s=t[c],l=u[1];if(a&&u[2]){if(void 0===s&&!(c in t))return!1}else{var f=new Oe;if(n)var p=n(s,l,c,t,e,f);if(!(void 0===p?cn(l,s,sn|ln,n,f):p))return!1}}return!0},pn=function(t){return t==t&&!kt(t)},dn=function(t){for(var e=Cr(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,pn(o)]}return e},hn=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}},yn=function(t){var e=dn(t);return 1==e.length&&e[0][2]?hn(e[0][0],e[0][1]):function(r){return r===t||fn(r,t,e)}},vn="[object Symbol]",gn=function(t){return"symbol"==typeof t||ir(t)&&At(t)==vn},bn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mn=/^\w*$/,On=function(t,e){if(Je(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!gn(t))||mn.test(t)||!bn.test(t)||null!=e&&t in Object(e)},_n="Expected a function";function wn(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(_n);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(wn.Cache||ve),r}wn.Cache=ve;var xn,En,jn,Sn,Pn,An,kn,Mn,Tn,Dn,Nn,Cn,Rn,In,Ln,zn,Bn,Hn,Fn,Gn,Xn,Un,Yn=wn,Vn=500,Wn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kn=/\\(\\)?/g,Zn=(xn=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Wn,(function(t,r,n,o){e.push(n?o.replace(Kn,"$1"):r||t)})),e},En=Yn(xn,(function(t){return jn.size===Vn&&jn.clear(),t})),jn=En.cache,En),qn=1/0,Jn=gt?gt.prototype:void 0,Qn=Jn?Jn.toString:void 0,$n=function t(e){if("string"==typeof e)return e;if(Je(e))return tt(e,t)+"";if(gn(e))return Qn?Qn.call(e):"";var r=e+"";return"0"==r&&1/e==-qn?"-0":r},to=function(t){return null==t?"":$n(t)},eo=function(t,e){return Je(t)?t:On(t,e)?[t]:Zn(to(t))},ro=1/0,no=function(t){if("string"==typeof t||gn(t))return t;var e=t+"";return"0"==e&&1/t==-ro?"-0":e},oo=function(t,e){for(var r=0,n=(e=eo(e,t)).length;null!=t&&r<n;)t=t[no(e[r++])];return r&&r==n?t:void 0},io=function(t,e,r){var n=null==t?void 0:oo(t,e);return void 0===n?r:n},ao=function(t,e){return null!=t&&e in Object(t)},uo=function(t,e,r){for(var n=-1,o=(e=eo(e,t)).length,i=!1;++n<o;){var a=no(e[n]);if(!(i=null!=t&&r(t,a)))break;t=t[a]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&br(o)&&vr(a,o)&&(Je(t)||pr(t))},co=function(t,e){return null!=t&&uo(t,e,ao)},so=1,lo=2,fo=function(t,e){return On(t)&&pn(e)?hn(no(t),e):function(r){var n=io(r,t);return void 0===n&&n===e?co(r,t):cn(e,n,so|lo)}},po=function(t){return t},ho=function(t){return function(e){return null==e?void 0:e[t]}},yo=function(t){return function(e){return oo(e,t)}},vo=function(t){return On(t)?ho(no(t)):yo(t)},go=function(t){return"function"==typeof t?t:null==t?po:"object"==typeof t?Je(t)?fo(t[0],t[1]):yn(t):vo(t)},bo=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),a=i.length;a--;){var u=i[Sn?a:++n];if(!1===e(o[u],u,o))break}return t},mo=function(t,e){return function(r,n){if(null==r)return r;if(!Nr(r))return t(r,n);for(var o=r.length,i=e?o:-1,a=Object(r);(e?i--:++i<o)&&!1!==n(a[i],i,a););return r}}((function(t,e){return t&&bo(t,e,Cr)})),Oo=function(t,e){var r=-1,n=Nr(t)?Array(t.length):[];return mo(t,(function(t,o,i){n[++r]=e(t,o,i)})),n},_o=function(t,e){return(Je(t)?tt:Oo)(t,go(e))},wo=function(){try{var t=Kt(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),xo=function(t,e,r){"__proto__"==e&&wo?wo(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},Eo=Object.prototype.hasOwnProperty,jo=function(t,e,r){var n=t[e];Eo.call(t,e)&&rt(n,r)&&(void 0!==r||e in t)||xo(t,e,r)},So=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var u=e[i],c=n?n(r[u],t[u],u,r,t):void 0;void 0===c&&(c=t[u]),o?xo(r,u,c):jo(r,u,c)}return r},Po=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},Ao=Math.max,ko=function(t,e,r){return e=Ao(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=Ao(n.length-e,0),a=Array(i);++o<i;)a[o]=n[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=n[o];return u[e]=r(a),Po(t,this,u)}},Mo=function(t){return function(){return t}},To=wo?function(t,e){return wo(t,"toString",{configurable:!0,enumerable:!1,value:Mo(e),writable:!0})}:po,Do=800,No=16,Co=Date.now,Ro=function(t){var e=0,r=0;return function(){var n=Co(),o=No-(n-r);if(r=n,o>0){if(++e>=Do)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},Io=Ro(To),Lo=function(t,e){return Io(ko(t,e,po),t+"")},zo=function(t,e,r){if(!kt(r))return!1;var n=typeof e;return!!("number"==n?Nr(r)&&vr(e,r.length):"string"==n&&e in r)&&rt(r[e],t)},Bo=function(t){return Lo((function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&zo(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var u=r[n];u&&t(e,u,n,i)}return e}))},Ho=Object.prototype.hasOwnProperty,Fo=Bo((function(t,e){if(Ar(e)||Nr(e))So(e,Cr(e),t);else for(var r in e)Ho.call(e,r)&&jo(t,r,e[r])})),Go=function(t,e,r,n){if(!kt(t))return t;for(var o=-1,i=(e=eo(e,t)).length,a=i-1,u=t;null!=u&&++o<i;){var c=no(e[o]),s=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=a){var l=u[c];void 0===(s=n?n(l,c,u):void 0)&&(s=kt(l)?l:vr(e[o+1])?[]:{})}jo(u,c,s),u=u[c]}return t},Xo=function(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var a=e[n],u=oo(t,a);r(u,a)&&Go(i,eo(a,t),u)}return i},Uo=function(t,e){return Xo(t,e,(function(e,r){return co(t,r)}))},Yo=gt?gt.isConcatSpreadable:void 0,Vo=function(t){return Je(t)||pr(t)||!!(Yo&&t&&t[Yo])},Wo=function t(e,r,n,o,i){var a=-1,u=e.length;for(n||(n=Vo),i||(i=[]);++a<u;){var c=e[a];r>0&&n(c)?r>1?t(c,r-1,n,o,i):qe(i,c):o||(i[i.length]=c)}return i},Ko=function(t){return null!=t&&t.length?Wo(t,1):[]},Zo=function(t){return Io(ko(t,void 0,Ko),t+"")}((function(t,e){return null==t?{}:Uo(t,e)}));function qo(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Jo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $o(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var ti,ei,ri,ni,oi,ii,ai,ui,ci,si,li,fi,pi,di,hi,yi,vi,gi,bi,mi,Oi,_i,wi={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},xi=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Ei=(An=$o((Pn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),qo(this,"isSilentMode",An,this),qo(this,"stopZoomGraph",kn,this),qo(this,"stopScrollGraph",Mn,this),qo(this,"stopMoveGraph",Tn,this),qo(this,"adjustEdge",Dn,this),qo(this,"adjustEdgeMiddle",Nn,this),qo(this,"adjustEdgeStartAndEnd",Cn,this),qo(this,"adjustNodePosition",Rn,this),qo(this,"hideAnchors",In,this),qo(this,"hoverOutline",Ln,this),qo(this,"nodeSelectedOutline",zn,this),qo(this,"edgeSelectedOutline",Bn,this),qo(this,"nodeTextEdit",Hn,this),qo(this,"edgeTextEdit",Fn,this),qo(this,"nodeTextDraggable",Gn,this),qo(this,"edgeTextDraggable",Xn,this),qo(this,"autoExpand",Un,this),Qo(this,"multipleSelectKey",""),Qo(this,"defaultConfig",{}),Fo(this,this.getConfigDetail(e))}var e,r,n;return e=t,(r=[{key:"updateEditConfig",value:function(t){var e=this.getConfigDetail(t);Fo(this,e)}},{key:"getConfigDetail",value:function(t){var e=t.isSilentMode,r=t.textEdit,n={};if(!1===e&&Fo(n,this.defaultConfig),!0===e){var o=Zo(wi,xi);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Fo(n,o)}!1===r&&Fo(n,{nodeTextEdit:!1,edgeTextEdit:!1});var i=Zo(t,xi);return Fo(n,i)}},{key:"getConfig",value:function(){return Zo(this,xi)}}])&&Jo(e.prototype,r),n&&Jo(e,n),t}()).prototype,"isSilentMode",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kn=$o(Pn.prototype,"stopZoomGraph",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mn=$o(Pn.prototype,"stopScrollGraph",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tn=$o(Pn.prototype,"stopMoveGraph",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Dn=$o(Pn.prototype,"adjustEdge",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Nn=$o(Pn.prototype,"adjustEdgeMiddle",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Cn=$o(Pn.prototype,"adjustEdgeStartAndEnd",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rn=$o(Pn.prototype,"adjustNodePosition",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),In=$o(Pn.prototype,"hideAnchors",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ln=$o(Pn.prototype,"hoverOutline",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),zn=$o(Pn.prototype,"nodeSelectedOutline",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bn=$o(Pn.prototype,"edgeSelectedOutline",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Hn=$o(Pn.prototype,"nodeTextEdit",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Fn=$o(Pn.prototype,"edgeTextEdit",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Gn=$o(Pn.prototype,"nodeTextDraggable",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xn=$o(Pn.prototype,"edgeTextDraggable",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Un=$o(Pn.prototype,"autoExpand",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$o(Pn.prototype,"updateEditConfig",[o.k],Object.getOwnPropertyDescriptor(Pn.prototype,"updateEditConfig"),Pn.prototype),Pn);function ji(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Si(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Si(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Si(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pi(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Ai(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ki(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mi(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}r(77),(ei=ti||(ti={}))[ei.DEFAULT=1]="DEFAULT",ei[ei.TEXT_EDIT=2]="TEXT_EDIT",ei[ei.SHOW_MENU=3]="SHOW_MENU",ei[ei.ALLOW_CONNECT=4]="ALLOW_CONNECT",ei[ei.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT",(ni=ri||(ri={})).KEY="logic-flow",ni.NODE_NAME="lf-node",ni.EDGE_NAME="lf-edge",(ii=oi||(oi={})).NODE="node",ii.CIRCLE_NODE="circle-node",ii.POLYGON_NODE="polygon-node",ii.RECT_NODE="rect-node",ii.TEXT_NODE="text-node",ii.ELLIPSE_NODE="ellipse-node",ii.DIAMOND_NODE="diamond-node",ii.HTML_NODE="html-node",ii.EDGE="edge",ii.LINE_EDGE="line-edge",ii.POLYLINE_EDGE="polyline-edge",ii.BEZIER_EDGE="bezier-edge",ii.GRAPH="graph",(ui=ai||(ai={})).NODE="node",ui.EDGE="edge",ui.GRAPH="graph",(si=ci||(ci={})).ELEMENT_CLICK="element:click",si.NODE_CLICK="node:click",si.NODE_DBCLICK="node:dbclick",si.NODE_DELETE="node:delete",si.NODE_ADD="node:add",si.NODE_DND_ADD="node:dnd-add",si.NODE_DND_DRAG="node:dnd-drag",si.NODE_MOUSEDOWN="node:mousedown",si.NODE_DRAGSTART="node:dragstart",si.NODE_DRAG="node:drag",si.NODE_DROP="node:drop",si.NODE_MOUSEUP="node:mouseup",si.NODE_MOUSEMOVE="node:mousemove",si.NODE_MOUSEENTER="node:mouseenter",si.NODE_MOUSELEAVE="node:mouseleave",si.NODE_CONTEXTMENU="node:contextmenu",si.EDGE_DELETE="edge:delete",si.EDGE_ADD="edge:add",si.EDGE_CLICK="edge:click",si.EDGE_DBCLICK="edge:dbclick",si.EDGE_MOUSEENTER="edge:mouseenter",si.EDGE_MOUSELEAVE="edge:mouseleave",si.EDGE_CONTEXTMENU="edge:contextmenu",si.EDGE_ADJUST="edge:adjust",si.EDGE_EXCHANGE_NODE="edge:exchange-node",si.ANCHOR_DRAGSTART="anchor:dragstart",si.ANCHOR_DRAG="anchor:drag",si.ANCHOR_DROP="anchor:drop",si.ANCHOR_DRAGEND="anchor:dragend",si.BLANK_MOUSEDOWN="blank:mousedown",si.BLANK_DRAGSTART="blank:dragstart",si.BLANK_DRAG="blank:drag",si.BLANK_DROP="blank:drop",si.BLANK_MOUSEMOVE="blank:mousemove",si.BLANK_MOUSEUP="blank:mouseup",si.BLANK_CLICK="blank:click",si.BLANK_CONTEXTMENU="blank:contextmenu",si.SELECTION_MOUSEDOWN="selection:mousedown",si.SELECTION_DRAGSTART="selection:dragstart",si.SELECTION_DRAG="selection:drag",si.SELECTION_DROP="selection:drop",si.SELECTION_MOUSEMOVE="selection:mousemove",si.SELECTION_MOUSEUP="selection:mouseup",si.SELECTION_CONTEXTMENU="selection:contextmenu",si.CONNECTION_NOT_ALLOWED="connection:not-allowed",si.HISTORY_CHANGE="history:change",si.TEXT_UPDATE="text:update",si.GRAPH_TRANSFORM="graph:transform",si.GRAPH_RENDERED="graph:rendered",(fi=li||(li={})).HORIZONTAL="horizontal",fi.VERTICAL="vertical",(di=pi||(pi={}))[di.DEFAULT=0]="DEFAULT",di[di.INCREASE=1]="INCREASE";var Ti=(hi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ki(this,"MINI_SCALE_SIZE",.2),ki(this,"MAX_SCALE_SIZE",16),Pi(this,"SCALE_X",yi,this),Pi(this,"SKEW_Y",vi,this),Pi(this,"SKEW_X",gi,this),Pi(this,"SCALE_Y",bi,this),Pi(this,"TRANSLATE_X",mi,this),Pi(this,"TRANSLATE_Y",Oi,this),Pi(this,"ZOOM_SIZE",_i,this),ki(this,"eventCenter",void 0),this.eventCenter=e}var e,r,n;return e=t,r=[{key:"setZoomMiniSize",value:function(t){this.MINI_SCALE_SIZE=t}},{key:"setZoomMaxSize",value:function(t){this.MAX_SCALE_SIZE=t}
/**
               * 将最外层graph上的点基于缩放转换为canvasOverlay层上的点。
               * @param param0 HTML点
               */},{key:"HtmlPointToCanvasPoint",value:function(t){var e=ji(t,2),r=e[0],n=e[1];return[(r-this.TRANSLATE_X)/this.SCALE_X,(n-this.TRANSLATE_Y)/this.SCALE_Y]}
/**
               * 将最外层canvasOverlay层上的点基于缩放转换为graph上的点。
               * @param param0 HTML点
               */},{key:"CanvasPointToHtmlPoint",value:function(t){var e=ji(t,2),r=e[0],n=e[1];return[r*this.SCALE_X+this.TRANSLATE_X,n*this.SCALE_Y+this.TRANSLATE_Y]}
/**
               * 将一个在canvas上的点，向x轴方向移动directionX距离，向y轴方向移动dirctionY距离。
               * 因为canvas可能被缩小或者放大了，所以其在canvas层移动的距离需要计算上缩放的量。
               * @param point 点
               * @param directionX x轴距离
               * @param directionY y轴距离
               */},{key:"moveCanvasPointByHtml",value:function(t,e,r){var n=ji(t,2),o=n[0],i=n[1];return[o+e/this.SCALE_X,i+r/this.SCALE_Y]}
/**
               * 根据缩放情况，获取缩放后的delta距离
               * @param deltaX x轴距离变化
               * @param deltaY y轴距离变化
               */},{key:"fixDeltaXY",value:function(t,e){return[t/this.SCALE_X,e/this.SCALE_Y]}
/**
               * 基于当前的缩放，获取画布渲染样式transform值
               */},{key:"getTransformStyle",value:function(){var t=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(t,")")}}
/**
               * 放大缩小图形
               * @param zoomSize 放大缩小的值，支持传入0-n之间的数字。小于1表示缩小，大于1表示放大。也支持传入true和false按照内置的刻度放大缩小
               * @param point 缩放的原点
               * @returns {string} -放大缩小的比例
               */},{key:"zoom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,r=this.SCALE_X,n=this.SCALE_Y;return!0===t?(r+=this.ZOOM_SIZE,n+=this.ZOOM_SIZE):!1===t?(r-=this.ZOOM_SIZE,n-=this.ZOOM_SIZE):"number"==typeof t&&(r=t,n=t),r<this.MINI_SCALE_SIZE||r>this.MAX_SCALE_SIZE||(e&&(this.TRANSLATE_X-=(r-this.SCALE_X)*e[0],this.TRANSLATE_Y-=(n-this.SCALE_Y)*e[1]),this.SCALE_X=r,this.SCALE_Y=n,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(t){this.eventCenter.emit(ci.GRAPH_TRANSFORM,{type:t,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(t,e){this.TRANSLATE_X+=t,this.TRANSLATE_Y+=e,this.emitGraphTransform("translate")}
/**
               * 将图形定位到画布中心
               * @param targetX 图形当前x坐标
               * @param targetY 图形当前y坐标
               * @param width 画布宽
               * @param height 画布高
               */},{key:"focusOn",value:function(t,e,r,n){var o=ji(this.CanvasPointToHtmlPoint([t,e]),2),i=r/2-o[0],a=n/2-o[1];this.TRANSLATE_X+=i,this.TRANSLATE_Y+=a,this.emitGraphTransform("focusOn")}}],r&&Ai(e.prototype,r),n&&Ai(e,n),t}(),yi=Mi(hi.prototype,"SCALE_X",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),vi=Mi(hi.prototype,"SKEW_Y",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),gi=Mi(hi.prototype,"SKEW_X",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),bi=Mi(hi.prototype,"SCALE_Y",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),mi=Mi(hi.prototype,"TRANSLATE_X",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Oi=Mi(hi.prototype,"TRANSLATE_Y",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_i=Mi(hi.prototype,"ZOOM_SIZE",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.04}}),Mi(hi.prototype,"zoom",[o.k],Object.getOwnPropertyDescriptor(hi.prototype,"zoom"),hi.prototype),Mi(hi.prototype,"resetZoom",[o.k],Object.getOwnPropertyDescriptor(hi.prototype,"resetZoom"),hi.prototype),Mi(hi.prototype,"translate",[o.k],Object.getOwnPropertyDescriptor(hi.prototype,"translate"),hi.prototype),Mi(hi.prototype,"focusOn",[o.k],Object.getOwnPropertyDescriptor(hi.prototype,"focusOn"),hi.prototype),hi),Di=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},Ni=function(t,e){return t&&So(e,Cr(e),t)},Ci=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},Ri=Object.prototype.hasOwnProperty,Ii=function(t){if(!kt(t))return Ci(t);var e=Ar(t),r=[];for(var n in t)("constructor"!=n||!e&&Ri.call(t,n))&&r.push(n);return r},Li=function(t){return Nr(t)?Sr(t,!0):Ii(t)},zi=function(t,e){return t&&So(e,Li(e),t)},Bi=r(106),Hi=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e},Fi=function(t,e){return So(t,nr(t),e)},Gi=kr(Object.getPrototypeOf,Object),Xi=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)qe(e,nr(t)),t=Gi(t);return e}:tr,Ui=function(t,e){return So(t,Xi(t),e)},Yi=function(t){return Qe(t,Li,Xi)},Vi=Object.prototype.hasOwnProperty,Wi=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Vi.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Ki=function(t){var e=new t.constructor(t.byteLength);return new Te(e).set(new Te(t)),e},Zi=function(t,e){var r=e?Ki(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},qi=/\w*$/,Ji=function(t){var e=new t.constructor(t.source,qi.exec(t));return e.lastIndex=t.lastIndex,e},Qi=gt?gt.prototype:void 0,$i=Qi?Qi.valueOf:void 0,ta=function(t){return $i?Object($i.call(t)):{}},ea=function(t,e){var r=e?Ki(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},ra="[object Boolean]",na="[object Date]",oa="[object Map]",ia="[object Number]",aa="[object RegExp]",ua="[object Set]",ca="[object String]",sa="[object Symbol]",la="[object ArrayBuffer]",fa="[object DataView]",pa="[object Float32Array]",da="[object Float64Array]",ha="[object Int8Array]",ya="[object Int16Array]",va="[object Int32Array]",ga="[object Uint8Array]",ba="[object Uint8ClampedArray]",ma="[object Uint16Array]",Oa="[object Uint32Array]",_a=function(t,e,r){var n=t.constructor;switch(e){case la:return Ki(t);case ra:case na:return new n(+t);case fa:return Zi(t,r);case pa:case da:case ha:case ya:case va:case ga:case ba:case ma:case Oa:return ea(t,r);case oa:return new n;case ia:case ca:return new n(t);case aa:return Ji(t);case ua:return new n;case sa:return ta(t)}},wa=Object.create,xa=function(){function t(){}return function(e){if(!kt(e))return{};if(wa)return wa(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Ea=function(t){return"function"!=typeof t.constructor||Ar(t)?{}:xa(Gi(t))},ja="[object Map]",Sa=function(t){return ir(t)&&tn(t)==ja},Pa=wr.a&&wr.a.isMap,Aa=Pa?_r(Pa):Sa,ka="[object Set]",Ma=function(t){return ir(t)&&tn(t)==ka},Ta=wr.a&&wr.a.isSet,Da=Ta?_r(Ta):Ma,Na=1,Ca=2,Ra=4,Ia="[object Arguments]",La="[object Function]",za="[object GeneratorFunction]",Ba="[object Object]",Ha={};Ha[Ia]=Ha["[object Array]"]=Ha["[object ArrayBuffer]"]=Ha["[object DataView]"]=Ha["[object Boolean]"]=Ha["[object Date]"]=Ha["[object Float32Array]"]=Ha["[object Float64Array]"]=Ha["[object Int8Array]"]=Ha["[object Int16Array]"]=Ha["[object Int32Array]"]=Ha["[object Map]"]=Ha["[object Number]"]=Ha[Ba]=Ha["[object RegExp]"]=Ha["[object Set]"]=Ha["[object String]"]=Ha["[object Symbol]"]=Ha["[object Uint8Array]"]=Ha["[object Uint8ClampedArray]"]=Ha["[object Uint16Array]"]=Ha["[object Uint32Array]"]=!0,Ha["[object Error]"]=Ha[La]=Ha["[object WeakMap]"]=!1;var Fa=function t(e,r,n,o,i,a){var u,c=r&Na,s=r&Ca,l=r&Ra;if(n&&(u=i?n(e,o,i,a):n(e)),void 0!==u)return u;if(!kt(e))return e;var f=Je(e);if(f){if(u=Wi(e),!c)return Hi(e,u)}else{var p=tn(e),d=p==La||p==za;if(Object(dr.a)(e))return Object(Bi.a)(e,c);if(p==Ba||p==Ia||d&&!i){if(u=s||d?{}:Ea(e),!c)return s?Ui(e,zi(u,e)):Fi(e,Ni(u,e))}else{if(!Ha[p])return i?e:{};u=_a(e,p,c)}}a||(a=new Oe);var h=a.get(e);if(h)return h;a.set(e,u),Da(e)?e.forEach((function(o){u.add(t(o,r,n,o,e,a))})):Aa(e)&&e.forEach((function(o,i){u.set(i,t(o,r,n,i,e,a))}));var y=f?void 0:(l?s?Yi:Rr:s?Li:Cr)(e);return Di(y||e,(function(o,i){y&&(o=e[i=o]),jo(u,i,t(o,r,n,i,e,a))})),u},Ga=1,Xa=4,Ua=function(t){return Fa(t,Ga|Xa)},Ya=function(t,e,r){(void 0!==r&&!rt(t[e],r)||void 0===r&&!(e in t))&&xo(t,e,r)},Va=function(t){return ir(t)&&Nr(t)},Wa="[object Object]",Ka=Function.prototype,Za=Object.prototype,qa=Ka.toString,Ja=Za.hasOwnProperty,Qa=qa.call(Object),$a=function(t){if(!ir(t)||At(t)!=Wa)return!1;var e=Gi(t);if(null===e)return!0;var r=Ja.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&qa.call(r)==Qa},tu=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},eu=function(t){return So(t,Li(t))},ru=function(t,e,r,n,o,i,a){var u=tu(t,r),c=tu(e,r),s=a.get(c);if(s)Ya(t,r,s);else{var l=i?i(u,c,r+"",t,e,a):void 0,f=void 0===l;if(f){var p=Je(c),d=!p&&Object(dr.a)(c),h=!p&&!d&&Er(c);l=c,p||d||h?Je(u)?l=u:Va(u)?l=Hi(u):d?(f=!1,l=Object(Bi.a)(c,!0)):h?(f=!1,l=ea(c,!0)):l=[]:$a(c)||pr(c)?(l=u,pr(u)?l=eu(u):kt(u)&&!Ct(u)||(l=Ea(c))):f=!1}f&&(a.set(c,l),o(l,c,n,i,a),a.delete(c)),Ya(t,r,l)}},nu=function t(e,r,n,o,i){e!==r&&bo(r,(function(a,u){if(i||(i=new Oe),kt(a))ru(e,r,u,n,t,o,i);else{var c=o?o(tu(e,u),a,u+"",e,r,i):void 0;void 0===c&&(c=a),Ya(e,u,c)}}),Li)},ou=Bo((function(t,e,r){nu(t,e,r)})),iu={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,
// 箭头长度
verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},au=function(t){var e=Ua(iu);return t&&(e=ou(e,t)),e};function uu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r(78),r(158);var cu=function(){function t(){var e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n={},(r="_events")in(e=this)?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}var e,r,n;return e=t,(r=[{key:"on",value:
/**
                   * 监听一个事件
                   * @param evt 事件名称
                   * @param callback
                   * @param once
                   */function(t,e,r){var n=this;return null==t||t.split(",").forEach((function(t){t=t.trim(),n._events[t]||(n._events[t]=[]),n._events[t].push({callback:e,once:!!r})})),this}
/**
               * 监听一个事件一次
               * @param evt
               * @param callback
               */},{key:"once",value:function(t,e){var r=this;null==t||t.split(",").forEach((function(t){return t=t.trim(),r.on(t,e,!0)}))}
/**
                 * 触发一个事件
                 * @param evt
                 * @param args
                 */},{key:"emit",value:function(t,e){var r=this;null==t||t.split(",").forEach((function(t){var n=r._events[t]||[],o=r._events["*"]||[],i=function(n){for(var o=n.length,i=0;i<o;i++)if(n[i]){var a=n[i],u=a.callback;a.once&&(n.splice(i,1),0===n.length&&delete r._events[t],o--,i--),u.apply(r,[e])}};i(n),i(o)}))}
/**
                 * 取消监听一个事件，或者一个channel
                 * @param evt
                 * @param callback
                 */},{key:"off",value:function(t,e){var r=this;return t||(this._events={}),t.split(",").forEach((function(t){if(e){for(var n=r._events[t]||[],o=n.length,i=0;i<o;i++)n[i].callback===e&&(n.splice(i,1),o--,i--);0===n.length&&delete r._events[t]}else delete r._events[t]})),this}
/* 当前所有的事件 */},{key:"getEvents",value:function(){return this._events}}])&&uu(e.prototype,r),n&&uu(e,n),t}();function su(t,e){return e*Math.round(t/e)||t}function lu(t,e){return t%e}function fu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return pu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pu(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var du,hu=function(t,e,r){var n=fu(t,2),o=n[0],i=n[1],a=fu(e,2),u=a[0],c=a[1],s=fu(r,2),l=s[0],f=s[1];return o>u&&o<l&&i>c&&i<f},yu=function(t,e){var r=!1;switch(e.multipleSelectKey){case"meta":r=t.metaKey;break;case"alt":r=t.altKey;break;case"shift":r=t.shiftKey;break;case"ctrl":r=t.ctrlKey;break;default:r=!1}return r};r(79),r(161),r(125),r(80),r(30),r(12),r(13),r(14),r(47);var vu=new Uint8Array(16);function gu(){if(!du&&!(du="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return du(vu)}for(var bu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,mu=function(t){return"string"==typeof t&&bu.test(t)},Ou=[],_u=0;_u<256;++_u)Ou.push((_u+256).toString(16).substr(1));var wu=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(Ou[t[e+0]]+Ou[t[e+1]]+Ou[t[e+2]]+Ou[t[e+3]]+"-"+Ou[t[e+4]]+Ou[t[e+5]]+"-"+Ou[t[e+6]]+Ou[t[e+7]]+"-"+Ou[t[e+8]]+Ou[t[e+9]]+"-"+Ou[t[e+10]]+Ou[t[e+11]]+Ou[t[e+12]]+Ou[t[e+13]]+Ou[t[e+14]]+Ou[t[e+15]]).toLowerCase();if(!mu(r))throw TypeError("Stringified UUID is invalid");return r},xu=function(t,e,r){var n=(t=t||{}).random||(t.rng||gu)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=n[o];return e}return wu(n)},Eu=function(){return xu()},ju=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.nodes.reduce((function(t,r){return t[r.id]=e+xu(),r.id=t[r.id],t}),{});return t.edges.forEach((function(t){t.id=e+xu(),t.sourceNodeId=r[t.sourceNodeId],t.targetNodeId=r[t.targetNodeId]})),t};r(104),r(203);var Su=function(t,e,r){var n=t.x,o=t.y;return(n-e.x)*(n-r.x)<=0&&(o-e.y)*(o-r.y)<=0};function Pu(t){return(Pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Au(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ku(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Au(Object(r),!0).forEach((function(e){Mu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Au(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Tu,Du,Nu,Cu,Ru,Iu,Lu,zu,Bu,Hu,Fu,Gu,Xu,Uu,Yu,Vu,Wu,Ku,Zu,qu,Ju=function(t){return t.anchors},Qu=function(t,e){for(var r,n=e.nodes,o=n.length-1;o>=0;o--){var i=n[o];if(nc(t,i)){var a=tc(t,i);if(a){var u={node:i,anchorIndex:a.index,anchor:a.anchor};r&&!$u(i,r.node,e)||(r=u)}}}return r},$u=function(t,e,r){return t.zIndex>e.zIndex||r.nodesMap[t.id].index>r.nodesMap[e.id].index},tc=function(t,e){for(var r,n=Ju(e),o=Number.MAX_SAFE_INTEGER,i=0;i<n.length;i++){var a=ec(t.x,t.y,n[i].x,n[i].y);a<o&&(o=a,r={index:i,anchor:ku(ku({},n[i]),{},{x:n[i].x,y:n[i].y,id:n[i].id})})}return r},ec=function(t,e,r,n){return Math.hypot(t-r,e-n)},rc=function(t,e){var r=!1,n=oc(e);return t.x>=n.minX-0&&t.x<=n.maxX+0&&t.y>=n.minY-0&&t.y<=n.maxY+0&&(r=!0),r},nc=function(t,e){var r=!1,n=oc(e);return t.x>=n.minX-5&&t.x<=n.maxX+5&&t.y>=n.minY-5&&t.y<=n.maxY+5&&(r=!0),r},oc=function(t){var e=t.x,r=t.y,n=t.width,o=t.height;return{minX:e-n/2,minY:r-o/2,maxX:e+n/2,maxY:r+o/2,x:e,y:r,width:n,height:o,centerX:e,centerY:r}},ic=function(t,e,r){var n,o=function(t){var e=t,r=e.x,n=e.y,o=e.width,i=e.height,a=e.radius;return[{x:r-o/2+a,y:n-i/2+a,r:a},{x:r+o/2-a,y:n-i/2+a,r:a},{x:r-o/2+a,y:n+i/2-a,r:a},{x:r+o/2-a,y:n+i/2-a,r:a}]}(r),i=Number.MAX_SAFE_INTEGER;return o.forEach((function(e){var r=ec(t.x,t.y,e.x,e.y);r<i&&(i=r,n=e)})),ac(t,e,n)},ac=function(t,e,r){var n,o=r,i=o.x,a=o.y,u=o.r;if(e===li.HORIZONTAL){var c=i-Math.sqrt(u*u-(t.y-a)*(t.y-a)),s=i+Math.sqrt(u*u-(t.y-a)*(t.y-a));n={x:Math.abs(c-t.x)<Math.abs(s-t.x)?c:s,y:t.y}}else if(e===li.VERTICAL){var l=a-Math.sqrt(u*u-(t.x-i)*(t.x-i)),f=a+Math.sqrt(u*u-(t.x-i)*(t.x-i)),p=Math.abs(l-t.y)<Math.abs(f-t.y)?l:f;n={x:t.x,y:p}}return n},uc=function(t,e){var r=e,n=!1,o=r.x-r.width/2+r.radius,i=r.x+r.width/2-r.radius,a=r.y-r.height/2+r.radius,u=r.y+r.height/2-r.radius,c=r.x,s=r.y,l=r.width,f=r.height;return t.y===s+f/2||t.y===s-f/2?n=t.x>o&&t.x<i:t.x!==c+l/2&&t.x!==c-l/2||(n=t.y>a&&t.y<u),n},cc=function(t,e,r){var n,o=r,i=o.x,a=o.y,u=o.rx,c=o.ry;if(e===li.HORIZONTAL){var s=i-Math.sqrt(u*u-(t.y-a)*(t.y-a)*u*u/(c*c)),l=i+Math.sqrt(u*u-(t.y-a)*(t.y-a)*u*u/(c*c));n={x:Math.abs(s-t.x)<Math.abs(l-t.x)?s:l,y:t.y}}else if(e===li.VERTICAL){var f=a-Math.sqrt(c*c-(t.x-i)*(t.x-i)*c*c/(u*u)),p=a+Math.sqrt(c*c-(t.x-i)*(t.x-i)*c*c/(u*u)),d=Math.abs(f-t.y)<Math.abs(p-t.y)?f:p;n={x:t.x,y:d}}return n},sc=function(t,e,r){for(var n,o=r.pointsPosition,i=Number.MAX_SAFE_INTEGER,a=[],u=0;u<o.length;u++)a.push({start:o[u],end:o[(u+1)%o.length]});return a.forEach((function(r){var o=r.start,a=r.end,u=o,c=a;o.x>a.x&&(u=a,c=o);var s={x:t.x,y:t.y};if(u.x===c.x&&e===li.HORIZONTAL&&(s={x:u.x,y:t.y}),u.y===c.y&&e===li.VERTICAL&&(s={x:t.x,y:u.y}),u.x!==c.x&&u.y!==c.y){var l=(c.y-u.y)/(c.x-u.x),f=(u.x*c.y-c.x*u.y)/(u.x-c.x);e===li.HORIZONTAL?s={x:(t.y-f)/l,y:t.y}:e===li.VERTICAL&&(s={x:t.x,y:l*t.x+f})}if(Su(s,o,a)){var p=ec(s.x,s.y,t.x,t.y);p<i&&(i=p,n=s)}})),n},lc=function(t,e,r,n){var o=t.x,i=t.y;return e.x>t.x?o=t.x+r/2:e.x<t.x&&(o=t.x-r/2),e.y>t.y?i=t.y+n/2:e.y<t.y&&(i=t.y-n/2),{x:o,y:i}},fc=function(t){var e=t.rows,r=t.style,n=t.rowsLength,o=t.className,i=document.createElement("div");i.style.fontSize=r.fontSize,i.style.width=r.width,i.className=o,i.style.lineHeight=r.lineHeight,i.style.padding=r.padding,r.fontFamily&&(i.style.fontFamily=r.fontFamily),n>1?e.forEach((function(t){var e=document.createElement("div");e.textContent=t,i.appendChild(e)})):i.textContent=e,document.body.appendChild(i);var a=i.clientHeight;return document.body.removeChild(i),a},pc=function(t){var e=t.rows,r=t.rowsLength,n=t.fontSize,o=0;return e&&e.forEach((function(t){var e=Rs(t);o=e>o?e:o})),{width:Math.ceil(o/2)*n+n/4,height:r*(n+2)+n/4}},dc=function(t){return"object"!==Pu(t)?{isAllPass:!!t,msg:t?"":"不允许连接"}:t},hc={node:!1,edge:!1},yc={node:!0,edge:!0},vc={stroke:"red",strokeDasharray:"10 200",className:"lf-edge-animation"},gc=function(t){try{return JSON.parse(JSON.stringify(t))}catch(e){return t}},bc=1e3,mc=999,Oc=function(){return++bc};function _c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_c(Object(r),!0).forEach((function(e){jc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xc(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Ec(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sc(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var Pc=(Tu=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),jc(this,"id",Eu()),xc(this,"type",Du,this),xc(this,"sourceNodeId",Nu,this),xc(this,"targetNodeId",Cu,this),xc(this,"startPoint",Ru,this),xc(this,"endPoint",Iu,this),xc(this,"text",Lu,this),xc(this,"properties",zu,this),xc(this,"points",Bu,this),xc(this,"pointsList",Hu,this),xc(this,"isSelected",Fu,this),xc(this,"isHovered",Gu,this),xc(this,"isHitable",Xu,this),xc(this,"draggable",Uu,this),xc(this,"visible",Yu,this),jc(this,"virtual",!1),xc(this,"isAnimation",Vu,this),jc(this,"graphModel",void 0),xc(this,"zIndex",Wu,this),jc(this,"BaseType",ai.EDGE),jc(this,"modelType",oi.EDGE),xc(this,"state",Ku,this),jc(this,"additionStateData",void 0),jc(this,"sourceAnchorId",""),jc(this,"targetAnchorId",""),jc(this,"menu",void 0),jc(this,"customTextPosition",!1),jc(this,"animationData",vc),xc(this,"style",Zu,this),xc(this,"arrowConfig",qu,this),this.graphModel=r,this.initEdgeData(e),this.setAttributes()}var e,r,n;return e=t,r=[{key:"initEdgeData",value:function(t){if(t.properties||(t.properties={}),!t.id){var e=this.graphModel.idGenerator,r=e&&e(t.type);r&&(t.id=r);var n=this.createId();n&&(t.id=n)}Fo(this,Hs(t)),this.graphModel.overlapMode===pi.INCREASE&&(this.zIndex=t.zIndex||Oc()),this.setAnchors(),this.initPoints(),this.formatText(t)}
/**
               * 设置model属性，每次properties发生变化会触发
               * @overridable 支持重写
               */},{key:"setAttributes",value:function(){}
/**
               * @overridable 支持重写，自定义此类型节点默认生成方式
               * @returns string
               */},{key:"createId",value:function(){return null}
/**
               * @overridable 支持重写
               * 获取当前节点样式
               * @returns 自定义边样式
               */},{key:"getEdgeStyle",value:function(){return wc(wc({},this.graphModel.theme.baseEdge),this.style)}
/**
               * @overridable 支持重写
               * 获取当前节点文本样式
               */},{key:"getTextStyle",value:function(){var t=this.graphModel.theme.edgeText;return Ua(t)}
/**
               * @overridable 支持重写
               * 获取当前边的动画样式
               * @returns 自定义边动画样式
               */},{key:"getAnimation",value:function(){var t=this.animationData;return Ua(t)}
/**
               * @overridable 支持重写
               * 获取当前边的动画样式
               * @returns 自定义边动画样式
               */},{key:"getEdgeAnimationStyle",value:function(){var t=this.graphModel.theme.edgeAnimation;return Ua(t)}
/**
               * @overridable 支持重写
               * 获取outline样式，重写可以定义此类型边outline样式， 默认使用主题样式
               * @returns 自定义outline样式
               */},{key:"getOutlineStyle",value:function(){var t=this.graphModel.theme.outline;return Ua(t)}
/**
               * @overridable 支持重新，重新自定义文本位置
               * @returns 文本位置
               */},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var t,e;return null===(t=this.graphModel)||void 0===t||null===(e=t.nodesMap[this.sourceNodeId])||void 0===e?void 0:e.model}},{key:"targetNode",get:function(){var t,e;return null===(t=this.graphModel)||void 0===t||null===(e=t.nodesMap[this.targetNodeId])||void 0===e?void 0:e.model}},{key:"textPosition",get:function(){return this.getTextPosition()}
/**
               * 内部方法，计算两个节点相连是起点位置
               */},{key:"getBeginAnchor",value:function(t,e){var r,n;return Ju(t).forEach((function(t){var o=Fs(t,e);n?o<n&&(n=o,r=t):(n=o,r=t)})),r}
/**
               * 内部方法，计算两个节点相连是终点位置
               */},{key:"getEndAnchor",value:function(t){var e,r,n=this;return Ju(t).forEach((function(t){var o=Fs(t,n.startPoint);r?o<r&&(r=o,e=t):(r=o,e=t)})),e}
/**
               * 获取当前边的properties
               */},{key:"getProperties",value:function(){return Object(o.I)(this.properties)}
/**
               * 获取被保存时返回的数据
               */},{key:"getData",value:function(){var t=this.text,e=t.x,r=t.y,n=t.value,i={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(o.I)(this.properties)};return n&&(i.text={x:e,y:r,value:n}),this.graphModel.overlapMode===pi.INCREASE&&(i.zIndex=this.zIndex),i}
/**
               * 用于在历史记录时获取节点数据，
               * 在某些情况下，如果希望某个属性变化不引起history的变化，
               * 可以重写此方法。
               */},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(t,e){this.properties[t]=gc(e),this.setAttributes()}},{key:"deleteProperty",value:function(t){delete this.properties[t],this.setAttributes()}},{key:"setProperties",value:function(t){this.properties=wc(wc({},this.properties),gc(t)),this.setAttributes()}},{key:"changeEdgeId",value:function(t){var e=this.arrowConfig,r=e.markerEnd,n=e.markerStart;n&&n==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(t,")")),r&&r==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(t,")")),this.id=t}
// 设置样式
},{key:"setStyle",value:function(t,e){this.style=wc(wc({},this.style),{},jc({},t,gc(e)))}},{key:"setStyles",value:function(t){this.style=wc(wc({},this.style),gc(t))}},{key:"updateStyles",value:function(t){this.style=wc({},gc(t))}
/**
               * 内部方法，处理初始化文本格式
               */},{key:"formatText",value:function(t){var e=this.textPosition,r=e.x,n=e.y;t.text&&"string"!=typeof t.text?"[object Object]"===Object.prototype.toString.call(t.text)&&(this.text={x:t.text.x||r,y:t.text.y||n,value:t.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:t.text||"",x:r,y:n,draggable:this.text.draggable,editable:this.text.editable}}
/**
               * 重置文本位置
               */},{key:"resetTextPosition",value:function(){var t=this.textPosition,e=t.x,r=t.y;this.text.x=e,this.text.y=r}
/**
               * 移动边上的文本
               */},{key:"moveText",value:function(t,e){if(this.text){var r=this.text,n=r.x,o=r.y,i=r.value,a=r.draggable,u=r.editable;this.text={value:i,draggable:a,x:n+t,y:o+e,editable:u}}}
/**
               * 设置文本位置和值
               */},{key:"setText",value:function(t){t&&Fo(this.text,t)}
/**
               * 更新文本的值
               */},{key:"updateText",value:function(t){this.text=wc(wc({},this.text),{},{value:t})}
/**
               * 内部方法，计算边的起点和终点和其对于的锚点Id
               */},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var t=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:t.x,y:t.y}),this.sourceAnchorId||(this.sourceAnchorId=t.id)}if(!this.targetAnchorId||!this.endPoint){var e=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:e.x,y:e.y}),this.targetAnchorId||(this.targetAnchorId=e.id)}}},{key:"setSelected",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isSelected=t}},{key:"setHovered",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isHovered=t}},{key:"setHitable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isHitable=t}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(t,e){this.state=t,this.additionStateData=e}},{key:"updateStartPoint",value:function(t){this.startPoint=t}},{key:"moveStartPoint",value:function(t,e){this.startPoint.x+=t,this.startPoint.y+=e}},{key:"updateEndPoint",value:function(t){this.endPoint=t}},{key:"moveEndPoint",value:function(t,e){this.endPoint.x+=t,this.endPoint.y+=e}},{key:"setZIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.zIndex=t}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(t){Fo(this,t)}
// 获取边调整的起点
},{key:"getAdjustStart",value:function(){return this.startPoint}
// 获取边调整的终点
},{key:"getAdjustEnd",value:function(){return this.endPoint}
// 起终点拖拽调整过程中，进行直线路径更新
},{key:"updateAfterAdjustStartAndEnd",value:function(t){var e=t.startPoint,r=t.endPoint;this.updateStartPoint({x:e.x,y:e.y}),this.updateEndPoint({x:r.x,y:r.y})}}],r&&Ec(e.prototype,r),n&&Ec(e,n),t}(),Du=Sc(Tu.prototype,"type",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Nu=Sc(Tu.prototype,"sourceNodeId",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Cu=Sc(Tu.prototype,"targetNodeId",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ru=Sc(Tu.prototype,"startPoint",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Iu=Sc(Tu.prototype,"endPoint",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lu=Sc(Tu.prototype,"text",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),zu=Sc(Tu.prototype,"properties",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Bu=Sc(Tu.prototype,"points",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Hu=Sc(Tu.prototype,"pointsList",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Fu=Sc(Tu.prototype,"isSelected",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gu=Sc(Tu.prototype,"isHovered",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xu=Sc(Tu.prototype,"isHitable",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Uu=Sc(Tu.prototype,"draggable",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Yu=Sc(Tu.prototype,"visible",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Vu=Sc(Tu.prototype,"isAnimation",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wu=Sc(Tu.prototype,"zIndex",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ku=Sc(Tu.prototype,"state",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Zu=Sc(Tu.prototype,"style",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),qu=Sc(Tu.prototype,"arrowConfig",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:""}}}),Sc(Tu.prototype,"sourceNode",[o.m],Object.getOwnPropertyDescriptor(Tu.prototype,"sourceNode"),Tu.prototype),Sc(Tu.prototype,"targetNode",[o.m],Object.getOwnPropertyDescriptor(Tu.prototype,"targetNode"),Tu.prototype),Sc(Tu.prototype,"textPosition",[o.m],Object.getOwnPropertyDescriptor(Tu.prototype,"textPosition"),Tu.prototype),Sc(Tu.prototype,"setProperty",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"setProperty"),Tu.prototype),Sc(Tu.prototype,"deleteProperty",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"deleteProperty"),Tu.prototype),Sc(Tu.prototype,"setProperties",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"setProperties"),Tu.prototype),Sc(Tu.prototype,"changeEdgeId",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"changeEdgeId"),Tu.prototype),Sc(Tu.prototype,"setStyle",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"setStyle"),Tu.prototype),Sc(Tu.prototype,"setStyles",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"setStyles"),Tu.prototype),Sc(Tu.prototype,"updateStyles",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"updateStyles"),Tu.prototype),Sc(Tu.prototype,"formatText",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"formatText"),Tu.prototype),Sc(Tu.prototype,"resetTextPosition",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"resetTextPosition"),Tu.prototype),Sc(Tu.prototype,"moveText",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"moveText"),Tu.prototype),Sc(Tu.prototype,"setText",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"setText"),Tu.prototype),Sc(Tu.prototype,"updateText",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"updateText"),Tu.prototype),Sc(Tu.prototype,"setAnchors",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"setAnchors"),Tu.prototype),Sc(Tu.prototype,"setSelected",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"setSelected"),Tu.prototype),Sc(Tu.prototype,"setHovered",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"setHovered"),Tu.prototype),Sc(Tu.prototype,"setHitable",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"setHitable"),Tu.prototype),Sc(Tu.prototype,"openEdgeAnimation",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"openEdgeAnimation"),Tu.prototype),Sc(Tu.prototype,"closeEdgeAnimation",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"closeEdgeAnimation"),Tu.prototype),Sc(Tu.prototype,"setElementState",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"setElementState"),Tu.prototype),Sc(Tu.prototype,"updateStartPoint",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"updateStartPoint"),Tu.prototype),Sc(Tu.prototype,"moveStartPoint",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"moveStartPoint"),Tu.prototype),Sc(Tu.prototype,"updateEndPoint",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"updateEndPoint"),Tu.prototype),Sc(Tu.prototype,"moveEndPoint",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"moveEndPoint"),Tu.prototype),Sc(Tu.prototype,"setZIndex",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"setZIndex"),Tu.prototype),Sc(Tu.prototype,"initPoints",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"initPoints"),Tu.prototype),Sc(Tu.prototype,"updateAttributes",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"updateAttributes"),Tu.prototype),Sc(Tu.prototype,"getAdjustStart",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"getAdjustStart"),Tu.prototype),Sc(Tu.prototype,"getAdjustEnd",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"getAdjustEnd"),Tu.prototype),Sc(Tu.prototype,"updateAfterAdjustStartAndEnd",[o.k],Object.getOwnPropertyDescriptor(Tu.prototype,"updateAfterAdjustStartAndEnd"),Tu.prototype),Tu),Ac=Pc;function kc(t){return(kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Tc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mc(Object(r),!0).forEach((function(e){zc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Dc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nc(){return Nc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Nc.apply(this,arguments)}function Cc(t,e){return(Cc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Lc(t);if(e){var o=Lc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===kc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ic(t)}(this,r)}}function Ic(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lc(t){return(Lc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Bc,Hc,Fc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cc(t,e)}(i,t);var e,r,n,o=Rc(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return zc(Ic(t=o.call.apply(o,[this].concat(r))),"modelType",oi.LINE_EDGE),t}return e=i,(r=[{key:"getEdgeStyle",value:function(){var t=this.graphModel.theme.line;return Tc(Tc({},Nc(Lc(i.prototype),"getEdgeStyle",this).call(this)),Ua(t))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Dc(e.prototype,r),n&&Dc(e,n),i}(Ac);function Gc(t){return(Gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Uc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Uc(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Yc(Object(r),!0).forEach((function(e){$c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kc(){return Kc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Kc.apply(this,arguments)}function Zc(t,e){return(Zc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Qc(t);if(e){var o=Qc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Gc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jc(t)}(this,r)}}function Jc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qc(t){return(Qc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ts(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var es=(Bc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zc(t,e)}(i,t);var e,r,n,o=qc(i);function i(){var t,e,r,n,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var u=arguments.length,c=new Array(u),s=0;s<u;s++)c[s]=arguments[s];return $c(Jc(t=o.call.apply(o,[this].concat(c))),"modelType",oi.POLYLINE_EDGE),$c(Jc(t),"draginngPointList",void 0),e=Jc(t),r="dbClickPosition",n=Hc,a=Jc(t),n&&Object.defineProperty(e,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(a):void 0}),t}return e=i,(r=[{key:"initEdgeData",value:function(t){this.offset=30,Kc(Qc(i.prototype),"initEdgeData",this).call(this,t)}},{key:"getEdgeStyle",value:function(){var t=this.graphModel.theme.polyline;return Vc(Vc({},Kc(Qc(i.prototype),"getEdgeStyle",this).call(this)),Ua(t))}},{key:"getTextPosition",value:function(){var t,e=null===(t=this.text)||void 0===t?void 0:t.value;if(this.dbClickPosition&&!e){var r=this.dbClickPosition;return{x:r.x,y:r.y}}var n=Ds(this.points),o=Xc(Ps(n),2),i=o[0],a=o[1];return{x:(i.x+a.x)/2,y:(i.y+a.y)/2}}
// 获取下一个锚点
},{key:"getAfterAnchor",value:function(t,e,r){var n,o;return r.forEach((function(r){var i;t===li.HORIZONTAL?i=Math.abs(e.y-r.y):t===li.VERTICAL&&(i=Math.abs(e.x-r.x)),(!o||o>i)&&(o=i,n=r)})),n}
/* 获取拖拽过程中产生的交点 */},{key:"getCorssPoint",value:function(t,e,r){var n;return t===li.HORIZONTAL?n={x:r.x,y:e.y}:t===li.VERTICAL&&(n={x:e.x,y:r.y}),n}
// 删除在图形内的过个交点
},{key:"removeCrossPoints",value:function(t,e,r){var n=r.map((function(t){return t}));if(1===t){var o=n[t],i=n[e],a=n[t-1];if(As(a,o,this.sourceNode)){if(ks(o,i,this.sourceNode)){var u=Ms(o,i,this.sourceNode);u&&(n[t]=u,n.splice(t-1,1),t--,e--)}}else this.sourceNode.anchors.forEach((function(e){(e.x===a.x&&e.x===o.x||e.y===a.y&&e.y===o.y)&&ec(e.x,e.y,o.x,o.y)<ec(a.x,a.y,o.x,o.y)&&(n[t-1]=e)}))}if(e===r.length-2){var c=n[t],s=n[e],l=n[e+1];if(As(s,l,this.targetNode)){if(ks(c,s,this.targetNode)){var f=Ms(c,s,this.targetNode);f&&(n[e]=f,n.splice(e+1,1))}}else this.targetNode.anchors.forEach((function(t){(t.x===l.x&&t.x===s.x||t.y===l.y&&t.y===s.y)&&ec(t.x,t.y,s.x,s.y)<ec(l.x,l.y,s.x,s.y)&&(n[e+1]=t)}))}return n}
// 获取在拖拽过程中可能产生的点
},{key:"getDragingPoints",value:function(t,e,r,n,o){var i=o.map((function(t){return t})),a=this.getAfterAnchor(t,r,n),u=this.getCorssPoint(t,r,a);return"start"===e?(i.unshift(u),i.unshift(a)):(i.push(u),i.push(a)),i}
// 更新相交点[起点，终点]，更加贴近图形, 未修改observable不作为action
},{key:"updateCrossPoints",value:function(t){var e=t.map((function(t){return t})),r=t[0],n=t[1],o=t[e.length-2],i=t[e.length-1],a=this.sourceNode,u=this.targetNode,c=a.modelType,s=u.modelType,l=Ts(r,n),f=e[0];switch(c){case oi.RECT_NODE:0!==a.radius&&(uc(r,a)||(f=ic(r,l,a)));break;case oi.CIRCLE_NODE:f=ac(r,l,a);break;case oi.ELLIPSE_NODE:f=cc(r,l,a);break;case oi.DIAMOND_NODE:case oi.POLYGON_NODE:f=sc(r,l,a)}e[0]=f;var p=Ts(o,i),d=e[e.length-1];switch(s){case oi.RECT_NODE:0!==u.radius&&(uc(i,u)||(d=ic(i,p,u)));break;case oi.CIRCLE_NODE:d=ac(i,p,u);break;case oi.ELLIPSE_NODE:d=cc(i,p,u);break;case oi.DIAMOND_NODE:case oi.POLYGON_NODE:d=sc(i,p,u)}return e[e.length-1]=d,e}},{key:"getData",value:function(){var t=Kc(Qc(i.prototype),"getData",this).call(this),e=this.pointsList.map((function(t){return{x:t.x,y:t.y}}));return Object.assign({},t,{pointsList:e})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map((function(t){return"".concat(t.x,",").concat(t.y)})).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var t=Ss({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=t,this.points=t.map((function(t){return"".concat(t.x,",").concat(t.y)})).join(" ")}},{key:"updateStartPoint",value:function(t){this.startPoint=t,this.updatePoints()}},{key:"moveStartPoint",value:function(t,e){this.startPoint.x+=t,this.startPoint.y+=e,this.updatePoints()}},{key:"updateEndPoint",value:function(t){this.endPoint=t,this.updatePoints()}},{key:"moveEndPoint",value:function(t,e){this.endPoint.x+=t,this.endPoint.y+=e,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draginngPointList=this.pointsList.map((function(t){return t}))}},{key:"dragAppendSimple",value:function(t,e){this.isDragging=!0;var r=t.start,n=t.end,o=t.startIndex,i=t.endIndex,a=t.direction,u=this.pointsList,c=u;return a===li.HORIZONTAL?(u[o]={x:r.x,y:r.y+e.y},u[i]={x:n.x,y:n.y+e.y},c=this.pointsList.map((function(t){return t}))):a===li.VERTICAL&&(u[o]={x:r.x+e.x,y:r.y},u[i]={x:n.x+e.x,y:n.y},c=this.pointsList.map((function(t){return t}))),this.updatePointsAfterDrag(c),this.draginngPointList=c,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},u[o]),end:Object.assign({},u[i]),startIndex:o,endIndex:i,direction:a}}},{key:"dragAppend",value:function(t,e){this.isDragging=!0;var r=t.start,n=t.end,o=t.startIndex,i=t.endIndex,a=t.direction,u=this.pointsList;if(a===li.HORIZONTAL){u[o]={x:r.x,y:r.y+e.y},u[i]={x:n.x,y:n.y+e.y};var c=this.pointsList.map((function(t){return t}));if(0!==o&&i!==this.pointsList.length-1&&(c=this.removeCrossPoints(o,i,c)),0===o){var s={x:r.x,y:r.y+e.y};if(!rc(s,this.sourceNode)){var l=this.sourceNode.anchors;c=this.getDragingPoints(a,"start",s,l,c)}}if(i===this.pointsList.length-1){var f={x:n.x,y:n.y+e.y};if(!rc(f,this.targetNode)){var p=this.targetNode.anchors;c=this.getDragingPoints(a,"end",f,p,c)}}this.updatePointsAfterDrag(c),this.draggingPointList=c}else if(a===li.VERTICAL){u[o]={x:r.x+e.x,y:r.y},u[i]={x:n.x+e.x,y:n.y};var d=this.pointsList.map((function(t){return t}));if(0!==o&&i!==this.pointsList.length-1&&(d=this.removeCrossPoints(o,i,d)),0===o){var h={x:r.x+e.x,y:r.y};if(!rc(h,this.sourceNode)){var y=this.sourceNode.anchors;d=this.getDragingPoints(a,"start",h,y,d)}}if(i===this.pointsList.length-1){var v={x:n.x+e.x,y:n.y};if(!rc(v,this.targetNode)){var g=this.targetNode.anchors;d=this.getDragingPoints(a,"end",v,g,d)}}this.updatePointsAfterDrag(d),this.draggingPointList=d}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},u[o]),end:Object.assign({},u[i]),startIndex:o,endIndex:i,direction:a}}},{key:"dragAppendEnd",value:function(){if(this.draginngPointList){var t=js(Ds(this.points));this.pointsList=t.map((function(t){return t})),this.draginngPointList=[];var e=t[0];this.startPoint=Object.assign({},e);var r=t[t.length-1];this.endPoint=Object.assign({},r)}this.isDragging=!1}
/* 拖拽之后个更新points，仅更新边，不更新pointsList，
                 appendWidth会依赖pointsList,更新pointsList会重新渲染appendWidth，从而导致不能继续拖拽
                 在拖拽结束后再进行pointsList的更新
              */},{key:"updatePointsAfterDrag",value:function(t){var e=this.updateCrossPoints(t);this.points=e.map((function(t){return"".concat(t.x,",").concat(t.y)})).join(" ")}
// 获取边调整的起点
},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}
// 获取边调整的终点
},{key:"getAdjustEnd",value:function(){var t=this.pointsList;return t[t.length-1]||this.endPoint}
// 起终点拖拽调整过程中，进行折线路径更新
},{key:"updateAfterAdjustStartAndEnd",value:function(t){var e=t.startPoint,r=t.endPoint,n=t.sourceNode,o=t.targetNode,i=Ss({x:e.x,y:e.y},{x:r.x,y:r.y},n,o,this.offset||0);this.pointsList=i,this.initPoints()}}])&&Wc(e.prototype,r),n&&Wc(e,n),i}(Ac),Hc=ts(Bc.prototype,"dbClickPosition",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ts(Bc.prototype,"initPoints",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"initPoints"),Bc.prototype),ts(Bc.prototype,"updatePoints",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"updatePoints"),Bc.prototype),ts(Bc.prototype,"updateStartPoint",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"updateStartPoint"),Bc.prototype),ts(Bc.prototype,"moveStartPoint",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"moveStartPoint"),Bc.prototype),ts(Bc.prototype,"updateEndPoint",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"updateEndPoint"),Bc.prototype),ts(Bc.prototype,"moveEndPoint",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"moveEndPoint"),Bc.prototype),ts(Bc.prototype,"dragAppendStart",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"dragAppendStart"),Bc.prototype),ts(Bc.prototype,"dragAppendSimple",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"dragAppendSimple"),Bc.prototype),ts(Bc.prototype,"dragAppend",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"dragAppend"),Bc.prototype),ts(Bc.prototype,"dragAppendEnd",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"dragAppendEnd"),Bc.prototype),ts(Bc.prototype,"updatePointsAfterDrag",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"updatePointsAfterDrag"),Bc.prototype),ts(Bc.prototype,"getAdjustStart",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"getAdjustStart"),Bc.prototype),ts(Bc.prototype,"getAdjustEnd",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"getAdjustEnd"),Bc.prototype),ts(Bc.prototype,"updateAfterAdjustStartAndEnd",[o.k],Object.getOwnPropertyDescriptor(Bc.prototype,"updateAfterAdjustStartAndEnd"),Bc.prototype),Bc),rs=function(t){var e=t.start,r=t.end,n=t.offset,o=t.verticalLength,i=t.type,a={leftX:0,leftY:0,rightX:0,rightY:0},u=Math.atan((r.y-e.y)/(r.x-e.x)),c=Math.atan(n/o),s=Math.sqrt(o*o+n*n);return"start"===i?r.x>=e.x?(a.leftX=e.x+s*Math.sin(u+c),a.leftY=e.y-s*Math.cos(u+c),a.rightX=e.x-s*Math.sin(u-c),a.rightY=e.y+s*Math.cos(u-c)):(a.leftX=e.x-s*Math.sin(u+c),a.leftY=e.y+s*Math.cos(u+c),a.rightX=e.x+s*Math.sin(u-c),a.rightY=e.y-s*Math.cos(u-c)):"end"===i&&(r.x>=e.x?(a.leftX=r.x+s*Math.sin(u-c),a.leftY=r.y-s*Math.cos(u-c),a.rightX=r.x-s*Math.sin(u+c),a.rightY=r.y+s*Math.cos(u+c)):(a.leftX=r.x-s*Math.sin(u-c),a.leftY=r.y+s*Math.cos(u-c),a.rightX=r.x+s*Math.sin(u+c),a.rightY=r.y-s*Math.cos(u+c))),a};function ns(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function os(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ns(Object(r),!0).forEach((function(e){is(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ns(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function is(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function as(t){return function(t){if(Array.isArray(t))return ls(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ss(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function us(t){return(us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cs(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||ss(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ss(t,e){if(t){if("string"==typeof t)return ls(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ls(t,e):void 0}}function ls(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var fs=function(t){var e=[],r={};return t.forEach((function(t){var e="".concat(t.x,"-").concat(t.y);t.id=e,r[e]=t})),Object.keys(r).forEach((function(t){e.push(r[t])})),e},ps=function(t,e){return 0===t.width&&0===t.height?t:{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}},ds=function(t,e){var r=function(t,e){var r=Math.abs(t.x-e.centerX),n=Math.abs(t.y-e.centerY);return r/e.width>n/e.height?li.HORIZONTAL:li.VERTICAL}(e,t);return r===li.HORIZONTAL?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},hs=function(t,e){var r=Math.min(t.minX,e.minX),n=Math.min(t.minY,e.minY),o=Math.max(t.maxX,e.maxX),i=Math.max(t.maxY,e.maxY);return{centerX:(r+o)/2,centerY:(n+i)/2,minX:r,minY:n,maxX:o,maxY:i,height:i-n,width:o-r}},ys=function(){var t=arguments.length>1?arguments[1]:void 0,e=[],r=[];(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){e.push(t.x),r.push(t.y)}));var n=Math.min.apply(Math,e),o=Math.max.apply(Math,e),i=Math.min.apply(Math,r),a=Math.max.apply(Math,r),u=o-n,c=a-i;return t&&(u+=t,c+=t),{centerX:(n+o)/2,centerY:(i+a)/2,maxX:o,maxY:a,minX:n,minY:i,x:(n+o)/2,y:(i+a)/2,height:c,width:u}},vs=function(t){var e=t.minX,r=t.minY,n=t.maxX,o=t.maxY;return[{x:e,y:r},{x:n,y:r},{x:n,y:o},{x:e,y:o}]},gs=function(t,e){var r=t.x,n=t.y;return r<e.minX||r>e.maxX||n<e.minY||n>e.maxY},bs=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},ms=function(t,e,r,n,o){return bs(t,e)+bs(t,r)+function(t,e){var r=0;return e.forEach((function(e){e&&(t.x===e.x&&(r+=-2),t.y===e.y&&(r+=-2))})),r}(t,[e,r,n,o])},Os=function t(e,r,n,o,i){i||(i=0),e.unshift(r[o]),n[o]&&n[o]!==o&&i<=100&&t(e,r,n,n[o],i+1)},_s=function(t,e,r,n){var o=e.x-t.x,i=e.y-t.y,a=n.x-r.x,u=n.y-r.y,c=(-i*(t.x-r.x)+o*(t.y-r.y))/(-a*i+o*u),s=(a*(t.y-r.y)-u*(t.x-r.x))/(-a*i+o*u);return c>=0&&c<=1&&s>=0&&s<=1},ws=function(t,e,r){if(0===r.width&&0===r.height)return!1;var n=cs(vs(r),4),o=n[0],i=n[1],a=n[2],u=n[3];return _s(t,e,o,i)||_s(t,e,o,u)||_s(t,e,i,a)||_s(t,e,a,u)},xs=function(t,e,r,n,o,i,a){var u=[],c=[e],s={},l={},f={};l[e.id]=0,f[e.id]=ms(e,r,e);var p={};t.forEach((function(t){p[t.id]=t}));for(var d=function(){var d,h,y,v=void 0,g=1/0;if(c.forEach((function(t){f[t.id]<g&&(g=f[t.id],v=t)})),v===r){var b=[];return Os(b,p,s,r.id),{v:b}}h=v,(y=(d=c).indexOf(h))>-1&&d.splice(y,1),u.push(v),function(t,e,r,n){var o=[];return t.forEach((function(t){t!==e&&(t.x!==e.x&&t.y!==e.y||ws(t,e,r)||ws(t,e,n)||o.push(t))})),fs(o)}(t,v,n,o).forEach((function(t){if(-1===u.indexOf(t)){-1===c.indexOf(t)&&c.push(t);var n=f[v.id]+bs(v,t);l[t.id]&&n>=l[t.id]||(s[t.id]=v.id,l[t.id]=n,f[t.id]=l[t.id]+ms(t,r,e,i,a))}}))};c.length;){var h=d();if("object"===us(h))return h.v}return[e,r]},Es=function(t){return oc(t)},js=function(t){for(var e=t,r=1;r<e.length-1;){var n=e[r-1],o=e[r],i=e[r+1];n.x===o.x&&o.x===i.x||n.y===o.y&&o.y===i.y?e.splice(r,1):r++}return e},Ss=function(t,e,r,n,o){var i,a,u=Es(r),c=Es(n),s=ps(u,o),l=ps(c,o),f=ds(s,t),p=ds(l,e);if(i=s,a=l,2*Math.abs(i.centerX-a.centerX)<i.width+a.width&&2*Math.abs(i.centerY-a.centerY)<i.height+a.height){var d=Ns(t,e,f,p);return[t,f].concat(as(d),[p,e])}var h=ys([f,p]),y=hs(s,h),v=hs(l,h),g=[];g=(g=g.concat(vs(y))).concat(vs(v));var b={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[h,y,v].forEach((function(t){g=g.concat(function(t,e){return function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]}(t,e.x).concat(function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]}(t,e.y))}(t,b).filter((function(t){return gs(t,s)&&gs(t,l)})))})),[{x:f.x,y:p.y},{x:p.x,y:f.y}].forEach((function(t){gs(t,s)&&gs(t,l)&&g.push(t)})),g.unshift(f),g.push(p),g=fs(g);var m=xs(g,f,p,u,c,t,e);return m.unshift(t),m.push(e),m.length>2&&(m=js(m)),fs(m)},Ps=function(t){var e;if(1===t.length)e=[t[0],t[0]];else if(t.length>=2){for(var r=t[0],n=t[1],o=ec(r.x,r.y,n.x,n.y),i=1;i<t.length-1;i++){var a=t[i],u=t[i+1],c=ec(a.x,a.y,u.x,u.y);c>o&&(o=c,r=a,n=u)}e=[r,n]}return e},As=function(t,e,r){var n=rc(t,r),o=rc(e,r);return n&&o},ks=function(t,e,r){var n=rc(t,r),o=rc(e,r);return!(n&&o)&&(n||o)},Ms=function(t,e,r){for(var n,o,i=oc(r),a=vs(i),u=0;u<a.length;u++)_s(t,e,a[u],a[(u+1)%a.length])&&(o=[a[u],a[(u+1)%a.length]]);return o&&(n=function(t,e,r,n){var o=(e.y-t.y)*(n.x-r.x)-(t.x-e.x)*(r.y-n.y);if(0===o)return!1;var i=((e.x-t.x)*(n.x-r.x)*(r.y-t.y)+(e.y-t.y)*(n.x-r.x)*t.x-(n.y-r.y)*(e.x-t.x)*r.x)/o,a=-((e.y-t.y)*(n.y-r.y)*(r.x-t.x)+(e.x-t.x)*(n.y-r.y)*t.y-(n.x-r.x)*(e.y-t.y)*r.y)/o;
// 交点在线段1上
return(i-t.x)*(i-e.x)<=0&&(a-t.y)*(a-e.y)<=0&&(i-r.x)*(i-n.x)<=0&&(a-r.y)*(a-n.y)<=0&&{x:i,y:a}}(t,e,o[0],o[1])),n},Ts=function(t,e){var r;return t.x===e.x?r=li.VERTICAL:t.y===e.y&&(r=li.HORIZONTAL),r},Ds=function(t){var e=t.split(" "),r=[];return e&&e.forEach((function(t){var e=cs(t.split(","),2),n=e[0],o=e[1];r.push({x:Number(n),y:Number(o)})})),r},Ns=function(t,e,r,n){var o=[];if(Ts(t,r)===Ts(e,n))t.y===r.y?(o.push({x:r.x,y:(r.y+n.y)/2}),o.push({x:n.x,y:(r.y+n.y)/2})):(o.push({x:(r.x+n.x)/2,y:r.y}),o.push({x:(r.x+n.x)/2,y:n.y}));else{var i={x:r.x,y:n.y},a=Su(i,t,r),u=Su(i,e,n);if(a||u)i={x:n.x,y:r.y};else{var c=Cs(i,t,r),s=Cs(i,e,n);c&&s&&(i={x:n.x,y:r.y})}o.push(i)}return o},Cs=function(t,e,r){return t.x===e.x&&t.x===r.x||t.y===e.y&&t.y===r.y},Rs=function(t){if(!t)return 0;for(var e=0,r=0;r<t.length;r++){var n=t.charCodeAt(r);t.match(/[A-Z]/)?e+=1.5:e+=n>=1&&n<=126||n>=65376&&n<=65439?1:2}return e},Is=function(t){var e=t.start,r=t.end,n=t.sourceNode,o=t.targetNode,i=t.offset,a=oc(n),u=oc(o),c=ps(a,i),s=ps(u,i);return{sNext:ds(c,e),ePre:ds(s,r)}},Ls=function(t){var e=t.replace(/M/g,"").replace(/C/g,",").split(",");return[zs(e[0]),zs(e[1]),zs(e[2]),zs(e[3])]},zs=function(t){var e=cs(t.replace(/(^\s*)/g,"").split(" "),2);return{x:+e[0],y:+e[1]}},Bs=function(t,e){for(var r,n=t.x,o=t.y,i=Ds(e),a=Number.MAX_SAFE_INTEGER,u=[],c=0;c<i.length;c++)u.push({start:i[c],end:i[(c+1)%i.length]});if(u.forEach((function(t){var e=t.start,i=t.end;if(e.x===i.x){var u={x:e.x,y:o};if(Su(u,e,i)){var c=Math.abs(e.x-n);c<a&&(a=c,r=u)}}else if(e.y===i.y){var s={x:n,y:e.y};if(Su(s,e,i)){var l=Math.abs(e.y-o);l<a&&(a=l,r=s)}}})),!r){var s=u[0],l=s.start,f=s.end;r={x:l.x+(f.x-l.x)/2,y:l.y+(f.y-l.y)/2}}return r},Hs=function(t){return Zo(t,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},Fs=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};r(204);var Gs=function(){};function Xs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Us(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ys=window.document,Vs=0;function Ws(t){var e=t.onDragStart,r=void 0===e?Gs:e,n=t.onDraging,o=void 0===n?Gs:n,i=t.onDragEnd,a=void 0===i?Gs:i,u=t.step,c=void 0===u?1:u,s=t.isStopPropagation,l=void 0===s||s,f=!1,p=!1,d=0,h=0,y=0,v=0;function g(t){if(l&&t.stopPropagation(),p&&(f=!0,y+=t.clientX-d,v+=t.clientY-h,d=t.clientX,h=t.clientY,Math.abs(y)>c||Math.abs(v)>c)){var e=y%c,r=v%c,n=y-e,i=v-r;y=e,v=r,o({deltaX:n,deltaY:i,event:t})}}function b(t){if(l&&t.stopPropagation(),p=!1,Ys.removeEventListener("mousemove",g,!1),Ys.removeEventListener("mouseup",b,!1),f)return f=!1,a({event:t})}return function(t){if(t.button===Vs)return l&&t.stopPropagation(),p=!0,d=t.clientX,h=t.clientY,Ys.addEventListener("mousemove",g,!1),Ys.addEventListener("mouseup",b,!1),r({event:t})}}var Ks,Zs,qs,Js,Qs,$s,tl,el,rl,nl,ol,il,al,ul=function(){function t(e){var r=this,n=e.onDragStart,o=void 0===n?Gs:n,i=e.onDraging,a=void 0===i?Gs:i,u=e.onDragEnd,c=void 0===u?Gs:u,s=e.eventType,l=void 0===s?"":s,f=e.eventCenter,p=void 0===f?null:f,d=e.step,h=void 0===d?1:d,y=e.isStopPropagation,v=void 0===y||y,g=e.model,b=void 0===g?null:g;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Us(this,"onDragStart",void 0),Us(this,"onDraging",void 0),Us(this,"onDragEnd",void 0),Us(this,"step",void 0),Us(this,"isStopPropagation",void 0),Us(this,"isDraging",!1),Us(this,"isStartDraging",!1),Us(this,"startX",0),Us(this,"startY",0),Us(this,"sumDeltaX",0),Us(this,"sumDeltaY",0),Us(this,"eventType",void 0),Us(this,"eventCenter",void 0),Us(this,"model",void 0),Us(this,"startTime",void 0),Us(this,"isGrag",void 0),Us(this,"handleMouseDown",(function(t){var e,n;if(t.button===Vs){r.isStopPropagation&&t.stopPropagation(),r.isStartDraging=!0,r.startX=t.clientX,r.startY=t.clientY,Ys.addEventListener("mousemove",r.handleMouseMove,!1),Ys.addEventListener("mouseup",r.handleMouseUp,!1);var o=null===(e=r.model)||void 0===e?void 0:e.getData();null===(n=r.eventCenter)||void 0===n||n.emit(ci["".concat(r.eventType,"_MOUSEDOWN")],{e:t,data:o}),r.startTime=(new Date).getTime()}})),Us(this,"handleMouseMove",(function(t){if(r.isStopPropagation&&t.stopPropagation(),r.isStartDraging&&(r.sumDeltaX+=t.clientX-r.startX,r.sumDeltaY+=t.clientY-r.startY,r.startX=t.clientX,r.startY=t.clientY,r.step<=1||Math.abs(r.sumDeltaX)>r.step||Math.abs(r.sumDeltaY)>r.step)){var e,n=r.sumDeltaX%r.step,o=r.sumDeltaY%r.step,i=r.sumDeltaX-n,a=r.sumDeltaY-o;r.sumDeltaX=n,r.sumDeltaY=o;var u,c=null===(e=r.model)||void 0===e?void 0:e.getData();r.isDraging||(null===(u=r.eventCenter)||void 0===u||u.emit(ci["".concat(r.eventType,"_DRAGSTART")],{e:t,data:c}),r.onDragStart({event:t})),r.isDraging=!0,Promise.resolve().then((function(){var e,n;r.onDraging({deltaX:i,deltaY:a,event:t}),null===(e=r.eventCenter)||void 0===e||e.emit(ci["".concat(r.eventType,"_MOUSEMOVE")],{e:t,data:c}),null===(n=r.eventCenter)||void 0===n||n.emit(ci["".concat(r.eventType,"_DRAG")],{e:t,data:c})}))}})),Us(this,"handleMouseUp",(function(t){r.isStartDraging=!1,r.isStopPropagation&&t.stopPropagation(),Promise.resolve().then((function(){var e,n,o;Ys.removeEventListener("mousemove",r.handleMouseMove,!1),Ys.removeEventListener("mouseup",r.handleMouseUp,!1);var i=null===(e=r.model)||void 0===e?void 0:e.getData();null===(n=r.eventCenter)||void 0===n||n.emit(ci["".concat(r.eventType,"_MOUSEUP")],{e:t,data:i}),r.isDraging&&(r.isDraging=!1,r.onDragEnd({event:t}),null===(o=r.eventCenter)||void 0===o||o.emit(ci["".concat(r.eventType,"_DROP")],{e:t,data:i}))}))})),Us(this,"cancelDrag",(function(){Ys.removeEventListener("mousemove",r.handleMouseMove,!1),Ys.removeEventListener("mouseup",r.handleMouseUp,!1),r.onDragEnd({event:null}),r.isDraging=!1})),this.onDragStart=o,this.onDraging=a,this.onDragEnd=c,this.step=h,this.isStopPropagation=v,this.eventType=l,this.eventCenter=p,this.model=b}var e,r,n;return e=t,(r=[{key:"setStep",value:function(t){this.step=t}}])&&Xs(e.prototype,r),n&&Xs(e,n),t}(),cl=function(t){return t&&"boolean"!=typeof t?ou(Ua(hc),t):Ua(!0===t?yc:hc)};function sl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ll(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sl(Object(r),!0).forEach((function(e){bl(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||dl(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pl(t){return function(t){if(Array.isArray(t))return hl(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||dl(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dl(t,e){if(t){if("string"==typeof t)return hl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hl(t,e):void 0}}function hl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yl(t){return(yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vl(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function gl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ml(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var Ol,_l=200,wl=(Ks=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),bl(this,"rootEl",void 0),vl(this,"width",Zs,this),vl(this,"height",qs,this),bl(this,"theme",void 0),bl(this,"eventCenter",void 0),bl(this,"modelMap",new Map),bl(this,"topElement",void 0),bl(this,"animation",void 0),bl(this,"idGenerator",void 0),bl(this,"edgeGenerator",void 0),bl(this,"nodeMoveRules",[]),vl(this,"edgeType",Js,this),vl(this,"nodes",Qs,this),vl(this,"edges",$s,this),vl(this,"overlapMode",tl,this),vl(this,"background",el,this),vl(this,"transformModel",rl,this),vl(this,"editConfigModel",nl,this),vl(this,"gridSize",ol,this),vl(this,"partial",il,this),vl(this,"fakerNode",al,this);var r,n,o=e.container,i=e.background,a=void 0===i?{}:i,u=e.grid,c=e.idGenerator,s=e.edgeGenerator,l=e.animation;this.background=a,"object"===yl(u)&&(this.gridSize=u.size),this.rootEl=o,this.editConfigModel=new Ei(e),this.eventCenter=new cu,this.transformModel=new Ti(this.eventCenter),this.theme=au(e.style),this.edgeType=e.edgeType||"polyline",this.width=e.width,this.height=e.height,this.animation=cl(l),this.partial=e.partial,this.overlapMode=e.overlapMode||0,this.idGenerator=c,this.edgeGenerator=(r=this,"function"!=typeof(n=s)?function(t,e,n){return Object.assign({type:r.edgeType},n)}:function(t,e,o){var i=n(t,e,o);return i?"string"==typeof i?Object.assign({},o,{type:i}):Object.assign({type:i},o):{type:r.edgeType}}),this.width=e.width||this.rootEl.getBoundingClientRect().width,this.height=e.height||this.rootEl.getBoundingClientRect().height}var e,r,n;return e=t,r=[{key:"nodesMap",get:function(){return this.nodes.reduce((function(t,e,r){return t[e.id]={index:r,model:e},t}),{})}},{key:"edgesMap",get:function(){return this.edges.reduce((function(t,e,r){return t[e.id]={index:r,model:e},t}),{})}},{key:"modelsMap",get:function(){return[].concat(pl(this.nodes),pl(this.edges)).reduce((function(t,e){return t[e.id]=e,t}),{})}
/**
               * 基于zIndex对元素进行排序。
               * todo: 性能优化
               */},{key:"sortElements",get:function(){var t=[];this.nodes.forEach((function(e){return t.push(e)})),this.edges.forEach((function(e){return t.push(e)})),t=t.sort((function(t,e){return t.zIndex-e.zIndex}));for(var e=[],r=[-200,-200],n=[this.width+_l,this.height+_l],o=0;o<t.length;o++){var i=t[o];i.visible&&(!this.partial||i.isSelected||this.isElementInArea(i,r,n,!1,!1))&&e.push(i)}return e}
/**
               * 当前编辑的元素，低频操作，先循环找。
               */},{key:"textEditElement",get:function(){var t=this.nodes.find((function(t){return t.state===ti.TEXT_EDIT})),e=this.edges.find((function(t){return t.state===ti.TEXT_EDIT}));return t||e}
/**
               * 当前画布所有被选中的元素
               */},{key:"selectElements",get:function(){var t=new Map;return this.nodes.forEach((function(e){e.isSelected&&t.set(e.id,e)})),this.edges.forEach((function(e){e.isSelected&&t.set(e.id,e)})),t}
/**
               * 获取指定区域内的所有元素
               * @param leftTopPoint 表示区域左上角的点
               * @param rightBottomPoint 表示区域右下角的点
               * @param wholeEdge 是否要整个边都在区域内部
               * @param wholeNode 是否要整个节点都在区域内部
               * @param ignoreHideElement 是否忽略隐藏的节点
               */},{key:"getAreaElement",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=[],a=[];this.nodes.forEach((function(t){return a.push(t)})),this.edges.forEach((function(t){return a.push(t)}));for(var u=0;u<a.length;u++){var c=a[u];o&&!c.visible||!this.isElementInArea(c,t,e,r,n)||i.push(c)}return i}
/**
               * 获取指定类型元素对应的Model
               */},{key:"getModel",value:function(t){return this.modelMap.get(t)}
/**
               * 基于Id获取节点的model
               */},{key:"getNodeModelById",value:function(t){var e;return this.fakerNode&&t===this.fakerNode.id?this.fakerNode:null===(e=this.nodesMap[t])||void 0===e?void 0:e.model}
/**
               * 因为流程图所在的位置可以是页面任何地方
               * 当内部事件需要获取触发事件时，其相对于画布左上角的位置
               * 需要事件触发位置减去画布相对于client的位置
               */},{key:"getPointByClient",value:function(t){var e=t.x,r=t.y,n=this.rootEl.getBoundingClientRect(),o={x:e-n.left,y:r-n.top},i=fl(this.transformModel.HtmlPointToCanvasPoint([o.x,o.y]),2);return{domOverlayPosition:o,canvasOverlayPosition:{x:i[0],y:i[1]}}}
/**
               * 判断一个元素是否在指定矩形区域内。
               * @param element 节点或者边
               * @param lt 左上角点
               * @param rb 右下角点
               * @param wholeEdge 边的起点和终点都在区域内才算
               * @param wholeNode 节点的box都在区域内才算
               */},{key:"isElementInArea",value:function(t,e,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(t.BaseType===ai.NODE){for(var i=oc(t),a=i.minX,u=i.minY,c=i.maxX,s=i.maxY,l=[{x:a,y:u},{x:c,y:u},{x:c,y:s},{x:a,y:s}],f=o,p=0;p<l.length;p++){var d=l[p],h=d.x,y=d.y,v=fl(this.transformModel.CanvasPointToHtmlPoint([h,y]),2);if(h=v[0],y=v[1],hu([h,y],e,r)!==o){f=!o;break}}return f}if(t.BaseType===ai.EDGE){var g=t,b=g.startPoint,m=g.endPoint,O=this.transformModel.CanvasPointToHtmlPoint([b.x,b.y]),_=this.transformModel.CanvasPointToHtmlPoint([m.x,m.y]),w=hu(O,e,r),x=hu(_,e,r);return n?w&&x:w||x}return!1}
/**
               * 使用新的数据重新设置整个画布的元素
               * 注意：将会清除画布上所有已有的节点和边
               * @param { object } graphData 图数据
               */},{key:"graphDataToModel",value:function(t){var e=this;this.width&&this.height||this.resize(),this.nodes=_o(t.nodes,(function(t){var r=e.getModel(t.type);if(!r)throw new Error("找不到".concat(t.type,"对应的节点。"));var n=t.x,o=t.y;return n&&o&&(t.x=su(n,e.gridSize),t.y=su(o,e.gridSize),"object"===yl(t.text)&&(t.text.x-=lu(n,e.gridSize),t.text.y-=lu(o,e.gridSize))),new r(t,e)})),this.edges=_o(t.edges,(function(t){var r=e.getModel(t.type);if(!r)throw new Error("找不到".concat(t.type,"对应的边。"));return new r(t,e)}))}
/**
               * 获取画布数据
               */},{key:"modelToGraphData",value:function(){var t=[];this.edges.forEach((function(e){var r=e.getData();r&&!e.virtual&&t.push(r)}));var e=[];return this.nodes.forEach((function(t){var r=t.getData();r&&!t.virtual&&e.push(r)})),{nodes:e,edges:t}}
// 用户history记录的数据，忽略拖拽过程中的数据变更
},{key:"modelToHistoryData",value:function(){for(var t=!1,e=[],r=0;r<this.nodes.length;r++){var n=this.nodes[r];if(n.isDragging){t=!0;break}e.push(n.getHistoryData())}if(t)return!1;for(var o=!1,i=[],a=0;a<this.edges.length;a++){var u=this.edges[a];if(u.isDragging){o=!0;break}i.push(u.getHistoryData())}return!o&&{nodes:e,edges:i}}
/**
               * 获取边的model
               */},{key:"getEdgeModelById",value:function(t){var e;return null===(e=this.edgesMap[t])||void 0===e?void 0:e.model}
/**
               * 获取节点或者边的model
               */},{key:"getElement",value:function(t){return this.modelsMap[t]}
/**
               * 所有节点上所有边的model
               */},{key:"getNodeEdges",value:function(t){for(var e=[],r=0;r<this.edges.length;r++){var n=this.edges[r],o=this.edges[r].sourceNodeId===t,i=this.edges[r].targetNodeId===t;(o||i)&&e.push(n)}return e}
/**
               * 获取选中的元素数据
               * @param isIgnoreCheck 是否包括sourceNode和targetNode没有被选中的边,默认包括。
               * 复制的时候不能包括此类边, 因为复制的时候不允许悬空的边
               */},{key:"getSelectElements",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.selectElements,r={nodes:[],edges:[]};return e.forEach((function(n){if(n.BaseType===ai.NODE&&r.nodes.push(n.getData()),n.BaseType===ai.EDGE){var o=n.getData(),i=e.get(o.sourceNodeId)&&e.get(o.targetNodeId);(t||i)&&r.edges.push(o)}})),r}
/**
               * 修改对应元素 model 中的属性
               * 注意：此方法慎用，除非您对logicflow内部有足够的了解。
               * 大多数情况下，请使用setProperties、updateText、changeNodeId等方法。
               * 例如直接使用此方法修改节点的id,那么就是会导致连接到此节点的边的sourceNodeId出现找不到的情况。
               * @param {string} id 元素id
               * @param {object} attributes 需要更新的属性
               */},{key:"updateAttributes",value:function(t,e){this.getElement(t).updateAttributes(e)}
/**
               * 修改节点的id， 如果不传新的id，会内部自动创建一个。
               * @param { string } oldId 将要被修改的id
               * @param { string } newId 可选，修改后的id
               * @returns 修改后的节点id, 如果传入的oldId不存在，返回空字符串
               */},{key:"changeNodeId",value:function(t,e){return e||(e=Eu()),this.nodesMap[e]?(console.warn("当前流程图已存在节点".concat(e,", 修改失败")),""):this.nodesMap[t]?(this.edges.forEach((function(r){r.sourceNodeId===t&&(r.sourceNodeId=e),r.targetNodeId===t&&(r.targetNodeId=e)})),this.nodesMap[t].model.id=e,e):(console.warn("当前流程图找不到节点".concat(e,", 修改失败")),"")}
/**
               * 修改边的id， 如果不传新的id，会内部自动创建一个。
               * @param { string } oldId 将要被修改的id
               * @param { string } newId 可选，修改后的id
               * @returns 修改后的节点id, 如果传入的oldId不存在，返回空字符串
               */},{key:"changeEdgeId",value:function(t,e){return e||(e=Eu()),this.edgesMap[e]?(console.warn("当前流程图已存在边: ".concat(e,", 修改失败")),""):this.edgesMap[t]?(this.edges.forEach((function(r){r.id===t&&r.changeEdgeId(e)})),e):(console.warn("当前流程图找不到边: ".concat(e,", 修改失败")),"")}
/**
               * 内部保留方法，请勿直接使用
               */},{key:"setFakerNode",value:function(t){this.fakerNode=t}
/**
               * 内部保留方法，请勿直接使用
               */},{key:"removeFakerNode",value:function(){this.fakerNode=null}
/**
               * 设置指定类型的Model,请勿直接使用
               */},{key:"setModel",value:function(t,e){return this.modelMap.set(t,e)}
/**
               * 将某个元素放置到顶部。
               * 如果堆叠模式为默认模式，则将原置顶元素重新恢复原有层级。
               * 如果堆叠模式为递增模式，则将需指定元素zIndex设置为当前最大zIndex + 1。
               * @see todo link 堆叠模式
               * @param id 元素Id
               */},{key:"toFront",value:function(t){var e,r,n,o=(null===(e=this.nodesMap[t])||void 0===e?void 0:e.model)||(null===(r=this.edgesMap[t])||void 0===r?void 0:r.model);o&&(this.overlapMode===pi.DEFAULT&&(null===(n=this.topElement)||void 0===n||n.setZIndex(),o.setZIndex(9999),this.topElement=o),this.overlapMode===pi.INCREASE&&this.setElementZIndex(t,"top"))}
/**
               * 设置元素的zIndex.
               * 注意：默认堆叠模式下，不建议使用此方法。
               * @see todo link 堆叠模式
               * @param id 元素id
               * @param zIndex zIndex的值，可以传数字，也支持传入'top' 和 'bottom'
               */},{key:"setElementZIndex",value:function(t,e){var r,n,o,i=(null===(r=this.nodesMap[t])||void 0===r?void 0:r.model)||(null===(n=this.edgesMap[t])||void 0===n?void 0:n.model);i&&("number"==typeof e&&(o=e),"top"===e&&(o=Oc()),"bottom"===e&&(o=--mc),i.setZIndex(o))}
/**
               * 删除节点
               * @param {string} nodeId 节点Id
               */},{key:"deleteNode",value:function(t){var e=this.nodesMap[t].model.getData();this.deleteEdgeBySource(t),this.deleteEdgeByTarget(t),this.nodes.splice(this.nodesMap[t].index,1),this.eventCenter.emit(ci.NODE_DELETE,{data:e})}
/**
               * 添加节点
               * @param nodeConfig 节点配置
               */},{key:"addNode",value:function(t){var e=gc(t);e.id&&this.nodesMap[t.id]&&delete e.id;var r=this.getModel(e.type);if(!r)throw new Error("找不到".concat(e.type,"对应的节点，请确认是否已注册此类型节点。"));e.x=su(e.x,this.gridSize),e.y=su(e.y,this.gridSize);var n=new r(e,this);this.nodes.push(n);var o=n.getData();return this.eventCenter.emit(ci.NODE_ADD,{data:o}),n}
/**
              * 克隆节点
              * @param nodeId 节点Id
              */},{key:"cloneNode",value:function(t){var e=this.getNodeModelById(t),r=e.getData();r.x+=30,r.y+=30,delete r.id,r.text&&(r.text.x+=30,r.text.y+=30);var n=this.addNode(r);return n.setSelected(!0),e.setSelected(!1),n.getData()}
/**
               * 移动节点-相对位置
               * @param nodeModel 节点Id
               * @param deltaX X轴移动距离
               * @param deltaY Y轴移动距离
               * @param isignoreRule 是否忽略移动规则限制
               */},{key:"moveNode",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.nodesMap[t];if(o){var i=fl(o.model.getMoveDistance(e,r,n),2);e=i[0],r=i[1],this.moveEdge(t,e,r)}else console.warn("不存在id为".concat(t,"的节点"))}
/**
               * 移动节点-绝对位置
               * @param nodeModel 节点Id
               * @param x X轴目标位置
               * @param y Y轴目标位置
               */},{key:"moveNode2Coordinate",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.nodesMap[t];if(o){var i=o.model,a=e-i.x,u=r-i.y;this.moveNode(t,a,u,n)}else console.warn("不存在id为".concat(t,"的节点"))}
/**
               * 显示节点、连线文本编辑框
               * @param elementId 节点id
               */},{key:"editText",value:function(t){this.setElementStateById(t,ti.TEXT_EDIT)}
/**
               * 给两个节点之间添加一条边
               * @param {object} edgeConfig
               */},{key:"addEdge",value:function(t){var e=gc(t),r=e.type;r||(r=this.edgeType),e.id&&this.edgesMap[e.id]&&delete e.id;var n=this.getModel(r);if(!n)throw new Error("找不到".concat(r,"对应的边，请确认是否已注册此类型边。"));var o=new n(ll(ll({},e),{},{type:r}),this),i=o.getData();return this.edges.push(o),this.eventCenter.emit(ci.EDGE_ADD,{data:i}),o}
/**
               * 移动边，内部方法，请勿直接使用
               */},{key:"moveEdge",value:function(t,e,r){for(var n=0;n<this.edges.length;n++){var o,i=this.edges[n],a=i.textPosition,u=a.x,c=a.y,s=this.edges[n].sourceNodeId===t,l=this.edges[n].targetNodeId===t;if(s&&i.moveStartPoint(e,r),l&&i.moveEndPoint(e,r),s||l)if(!0===i.customTextPosition)i.resetTextPosition();else if(i.modelType===oi.POLYLINE_EDGE&&null!==(o=i.text)&&void 0!==o&&o.value){var f=i.text,p=Bs(f,i.points);i.moveText(p.x-f.x,p.y-f.y)}else{var d=i.textPosition,h=d.x,y=d.y;i.moveText(h-u,y-c)}}}
/**
               * 删除两节点之间的边
               * @param sourceNodeId 边的起始节点
               * @param targetNodeId 边的目的节点
               */},{key:"deleteEdgeBySourceAndTarget",value:function(t,e){for(var r=0;r<this.edges.length;r++)if(this.edges[r].sourceNodeId===t&&this.edges[r].targetNodeId===e){var n=this.edges[r].getData();this.edges.splice(r,1),r--,this.eventCenter.emit(ci.EDGE_DELETE,{data:n})}}
/**
               * 基于边Id删除边
               */},{key:"deleteEdgeById",value:function(t){if(this.edgesMap[t]){var e=this.edgesMap[t].index,r=this.edgesMap[t].model.getData();this.edges.splice(e,1),this.eventCenter.emit(ci.EDGE_DELETE,{data:r})}}
/**
               * 删除以节点Id为起点的所有边
               */},{key:"deleteEdgeBySource",value:function(t){for(var e=0;e<this.edges.length;e++)if(this.edges[e].sourceNodeId===t){var r=this.edges[e].getData();this.edges.splice(e,1),e--,this.eventCenter.emit(ci.EDGE_DELETE,{data:r})}}
/**
               * 删除以节点Id为终点的所有边
               */},{key:"deleteEdgeByTarget",value:function(t){for(var e=0;e<this.edges.length;e++)if(this.edges[e].targetNodeId===t){var r=this.edges[e].getData();this.edges.splice(e,1),e--,this.eventCenter.emit(ci.EDGE_DELETE,{data:r})}}
/**
               * 设置元素的状态，在需要保证整个画布上所有的元素只有一个元素拥有此状态时可以调用此方法。
               * 例如文本编辑、菜单显示等。
               * additionStateData: 传递的额外值，如菜单显示的时候，需要传递期望菜单显示的位置。
               */},{key:"setElementStateById",value:function(t,e,r){this.nodes.forEach((function(n){n.id===t?n.setElementState(e,r):n.setElementState(ti.DEFAULT)})),this.edges.forEach((function(n){n.id===t?n.setElementState(e,r):n.setElementState(ti.DEFAULT)}))}
/**
               * 更新节点或边的文案
               * @param id 节点或者边id
               * @param value 文案内容
               */},{key:"updateText",value:function(t,e){this.nodes.forEach((function(r){r.id===t&&r.updateText(e)})),this.edges.forEach((function(r){r.id===t&&r.updateText(e)}))}
/**
               * 选中节点
               * @param id 节点Id
               * @param multiple 是否为多选，如果为多选，则不去掉原有已选择节点的选中状态
               */},{key:"selectNodeById",value:function(t){var e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.clearSelectElements();var r=null===(e=this.nodesMap[t])||void 0===e?void 0:e.model;null==r||r.setSelected(!0)}
/**
               * 选中边
               * @param id 边Id
               * @param multiple 是否为多选，如果为多选，则不去掉原已选中边的状态
               */},{key:"selectEdgeById",value:function(t){var e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.clearSelectElements();var r=null===(e=this.edgesMap[t])||void 0===e?void 0:e.model;null==r||r.setSelected(!0)}
/**
               * 将图形选中
               * @param id 选择元素ID
               * @param multiple 是否允许多选，如果为true，不会将上一个选中的元素重置
               */},{key:"selectElementById",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.clearSelectElements();var e=this.getElement(t);null==e||e.setSelected(!0)}
/**
               * 将所有选中的元素设置为非选中
               */},{key:"clearSelectElements",value:function(){var t;this.selectElements.forEach((function(t){null==t||t.setSelected(!1)})),this.selectElements.clear(),this.overlapMode===pi.DEFAULT&&(null===(t=this.topElement)||void 0===t||t.setZIndex())}
/**
               * 批量移动节点，节点移动的时候，会动态计算所有节点与未移动节点的边位置
               * 移动的节点之间的边会保持相对位置
               */},{key:"moveNodes",value:function(t,e,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.forEach((function(t){return n.moveNode(t,e,r,o)}))}
/**
               * 添加节点移动限制规则，在节点移动的时候触发。
               * 如果方法返回false, 则会阻止节点移动。
               * @param fn function
               * @example
               *
               * graphModel.addNodeMoveRules((nodeModel, x, y) => {
               *   if (nodeModel.properties.disabled) {
               *     return false
               *   }
               *   return true
               * })
               *
               */},{key:"addNodeMoveRules",value:function(t){this.nodeMoveRules.includes(t)||this.nodeMoveRules.push(t)}
/**
               * 设置默认的边类型
               * 也就是设置在节点直接有用户手动绘制的连线类型。
               * @param type Options.EdgeType
               */},{key:"setDefaultEdgeType",value:function(t){this.edgeType=t}
/**
              * 修改指定节点类型
              * @param id 节点id
              * @param type 节点类型
              */},{key:"changeNodeType",value:function(t,e){var r=this.getNodeModelById(t);if(r){var n=r.getData();n.type=e;var o=this.getModel(e);if(!o)throw new Error("找不到".concat(e,"对应的节点，请确认是否已注册此类型节点。"));var i=new o(n,this);this.nodes.splice(this.nodesMap[t].index,1,i),this.getNodeEdges(t).forEach((function(e){if(e.sourceNodeId===t){var r=lc(i,e.startPoint,i.width,i.height);e.updateStartPoint(r)}if(e.targetNodeId===t){var n=lc(i,e.endPoint,i.width,i.height);e.updateEndPoint(n)}}))}else console.warn("找不到id为".concat(t,"的节点"))}
/**
               * 切换边的类型
               * @param id 边Id
               * @param type 边类型
               */},{key:"changeEdgeType",value:function(t,e){var r=this.getEdgeModelById(t);if(r){if(r.type!==e){var n=r.getData();n.type=e;var o=this.getModel(e);if(!o)throw new Error("找不到".concat(e,"对应的节点，请确认是否已注册此类型节点。"));delete n.pointsList;var i=new o(n,this);this.edges.splice(this.edgesMap[t].index,1,i)}}else console.warn("找不到id为".concat(t,"的边"))}
/**
               * 获取所有以此节点为终点的边
               */},{key:"getNodeIncomingEdge",value:function(t){var e=[];return this.edges.forEach((function(r){r.targetNodeId===t&&e.push(r)})),e}
/**
               * 获取所有以此节点为起点的边
               */},{key:"getNodeOutgoingEdge",value:function(t){var e=[];return this.edges.forEach((function(r){r.sourceNodeId===t&&e.push(r)})),e}
/**
               * 获取节点连接到的所有起始节点
               */},{key:"getNodeIncomingNode",value:function(t){var e=this,r=[];return this.edges.forEach((function(n){n.targetNodeId===t&&r.push(e.nodesMap[n.sourceNodeId].model)})),r}
/**
               * 获取节点连接到的所有目标节点
               */},{key:"getNodeOutgoingNode",value:function(t){var e=this,r=[];return this.edges.forEach((function(n){n.sourceNodeId===t&&r.push(e.nodesMap[n.targetNodeId].model)})),r}
/**
               * 设置主题
               * todo docs link
               */},{key:"setTheme",value:function(t){this.theme=au(ll(ll({},this.theme),t))}
/**
               * 重新设置画布的宽高
               */},{key:"resize",value:function(t,e){this.width=t||this.rootEl.getBoundingClientRect().width,this.height=e||this.rootEl.getBoundingClientRect().height,this.width&&this.height||console.warn("渲染画布的时候无法获取画布宽高，请确认在container已挂载到DOM。@see https://github.com/didi/LogicFlow/issues/675")}
/**
               * 清空画布
               */},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}
/**
               * 获取图形区域虚拟矩型的尺寸和中心坐标
               * @returns
               */},{key:"getVirtualRectSize",value:function(){var t=this.nodes,e=[],r=[];t.forEach((function(t){var n=t.x,o=t.y,i=t.width,a=t.height,u=t.getNodeStyle().strokeWidth,c=void 0===u?0:u;e=e.concat([n+i/2+c,n-i/2-c]),r=r.concat([o+a/2+c,o-a/2-c])}));var n=Math.min.apply(Math,pl(e)),o=Math.max.apply(Math,pl(e)),i=Math.min.apply(Math,pl(r)),a=o-n||0,u=Math.max.apply(Math,pl(r))-i||0;return{virtualRectWidth:a,virtualRectHeight:u,virtualRectCenterPositionX:n+a/2,virtualRectCenterPositionY:i+u/2}}
/**
               * 将图形整体移动到画布中心
               */},{key:"translateCenter",value:function(){var t=this.nodes,e=this.width,r=this.height,n=this.rootEl,o=this.transformModel;if(t.length){var i=e||n.clientWidth,a=r||n.clientHeight,u=this.getVirtualRectSize(),c=u.virtualRectCenterPositionX,s=u.virtualRectCenterPositionY;o.focusOn(c,s,i,a)}}
/**
               * 画布图形适应屏幕大小
               * @param verticalOffset number 距离盒子上下的距离， 默认为20
               * @param horizontalOffset number 距离盒子左右的距离， 默认为20
               */},{key:"fitView",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=this.nodes,n=this.width,o=this.height,i=this.rootEl,a=this.transformModel;if(r.length){var u,c=n||i.clientWidth,s=o||i.clientHeight,l=this.getVirtualRectSize(),f=l.virtualRectWidth,p=l.virtualRectHeight,d=l.virtualRectCenterPositionX,h=l.virtualRectCenterPositionY,y=(f+e)/c,v=(p+t)/s;u=1/Math.max(y,v);var g=[c/2,s/2];a.zoom(u,g),a.focusOn(d,h,c,s)}}
/**
               * 开启边的动画
               * @param edgeId any
               */},{key:"openEdgeAnimation",value:function(t){this.getEdgeModelById(t).openEdgeAnimation()}
/**
               * 关闭边的动画
               * @param edgeId any
               */},{key:"closeEdgeAnimation",value:function(t){this.getEdgeModelById(t).closeEdgeAnimation()}}],r&&gl(e.prototype,r),n&&gl(e,n),t}(),Zs=ml(Ks.prototype,"width",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qs=ml(Ks.prototype,"height",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Js=ml(Ks.prototype,"edgeType",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qs=ml(Ks.prototype,"nodes",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$s=ml(Ks.prototype,"edges",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),tl=ml(Ks.prototype,"overlapMode",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pi.DEFAULT}}),el=ml(Ks.prototype,"background",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rl=ml(Ks.prototype,"transformModel",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nl=ml(Ks.prototype,"editConfigModel",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ol=ml(Ks.prototype,"gridSize",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),il=ml(Ks.prototype,"partial",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),al=ml(Ks.prototype,"fakerNode",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ml(Ks.prototype,"nodesMap",[o.m],Object.getOwnPropertyDescriptor(Ks.prototype,"nodesMap"),Ks.prototype),ml(Ks.prototype,"edgesMap",[o.m],Object.getOwnPropertyDescriptor(Ks.prototype,"edgesMap"),Ks.prototype),ml(Ks.prototype,"modelsMap",[o.m],Object.getOwnPropertyDescriptor(Ks.prototype,"modelsMap"),Ks.prototype),ml(Ks.prototype,"sortElements",[o.m],Object.getOwnPropertyDescriptor(Ks.prototype,"sortElements"),Ks.prototype),ml(Ks.prototype,"textEditElement",[o.m],Object.getOwnPropertyDescriptor(Ks.prototype,"textEditElement"),Ks.prototype),ml(Ks.prototype,"selectElements",[o.m],Object.getOwnPropertyDescriptor(Ks.prototype,"selectElements"),Ks.prototype),ml(Ks.prototype,"setFakerNode",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"setFakerNode"),Ks.prototype),ml(Ks.prototype,"removeFakerNode",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"removeFakerNode"),Ks.prototype),ml(Ks.prototype,"setModel",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"setModel"),Ks.prototype),ml(Ks.prototype,"toFront",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"toFront"),Ks.prototype),ml(Ks.prototype,"setElementZIndex",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"setElementZIndex"),Ks.prototype),ml(Ks.prototype,"deleteNode",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"deleteNode"),Ks.prototype),ml(Ks.prototype,"addNode",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"addNode"),Ks.prototype),ml(Ks.prototype,"cloneNode",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"cloneNode"),Ks.prototype),ml(Ks.prototype,"moveNode",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"moveNode"),Ks.prototype),ml(Ks.prototype,"moveNode2Coordinate",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"moveNode2Coordinate"),Ks.prototype),ml(Ks.prototype,"editText",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"editText"),Ks.prototype),ml(Ks.prototype,"addEdge",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"addEdge"),Ks.prototype),ml(Ks.prototype,"moveEdge",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"moveEdge"),Ks.prototype),ml(Ks.prototype,"deleteEdgeBySourceAndTarget",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"deleteEdgeBySourceAndTarget"),Ks.prototype),ml(Ks.prototype,"deleteEdgeById",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"deleteEdgeById"),Ks.prototype),ml(Ks.prototype,"deleteEdgeBySource",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"deleteEdgeBySource"),Ks.prototype),ml(Ks.prototype,"deleteEdgeByTarget",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"deleteEdgeByTarget"),Ks.prototype),ml(Ks.prototype,"setElementStateById",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"setElementStateById"),Ks.prototype),ml(Ks.prototype,"updateText",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"updateText"),Ks.prototype),ml(Ks.prototype,"selectNodeById",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"selectNodeById"),Ks.prototype),ml(Ks.prototype,"selectEdgeById",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"selectEdgeById"),Ks.prototype),ml(Ks.prototype,"selectElementById",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"selectElementById"),Ks.prototype),ml(Ks.prototype,"clearSelectElements",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"clearSelectElements"),Ks.prototype),ml(Ks.prototype,"moveNodes",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"moveNodes"),Ks.prototype),ml(Ks.prototype,"setDefaultEdgeType",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"setDefaultEdgeType"),Ks.prototype),ml(Ks.prototype,"changeNodeType",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"changeNodeType"),Ks.prototype),ml(Ks.prototype,"changeEdgeType",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"changeEdgeType"),Ks.prototype),ml(Ks.prototype,"getNodeIncomingEdge",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"getNodeIncomingEdge"),Ks.prototype),ml(Ks.prototype,"getNodeOutgoingEdge",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"getNodeOutgoingEdge"),Ks.prototype),ml(Ks.prototype,"getNodeIncomingNode",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"getNodeIncomingNode"),Ks.prototype),ml(Ks.prototype,"getNodeOutgoingNode",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"getNodeOutgoingNode"),Ks.prototype),ml(Ks.prototype,"setTheme",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"setTheme"),Ks.prototype),ml(Ks.prototype,"resize",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"resize"),Ks.prototype),ml(Ks.prototype,"clearData",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"clearData"),Ks.prototype),ml(Ks.prototype,"translateCenter",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"translateCenter"),Ks.prototype),ml(Ks.prototype,"fitView",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"fitView"),Ks.prototype),ml(Ks.prototype,"openEdgeAnimation",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"openEdgeAnimation"),Ks.prototype),ml(Ks.prototype,"closeEdgeAnimation",[o.k],Object.getOwnPropertyDescriptor(Ks.prototype,"closeEdgeAnimation"),Ks.prototype),Ks),xl=wl;function El(t){return(El="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jl(){return jl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jl.apply(this,arguments)}function Sl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pl(t,e){return(Pl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Al(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ml(t);if(e){var o=Ml(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===El(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kl(t)}(this,r)}}function kl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ml(t){return(Ml=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Dl,Nl=cO(Ol=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pl(t,e)}(i,t);var e,r,n,o=Al(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Tl(kl(e=o.call(this)),"stepDrag",void 0),Tl(kl(e),"stepScrollX",0),Tl(kl(e),"stepScrollY",0),Tl(kl(e),"onDraging",(function(t){var r=t.deltaX,n=t.deltaY;e.setState({isDraging:!0});var o=e.props.graphModel,i=o.transformModel;o.editConfigModel.stopMoveGraph||i.translate(r,n)})),Tl(kl(e),"onDragEnd",(function(){e.setState({isDraging:!1})})),Tl(kl(e),"zoomHandler",(function(t){var r=e.props,n=r.graphModel,o=n.editConfigModel,i=n.transformModel,a=n.gridSize,u=r.graphModel,c=t.deltaX,s=t.deltaY;if(o.stopScrollGraph||!0===t.ctrlKey){if(!o.stopZoomGraph){t.preventDefault();var l=u.getPointByClient({x:t.clientX,y:t.clientY}).canvasOverlayPosition,f=l.x,p=l.y;i.zoom(t.deltaY<0,[f,p])}}else{if(t.preventDefault(),e.stepScrollX+=c,e.stepScrollY+=s,Math.abs(e.stepScrollX)>=a){var d=e.stepScrollX%a,h=e.stepScrollX-d;i.translate(-h*i.SCALE_X,0),e.stepScrollX=d}if(Math.abs(e.stepScrollY)>=a){var y=e.stepScrollY%a,v=e.stepScrollY-y;i.translate(0,-v*i.SCALE_Y),e.stepScrollY=y}}})),Tl(kl(e),"clickHandler",(function(t){if("canvas-overlay"===t.target.getAttribute("name")){var r=e.props.graphModel;r.selectElements.size>0&&r.clearSelectElements(),r.eventCenter.emit(ci.BLANK_CLICK,{e:t})}})),Tl(kl(e),"handleContextMenu",(function(t){if("canvas-overlay"===t.target.getAttribute("name")){t.preventDefault();var r=e.props.graphModel,n=r.getPointByClient({x:t.clientX,y:t.clientY});r.eventCenter.emit(ci.BLANK_CONTEXTMENU,{e:t,position:n})}})),Tl(kl(e),"mouseDownHandler",(function(t){var r=e.props.graphModel,n=r.eventCenter,o=r.editConfigModel,i=r.transformModel.SCALE_X,a=r.gridSize,u=t.target,c=!o.adjustEdge&&!o.adjustNodePosition;("canvas-overlay"===u.getAttribute("name")||c)&&(o.stopMoveGraph?n.emit(ci.BLANK_MOUSEDOWN,{e:t}):(e.stepDrag.setStep(a*i),e.stepDrag.handleMouseDown(t)),e.clickHandler(t))}));var r=t.graphModel,n=r.gridSize,a=r.eventCenter;return e.stepDrag=new ul({onDraging:e.onDraging,onDragEnd:e.onDragEnd,step:n,eventType:"BLANK",isStopPropagation:!1,eventCenter:a,model:null}),e.state={isDraging:!1},e}return e=i,(r=[{key:"render",value:function(){var t=this.props.graphModel.transformModel.getTransformStyle().transform,e=this.props,r=e.children,n=e.dnd,o=this.state.isDraging;return Object($.g)("svg",jl({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:o?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},n.eventMap()),Object($.g)("g",{transform:t},r))}}])&&Sl(e.prototype,r),n&&Sl(e,n),i}($.a))||Ol,Cl=Nl;function Rl(t){return(Rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Il(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ll(t,e){return(Ll=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Hl(t);if(e){var o=Hl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Rl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bl(t)}(this,r)}}function Bl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hl(t){return(Hl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fl=cO(Dl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ll(t,e)}(i,t);var e,r,n,o=zl(i);function i(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];return t=o.call.apply(o,[this].concat(u)),e=Bl(t),n=function(e){var r=t.props.tool.getInstance();r.components.forEach((function(t){return t(r,e)})),r.components=[]},(r="setToolOverlayRef")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=i,(r=[{key:"getTools",value:
/**
                 * 外部传入的一般是HTMLElement
                 */function(){var t=this.props,e=t.tool,r=t.graphModel,n=e.getTools().map((function(t){return Object($.g)(t,{graphModel:r,logicFlow:e.instance})}));return e.components=n,n}},{key:"render",value:function(){return Object($.g)("div",{className:"lf-tool-overlay",ref:this.setToolOverlayRef},this.getTools())}}])&&Il(e.prototype,r),n&&Il(e,n),i}($.a))||Dl;function Gl(t){return(Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ul(t,e){return(Ul=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Vl(t);if(e){var o=Vl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Gl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Vl(t){return(Vl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wl,Kl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ul(t,e)}(i,t);var e,r,n,o=Yl(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"render",value:function(){var t=this.props.background;return Object($.g)("div",{className:"lf-background"},Object($.g)("div",{style:t,className:"lf-background-area"}))}}])&&Xl(e.prototype,r),n&&Xl(e,n),i}($.a);function Zl(t){return(Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ql(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Jl(t,e){return(Jl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ql(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=tf(t);if(e){var o=tf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Zl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $l(t)}(this,r)}}function $l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tf(t){return(tf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ef=cO(Wl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jl(t,e)}(i,t);var e,r,n,o=Ql(i);function i(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];return t=o.call.apply(o,[this].concat(u)),e=$l(t),r="id",n=Eu(),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=i,(r=[{key:"renderDot",value:
// 网格类型为点状
function(){var t=this.props,e=t.config,r=e.color,n=e.thickness,o=void 0===n?2:n,i=t.size,a=t.visible,u=Math.min(Math.max(2,o),i/2),c=1;return a||(c=0),Object($.g)("rect",{width:u,height:u,rx:u/2,ry:u/2,fill:r,opacity:c})}
// 网格类型为交叉线
// todo: 采用背景缩放的方式，实现更好的体验
},{key:"renderMesh",value:function(){var t=this.props,e=t.config,r=e.color,n=e.thickness,o=void 0===n?1:n,i=t.size,a=t.visible,u=Math.min(Math.max(1,o),i/2),c="M ".concat(i," 0 H0 M0 0 V0 ").concat(i),s=1;return a||(s=0),Object($.g)("path",{d:c,stroke:r,strokeWidth:u,opacity:s})}},{key:"render",value:function(){var t=this.props,e=t.type,r=t.size,n=t.graphModel.transformModel,o=[n.SCALE_X,n.SKEW_Y,n.SKEW_X,n.SCALE_Y,n.TRANSLATE_X,n.TRANSLATE_Y].join(","),i="matrix(".concat(o,")");return Object($.g)("div",{className:"lf-grid"},Object($.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object($.g)("defs",null,Object($.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:i,x:"0",y:"0",width:r,height:r},"dot"===e&&this.renderDot(),"mesh"===e&&this.renderMesh())),Object($.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&ql(e.prototype,r),n&&ql(e,n),i}($.a))||Wl;function rf(t){return(rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return of(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?of(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function of(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ef.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(52);var af,uf=function(t){var e={
// default
x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(t).forEach((function(t){var r=nf(t,2),n=r[0],o=r[1];("style"===n||"object"!==rf(o))&&(e[n]=o)})),Object($.g)("line",e)};function cf(t){return(cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sf(Object(r),!0).forEach((function(e){ff(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ff(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function df(t,e){return(df=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yf(t);if(e){var o=yf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===cf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yf(t){return(yf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vf,gf=cO(af=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&df(t,e)}(i,t);var e,r,n,o=hf(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"render",value:function(){var t=this.props.snaplineModel,e=t.position,r=t.isShowHorizontal,n=t.isShowVertical,o=t.getStyle(),i=e.x,a=void 0===i?0:i,u=e.y,c=void 0===u?0:u,s=lf(lf({x1:-1e5,y1:c,x2:1e5,y2:c},o),{},{stroke:r?o.stroke:"none"}),l=lf(lf({x1:a,y1:-1e5,x2:a,y2:1e5},o),{},{stroke:n?o.stroke:"none"});return Object($.g)("g",{className:"lf-snapline"},Object($.g)(uf,s),Object($.g)(uf,l))}}])&&pf(e.prototype,r),n&&pf(e,n),i}($.a))||af;function bf(t){return(bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Of(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Of(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Of(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _f(t){var e=t.x,r=t.y,n=t.width,o=t.height,i=t.className,a=t.radius,u=e-n/2,c=r-o/2,s={};return Object.entries(t).forEach((function(t){var e=mf(t,2),r=e[0],n=e[1];"object"!==bf(n)&&(s[r]=n)})),s.className=i?"lf-basic-shape ".concat(i):"lf-basic-shape",a&&(s.rx=a,s.ry=a),s.x=u,s.y=c,Object($.g)("rect",s)}function wf(t){return(wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xf(){return xf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xf.apply(this,arguments)}function Ef(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ef(Object(r),!0).forEach((function(e){Sf(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ef(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sf(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Af(t,e){return(Af=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Mf(t);if(e){var o=Mf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===wf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Mf(t){return(Mf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}_f.defaultProps={className:"",radius:""};var Tf,Df=cO(vf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Af(t,e)}(i,t);var e,r,n,o=kf(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getNodesOutline",value:
// 节点outline
function(){var t=this.props.graphModel,e=t.nodes,r=t.editConfigModel,n=r.hoverOutline,o=r.nodeSelectedOutline,i=[];return e.forEach((function(t){if(t.isHovered||t.isSelected){var e=t.isHovered,r=t.isSelected,a=t.x,u=t.y,c=t.width,s=t.height;if(o&&r||n&&e){var l=t.getOutlineStyle(),f={};if(Object.keys(l).forEach((function(t){"hover"!==t&&(f[t]=l[t])})),e){var p=l.hover;f=jf(jf({},f),p)}i.push(Object($.g)(_f,xf({className:"lf-outline-node",x:a,y:u,width:c+10,height:s+10},f)))}}})),i}
// 边的outline
},{key:"getEdgeOutline",value:function(){for(var t=this.props.graphModel,e=t.edges,r=t.editConfigModel,n=r.edgeSelectedOutline,o=r.hoverOutline,i=[],a=0;a<e.length;a++){var u=e[a];(n&&u.isSelected||o&&u.isHovered)&&(u.modelType===oi.LINE_EDGE?i.push(this.getLineOutline(u)):u.modelType===oi.POLYLINE_EDGE?i.push(this.getPolylineOutline(u)):u.modelType===oi.BEZIER_EDGE&&i.push(this.getBezierOutline(u)))}return i}
// 直线outline
},{key:"getLineOutline",value:function(t){var e=t.startPoint,r=t.endPoint,n=(e.x+r.x)/2,o=(e.y+r.y)/2,i=Math.abs(e.x-r.x)+10,a=Math.abs(e.y-r.y)+10,u=t.getOutlineStyle();return Object($.g)(_f,xf({className:"lf-outline-edge",x:n,y:o,width:i,height:a},u))}
// 折线outline
},{key:"getPolylineOutline",value:function(t){var e=t.points,r=Ds(e),n=ys(r,8),o=n.x,i=n.y,a=n.width,u=n.height,c=t.getOutlineStyle();return Object($.g)(_f,xf({className:"lf-outline",x:o,y:i,width:a,height:u},c))}
// 曲线outline
},{key:"getBezierOutline",value:function(t){var e=t.path,r=Ls(e),n=ys(r,8),o=n.x,i=n.y,a=n.width,u=n.height,c=t.getOutlineStyle();return Object($.g)(_f,xf({className:"lf-outline",x:o,y:i,width:a,height:u},c))}},{key:"render",value:function(){return Object($.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&Pf(e.prototype,r),n&&Pf(e,n),i}($.a))||vf;function Nf(t){return(Nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Rf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rf(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rf(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function If(t){var e=t.x,r=void 0===e?0:e,n=t.y,o=void 0===n?0:n,i=t.r,a=void 0===i?4:i,u=t.className,c={cx:r,cy:o,r:a,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(t).forEach((function(t){var e=Cf(t,2),r=e[0],n=e[1];"object"!==Nf(n)&&(c[r]=n)})),c.className=u?"lf-basic-shape ".concat(u):"lf-basic-shape",Object($.g)("circle",c)}function Lf(t){return(Lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Bf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bf(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bf(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hf(){return Hf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hf.apply(this,arguments)}function Ff(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xf(t,e,r){return e&&Gf(t.prototype,e),r&&Gf(t,r),t}function Uf(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yf(t,e)}function Yf(t,e){return(Yf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Kf(t);if(e){var o=Kf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Lf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wf(t)}(this,r)}}function Wf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kf(t){return(Kf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zf(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var qf,Jf=function(t){Uf(r,t);var e=Vf(r);function r(){var t;return Ff(this,r),Zf(Wf(t=e.call(this)),"dragHandler",void 0),Zf(Wf(t),"onDraging",(function(e){var r=e.event,n=t.props,o=n.graphModel,i=n.bezierModel,a=n.type,u=o.getPointByClient({x:r.clientX,y:r.clientY}).canvasOverlayPosition,c=u.x,s=u.y;i.updateAdjustAnchor({x:c,y:s},a)})),Zf(Wf(t),"onDragEnd",(function(){t.props.bezierModel.isDragging=!1})),t.dragHandler=new ul({onDraging:t.onDraging,onDragEnd:t.onDragEnd}),t}return Xf(r,[{key:"render",value:function(){var t=this,e=this.props.position,r=e.x,n=e.y,o=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object($.g)(If,Hf({className:"lf-bezier-adjust-anchor",x:r,y:n},o,{onMouseDown:function(e){t.dragHandler.handleMouseDown(e)}}))}}]),r}($.a),Qf=cO(Tf=function(t){Uf(r,t);var e=Vf(r);function r(){return Ff(this,r),e.apply(this,arguments)}return Xf(r,[{key:"getBezierAdjust",value:function(t,e){var r=t.path,n=t.id,o=zf(Ls(r),4),i=o[0],a=o[1],u=o[2],c=o[3],s=t.getEdgeStyle().adjustLine,l=[];return l.push(Object($.g)(uf,Hf({x1:i.x,y1:i.y,x2:a.x,y2:a.y},s))),l.push(Object($.g)(Jf,{position:a,bezierModel:t,graphModel:e,key:"".concat(n,"_ePre"),type:"sNext"})),l.push(Object($.g)(uf,Hf({x1:c.x,y1:c.y,x2:u.x,y2:u.y},s))),l.push(Object($.g)(Jf,{position:u,bezierModel:t,graphModel:e,key:"".concat(n,"_sNext"),type:"ePre"})),l}
// 获取选中bezier曲线，调整操作线和锚点
},{key:"selectedBezierEdge",value:function(){for(var t=this.props.graphModel,e=t.edges,r=[],n=0;n<e.length;n++){var o=e[n];o.isSelected&&o.modelType===oi.BEZIER_EDGE&&o.draggable&&r.push(this.getBezierAdjust(o,t))}return r}},{key:"render",value:function(){return Object($.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),r}($.a))||Tf;function $f(t){return($f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ep(t,e){return(ep=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=np(t);if(e){var o=np(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function np(t){return(np=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var op,ip=cO(qf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ep(t,e)}(i,t);var e,r,n,o=rp(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"render",value:function(){var t=this.props.graphModel.transformModel.getTransformStyle().transform,e=this.props.children;return Object($.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object($.g)("g",{transform:t},e))}}])&&tp(e.prototype,r),n&&tp(e,n),i}($.a))||qf;function ap(t){return(ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function up(){return up=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},up.apply(this,arguments)}function cp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sp(t,e){return(sp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=fp(t);if(e){var o=fp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ap(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fp(t){return(fp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pp=cO(op=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sp(t,e)}(i,t);var e,r,n,o=lp(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,r=[{key:"getComponent",value:
// get InjectedProps() {
//   return this.props as InjectedProps;
// }
function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas-overlay",n=(0,this.props.getView)(t.type);return Object($.g)(n,{key:t.id,model:t,graphModel:e,overlay:r})}},{key:"render",value:function(){var t=this,e=this.props,r=e.graphModel,n=e.tool,o=e.options,i=e.dnd,a=e.snaplineModel,u={};o.width&&(u.width="".concat(r.width,"px")),o.height&&(u.height="".concat(r.height,"px"));var c=r.fakerNode,s=r.editConfigModel.adjustEdge;return Object($.g)("div",{className:"lf-graph",style:u},Object($.g)(Cl,{graphModel:r,dnd:i},Object($.g)("g",{className:"lf-base"},_o(r.sortElements,(function(e){return t.getComponent(e,r)}))),c?this.getComponent(c,r):""),Object($.g)(ip,{graphModel:r},Object($.g)(Df,{graphModel:r}),s?Object($.g)(Qf,{graphModel:r}):"",!1!==o.snapline?Object($.g)(gf,{snaplineModel:a}):""),Object($.g)(Fl,{graphModel:r,tool:n}),o.background&&Object($.g)(Kl,{background:o.background}),o.grid&&Object($.g)(ef,up({},o.grid,{graphModel:r})))}}],r&&cp(e.prototype,r),n&&cp(e,n),i}($.a))||op,dp=pp;function hp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function yp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hp(Object(r),!0).forEach((function(e){gp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function vp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var bp=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),gp(this,"nodeConfig",void 0),gp(this,"lf",void 0),gp(this,"fakerNode",void 0),gp(this,"stopDrag",(function(){r.nodeConfig=null,window.document.removeEventListener("mouseup",r.stopDrag)})),gp(this,"dragEnter",(function(t){r.nodeConfig&&!r.fakerNode&&(r.fakerNode=r.lf.createFakerNode(yp(yp({},r.nodeConfig),r.clientToLocalPoint({x:t.clientX,y:t.clientY}))))})),gp(this,"onDragOver",(function(t){if(t.preventDefault(),r.fakerNode){var e=r.clientToLocalPoint({x:t.clientX,y:t.clientY}),n=e.x,o=e.y;r.fakerNode.moveTo(n,o);var i=r.fakerNode.getData();r.lf.setNodeSnapLine(i),r.lf.graphModel.eventCenter.emit(ci.NODE_DND_DRAG,{data:i})}return!1})),gp(this,"onDragLeave",(function(){r.fakerNode&&(r.lf.removeNodeSnapLine(),r.lf.graphModel.removeFakerNode(),r.fakerNode=null)})),gp(this,"onDrop",(function(t){if(r.lf.graphModel&&t&&r.nodeConfig){var e=r.lf.addNode(yp(yp({},r.nodeConfig),r.clientToLocalPoint({x:t.clientX,y:t.clientY})));t.preventDefault(),t.stopPropagation(),r.nodeConfig=null,r.lf.removeNodeSnapLine(),r.lf.graphModel.removeFakerNode(),r.fakerNode=null;var n=e.getData();r.lf.graphModel.eventCenter.emit(ci.NODE_DND_ADD,{data:n,e:t})}}));var n=e.lf;this.lf=n}var e,r,n;return e=t,(r=[{key:"clientToLocalPoint",value:function(t){var e=t.x,r=t.y,n=io(this.lf.options,["grid","size"]),o=this.lf.graphModel.getPointByClient({x:e,y:r}).canvasOverlayPosition,i=o.x,a=o.y;return{x:su(i,n),y:su(a,n)}}},{key:"startDrag",value:function(t){this.nodeConfig=t,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,
// IE11
onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,
// onMouseOut: this.onDragLeave, // IE11
onMouseUp:this.onDrop}}}])&&vp(e.prototype,r),n&&vp(e,n),t}();function mp(t){var e=t.container,r=t.grid,n=t.width,o=t.height;if(!e)throw new Error("请检查 container 参数是否有效");if("string"==typeof n||"string"==typeof o)throw new Error("width或height不支持传入字符串，请传数字");return r&&(t.grid=Fo({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},r)),Fo({},wp,t)}var Op,_p,wp={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function xp(t){return(xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ep(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return jp(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jp(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jp(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Sp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sp(Object(r),!0).forEach((function(e){Cp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ap(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kp(){return kp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Np(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},kp.apply(this,arguments)}function Mp(t,e){return(Mp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Np(t);if(e){var o=Np(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Dp(t)}(this,r)}}function Dp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Np(t){return(Np=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rp(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var Ip,Lp,zp,Bp,Hp,Fp,Gp,Xp,Up,Yp,Vp,Wp,Kp,Zp,qp,Jp,Qp,$p,td,ed,rd=(Op=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mp(t,e)}(i,t);var e,r,n,o=Tp(i);function i(){var t,e,r,n,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var u=arguments.length,c=new Array(u),s=0;s<u;s++)c[s]=arguments[s];return Cp(Dp(t=o.call.apply(o,[this].concat(c))),"modelType",oi.BEZIER_EDGE),e=Dp(t),r="path",n=_p,a=Dp(t),n&&Object.defineProperty(e,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(a):void 0}),t}return e=i,(r=[{key:"initEdgeData",value:function(t){this.offset=100,kp(Np(i.prototype),"initEdgeData",this).call(this,t)}},{key:"getEdgeStyle",value:function(){var t=this.graphModel.theme.bezier;return Pp(Pp({},kp(Np(i.prototype),"getEdgeStyle",this).call(this)),Ua(t))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var t=0,e=0;return this.pointsList.forEach((function(r){var n=r.x,o=r.y;t+=n,e+=o})),{x:t/this.pointsList.length,y:e/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var t=kp(Np(i.prototype),"getData",this).call(this),e=this.pointsList.map((function(t){return{x:t.x,y:t.y}}));return Pp(Pp({},t),{},{pointsList:e})}
/* 获取贝塞尔曲线的控制点 */},{key:"getControls",value:function(){var t=this.startPoint,e=this.endPoint;return Is({start:t,end:e,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}
/* 获取贝塞尔曲线的path */},{key:"getPath",value:function(t){var e=Ep(t,4),r=e[0],n=e[1],o=e[2],i=e[3];return"M ".concat(r.x," ").concat(r.y,"\n    C ").concat(n.x," ").concat(n.y,",\n    ").concat(o.x," ").concat(o.y,",\n    ").concat(i.x," ").concat(i.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var t=this.getControls(),e=t.sNext,r=t.ePre;this.updatePath(e,r)}},{key:"updatePath",value:function(t,e){var r={x:this.startPoint.x,y:this.startPoint.y},n={x:this.endPoint.x,y:this.endPoint.y};if(!t||!e){var o=this.getControls();t=o.sNext,e=o.ePre}this.pointsList=[r,t,e,n],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(t){this.startPoint=t,this.updatePoints()}},{key:"updateEndPoint",value:function(t){this.endPoint=t,this.updatePoints()}},{key:"moveStartPoint",value:function(t,e){this.startPoint.x+=t,this.startPoint.y+=e;var r=Ep(this.pointsList,3),n=r[1],o=r[2];n.x+=t,n.y+=e,this.updatePath(n,o)}},{key:"moveEndPoint",value:function(t,e){this.endPoint.x+=t,this.endPoint.y+=e;var r=Ep(this.pointsList,3),n=r[1],o=r[2];o.x+=t,o.y+=e,this.updatePath(n,o)}},{key:"updateAdjustAnchor",value:function(t,e){"sNext"===e?this.pointsList[1]=t:"ePre"===e&&(this.pointsList[2]=t),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}
// 获取边调整的起点
},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}
// 获取边调整的终点
},{key:"getAdjustEnd",value:function(){var t=this.pointsList;return t[t.length-1]||this.endPoint}
// 起终点拖拽调整过程中，进行曲线路径更新
},{key:"updateAfterAdjustStartAndEnd",value:function(t){var e=t.startPoint,r=t.endPoint,n=t.sourceNode,o=t.targetNode,i=Is({start:e,end:r,sourceNode:n,targetNode:o,offset:this.offset}),a=i.sNext,u=i.ePre;this.pointsList=[e,a,u,r],this.initPoints()}}])&&Ap(e.prototype,r),n&&Ap(e,n),i}(Ac),_p=Rp(Op.prototype,"path",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Rp(Op.prototype,"initPoints",[o.k],Object.getOwnPropertyDescriptor(Op.prototype,"initPoints"),Op.prototype),Rp(Op.prototype,"updatePoints",[o.k],Object.getOwnPropertyDescriptor(Op.prototype,"updatePoints"),Op.prototype),Rp(Op.prototype,"updateStartPoint",[o.k],Object.getOwnPropertyDescriptor(Op.prototype,"updateStartPoint"),Op.prototype),Rp(Op.prototype,"updateEndPoint",[o.k],Object.getOwnPropertyDescriptor(Op.prototype,"updateEndPoint"),Op.prototype),Rp(Op.prototype,"moveStartPoint",[o.k],Object.getOwnPropertyDescriptor(Op.prototype,"moveStartPoint"),Op.prototype),Rp(Op.prototype,"moveEndPoint",[o.k],Object.getOwnPropertyDescriptor(Op.prototype,"moveEndPoint"),Op.prototype),Rp(Op.prototype,"updateAdjustAnchor",[o.k],Object.getOwnPropertyDescriptor(Op.prototype,"updateAdjustAnchor"),Op.prototype),Rp(Op.prototype,"getAdjustStart",[o.k],Object.getOwnPropertyDescriptor(Op.prototype,"getAdjustStart"),Op.prototype),Rp(Op.prototype,"getAdjustEnd",[o.k],Object.getOwnPropertyDescriptor(Op.prototype,"getAdjustEnd"),Op.prototype),Rp(Op.prototype,"updateAfterAdjustStartAndEnd",[o.k],Object.getOwnPropertyDescriptor(Op.prototype,"updateAfterAdjustStartAndEnd"),Op.prototype),Op),nd=function(t){return null==t};function od(t){return(od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function id(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ad(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ad(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function ad(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ud(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function cd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ud(Object(r),!0).forEach((function(e){fd(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ud(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function sd(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ld(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pd(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var dd,hd,yd=(Ip=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),fd(this,"id",Eu()),sd(this,"type",Lp,this),sd(this,"x",zp,this),sd(this,"y",Bp,this),sd(this,"text",Hp,this),sd(this,"properties",Fp,this),sd(this,"_width",Gp,this),sd(this,"_height",Xp,this),sd(this,"anchorsOffset",Up,this),sd(this,"isSelected",Yp,this),sd(this,"isHovered",Vp,this),sd(this,"isShowAnchor",Wp,this),sd(this,"isDragging",Kp,this),sd(this,"isHitable",Zp,this),sd(this,"draggable",qp,this),sd(this,"visible",Jp,this),fd(this,"virtual",!1),fd(this,"graphModel",void 0),sd(this,"zIndex",Qp,this),sd(this,"state",$p,this),sd(this,"autoToFront",td,this),sd(this,"style",ed,this),fd(this,"BaseType",ai.NODE),fd(this,"modelType",oi.NODE),fd(this,"additionStateData",void 0),fd(this,"targetRules",[]),fd(this,"sourceRules",[]),fd(this,"moveRules",[]),fd(this,"hasSetTargetRules",!1),fd(this,"hasSetSourceRules",!1),this.graphModel=r,this.initNodeData(e),this.setAttributes()}var e,r,n;return e=t,r=[{key:"width",get:
// 数据属性
// 形状属性
function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}
/*
               * 获取离开当前节点的边和节点
               */},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}
/**
               * @overridable 可以重写
               * 初始化节点数据
               * initNodeData和setAttributes的区别在于
               * initNodeData只在节点初始化的时候调用，用于初始化节点的所有属性。
               * setAttributes除了初始化调用外，还会在properties发生变化了调用。
               */},{key:"initNodeData",value:function(t){if(t.properties||(t.properties={}),!t.id){var e=this.graphModel.idGenerator,r=e&&e(t.type);r&&(t.id=r);var n=this.createId();n&&(t.id=n)}this.formatText(t),Fo(this,function(t){return Zo(t,["id","type","x","y","text","properties","virtual"])}(t)),this.graphModel.overlapMode===pi.INCREASE&&(this.zIndex=t.zIndex||Oc())}
/**
               * 设置model属性，每次properties发生变化会触发
               * 例如设置节点的宽度
               * @example
               *
               * setAttributes () {
               *   this.width = 300
               *   this.height = 200
               * }
               *
               * @overridable 支持重写
               */},{key:"setAttributes",value:function(){}
/**
               * @overridable 支持重写，自定义此类型节点默认生成方式
               * @returns string
               */},{key:"createId",value:function(){return null}
/**
               * 初始化文本属性
               */},{key:"formatText",value:function(t){t.text||(t.text={value:"",x:t.x,y:t.y,draggable:!1,editable:!0}),t.text&&"string"==typeof t.text?t.text={value:t.text,x:t.x,y:t.y,draggable:!1,editable:!0}:t.text&&void 0===t.text.editable&&(t.text.editable=!0)}
/**
               * 获取被保存时返回的数据
               * @overridable 支持重写
               */},{key:"getData",value:function(){var t=this.text,e=t.x,r=t.y,n=t.value,i=this.properties;Object(o.x)(i)&&(i=Object(o.I)(i));var a={id:this.id,type:this.type,x:this.x,y:this.y,properties:i};return this.graphModel.overlapMode===pi.INCREASE&&(a.zIndex=this.zIndex),n&&(a.text={x:e,y:r,value:n}),a}
/**
               * 用于在历史记录时获取节点数据，
               * 在某些情况下，如果希望某个属性变化不引起history的变化，
               * 可以重写此方法。
               */},{key:"getHistoryData",value:function(){return this.getData()}
/**
               * 获取当前节点的properties
               */},{key:"getProperties",value:function(){return Object(o.I)(this.properties)}
/**
               * @overridable 支持重写
               * 获取当前节点样式
               * @returns 自定义节点样式
               */},{key:"getNodeStyle",value:function(){return cd(cd({},this.graphModel.theme.baseNode),this.style)}
/**
               * @overridable 支持重写
               * 获取当前节点文本样式
               */},{key:"getTextStyle",value:function(){var t=this.graphModel.theme.nodeText;return Ua(t)}
/**
               * @overridable 支持重写
               * 获取当前节点锚点样式
               * @returns 自定义样式
               */},{key:"getAnchorStyle",value:function(t){var e=this.graphModel.theme.anchor;return Ua(e)}
/**
               * @overridable 支持重写
               * 获取当前节点锚点拖出连线样式
               * @returns 自定义锚点拖出样式
               */},{key:"getAnchorLineStyle",value:function(t){var e=this.graphModel.theme.anchorLine;return Ua(e)}
/**
               * @overridable 支持重写
               * 获取outline样式，重写可以定义此类型节点outline样式， 默认使用主题样式
               * @returns 自定义outline样式
               */},{key:"getOutlineStyle",value:function(){var t=this.graphModel.theme.outline;return Ua(t)}
/**
               * @over
               * 在边的时候，是否允许这个节点为source节点，边到target节点。
               */},{key:"isAllowConnectedAsSource",value:function(t,e,r){var n=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var o,i=!0,a=0;a<n.length;a++){var u=n[a];if(!u.validate.call(this,this,t,e,r)){i=!1,o=u.message;break}}return{isAllPass:i,msg:o}}
/**
               * 获取当前节点作为连接的起始节点规则。
               */},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}
/**
               * 在连线的时候，是否允许这个节点为target节点
               */},{key:"isAllowConnectedAsTarget",value:function(t,e,r){var n=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var o,i=!0,a=0;a<n.length;a++){var u=n[a];if(!u.validate.call(this,t,this,e,r)){i=!1,o=u.message;break}}return{isAllPass:i,msg:o}}
/**
               * 内部方法
               * 是否允许移动节点到新的位置
               */},{key:"isAllowMoveNode",value:function(t,e){var r,n=!0,o=!0,i=id(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(i.s();!(r=i.n()).done;){var a=(0,r.value)(this,t,e);if(!a)return!1;if("object"===od(a)){var u=a;if(!1===u.x&&!1===u.y)return!1;n=n&&u.x,o=o&&u.y}}}catch(c){i.e(c)}finally{i.f()}return{x:n,y:o}}
/**
               * 获取作为连线终点时的所有规则。
               */},{key:"getConnectedTargetRules",value:function(){return this.targetRules}
/**
               * @returns Point[] 锚点坐标构成的数组
               */},{key:"getAnchorsByOffset",value:function(){var t=this.anchorsOffset,e=this.id,r=this.x,n=this.y;return t&&t.length>0?t.map((function(t,o){return t.length?{id:"".concat(e,"_").concat(o),x:r+t[0],y:n+t[1]}:cd(cd({},t),{},{x:r+t.x,y:n+t.y,id:t.id||"".concat(e,"_").concat(o)})})):this.getDefaultAnchor()}
/**
               * @overridable 子类重写此方法设置默认锚点
               * 获取节点默认情况下的锚点
               */},{key:"getDefaultAnchor",value:function(){return[]}
/**
               * 获取节点BBox
               */},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(t){if(!nd(t))for(var e=0;e<this.anchors.length;e++){var r=this.anchors[e];if(r.id===t)return r}}},{key:"addNodeMoveRules",value:function(t){this.moveRules.includes(t)||this.moveRules.push(t)}},{key:"move",value:function(t,e){var r=!1,n=!1;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])r=!0,n=!0;else{var o=this.isAllowMoveNode(t,e);"boolean"==typeof o?(r=o,n=o):(r=o.x,n=o.y)}if(r){var i=this.x+t;this.x=i,this.text&&this.moveText(t,0)}if(n){var a=this.y+e;this.y=a,this.text&&this.moveText(0,e)}return r||n}},{key:"getMoveDistance",value:function(t,e){var r=!1,n=!1,o=0,i=0;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])r=!0,n=!0;else{var a=this.isAllowMoveNode(t,e);"boolean"==typeof a?(r=a,n=a):(r=a.x,n=a.y)}if(r&&t){var u=this.x+t;this.x=u,this.text&&this.moveText(t,0),o=t}if(n&&e){var c=this.y+e;this.y=c,this.text&&this.moveText(0,e),i=e}return[o,i]}},{key:"moveTo",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t-this.x,o=e-this.y;return!(!r&&!this.isAllowMoveNode(n,o)||(this.text&&this.text&&this.moveText(n,o),this.x=t,this.y=e,0))}},{key:"moveText",value:function(t,e){var r=this.text,n=r.x,o=r.y,i=r.value,a=r.draggable,u=r.editable;this.text={value:i,editable:u,draggable:a,x:n+t,y:o+e}}},{key:"updateText",value:function(t){this.text=cd(cd({},this.text),{},{value:t})}},{key:"setSelected",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isSelected=t}},{key:"setHovered",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isHovered=t,this.setIsShowAnchor(t)}},{key:"setIsShowAnchor",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isShowAnchor=t}},{key:"setHitable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isHitable=t}},{key:"setElementState",value:function(t,e){this.state=t,this.additionStateData=e}},{key:"setProperty",value:function(t,e){this.properties=cd(cd({},this.properties),{},fd({},t,gc(e))),this.setAttributes()}},{key:"setProperties",value:function(t){this.properties=cd(cd({},this.properties),gc(t)),this.setAttributes()}},{key:"deleteProperty",value:function(t){delete this.properties[t],this.setAttributes()}},{key:"setStyle",value:function(t,e){this.style=cd(cd({},this.style),{},fd({},t,gc(e)))}},{key:"setStyles",value:function(t){this.style=cd(cd({},this.style),gc(t))}},{key:"updateStyles",value:function(t){this.style=cd({},gc(t))}},{key:"setZIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.zIndex=t}},{key:"updateAttributes",value:function(t){Fo(this,t)}}],r&&ld(e.prototype,r),n&&ld(e,n),t}(),Lp=pd(Ip.prototype,"type",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),zp=pd(Ip.prototype,"x",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bp=pd(Ip.prototype,"y",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hp=pd(Ip.prototype,"text",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Fp=pd(Ip.prototype,"properties",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Gp=pd(Ip.prototype,"_width",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),Xp=pd(Ip.prototype,"_height",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),Up=pd(Ip.prototype,"anchorsOffset",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Yp=pd(Ip.prototype,"isSelected",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vp=pd(Ip.prototype,"isHovered",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wp=pd(Ip.prototype,"isShowAnchor",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Kp=pd(Ip.prototype,"isDragging",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zp=pd(Ip.prototype,"isHitable",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qp=pd(Ip.prototype,"draggable",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Jp=pd(Ip.prototype,"visible",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Qp=pd(Ip.prototype,"zIndex",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),$p=pd(Ip.prototype,"state",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),td=pd(Ip.prototype,"autoToFront",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ed=pd(Ip.prototype,"style",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),pd(Ip.prototype,"incoming",[o.m],Object.getOwnPropertyDescriptor(Ip.prototype,"incoming"),Ip.prototype),pd(Ip.prototype,"outgoing",[o.m],Object.getOwnPropertyDescriptor(Ip.prototype,"outgoing"),Ip.prototype),pd(Ip.prototype,"addNodeMoveRules",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"addNodeMoveRules"),Ip.prototype),pd(Ip.prototype,"move",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"move"),Ip.prototype),pd(Ip.prototype,"getMoveDistance",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"getMoveDistance"),Ip.prototype),pd(Ip.prototype,"moveTo",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"moveTo"),Ip.prototype),pd(Ip.prototype,"moveText",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"moveText"),Ip.prototype),pd(Ip.prototype,"updateText",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"updateText"),Ip.prototype),pd(Ip.prototype,"setSelected",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"setSelected"),Ip.prototype),pd(Ip.prototype,"setHovered",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"setHovered"),Ip.prototype),pd(Ip.prototype,"setIsShowAnchor",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"setIsShowAnchor"),Ip.prototype),pd(Ip.prototype,"setHitable",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"setHitable"),Ip.prototype),pd(Ip.prototype,"setElementState",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"setElementState"),Ip.prototype),pd(Ip.prototype,"setProperty",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"setProperty"),Ip.prototype),pd(Ip.prototype,"setProperties",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"setProperties"),Ip.prototype),pd(Ip.prototype,"deleteProperty",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"deleteProperty"),Ip.prototype),pd(Ip.prototype,"setStyle",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"setStyle"),Ip.prototype),pd(Ip.prototype,"setStyles",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"setStyles"),Ip.prototype),pd(Ip.prototype,"updateStyles",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"updateStyles"),Ip.prototype),pd(Ip.prototype,"setZIndex",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"setZIndex"),Ip.prototype),pd(Ip.prototype,"updateAttributes",[o.k],Object.getOwnPropertyDescriptor(Ip.prototype,"updateAttributes"),Ip.prototype),Ip);function vd(t){return(vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function bd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gd(Object(r),!0).forEach((function(e){jd(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function md(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Od(){return Od="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ed(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Od.apply(this,arguments)}function _d(t,e){return(_d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ed(t);if(e){var o=Ed(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xd(t)}(this,r)}}function xd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ed(t){return(Ed=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sd(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var Pd,Ad,kd,Md=(dd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_d(t,e)}(i,t);var e,r,n,o=wd(i);function i(){var t,e,r,n,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var u=arguments.length,c=new Array(u),s=0;s<u;s++)c[s]=arguments[s];return jd(xd(t=o.call.apply(o,[this].concat(c))),"modelType",oi.CIRCLE_NODE),e=xd(t),r="r",n=hd,a=xd(t),n&&Object.defineProperty(e,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(a):void 0}),t}return e=i,(r=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var t=Od(Ed(i.prototype),"getNodeStyle",this).call(this),e=this.graphModel.theme.circle;return bd(bd({},t),Ua(e))}},{key:"getDefaultAnchor",value:function(){var t=this.x,e=this.y,r=this.r;return[{x:t,y:e-r,id:"".concat(this.id,"_0")},{x:t+r,y:e,id:"".concat(this.id,"_1")},{x:t,y:e+r,id:"".concat(this.id,"_2")},{x:t-r,y:e,id:"".concat(this.id,"_3")}]}}])&&md(e.prototype,r),n&&md(e,n),i}(yd),hd=Sd(dd.prototype,"r",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Sd(dd.prototype,"width",[o.m],Object.getOwnPropertyDescriptor(dd.prototype,"width"),dd.prototype),Sd(dd.prototype,"height",[o.m],Object.getOwnPropertyDescriptor(dd.prototype,"height"),dd.prototype),dd);function Td(t){return(Td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Nd(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nd(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nd(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Cd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Rd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Cd(Object(r),!0).forEach((function(e){Xd(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Id(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Ld(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zd(){return zd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},zd.apply(this,arguments)}function Bd(t,e){return(Bd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Gd(t);if(e){var o=Gd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Td(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fd(t)}(this,r)}}function Fd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gd(t){return(Gd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ud(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}r(127);var Yd,Vd,Wd,Kd=(Pd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bd(t,e)}(i,t);var e,r,n,o=Hd(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Xd(Fd(t=o.call.apply(o,[this].concat(r))),"modelType",oi.DIAMOND_NODE),Id(Fd(t),"rx",Ad,Fd(t)),Id(Fd(t),"ry",kd,Fd(t)),t}return e=i,(r=[{key:"getNodeStyle",value:function(){var t=zd(Gd(i.prototype),"getNodeStyle",this).call(this),e=this.graphModel.theme.diamond;return Rd(Rd({},t),Ua(e))}},{key:"points",get:function(){var t=this.x,e=this.y,r=this.rx,n=this.ry;return[[t,e-n],[t+r,e],[t,e+n],[t-r,e]]}},{key:"pointsPosition",get:function(){return this.points.map((function(t){return{x:t[0],y:t[1]}}))}},{key:"width",get:function(){var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;return this.points.forEach((function(r){var n=Dd(r,1)[0];n<t&&(t=n),n>e&&(e=n)})),e-t}},{key:"height",get:function(){var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;return this.points.forEach((function(r){var n=Dd(r,2)[1];n<t&&(t=n),n>e&&(e=n)})),e-t}},{key:"getDefaultAnchor",value:function(){var t=this;return this.points.map((function(e,r){var n=Dd(e,2);return{x:n[0],y:n[1],id:"".concat(t.id,"_").concat(r)}}))}}])&&Ld(e.prototype,r),n&&Ld(e,n),i}(yd),Ad=Ud(Pd.prototype,"rx",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),kd=Ud(Pd.prototype,"ry",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Ud(Pd.prototype,"points",[o.m],Object.getOwnPropertyDescriptor(Pd.prototype,"points"),Pd.prototype),Ud(Pd.prototype,"pointsPosition",[o.m],Object.getOwnPropertyDescriptor(Pd.prototype,"pointsPosition"),Pd.prototype),Ud(Pd.prototype,"width",[o.m],Object.getOwnPropertyDescriptor(Pd.prototype,"width"),Pd.prototype),Ud(Pd.prototype,"height",[o.m],Object.getOwnPropertyDescriptor(Pd.prototype,"height"),Pd.prototype),Pd);function Zd(t){return(Zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Jd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qd(Object(r),!0).forEach((function(e){ih(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Qd(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function $d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function th(){return th="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},th.apply(this,arguments)}function eh(t,e){return(eh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=oh(t);if(e){var o=oh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Zd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return nh(t)}(this,r)}}function nh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oh(t){return(oh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ih(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ah(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var uh,ch,sh=(Yd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eh(t,e)}(i,t);var e,r,n,o=rh(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return ih(nh(t=o.call.apply(o,[this].concat(r))),"modelType",oi.ELLIPSE_NODE),Qd(nh(t),"rx",Vd,nh(t)),Qd(nh(t),"ry",Wd,nh(t)),t}return e=i,(r=[{key:"getNodeStyle",value:function(){var t=th(oh(i.prototype),"getNodeStyle",this).call(this),e=this.graphModel.theme.ellipse;return Jd(Jd({},t),Ua(e))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var t=this.x,e=this.y,r=this.rx,n=this.ry;return[{x:t,y:e-n,id:"".concat(this.id,"_0")},{x:t+r,y:e,id:"".concat(this.id,"_1")},{x:t,y:e+n,id:"".concat(this.id,"_2")},{x:t-r,y:e,id:"".concat(this.id,"_3")}]}}])&&$d(e.prototype,r),n&&$d(e,n),i}(yd),Vd=ah(Yd.prototype,"rx",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Wd=ah(Yd.prototype,"ry",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),ah(Yd.prototype,"width",[o.m],Object.getOwnPropertyDescriptor(Yd.prototype,"width"),Yd.prototype),ah(Yd.prototype,"height",[o.m],Object.getOwnPropertyDescriptor(Yd.prototype,"height"),Yd.prototype),Yd);function lh(t){return(lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fh(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ph(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ph(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ph(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function hh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dh(Object(r),!0).forEach((function(e){_h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vh(){return vh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Oh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},vh.apply(this,arguments)}function gh(t,e){return(gh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Oh(t);if(e){var o=Oh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mh(t)}(this,r)}}function mh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oh(t){return(Oh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wh(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var xh,Eh,jh=(uh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gh(t,e)}(i,t);var e,r,n,o=bh(i);function i(){var t,e,r,n,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var u=arguments.length,c=new Array(u),s=0;s<u;s++)c[s]=arguments[s];return _h(mh(t=o.call.apply(o,[this].concat(c))),"modelType",oi.POLYGON_NODE),e=mh(t),r="points",n=ch,a=mh(t),n&&Object.defineProperty(e,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(a):void 0}),t}return e=i,(r=[{key:"getNodeStyle",value:function(){var t=vh(Oh(i.prototype),"getNodeStyle",this).call(this),e=this.graphModel.theme.polygon;return hh(hh({},t),Ua(e))}
/**
               * 由于大多数情况下，我们初始化拿到的多边形坐标都是基于原点的（例如绘图工具到处的svg）。
               * 在logicflow中对多边形进行移动，我们不需要去更新points，
               * 而是去更新多边形中心点即可。
               */},{key:"pointsPosition",get:function(){var t=this.x,e=this.y,r=this.width,n=this.height;return this.points.map((function(o){return{x:o[0]+t-r/2,y:o[1]+e-n/2}}))}},{key:"width",get:function(){var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;return this.points.forEach((function(r){var n=fh(r,1)[0];n<t&&(t=n),n>e&&(e=n)})),e-t}},{key:"height",get:function(){var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;return this.points.forEach((function(r){var n=fh(r,2)[1];n<t&&(t=n),n>e&&(e=n)})),e-t}},{key:"getDefaultAnchor",value:function(){var t=this,e=this.x,r=this.y,n=this.width,o=this.height;return this.points.map((function(i,a){var u=fh(i,2),c=u[0],s=u[1];return{x:e+c-n/2,y:r+s-o/2,id:"".concat(t.id,"_").concat(a)}}))}}])&&yh(e.prototype,r),n&&yh(e,n),i}(yd),ch=wh(uh.prototype,"points",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),wh(uh.prototype,"pointsPosition",[o.m],Object.getOwnPropertyDescriptor(uh.prototype,"pointsPosition"),uh.prototype),wh(uh.prototype,"width",[o.m],Object.getOwnPropertyDescriptor(uh.prototype,"width"),uh.prototype),wh(uh.prototype,"height",[o.m],Object.getOwnPropertyDescriptor(uh.prototype,"height"),uh.prototype),uh);function Sh(t){return(Sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ph(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ah(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ph(Object(r),!0).forEach((function(e){Rh(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ph(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function kh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mh(){return Mh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ch(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Mh.apply(this,arguments)}function Th(t,e){return(Th=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ch(t);if(e){var o=Ch(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Sh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Nh(t)}(this,r)}}function Nh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ch(t){return(Ch=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rh(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ih,Lh,zh,Bh,Hh,Fh,Gh,Xh=(xh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Th(t,e)}(i,t);var e,r,n,o=Dh(i);function i(){var t,e,r,n,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var u=arguments.length,c=new Array(u),s=0;s<u;s++)c[s]=arguments[s];return Rh(Nh(t=o.call.apply(o,[this].concat(c))),"modelType",oi.RECT_NODE),e=Nh(t),r="radius",n=Eh,a=Nh(t),n&&Object.defineProperty(e,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(a):void 0}),t}return e=i,(r=[{key:"getDefaultAnchor",value:function(){var t=this.x,e=this.y,r=this.width,n=this.height;return[{x:t,y:e-n/2,id:"".concat(this.id,"_0")},{x:t+r/2,y:e,id:"".concat(this.id,"_1")},{x:t,y:e+n/2,id:"".concat(this.id,"_2")},{x:t-r/2,y:e,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var t=Mh(Ch(i.prototype),"getNodeStyle",this).call(this),e=this.graphModel.theme.rect;return Ah(Ah({},t),Ua(e))}}])&&kh(e.prototype,r),n&&kh(e,n),i}(yd),Ih=xh.prototype,Lh="radius",zh=[o.C],Bh={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}},Fh={},Object.keys(Bh).forEach((function(t){Fh[t]=Bh[t]})),Fh.enumerable=!!Fh.enumerable,Fh.configurable=!!Fh.configurable,("value"in Fh||Fh.initializer)&&(Fh.writable=!0),Fh=zh.slice().reverse().reduce((function(t,e){return e(Ih,Lh,t)||t}),Fh),Hh&&void 0!==Fh.initializer&&(Fh.value=Fh.initializer?Fh.initializer.call(Hh):void 0,Fh.initializer=void 0),void 0===Fh.initializer&&(Object.defineProperty(Ih,Lh,Fh),Fh=null),Eh=Fh,xh);function Uh(t){return(Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Yh(Object(r),!0).forEach((function(e){$h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kh(){return Kh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Kh.apply(this,arguments)}function Zh(t,e){return(Zh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Qh(t);if(e){var o=Qh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Uh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jh(t)}(this,r)}}function Jh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qh(t){return(Qh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ty(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var ey=(Gh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zh(t,e)}(i,t);var e,r,n,o=qh(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return $h(Jh(t=o.call.apply(o,[this].concat(r))),"modelType",oi.TEXT_NODE),t}return e=i,(r=[{key:"getTextStyle",value:function(){var t=Kh(Qh(i.prototype),"getTextStyle",this).call(this),e=this.graphModel.theme.text;return Vh(Vh({},t),Ua(e))}},{key:"width",get:function(){var t=String(this.text.value).split(/[\r\n]/g),e=this.getTextStyle().fontSize;return pc({rows:t,fontSize:e,rowsLength:t.length}).width}},{key:"height",get:function(){var t=String(this.text.value).split(/[\r\n]/g),e=this.getTextStyle().fontSize;return pc({rows:t,fontSize:e,rowsLength:t.length}).height}}])&&Wh(e.prototype,r),n&&Wh(e,n),i}(yd),ty(Gh.prototype,"width",[o.m],Object.getOwnPropertyDescriptor(Gh.prototype,"width"),Gh.prototype),ty(Gh.prototype,"height",[o.m],Object.getOwnPropertyDescriptor(Gh.prototype,"height"),Gh.prototype),Gh);function ry(t){return(ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ny(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oy(t,e){return(oy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function iy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=uy(t);if(e){var o=uy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ry(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ay(t)}(this,r)}}function ay(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uy(t){return(uy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cy,sy,ly,fy,py=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oy(t,e)}(i,t);var e,r,n,o=iy(i);function i(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];return t=o.call.apply(o,[this].concat(u)),e=ay(t),r="modelType",n=oi.HTML_NODE,r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=i,(r=[{key:"getDefaultAnchor",value:function(){var t=this.x,e=this.y,r=this.width,n=this.height;return[{x:t,y:e-n/2,id:"".concat(this.id,"_0")},{x:t+r/2,y:e,id:"".concat(this.id,"_1")},{x:t,y:e+n/2,id:"".concat(this.id,"_2")},{x:t-r/2,y:e,id:"".concat(this.id,"_3")}]}}])&&ny(e.prototype,r),n&&ny(e,n),i}(yd);function dy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function hy(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function yy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vy(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gy(t,e,r,n,o){var i={};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var by=(cy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),vy(this,"graphModel",void 0),hy(this,"isShowHorizontal",sy,this),hy(this,"isShowVertical",ly,this),hy(this,"position",fy,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=e}var e,r,n;return e=t,r=[{key:"getStyle",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dy(Object(r),!0).forEach((function(e){vy(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},this.graphModel.theme.snapline)}
// 计算节点中心线与其他节点的对齐信息
},{key:"getCenterSnapLine",value:function(t,e){for(var r=t.x,n=t.y,o=!1,i=!1,a=0;a<e.length;a++){var u=e[a];if(u.id!==t.id&&(r===u.x&&(o=!0),n===u.y&&(i=!0),o&&i))break}return{isShowVertical:o,isShowHorizontal:i,position:{x:r,y:n}}}
// 计算节点上下边框与其他节点的上下边框的对齐信息
},{key:"getHorizontalSnapline",value:function(t,e){var r,n,o=!1,i=t.id;if(i){var a=this.graphModel.fakerNode;if(a&&a.id===i)n=oc(a);else{var u=this.graphModel.getNodeModelById(i);n=oc(u)}}for(var c=0;c<e.length;c++){var s=e[c];if(s.id!==t.id){var l=oc(s);if(l.minY===n.minY||l.maxY===n.minY){o=!0,r=n.minY;break}if(l.minY===n.maxY||l.maxY===n.maxY){o=!0,r=n.maxY;break}}}return Fo({isShowHorizontal:o,position:{y:r}})}
// 计算节点左右边框与其他节点的左右边框的对齐信息
},{key:"getVerticalSnapline",value:function(t,e){var r,n,o=!1,i=t.id;if(i){var a=this.graphModel.fakerNode;if(a&&a.id===i)n=oc(a);else{var u=this.graphModel.getNodeModelById(i);n=oc(u)}}for(var c=0;c<e.length;c++){var s=e[c];if(s.id!==t.id){var l=oc(s);if(l.minX===n.minX||l.maxX===n.minX){o=!0,r=n.minX;break}if(l.minX===n.maxX||l.maxX===n.maxX){o=!0,r=n.maxX;break}}}return Fo({isShowVertical:o,position:{x:r}})}
// 计算节点与其他节点的对齐信息
},{key:"getSnapLinePosition",value:function(t,e){var r=this.getCenterSnapLine(t,e),n=r.isShowHorizontal,o=r.isShowVertical;if(!n){var i=this.getHorizontalSnapline(t,e);i.isShowHorizontal&&(r.isShowHorizontal=i.isShowHorizontal,r.position.y=i.position.y)}if(!o){var a=this.getVerticalSnapline(t,e);a.isShowVertical&&(r.isShowVertical=a.isShowVertical,r.position.x=a.position.x)}return r}
// 设置对齐信息
},{key:"setSnaplineInfo",value:function(t){var e=t.isShowHorizontal,r=t.isShowVertical,n=t.position;this.position=n,this.isShowHorizontal=e,this.isShowVertical=r}
// 清空对齐信息，对齐线消失
},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}
// 设置节点对齐线
},{key:"setNodeSnapLine",value:function(t){var e=this.graphModel.nodes,r=this.getSnapLinePosition(t,e);this.setSnaplineInfo(r)}}],r&&yy(e.prototype,r),n&&yy(e,n),t}(),sy=gy(cy.prototype,"isShowHorizontal",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ly=gy(cy.prototype,"isShowVertical",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fy=gy(cy.prototype,"position",[o.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gy(cy.prototype,"clearSnapline",[o.k],Object.getOwnPropertyDescriptor(cy.prototype,"clearSnapline"),cy.prototype),gy(cy.prototype,"setNodeSnapLine",[o.k],Object.getOwnPropertyDescriptor(cy.prototype,"setNodeSnapLine"),cy.prototype),cy),my=new Map,Oy=function(t){var e=Eu(),r=window.requestAnimationFrame((function r(){if(t(),my.get(e)){var n=window.requestAnimationFrame(r);my.set(e,n)}}));return my.set(e,r),e},_y=function(t){var e=my.get(t);e&&(window.cancelAnimationFrame(e),my.delete(t))};function wy(t){return(wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xy(){return xy=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xy.apply(this,arguments)}function Ey(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jy(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ey(Object(r),!0).forEach((function(e){Ny(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ey(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sy(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Py(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Py(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Py(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ay(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ky(t,e){return(ky=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function My(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Dy(t);if(e){var o=Dy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===wy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ty(t)}(this,r)}}function Ty(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dy(t){return(Dy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ny(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Cy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ky(t,e)}(i,t);var e,r,n,o=My(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Ny(Ty(t=o.call(this)),"preTargetNode",void 0),Ny(Ty(t),"sourceRuleResults",void 0),Ny(Ty(t),"targetRuleResults",void 0),Ny(Ty(t),"dragHandler",void 0),Ny(Ty(t),"t",void 0),Ny(Ty(t),"onDragStart",(function(e){var r=e.event,n=t.props,o=n.anchorData,i=n.nodeModel,a=n.graphModel,u=a.overlapMode;a.selectNodeById(i.id),u!==pi.INCREASE&&i.autoToFront&&a.toFront(i.id),a.eventCenter.emit(ci.ANCHOR_DRAGSTART,{data:o,e:r,nodeModel:i}),t.setState({startX:o.x,startY:o.y,endX:o.x,endY:o.y})})),Ny(Ty(t),"onDraging",(function(e){var r=e.event,n=t.props,o=n.graphModel,i=n.nodeModel,a=n.anchorData,u=o.transformModel,c=o.eventCenter,s=o.width,l=o.height,f=o.editConfigModel,p=f.autoExpand,d=f.stopMoveGraph,h=r.clientX,y=r.clientY,v=o.getPointByClient({x:h,y:y}),g=v.domOverlayPosition,b=g.x,m=g.y,O=v.canvasOverlayPosition,_=O.x,w=O.y;t.t&&_y(t.t);var x=[];b<10?x=[10,0]:b+10>s?x=[-10,0]:m<10?x=[0,10]:m+10>l&&(x=[0,-10]),t.setState({endX:_,endY:w,draging:!0}),t.moveAnchorEnd(_,w),x.length>0&&!d&&p&&(t.t=Oy((function(){var e=Sy(x,2),r=e[0],n=e[1];u.translate(r,n);var o=t.state,i=o.endX,a=o.endY;t.setState({endX:i-r,endY:a-n}),t.moveAnchorEnd(i-r,a-n)}))),c.emit(ci.ANCHOR_DRAG,{data:a,e:r,nodeModel:i})})),Ny(Ty(t),"onDragEnd",(function(e){t.t&&_y(t.t),t.checkEnd(e),t.setState({startX:0,startY:0,endX:0,endY:0,draging:!1}),t.sourceRuleResults.clear(),t.targetRuleResults.clear();var r=t.props,n=r.graphModel,o=r.nodeModel,i=r.anchorData;n.eventCenter.emit(ci.ANCHOR_DRAGEND,{data:i,e:e,nodeModel:o})})),Ny(Ty(t),"checkEnd",(function(e){var r=t.props,n=r.graphModel,o=r.nodeModel,i=r.anchorData,a=i.x,u=i.y,c=i.id;n.edgeType;var s=t.state,l=s.endX,f=s.endY,p=s.draging,d=Qu({x:l,y:f},n);if(t.preTargetNode&&t.preTargetNode.state!==ti.DEFAULT&&t.preTargetNode.setElementState(ti.DEFAULT),p&&d&&d.node){var h=d.node,y=d.anchor.id,v="".concat(o.id,"_").concat(h.id,"_").concat(y,"_").concat(c),g=t.sourceRuleResults.get(v)||{},b=g.isAllPass,m=g.msg,O=t.targetRuleResults.get(v)||{},_=O.isAllPass,w=O.msg;if(b&&_){h.setElementState(ti.DEFAULT);var x=n.edgeGenerator(o.getData(),n.getNodeModelById(d.node.id).getData()),E=n.addEdge(jy(jy({},x),{},{sourceNodeId:o.id,sourceAnchorId:c,startPoint:{x:a,y:u},targetNodeId:d.node.id,targetAnchorId:d.anchor.id,endPoint:{x:d.anchor.x,y:d.anchor.y}})),j=t.props.anchorData;n.eventCenter.emit(ci.ANCHOR_DROP,{data:j,e:e,nodeModel:o,edgeModel:E})}else{var S=h.getData();n.eventCenter.emit(ci.CONNECTION_NOT_ALLOWED,{data:S,msg:w||m})}}})),t.sourceRuleResults=new Map,t.targetRuleResults=new Map,t.state={startX:0,startY:0,endX:0,endY:0,draging:!1},t.dragHandler=new ul({onDragStart:t.onDragStart,onDraging:t.onDraging,onDragEnd:t.onDragEnd}),t}return e=i,(r=[{key:"getAnchorShape",value:function(){var t=this.props,e=t.anchorData,r=t.style,n=t.node.getAnchorShape(e);if(n)return n;var o=e.x,i=e.y,a=jy(jy({},r),r.hover);return Object($.g)("g",null,Object($.g)(If,xy({className:"lf-node-anchor-hover"},a,{x:o,y:i})),Object($.g)(If,xy({className:"lf-node-anchor"},r,{x:o,y:i})))}},{key:"moveAnchorEnd",value:function(t,e){var r=this.props,n=r.graphModel,o=r.nodeModel,i=r.anchorData,a=Qu({x:t,y:e},n);if(a){var u=a.node,c=a.anchor.id;if(this.preTargetNode&&this.preTargetNode!==a.node&&this.preTargetNode.setElementState(ti.DEFAULT),i.id===c)return;this.preTargetNode=u;var s="".concat(o.id,"_").concat(u.id,"_").concat(c,"_").concat(i.id);if(!this.targetRuleResults.has(s)){var l=a.anchor,f=o.isAllowConnectedAsSource(u,i,l),p=u.isAllowConnectedAsTarget(o,i,l);this.sourceRuleResults.set(s,dc(f)),this.targetRuleResults.set(s,dc(p))}var d=this.sourceRuleResults.get(s).isAllPass,h=this.targetRuleResults.get(s).isAllPass;d&&h?u.setElementState(ti.ALLOW_CONNECT):u.setElementState(ti.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==ti.DEFAULT&&this.preTargetNode.setElementState(ti.DEFAULT)}},{key:"isShowLine",value:function(){var t=this.state,e=t.startX,r=t.startY,n=t.endX,o=t.endY;return ec(e,r,n,o)>10}},{key:"render",value:function(){var t=this,e=this.state,r=e.startX,n=e.startY,o=e.endX,i=e.endY,a=this.props,u=a.anchorData.edgeAddable,c=a.edgeStyle;
// className="lf-anchor" 作为下载时，需要将锚点删除的依据，不要修改类名
return Object($.g)("g",{className:"lf-anchor"},Object($.g)("g",{onMouseDown:function(e){!1!==u&&t.dragHandler.handleMouseDown(e)}},this.getAnchorShape()),this.isShowLine()&&Object($.g)(uf,xy({x1:r,y1:n,x2:o,y2:i},c,{"pointer-events":"none"})))}}])&&Ay(e.prototype,r),n&&Ay(e,n),i}($.a);function Ry(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Iy(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ry(Object(r),!0).forEach((function(e){Ly(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ry(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ly(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zy(t){return(zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function By(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Hy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hy(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hy(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fy(t){var e=t.x,r=void 0===e?0:e,n=t.y,o=void 0===n?0:n,i=t.value,a=t.fontSize,u=t.fill,c=void 0===u?"currentColor":u,s=t.overflowMode,l=void 0===s?"default":s,f=t.textWidth,p=void 0===f?"":f,d=t.model,h={textAnchor:"middle","dominant-baseline":"middle",x:r,y:o,fill:c};if(Object.entries(t).forEach((function(t){var e=By(t,2),r=e[0],n=e[1];"object"!==zy(n)&&(h[r]=n)})),i){var y=String(i).split(/[\r\n]/g),v=y.length;if("default"!==l){var g=d.BaseType,b=d.modelType;if(g===ai.NODE&&b!==oi.TEXT_NODE||g===ai.EDGE&&p)return function(t){var e=t.value,r=t.fontSize,n=t.model,o=t.fontFamily,i=void 0===o?"":o,a=t.lineHeight,u=t.wrapPadding,c=void 0===u?"0, 0":u,s=t.overflowMode,l=t.x,f=t.y,p=n.width,d=n.textHeight,h=t.textWidth||p,y=String(e).split(/[\r\n]/g),v=y.length,g=fc({rows:y,style:{fontSize:"".concat(r,"px"),width:"".concat(h,"px"),fontFamily:i,lineHeight:a,padding:c},rowsLength:v,className:"lf-get-text-height"}),b=n.height>g?n.height:g;d&&(b=d);var m="ellipsis"===s;return Object($.g)("g",null,Object($.g)("foreignObject",{width:h,height:b,x:l-h/2,y:f-b/2},Object($.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:b,width:h,padding:c}},Object($.g)("div",{className:m?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",style:Iy({},t)},y.map((function(t){return Object($.g)("div",{className:"lf-node-text--auto-wrap-inner"},t)}))))))}(t)}if(v>1){var m=y.map((function(t,e){var n=(e-(v-1)/2)*(a+2);return Object($.g)("tspan",{className:"lf-text-tspan",x:r,y:o+n},t)}));return Object($.g)("text",h,m)}return Object($.g)("text",h,i)}}function Gy(t){return(Gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xy(){return Xy=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xy.apply(this,arguments)}function Uy(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Yy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yy(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yy(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Wy(t,e){return(Wy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ky(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=qy(t);if(e){var o=qy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Gy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zy(t)}(this,r)}}function Zy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qy(t){return(qy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jy(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(63);var Qy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wy(t,e)}(i,t);var e,r,n,o=Ky(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Jy(Zy(e=o.call(this)),"dragHandler",void 0),Jy(Zy(e),"sumDeltaX",0),Jy(Zy(e),"sumDeltaY",0),Jy(Zy(e),"stepDrag",void 0),Jy(Zy(e),"onDraging",(function(t){var r=t.deltaX,n=t.deltaY,o=e.props,i=o.model,a=Uy(o.graphModel.transformModel.fixDeltaXY(r,n),2),u=a[0],c=a[1];i.moveText(u,c)})),Jy(Zy(e),"dblClickHandler",(function(){e.props.editable&&e.props.model.setElementState(ti.TEXT_EDIT)})),Jy(Zy(e),"mouseDownHandle",(function(t){var r=e.props,n=r.draggable,o=r.graphModel.editConfigModel.nodeTextDraggable;(n||o)&&e.stepDrag.handleMouseDown(t)}));var r=t.model,n=t.draggable;return e.stepDrag=new ul({onDraging:e.onDraging,step:1,model:r,isStopPropagation:n}),e}return e=i,(r=[{key:"getShape",value:function(){var t=this.props,e=t.model,r=t.graphModel,n=e.text,o=r.editConfigModel,i=n.value,a=n.x,u=n.y,c=n.editable,s=n.draggable,l={x:a,y:u,className:"",value:i};c?l.className="lf-element-text":s||o.nodeTextDraggable?l.className="lf-text-draggable":l.className="lf-text-disabled";var f=e.getTextStyle();return Object($.g)(Fy,Xy({},l,f,{model:e}))}},{key:"render",value:function(){if(this.props.model.text)return Object($.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&Vy(e.prototype,r),n&&Vy(e,n),i}($.a),$y=null!==window.navigator.userAgent.match(/MSIE|Trident/);function tv(t){return(tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ev(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return rv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rv(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rv(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ov(t,e){return(ov=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function iv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=uv(t);if(e){var o=uv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===tv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return av(t)}(this,r)}}function av(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uv(t){return(uv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cv(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var sv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ov(t,e)}(i,t);var e,r,n,o=iv(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),cv(av(e=o.call(this)),"t",void 0),cv(av(e),"moveOffset",void 0),cv(av(e),"stepDrag",void 0),cv(av(e),"contextMenuTime",void 0),cv(av(e),"startTime",void 0),cv(av(e),"clickTimer",void 0),cv(av(e),"onDragStart",(function(t){var r=t.event,n=r.clientX,o=r.clientY,i=e.props,a=i.model,u=i.graphModel.getPointByClient({x:n,y:o}).canvasOverlayPosition,c=u.x,s=u.y;e.moveOffset={x:a.x-c,y:a.y-s}})),cv(av(e),"onDraging",(function(t){var r=t.event,n=e.props,o=n.model,i=n.graphModel,a=i.editConfigModel,u=a.stopMoveGraph,c=a.autoExpand,s=i.transformModel,l=i.width,f=i.height,p=i.gridSize;o.isDragging=!0;var d=r.clientX,h=r.clientY,y=i.getPointByClient({x:d,y:h}).canvasOverlayPosition,v=y.x,g=y.y,b=ev(s.CanvasPointToHtmlPoint([v,g]),2),m=b[0],O=b[1];if(v+=e.moveOffset.x,g+=e.moveOffset.y,v=su(v,p),g=su(g,p),l&&f){if(!c||u||!(m<0||O<0||m>l||O>f)){var _=ev(s.CanvasPointToHtmlPoint([v-o.width/2,g-o.height/2]),2),w=_[0],x=_[1],E=ev(s.CanvasPointToHtmlPoint([v+o.width/2,g+o.height/2]),2),j=E[0],S=E[1],P=Math.max(p,20),A=[];w<0?A=[P,0]:j>i.width?A=[-P,0]:x<0?A=[0,P]:S>i.height&&(A=[0,-P]),e.t&&_y(e.t),A.length>0&&!u&&c?e.t=Oy((function(){var t=ev(A,2),e=t[0],r=t[1];s.translate(e,r),i.moveNode(o.id,-e/s.SCALE_X,-r/s.SCALE_X)})):i.moveNode2Coordinate(o.id,v,g)}}else i.moveNode2Coordinate(o.id,v,g)})),cv(av(e),"onDragEnd",(function(){e.t&&_y(e.t),e.props.model.isDragging=!1})),cv(av(e),"handleClick",(function(t){if(e.startTime&&!((new Date).getTime()-e.startTime>200)){var r=e.props,n=r.model,o=r.graphModel,i={data:n.getData(),e:t,position:o.getPointByClient({x:t.clientX,y:t.clientY})},a=2===t.button,u=2===t.detail;if(!a){var c=o.editConfigModel;o.selectNodeById(n.id,yu(t,c)),e.toFront(),u?(c.nodeTextEdit&&n.text.editable&&(n.setSelected(!1),o.setElementStateById(n.id,ti.TEXT_EDIT)),o.eventCenter.emit(ci.NODE_DBCLICK,i)):(o.eventCenter.emit(ci.ELEMENT_CLICK,i),o.eventCenter.emit(ci.NODE_CLICK,i))}}})),cv(av(e),"handleContextMenu",(function(t){t.preventDefault();var r=e.props,n=r.model,o=r.graphModel,i=n.getData(),a=o.getPointByClient({x:t.clientX,y:t.clientY});o.setElementStateById(n.id,ti.SHOW_MENU,a.domOverlayPosition),o.selectNodeById(n.id),o.eventCenter.emit(ci.NODE_CONTEXTMENU,{data:i,e:t,position:a}),e.toFront()})),cv(av(e),"handleMouseDown",(function(t){var r=e.props,n=r.model,o=r.graphModel;e.startTime=(new Date).getTime(),o.editConfigModel.adjustNodePosition&&n.draggable&&e.stepDrag&&e.stepDrag.handleMouseDown(t)})),cv(av(e),"setHoverON",(function(t){var r=e.props,n=r.model,o=r.graphModel;if(!n.isHovered){var i=n.getData();n.setHovered(!0),o.eventCenter.emit(ci.NODE_MOUSEENTER,{data:i,e:t})}})),cv(av(e),"setHoverOFF",(function(t){var r=e.props,n=r.model,o=r.graphModel,i=n.getData();n.isHovered&&(n.setHovered(!1),o.eventCenter.emit(ci.NODE_MOUSELEAVE,{data:i,e:t}))})),cv(av(e),"onMouseOut",(function(t){$y&&e.setHoverOFF(t)}));var r=t.graphModel,n=r.gridSize,a=r.eventCenter,u=t.model;return e.stepDrag=new ul({onDragStart:e.onDragStart,onDraging:e.onDraging,onDragEnd:e.onDragEnd,step:n,eventType:"NODE",isStopPropagation:!1,eventCenter:a,model:u}),e}return e=i,n=[{key:"getModel",value:function(t){return t}}],(r=[{key:"getAnchorShape",value:function(t){return null}},{key:"getAnchors",value:function(){var t=this,e=this.props,r=e.model,n=e.graphModel,o=r.isSelected,i=r.isHitable,a=r.isDragging,u=r.isShowAnchor;return i&&(o||u)&&!a?_o(r.anchors,(function(e,o){var i=r.getAnchorLineStyle(e),a=r.getAnchorStyle(e);return Object($.g)(Cy,{anchorData:e,node:t,style:a,edgeStyle:i,anchorIndex:o,nodeModel:r,graphModel:n,setHoverOFF:t.setHoverOFF})})):[]}},{key:"getText",value:function(){var t=this.props,e=t.model,r=t.graphModel;if(e.state===ti.TEXT_EDIT)return"";if(e.text){var n=r.editConfigModel,o=!1;return(e.text.draggable||n.nodeTextDraggable)&&(o=!0),Object($.g)(Qy,{editable:n.nodeTextEdit&&e.text.editable,model:e,graphModel:r,draggable:o})}}},{key:"getStateClassName",value:function(){var t=this.props.model,e=t.state,r=t.isDraging,n=t.isSelected,o="lf-node";switch(e){case ti.ALLOW_CONNECT:o+=" lf-node-allow";break;case ti.NOT_ALLOW_CONNECT:o+=" lf-node-not-allow";break;default:o+=" lf-node-default"}return r&&(o+=" lf-isDragging"),n&&(o+=" lf-node-selected"),o}},{key:"toFront",value:
/**
                 * 节点置顶，可以被某些不需要置顶的节点重写，如group节点。
                 */function(){var t=this.props,e=t.model,r=t.graphModel;r.overlapMode!==pi.INCREASE&&e.autoToFront&&r.toFront(e.id)}},{key:"render",value:function(){var t,e=this.props,r=e.model,n=e.graphModel,o=n.editConfigModel,i=o.hideAnchors,a=o.adjustNodePosition,u=n.gridSize,c=n.transformModel.SCALE_X,s=r.isHitable,l=r.draggable,f=Object($.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),i?null:this.getAnchors());return s?(a&&l&&this.stepDrag.setStep(u*c),t=Object($.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},f)):t=Object($.g)("g",{className:this.getStateClassName()},f),t}}])&&nv(e.prototype,r),n&&nv(e,n),i}($.a);function lv(t){return(lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fv(){return fv=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fv.apply(this,arguments)}function pv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dv(t,e){return(dv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yv(t);if(e){var o=yv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yv(t){return(yv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dv(t,e)}(i,t);var e,r,n,o=hv(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getShape",value:function(){var t=this.props.model,e=t.getNodeStyle();return Object($.g)(_f,fv({},e,{x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius}))}}])&&pv(e.prototype,r),n&&pv(e,n),i}(sv);function gv(t){return(gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bv(){return bv=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bv.apply(this,arguments)}function mv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ov(t,e){return(Ov=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=wv(t);if(e){var o=wv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===gv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function wv(t){return(wv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ov(t,e)}(i,t);var e,r,n,o=_v(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getShape",value:function(){var t=this.props.model,e=t.x,r=t.y,n=t.r,o=t.getNodeStyle();return Object($.g)(If,bv({},o,{x:e,y:r,r:n}))}}])&&mv(e.prototype,r),n&&mv(e,n),i}(sv);function Ev(t){return(Ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Sv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sv(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sv(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pv(t){var e=t.points,r=t.className,n={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(t).forEach((function(t){var e=jv(t,2),r=e[0],o=e[1];"object"!==Ev(o)&&(n[r]=o)})),n.className=r?"lf-basic-shape ".concat(r):"lf-basic-shape",n.points=e.map((function(t){return t.join(",")})).join(" "),Object($.g)("polygon",n)}function Av(t){return(Av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kv(){return kv=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kv.apply(this,arguments)}function Mv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Tv(t,e){return(Tv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Nv(t);if(e){var o=Nv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Av(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Nv(t){return(Nv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tv(t,e)}(i,t);var e,r,n,o=Dv(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getShape",value:function(){var t=this.props.model,e=t.x,r=t.y,n=t.width,o=t.height,i=t.points,a=t.getNodeStyle(),u={transform:"matrix(1 0 0 1 ".concat(e-n/2," ").concat(r-o/2,")")};return Object($.g)("g",u,Object($.g)(Pv,kv({},a,{points:i,x:e,y:r})))}}])&&Mv(e.prototype,r),n&&Mv(e,n),i}(sv);function Rv(t){return(Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Iv(){return Iv=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Iv.apply(this,arguments)}function Lv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zv(t,e){return(zv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Hv(t);if(e){var o=Hv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Rv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Hv(t){return(Hv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zv(t,e)}(i,t);var e,r,n,o=Bv(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getShape",value:function(){var t=this.props.model,e=t.getNodeStyle();return Object($.g)("g",null,Object($.g)(Pv,Iv({},e,{points:t.points,x:t.x,y:t.y})))}}])&&Lv(e.prototype,r),n&&Lv(e,n),i}(sv);function Gv(t){return(Gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Uv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Uv(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uv(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yv(t){var e=t.x,r=void 0===e?0:e,n=t.y,o=void 0===n?0:n,i=t.rx,a=void 0===i?4:i,u=t.ry,c=void 0===u?4:u,s=t.className,l={cx:r,cy:o,rx:a,ry:c,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(t).forEach((function(t){var e=Xv(t,2),r=e[0],n=e[1];"object"!==Gv(n)&&(l[r]=n)})),l.className=s?"lf-basic-shape ".concat(s):"lf-basic-shape",Object($.g)("ellipse",l)}function Vv(t){return(Vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wv(){return Wv=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wv.apply(this,arguments)}function Kv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Zv(t,e){return(Zv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Jv(t);if(e){var o=Jv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Vv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Jv(t){return(Jv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zv(t,e)}(i,t);var e,r,n,o=qv(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getShape",value:function(){var t=this.props.model,e=t.getNodeStyle();return Object($.g)(Yv,Wv({},e,{x:t.x,y:t.y,rx:t.rx,ry:t.ry}))}}])&&Kv(e.prototype,r),n&&Kv(e,n),i}(sv);function $v(t){return($v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function eg(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tg(Object(r),!0).forEach((function(e){rg(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rg(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ng(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function og(t,e){return(og=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ig(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ag(t);if(e){var o=ag(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ag(t){return(ag=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ug=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&og(t,e)}(i,t);var e,r,n,o=ig(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getBackground",value:function(){var t=this.props.model,e=t.getTextStyle(),r=t.text;if(r&&r.value&&e.background&&"transparnet"!==e.background.fill){var n=r.x,o=r.y,i=t.width,a=t.height,u=eg(eg({},e.background),{},{x:n,y:o-1,width:i,height:a});return Object($.g)(_f,u)}}},{key:"getShape",value:function(){return Object($.g)("g",null,this.getBackground())}}])&&ng(e.prototype,r),n&&ng(e,n),i}(sv);function cg(t){return(cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sg(){return sg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sg.apply(this,arguments)}function lg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fg(t,e){return(fg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hg(t);if(e){var o=hg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===cg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dg(t)}(this,r)}}function dg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hg(t){return(hg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yg(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var vg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fg(t,e)}(i,t);var e,r,n,o=pg(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return yg(dg(t=o.call.apply(o,[this].concat(r))),"ref",void 0),yg(dg(t),"currentProperties",void 0),yg(dg(t),"preProperties",void 0),yg(dg(t),"setRef",(function(e){t.ref=e})),t}return e=i,(r=[{key:"rootEl",get:function(){return this.ref}
/**
               * @overridable 支持重写
               * 自定义HTML节点内容
               * @param {HTMLElement} rootEl 自定义HTML节点内容可以挂载的dom节点
               * @example
               * class CustomHtmlNode extends HtmlNode {
               *   setHtml(rootEl) {
               *     const input = document.createElement('input');
               *     rootEl.appendChild(input)
               *   }
               * }
               */},{key:"setHtml",value:function(t){t.appendChild(document.createElement("div"))}
/**
               * @overridable 支持重写
               * 和react的shouldComponentUpdate类似，都是为了避免出发不必要的render.
               * 但是这里不一样的地方在于，setHtml方法，我们只在properties发生变化了后再触发。
               * 而x,y等这些坐标相关的方法发生了变化，不会再重新触发setHtml.
               */},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var t=this.props.model,e=t.x,r=t.y,n=t.height,o=t.width,i=t.getNodeStyle();return this.currentProperties=JSON.stringify(t.properties),Object($.g)("foreignObject",sg({},i,{x:e-o/2,y:r-n/2,width:o,height:n,ref:this.setRef}))}}])&&lg(e.prototype,r),n&&lg(e,n),i}(sv);function gg(t){return(gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bg(){return bg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bg.apply(this,arguments)}function mg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Og(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mg(Object(r),!0).forEach((function(e){Sg(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wg(t,e){return(wg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jg(t);if(e){var o=jg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===gg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Eg(t)}(this,r)}}function Eg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jg(t){return(jg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sg(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Pg,Ag,kg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wg(t,e)}(i,t);var e,r,n,o=xg(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Sg(Eg(e=o.call(this,t)),"setHoverON",(function(){e.setState({isHoverd:!0})})),Sg(Eg(e),"setHoverOFF",(function(){e.setState({isHoverd:!1})})),e.state={isHoverd:!1},e}return e=i,(r=[{key:"getBackground",value:function(){var t=this.props.model,e=t.getTextStyle(),r=t.text,n=e.background||{};if(this.state.isHoverd&&e.hover&&e.hover.background&&(n=Og(Og({},n),e.hover.background)),r&&r.value&&"transparent"!==n.fill){var o,i=e.fontSize,a=e.overflowMode,u=e.lineHeight,c=e.wrapPadding,s=e.textWidth,l=r.value,f=r.x,p=r.y,d=String(l).split(/[\r\n]/g),h=d.length;if("autoWrap"===a&&s){var y=fc({rows:d,style:{fontSize:"".concat(i,"px"),width:"".concat(s,"px"),lineHeight:u,padding:c},rowsLength:h,className:"lf-get-text-height"});o=Og(Og({},n),{},{x:f-1,y:p-1,width:s,height:y})}else{d&&d.forEach((function(t){Rs(t)}));var v=pc({rows:d,fontSize:i,rowsLength:h}),g=v.width,b=v.height;if("string"==typeof n.wrapPadding){var m=n.wrapPadding.split(",").filter((function(t){return t.trim()})).map((function(t){return parseFloat(t.trim())}));m.length>0&&m.length<=4&&(1===m.length?m=[m[0],m[0],m[0],m[0]]:2===m.length?m=[m[0],m[1],m[0],m[1]]:3===m.length&&(m=[m[0],m[1],m[2],m[1]]),g+=m[1]+m[3],b+=m[0]+m[2],f+=(m[1]-m[3])/2,p+=(m[2]-m[0])/2)}o=Og(Og({},n),{},{x:f-1,y:p-1,width:g,height:b})}return Object($.g)(_f,o)}}},{key:"getShape",value:function(){var t=this.props.model,e=t.text,r=e.value,n=e.x,o=e.y;if(r){var i=Og({x:n,y:o,className:"lf-element-text",value:r},t.getTextStyle());return Object($.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object($.g)(Fy,bg({},i,{model:t})))}}}])&&_g(e.prototype,r),n&&_g(e,n),i}(Qy);function Mg(t){return(Mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tg(){return Tg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tg.apply(this,arguments)}function Dg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ng(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dg(Object(r),!0).forEach((function(e){Fg(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Cg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Rg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rg(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rg(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ig(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lg(t,e){return(Lg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Hg(t);if(e){var o=Hg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bg(t)}(this,r)}}function Bg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hg(t){return(Hg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fg(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}(Ag=Pg||(Pg={})).SOURCE="SOURCE",Ag.TARGET="TARGET";var Gg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lg(t,e)}(i,t);var e,r,n,o=zg(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Fg(Bg(t=o.call(this)),"dragHandler",void 0),Fg(Bg(t),"oldEdge",void 0),Fg(Bg(t),"preTargetNode",void 0),Fg(Bg(t),"targetRuleResults",void 0),Fg(Bg(t),"sourceRuleResults",void 0),Fg(Bg(t),"onDragStart",(function(){var e=t.props,r=e.x,n=e.y,o=e.edgeModel,i=o.startPoint,a=o.endPoint,u=o.pointsList;t.oldEdge={startPoint:i,endPoint:a,pointsList:u},t.setState({endX:r,endY:n,draging:!0}),o.isHitable=!1})),Fg(Bg(t),"onDraging",(function(e){var r=e.deltaX,n=e.deltaY,o=t.state,i=o.endX,a=o.endY,u=t.props,c=u.graphModel,s=u.type,l=Cg(c.transformModel.moveCanvasPointByHtml([i,a],r,n),2),f=l[0],p=l[1];t.setState({endX:f,endY:p,draging:!0});var d=t.props.edgeModel,h=Qu({x:i,y:a},c);if(h&&h.node&&t.isAllowAdjust(h)){var y,v=d.startPoint,g=d.endPoint,b=d.sourceNode,m=d.targetNode;s===Pg.SOURCE?y={startPoint:{x:h.anchor.x,y:h.anchor.y},endPoint:{x:g.x,y:g.y},sourceNode:h.node,targetNode:m}:s===Pg.TARGET&&(y={startPoint:{x:v.x,y:v.y},endPoint:{x:h.anchor.x,y:h.anchor.y},sourceNode:b,targetNode:h.node}),d.updateAfterAdjustStartAndEnd(y)}else s===Pg.SOURCE?d.updateStartPoint({x:f,y:p}):s===Pg.TARGET&&d.updateEndPoint({x:f,y:p})})),Fg(Bg(t),"onDragEnd",(function(){var e;t.setState({draging:!1});var r=t.props,n=r.graphModel,o=r.edgeModel,i=r.type;o.isHitable=!0;var a=t.state,u=a.endX,c=a.endY,s=a.draging,l=Qu({x:u,y:c},n);if(s){if(l&&l.node&&t.isAllowAdjust(l)){var f,p=o.getData(),d=Ng(Ng({},p),{},{sourceAnchorId:"",targetAnchorId:"",text:(null==p||null===(f=p.text)||void 0===f?void 0:f.value)||""});i===Pg.SOURCE?d=Ng(Ng({},n.edgeGenerator(n.getNodeModelById(l.node.id).getData(),n.getNodeModelById(o.targetNodeId).getData(),d)),{},{sourceNodeId:l.node.id,sourceAnchorId:l.anchor.id,startPoint:{x:l.anchor.x,y:l.anchor.y},targetNodeId:o.targetNodeId,endPoint:Ng({},o.endPoint)}):i===Pg.TARGET&&(d=Ng(Ng({},n.edgeGenerator(n.getNodeModelById(o.sourceNodeId).getData(),n.getNodeModelById(l.node.id).getData(),d)),{},{sourceNodeId:o.sourceNodeId,startPoint:Ng({},o.startPoint),targetNodeId:l.node.id,targetAnchorId:l.anchor.id,endPoint:{x:l.anchor.x,y:l.anchor.y}})),n.deleteEdgeById(o.id);var h=n.addEdge(Ng({},d));n.eventCenter.emit(ci.EDGE_EXCHANGE_NODE,{data:{newEdge:h.getData(),oldEdge:o.getData()}})}else t.recoveryEdge();null===(e=t.preTargetNode)||void 0===e||e.setElementState(ti.DEFAULT)}})),Fg(Bg(t),"recoveryEdge",(function(){var e=t.props.edgeModel,r=t.oldEdge,n=r.startPoint,o=r.endPoint,i=r.pointsList;e.updateStartPoint(n),e.updateEndPoint(o),e.modelType!==oi.LINE_EDGE&&(e.pointsList=i,e.initPoints())})),Fg(Bg(t),"getAdjustPointStyle",(function(){return t.props.graphModel.theme.edgeAdjust})),t.state={draging:!1,endX:0,endY:0},t.targetRuleResults=new Map,t.sourceRuleResults=new Map,t.dragHandler=Ws({onDragStart:t.onDragStart,onDraging:t.onDraging,onDragEnd:t.onDragEnd}),t}return e=i,(r=[{key:"isAllowAdjust",value:function(t){var e=this.props,r=e.edgeModel;r.id;var n=r.sourceNode,o=r.targetNode,i=r.sourceAnchorId,a=r.targetAnchorId,u=e.type,c=null,s=null,l=null,f=null;if(u===Pg.SOURCE?(c=t.node,s=o,l=t.anchor,f=o.getAnchorInfo(a)):(c=n,s=t.node,f=t.anchor,l=n.getAnchorInfo(i)),this.preTargetNode&&this.preTargetNode!==t.node&&this.preTargetNode.setElementState(ti.DEFAULT),this.preTargetNode=t.node,f.id===l.id)return!1;var p="".concat(c.id,"_").concat(s.id,"_").concat(l.id,"_").concat(f.id);if(!this.targetRuleResults.has(p)){var d=c.isAllowConnectedAsSource(s,l,f),h=s.isAllowConnectedAsTarget(c,l,f);this.sourceRuleResults.set(p,dc(d)),this.targetRuleResults.set(p,dc(h))}var y=this.sourceRuleResults.get(p).isAllPass,v=this.targetRuleResults.get(p).isAllPass,g=y&&v?ti.ALLOW_CONNECT:ti.NOT_ALLOW_CONNECT;return u===Pg.SOURCE?c.setElementState(g):s.setElementState(g),y&&v}},{key:"render",value:function(){var t=this.props,e=t.x,r=t.y,n=this.state.draging,o=this.getAdjustPointStyle();return Object($.g)("g",null,Object($.g)(If,Tg({className:"lf-edge-adjust-point"},o,{x:e,y:r,onMouseDown:this.dragHandler,"pointer-events":n?"none":""})))}}])&&Ig(e.prototype,r),n&&Ig(e,n),i}($.a);function Xg(t){return(Xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ug(){return Ug=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ug.apply(this,arguments)}function Yg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vg(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Yg(Object(r),!0).forEach((function(e){Qg(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kg(t,e){return(Kg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Jg(t);if(e){var o=Jg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Xg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qg(t)}(this,r)}}function qg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jg(t){return(Jg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qg(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var $g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kg(t,e)}(i,t);var e,r,n,o=Zg(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Qg(qg(t=o.call.apply(o,[this].concat(r))),"startTime",void 0),Qg(qg(t),"contextMenuTime",void 0),Qg(qg(t),"clickTimer",void 0),Qg(qg(t),"handleHover",(function(e,r){var n=t.props,o=n.model,i=n.graphModel.eventCenter;o.setHovered(e);var a=e?ci.EDGE_MOUSEENTER:ci.EDGE_MOUSELEAVE,u=o.getData();i.emit(a,{data:u,e:r})})),Qg(qg(t),"setHoverON",(function(e){t.props.model.isHovered||t.handleHover(!0,e)})),Qg(qg(t),"setHoverOFF",(function(e){t.handleHover(!1,e)})),Qg(qg(t),"handleContextMenu",(function(e){e.preventDefault(),t.contextMenuTime=(new Date).getTime(),t.clickTimer&&clearTimeout(t.clickTimer);var r=t.props,n=r.model,o=r.graphModel,i=o.getPointByClient({x:e.clientX,y:e.clientY});o.setElementStateById(n.id,ti.SHOW_MENU,i.domOverlayPosition),t.toFront(),o.selectEdgeById(n.id);var a=null==n?void 0:n.getData();o.eventCenter.emit(ci.EDGE_CONTEXTMENU,{data:a,e:e,position:i})})),Qg(qg(t),"handleMouseDown",(function(e){e.stopPropagation(),t.startTime=(new Date).getTime()})),Qg(qg(t),"handleMouseUp",(function(e){if(t.startTime&&!((new Date).getTime()-t.startTime>200||2===e.button)){var r=2===e.detail,n=t.props,o=n.model,i=n.graphModel,a=null==o?void 0:o.getData(),u=i.getPointByClient({x:e.clientX,y:e.clientY});if(r){var c=i.editConfigModel,s=i.textEditElement;if(s&&s.id===o.id&&i.setElementStateById(o.id,ti.DEFAULT),c.edgeTextEdit&&o.text.editable&&i.setElementStateById(o.id,ti.TEXT_EDIT),o.modelType===oi.POLYLINE_EDGE){var l=o,f=i.getPointByClient({x:e.x,y:e.y}).canvasOverlayPosition,p=f.x,d=f.y,h=Bs({x:p,y:d},l.points);l.dbClickPosition=h}i.eventCenter.emit(ci.EDGE_DBCLICK,{data:a,e:e,position:u})}else i.eventCenter.emit(ci.ELEMENT_CLICK,{data:a,e:e,position:u}),i.eventCenter.emit(ci.EDGE_CLICK,{data:a,e:e,position:u});var y=i.editConfigModel;i.selectEdgeById(o.id,yu(e,y)),t.toFront()}})),Qg(qg(t),"getIsDragging",(function(){return!1})),t}return e=i,(r=[{key:"getShape",value:function(){}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var t=this.props,e=t.model,r=t.graphModel;if(e.state===ti.TEXT_EDIT)return"";var n=!1,o=r.editConfigModel;return(e.text.draggable||o.edgeTextDraggable)&&(n=!0),Object($.g)(kg,{editable:o.edgeTextEdit&&e.text.editable,model:e,graphModel:r,draggable:n})}},{key:"getArrowInfo",value:function(){var t=this.props.model,e=t.startPoint,r=t.endPoint,n=t.isSelected;return{start:e,end:r,hover:this.state.hover,isSelected:n}}},{key:"getArrowStyle",value:function(){var t=this.props,e=t.model,r=t.graphModel,n=e.getEdgeStyle(),o=e.getEdgeAnimationStyle(),i=r.theme.arrow,a=e.isAnimation?o.stroke:n.stroke;return Vg(Vg({},n),{},{fill:a,stroke:a},i)}},{key:"getArrow",value:function(){var t=this.props.model.id,e=this.getArrowStyle(),r=e.refY,n=void 0===r?0:r,o=e.refX,i=void 0===o?2:o;return Object($.g)("g",null,Object($.g)("defs",null,Object($.g)("marker",{id:"marker-start-".concat(t),refX:-i,refY:n,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object($.g)("marker",{id:"marker-end-".concat(t),refX:i,refY:n,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var t=this.getArrowStyle(),e=t.stroke,r=t.strokeWidth,n=t.offset,o=t.verticalLength;return Object($.g)("path",{stroke:e,fill:e,strokeWidth:r,d:"M 0 0 L ".concat(n," -").concat(o," L ").concat(n," ").concat(o," Z")})}},{key:"getEndArrow",value:function(){var t=this.getArrowStyle(),e=t.stroke,r=t.strokeWidth,n=t.offset,o=t.verticalLength;return Object($.g)("path",{stroke:e,fill:e,strokeWidth:r,transform:"rotate(180)",d:"M 0 0 L ".concat(n," -").concat(o," L ").concat(n," ").concat(o," Z")})}
// 起点终点，可以修改起点/终点为其他节点
},{key:"getAdjustPoints",value:function(){var t=this.props,e=t.model,r=t.graphModel,n=e.getAdjustStart(),o=e.getAdjustEnd();return Object($.g)("g",null,Object($.g)(Gg,Ug({type:"SOURCE"},n,{edgeModel:e,graphModel:r})),Object($.g)(Gg,Ug({type:"TARGET"},o,{edgeModel:e,graphModel:r})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object($.g)("g",null)}},{key:"getAppend",value:function(){return Object($.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"toFront",value:function(){var t=this.props,e=t.graphModel,r=t.model;e.overlapMode!==pi.INCREASE&&e.toFront(r.id)}},{key:"render",value:function(){var t=this.props,e=t.model,r=e.isSelected,n=e.isHitable,o=t.graphModel,i=this.getIsDragging(),a=o.editConfigModel.adjustEdgeStartAndEnd,u=o.animation,c=r&&u.edge&&1===o.getSelectElements().edges.length;return Object($.g)("g",null,Object($.g)("g",{className:["lf-edge",!n&&"pointer-none",r&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),c&&this.getAnimation(),this.getText(),this.getArrow()),a&&r&&!i?this.getAdjustPoints():"")}}])&&Wg(e.prototype,r),n&&Wg(e,n),i}($.a);function tb(t){return(tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return rb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rb(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var nb=function(t){var e={d:""};return Object.entries(t).forEach((function(t){var r=eb(t,2),n=r[0],o=r[1],i=tb(o);"style"!==n&&"object"===i||(e[n]=o)})),Object($.g)("path",e)};function ob(t){return(ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ib(){return ib=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ib.apply(this,arguments)}function ab(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ub(t,e){return(ub=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=sb(t);if(e){var o=sb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ob(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function sb(t){return(sb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ub(t,e)}(i,t);var e,r,n,o=cb(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getEdge",value:function(){var t=this.props.model,e=t.startPoint,r=t.endPoint,n=t.isAnimation,o=t.arrowConfig,i=t.getEdgeStyle(),a=t.getEdgeAnimationStyle(),u=a.strokeDasharray,c=a.stroke,s=a.strokeDashoffset,l=a.animationName,f=a.animationDuration,p=a.animationIterationCount,d=a.animationTimingFunction,h=a.animationDirection;return Object($.g)(uf,ib({},i,{x1:e.x,y1:e.y,x2:r.x,y2:r.y},o,n?{strokeDasharray:u,stroke:c,style:{strokeDashoffset:s,animationName:l,animationDuration:f,animationIterationCount:p,animationTimingFunction:d,animationDirection:h}}:{}))}},{key:"getShape",value:function(){return Object($.g)("g",null,this.getEdge())}},{key:"getAnimation",value:function(){var t=this.props.model,e=t.getAnimation(),r=e.stroke,n=e.className,o=e.strokeDasharray,i=t.startPoint,a=t.endPoint,u=t.getEdgeStyle();return Object($.g)("g",null,Object($.g)(uf,ib({},u,{x1:i.x,y1:i.y,x2:a.x,y2:a.y,className:n,strokeDasharray:o,stroke:r})))}},{key:"getAppendWidth",value:function(){var t=this.props.model,e=function(t){var e,r=t.start,n=t.end;if(r.x===n.x&&r.y===n.y)e="";else{var o={start:r,end:n,offset:10,verticalLength:5},i=rs(os(os({},o),{},{type:"start"})),a=rs(os(os({},o),{},{type:"end"}));e="M".concat(i.leftX," ").concat(i.leftY," \n    L").concat(i.rightX," ").concat(i.rightY," \n    L").concat(a.rightX," ").concat(a.rightY,"\n    L").concat(a.leftX," ").concat(a.leftY," z")}return{d:e,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}({start:t.startPoint,end:t.endPoint}),r=e.d,n=e.strokeWidth,o=e.fill,i=e.strokeDasharray,a=e.stroke;return Object($.g)(nb,{d:r,fill:o,strokeWidth:n,stroke:a,strokeDasharray:i})}}])&&ab(e.prototype,r),n&&ab(e,n),i}($g);function fb(t){return(fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return db(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?db(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function db(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var hb=function(t){var e={points:"",fill:"none"};return Object.entries(t).forEach((function(t){var r=pb(t,2),n=r[0],o=r[1];("style"===n||"object"!==fb(o))&&(e[n]=o)})),Object($.g)("polyline",e)};function yb(t){return(yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gb(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vb(Object(r),!0).forEach((function(e){Sb(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bb(){return bb=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bb.apply(this,arguments)}function mb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ob(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ob(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ob(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wb(t,e){return(wb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jb(t);if(e){var o=jb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Eb(t)}(this,r)}}function Eb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jb(t){return(jb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sb(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Pb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wb(t,e)}(i,t);var e,r,n,o=xb(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Sb(Eb(t=o.call(this)),"drag",void 0),Sb(Eb(t),"isDraging",void 0),Sb(Eb(t),"appendInfo",void 0),Sb(Eb(t),"dragHandler",void 0),Sb(Eb(t),"onDragStart",(function(){t.props.model.dragAppendStart()})),Sb(Eb(t),"onDraging",(function(e){var r=e.deltaX,n=e.deltaY,o=t.props,i=o.model,a=o.graphModel;t.isDraging=!0;var u=a.transformModel,c=a.editConfigModel,s=mb(u.fixDeltaXY(r,n),2),l=s[0],f=s[1],p=i,d=c.adjustEdgeMiddle;t.appendInfo=d?p.dragAppendSimple(t.appendInfo,{x:l,y:f}):p.dragAppend(t.appendInfo,{x:l,y:f})})),Sb(Eb(t),"onDragEnd",(function(){var e=t.props,r=e.model,n=e.graphModel.eventCenter,o=r;o.dragAppendEnd(),t.isDraging=!1,t.appendInfo=void 0,n.emit(ci.EDGE_ADJUST,{data:o.getData()})})),Sb(Eb(t),"beforeDragStart",(function(e,r){r.dragAble&&t.dragHandler(e),t.appendInfo=r})),Sb(Eb(t),"getIsDragging",(function(){return t.isDraging})),t.drag=Ws({onDragStart:t.onDragStart,onDraging:t.onDraging,onDragEnd:t.onDragEnd,isStopPropagation:!1}),t}return e=i,(r=[{key:"getEdge",value:function(){var t=this.props.model,e=t.points,r=t.isAnimation,n=t.arrowConfig,o=t.getEdgeStyle(),i=t.getEdgeAnimationStyle(),a=i.strokeDasharray,u=i.stroke,c=i.strokeDashoffset,s=i.animationName,l=i.animationDuration,f=i.animationIterationCount,p=i.animationTimingFunction,d=i.animationDirection;return Object($.g)(hb,bb({points:e},o,n,r?{strokeDasharray:a,stroke:u,style:{strokeDashoffset:c,animationName:s,animationDuration:l,animationIterationCount:f,animationTimingFunction:p,animationDirection:d}}:{}))}},{key:"getShape",value:function(){return Object($.g)("g",null,this.getEdge())}},{key:"getAnimation",value:function(){var t=this.props.model,e=t.getAnimation(),r=e.stroke,n=e.className,o=e.strokeDasharray,i=t.getEdgeStyle();return Object($.g)("g",null,Object($.g)(hb,bb({points:t.points},i,{className:n,strokeDasharray:o,stroke:r})))}},{key:"getArrowInfo",value:function(){var t=this.props.model,e=t.points,r=t.isSelected,n={start:null,end:null,hover:this.state.hover,isSelected:r},o=Ds(e);return o.length>=2&&(n.start=o[o.length-2],n.end=o[o.length-1]),n}},{key:"getAppendAttributes",value:function(t){var e,r=t.start,n=t.end;if(r.x===n.x&&r.y===n.y)e="";else{var o={start:r,end:n,offset:10,verticalLength:5},i=rs(gb(gb({},o),{},{type:"start"})),a=rs(gb(gb({},o),{},{type:"end"}));e="M".concat(i.leftX," ").concat(i.leftY," \n      L").concat(i.rightX," ").concat(i.rightY," \n      L").concat(a.rightX," ").concat(a.rightY,"\n      L").concat(a.leftX," ").concat(a.leftY," z")}return{d:e,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(t){var e=this.getAppendAttributes(t),r=e.d,n=e.strokeWidth,o=e.fill,i=e.strokeDasharray,a=e.stroke;return Object($.g)(nb,{d:r,fill:o,strokeWidth:n,stroke:a,strokeDasharray:i})}},{key:"getAppendWidth",value:function(){for(var t=this,e=this.props,r=e.model,n=e.graphModel,o=r.pointsList,i=r.draggable,a=[],u=o.length,c=function(e){var r="lf-polyline-append",c={start:{x:o[e].x,y:o[e].y},end:{x:o[e+1].x,y:o[e+1].y},startIndex:e,endIndex:e+1,direction:"",dragAble:!0},s=Object($.g)("g",{className:r},t.getAppendShape(c)),l=n.editConfigModel,f=l.adjustEdge,p=l.adjustEdgeMiddle;if(f&&i){t.dragHandler=t.drag;var d=c.startIndex,h=c.endIndex,y=p&&(0===d||h===u-1);c.dragAble=!y,c.start.x===c.end.x?(c.dragAble&&(r+="-ew-resize"),c.direction=li.VERTICAL):c.start.y===c.end.y&&(c.dragAble&&(r+="-ns-resize"),c.direction=li.HORIZONTAL),s=Object($.g)("g",{className:t.isDraging?"lf-dragging":"lf-drag-able",onMouseDown:function(e){return t.beforeDragStart(e,c)}},Object($.g)("g",{className:r},t.getAppendShape(c)))}else t.dragHandler=function(){};a.push(s)},s=0;s<u-1;s++)c(s);return Object($.g)("g",null,a)}}])&&_b(e.prototype,r),n&&_b(e,n),i}($g);function Ab(t){return(Ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Mb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mb(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tb(){return Tb=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tb.apply(this,arguments)}function Db(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nb(t,e){return(Nb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Rb(t);if(e){var o=Rb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ab(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Rb(t){return(Rb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ib=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nb(t,e)}(i,t);var e,r,n,o=Cb(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getEdge",value:function(){var t=this.props.model,e=t.getEdgeStyle(),r=t.path,n=t.isAnimation,o=t.arrowConfig,i=t.getEdgeAnimationStyle(),a=i.strokeDasharray,u=i.stroke,c=i.strokeDashoffset,s=i.animationName,l=i.animationDuration,f=i.animationIterationCount,p=i.animationTimingFunction,d=i.animationDirection;return Object($.g)(nb,Tb({d:r},e,o,n?{strokeDasharray:a,stroke:u,style:{strokeDashoffset:c,animationName:s,animationDuration:l,animationIterationCount:f,animationTimingFunction:p,animationDirection:d}}:{}))}},{key:"getShape",value:function(){return Object($.g)("g",null,this.getEdge())}},{key:"getAnimation",value:function(){var t=this.props.model,e=t.getAnimation(),r=e.stroke,n=e.className,o=e.strokeDasharray,i=t.getEdgeStyle();return Object($.g)("g",null,Object($.g)(nb,Tb({d:t.path},i,{className:n,strokeDasharray:o,stroke:r})))}
// 扩大bezier曲线可点击范围
},{key:"getAppendWidth",value:function(){var t=this.props.model.path;return Object($.g)(nb,{d:t,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var t=this.props.model,e=this.state.hover,r=t,n=r.path,o=r.isSelected,i=function(t){var e=Ls(t);return[e[2],e[3]]}(n),a=kb(i,2);return{start:a[0],end:a[1],hover:e,isSelected:o}}}])&&Db(e.prototype,r),n&&Db(e,n),i}($g);function Lb(t){return(Lb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Bb(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fb(t,e){return(Fb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Xb(t);if(e){var o=Xb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Lb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Xb(t){return(Xb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ub=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fb(t,e)}(i,t);var e,r,n,o=Gb(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,r=[{key:"getArrowAttributes",value:function(){var t=this.props,e=t.arrowInfo,r=t.style,n=e.start,o=e.end,i={start:n,end:o,offset:r.offset,verticalLength:r.verticalLength,type:"end"},a=rs(i),u=a.leftX,c=a.leftY,s=a.rightX,l=a.rightY;return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zb(Object(r),!0).forEach((function(e){Bb(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({d:"M".concat(u," ").concat(c," L").concat(o.x," ").concat(o.y," L").concat(s," ").concat(l," z")},r)}},{key:"getShape",value:function(){var t=this.getArrowAttributes(),e=t.d,r=t.strokeWidth,n=t.stroke,o=t.fill;return Object($.g)(nb,{d:e,fill:o,strokeWidth:r,stroke:n})}},{key:"render",value:function(){return Object($.g)("g",{className:"lf-arrow"},this.getShape())}}],r&&Hb(e.prototype,r),n&&Hb(e,n),i}($.a),Yb=function(t,e){return cn(t,e)},Vb=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},Wb=function(){return vt.a.Date.now()},Kb=/\s/,Zb=function(t){for(var e=t.length;e--&&Kb.test(t.charAt(e)););return e},qb=/^\s+/,Jb=function(t){return t?t.slice(0,Zb(t)+1).replace(qb,""):t},Qb=NaN,$b=/^[-+]0x[0-9a-f]+$/i,tm=/^0b[01]+$/i,em=/^0o[0-7]+$/i,rm=parseInt,nm=function(t){if("number"==typeof t)return t;if(gn(t))return Qb;if(kt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=kt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Jb(t);var r=tm.test(t);return r||em.test(t)?rm(t.slice(2),r?2:8):$b.test(t)?Qb:+t},om="Expected a function",im=Math.max,am=Math.min,um=function(t,e,r){var n,o,i,a,u,c,s=0,l=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError(om);function d(e){var r=n,i=o;return n=o=void 0,s=e,a=t.apply(i,r)}function h(t){var r=t-c;return void 0===c||r>=e||r<0||f&&t-s>=i}function y(){var t=Wb();if(h(t))return v(t);u=setTimeout(y,function(t){var r=e-(t-c);return f?am(r,i-(t-s)):r}(t))}function v(t){return u=void 0,p&&n?d(t):(n=o=void 0,a)}function g(){var t=Wb(),r=h(t);if(n=arguments,o=this,c=t,r){if(void 0===u)return function(t){return s=t,u=setTimeout(y,e),l?d(t):a}(c);if(f)return clearTimeout(u),u=setTimeout(y,e),d(c)}return void 0===u&&(u=setTimeout(y,e)),a}return e=nm(e)||0,kt(r)&&(l=!!r.leading,i=(f="maxWait"in r)?im(nm(r.maxWait)||0,e):i,p="trailing"in r?!!r.trailing:p),g.cancel=function(){void 0!==u&&clearTimeout(u),s=0,n=c=o=u=void 0},g.flush=function(){return void 0===u?a:v(Wb())},g},cm=r(166);function sm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lm(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var fm,pm,dm,hm=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),lm(this,"undos",[]),lm(this,"redos",[]),lm(this,"callbacks",[]),lm(this,"stopWatch",null),lm(this,"curData",null),lm(this,"maxSize",50),lm(this,"waitTime",100),lm(this,"eventCenter",void 0),this.eventCenter=e}var e,r,n;return e=t,(r=[{key:"add",value:function(t){Yb(Vb(this.undos),t)||(this.undos.push(t),Yb(this.curData,t)||(this.redos=[]),this.eventCenter.emit(ci.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}
// 1) undo方法触发
// 2) graphModel重新渲染nodes和edges
// 3) graphModel发生变化，触发watch
// 4) watch触发add
},{key:"undo",value:function(){if(this.undoAble()){var t=this.undos.pop();this.redos.push(t);var e=this.undos.pop();return this.curData=Ua(e),e}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var t=this.redos.pop();return this.curData=Ua(t),t}}},{key:"watch",value:function(t){var e=this;this.stopWatch&&this.stopWatch(),this.undos.push(t.modelToGraphData()),this.stopWatch=Object(cm.a)(t,um((function(){var r=t.modelToHistoryData();r&&e.add(r)}),this.waitTime))}}])&&sm(e.prototype,r),n&&sm(e,n),t}();function ym(t){return(ym="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return gm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gm(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mm(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bm(Object(r),!0).forEach((function(e){jm(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Om(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _m(t,e){return(_m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Em(t);if(e){var o=Em(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ym(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xm(t)}(this,r)}}function xm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Em(t){return(Em=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jm(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Sm,Pm,Am,km=cO((dm=pm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_m(t,e)}(i,t);var e,r,n,o=wm(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),jm(xm(t=o.call(this)),"ref",Object($.f)()),jm(xm(t),"__prevText",{type:"",text:"",id:""}),jm(xm(t),"keyupHandler",(function(e){var r=t.props.graphModel.textEditElement;"Enter"===e.key&&e.altKey&&r.setElementState(0)})),jm(xm(t),"inputHandler",(function(e){var r=e.target.innerText,n=t.props.graphModel.textEditElement;t.__prevText={type:n.type,text:r.replace(/(\r\n)+$|(\n)+$/,""),
// fix #488: 文本后面的换行符不保留
id:n.id}})),jm(xm(t),"keydownHandler",(function(t){t.stopPropagation()})),t.state={style:{left:0,top:0}},t}return e=i,n=[{key:"getDerivedStateFromProps",value:function(t){var e,r=t.graphModel,n=r.transformModel,o=r.theme,i=r.textEditElement;if(i){var a;if((null===(a=i.text)||void 0===a||!a.value)&&i.BaseType===ai.EDGE){var u=i.text,c=i.textPosition,s=c.x,l=c.y;u.x=s,u.y=l,i.setText(u)}var f={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(i.BaseType===ai.EDGE){var p=o.edgeText,d=p.overflowMode,h=p.lineHeight,y=p.wrapPadding,v=p.textWidth;v&&"autoWrap"===d&&(e=mm(mm({},f),{},{width:v,minWidth:v,lineHeight:h,padding:y}))}else if(i.BaseType===ai.NODE){var g=o.nodeText,b=g.overflowMode,m=g.lineHeight,O=g.wrapPadding,_=g.textWidth,w=i,x=w.width,E=w.modelType;(E!==oi.TEXT_NODE&&"autoWrap"===b||E===oi.TEXT_NODE&&_)&&(e=mm(mm({},f),{},{width:_||x,minWidth:_||x,lineHeight:m,padding:O}))}var j=i.text,S=j.x,P=j.y,A=vm(n.CanvasPointToHtmlPoint([S,P]),2);return{style:mm({left:A[0],top:A[1]},e)}}}}],(r=[{key:"componentDidMount",value:function(){this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current));var t=this.props.graphModel;t.eventCenter.on("".concat(ci.GRAPH_TRANSFORM,",").concat(ci.NODE_CLICK,",").concat(ci.BLANK_CLICK," "),(function(){var e=t.textEditElement,r=t.editConfigModel,n=r.edgeTextEdit,o=r.nodeTextEdit;(n||o)&&e&&t.textEditElement.setElementState(ti.DEFAULT)}))}},{key:"componentDidUpdate",value:function(){var t=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),""!==this.__prevText.id){var e=this.__prevText,r=e.text,n=e.id;t.updateText(n,r),t.eventCenter.emit(ci.TEXT_UPDATE,mm({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(t){if(void 0!==window.getSelection&&void 0!==document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var r=window.getSelection();r.removeAllRanges(),r.addRange(e)}}},{key:"render",value:function(){var t,e=this.props.graphModel.textEditElement,r=this.state.style;return e?Object($.g)("div",{contentEditable:!0,className:"lf-text-input",style:r,ref:this.ref,key:e.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},null===(t=e.text)||void 0===t?void 0:t.value):null}}])&&Om(e.prototype,r),n&&Om(e,n),i}($.a),jm(pm,"toolName","textEdit"),fm=dm))||fm,Mm=function(t){return t.modelType===oi.LINE_EDGE?function(t){var e=t.startPoint,r=t.endPoint,n=(e.x+r.x)/2,o=(e.y+r.y)/2,i=Math.abs(e.x-r.x)+10,a=Math.abs(e.y-r.y)+10;return{x:n-i/2,y:o-a/2,x1:n+i/2,y1:o+a/2}}(t):t.modelType===oi.POLYLINE_EDGE?function(t){var e=t.points,r=Ds(e),n=ys(r,8),o=n.x,i=n.y,a=n.width,u=n.height;return{x:o-a/2,y:i-u/2,x1:o+a/2,y1:i+u/2}}(t):t.modelType===oi.BEZIER_EDGE?function(t){var e=t.path,r=Ls(e),n=ys(r,8),o=n.x,i=n.y,a=n.width,u=n.height;return{x:o-a/2,y:i-u/2,x1:o+a/2,y1:i+u/2}}(t):void 0};function Tm(t){return(Tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||Cm(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nm(t){return function(t){if(Array.isArray(t))return Rm(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Cm(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cm(t,e){if(t){if("string"==typeof t)return Rm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rm(t,e):void 0}}function Rm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Im(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lm(t,e){return(Lm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Hm(t);if(e){var o=Hm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Tm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bm(t)}(this,r)}}function Bm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hm(t){return(Hm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fm(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Gm=cO((Am=Pm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lm(t,e)}(i,t);var e,r,n,o=zm(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Fm(Bm(e=o.call(this)),"stepDrag",void 0),Fm(Bm(e),"handleMouseDown",(function(t){e.stepDrag.handleMouseDown(t)})),Fm(Bm(e),"onDraging",(function(t){var r=t.deltaX,n=t.deltaY,o=e.props.graphModel,i=o.getSelectElements(!0);o.moveNodes(i.nodes.map((function(t){return t.id})),r,n)})),Fm(Bm(e),"handleContextMenu",(function(t){t.preventDefault();var r=e.props,n=r.graphModel,o=r.graphModel,i=o.eventCenter,a=o.selectElements,u=n.getPointByClient({x:t.clientX,y:t.clientY}),c={nodes:[],edges:[]};Nm(a.values()).forEach((function(t){t.BaseType===ai.NODE&&c.nodes.push(t.getData()),t.BaseType===ai.EDGE&&c.edges.push(t.getData())})),i.emit(ci.SELECTION_CONTEXTMENU,{data:c,e:t,position:u})}));var r=t.graphModel,n=r.gridSize,a=r.eventCenter;return e.stepDrag=new ul({onDraging:e.onDraging,step:n,eventType:"SELECTION",eventCenter:a}),e}return e=i,(r=[{key:"render",value:function(){var t=this.props.graphModel,e=t.selectElements,r=t.transformModel;if(!(e.size<=1)){var n=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;e.forEach((function(t){var e={x:0,y:0,x1:0,y1:0};t.BaseType===ai.NODE&&(e=function(t){var e=t.x,r=t.y,n=t.width,o=t.height;return{x:e-n/2,y:r-o/2,x1:e+n/2,y1:r+o/2}}(t)),t.BaseType===ai.EDGE&&(e=Mm(t)),n=Math.min(n,e.x),o=Math.min(o,e.y),i=Math.max(i,e.x1),a=Math.max(a,e.y1)}));var u=Dm(r.CanvasPointToHtmlPoint([n,o]),2);n=u[0],o=u[1];var c=Dm(r.CanvasPointToHtmlPoint([i,a]),2);i=c[0],a=c[1];var s={left:"".concat(n-10,"px"),top:"".concat(o-10,"px"),width:"".concat(i-n+20,"px"),height:"".concat(a-o+20,"px")};return Object($.g)("div",{className:"lf-multiple-select",style:s,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}])&&Im(e.prototype,r),n&&Im(e,n),i}($.a),Fm(Pm,"toolName","multipleSelect"),Sm=Am))||Sm;function Xm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Um(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ym=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Um(this,"tools",void 0),Um(this,"components",void 0),Um(this,"toolMap",new Map),Um(this,"instance",void 0),this.instance=e,this.isDisabledTool(km.toolName)||this.registerTool(km.toolName,km),this.isDisabledTool(Gm.toolName)||this.registerTool(Gm.toolName,Gm)}var e,r,n;return e=t,(r=[{key:"isDisabledTool",value:function(t){return-1!==this.instance.options.disabledTools.indexOf(t)}},{key:"registerTool",value:function(t,e){this.toolMap.set(t,e)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&Xm(e.prototype,r),n&&Xm(e,n),t}(),Vm=r(167),Wm=r.n(Vm);function Km(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Zm(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var qm=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Zm(this,"mousetrap",void 0),Zm(this,"options",void 0),Zm(this,"target",void 0),e.keyboard||(e.keyboard={enabled:!1}),this.options=e;var r=e.lf;this.target=r.container,this.mousetrap=new Wm.a(this.target),e.keyboard.enabled&&this.enable(!0)}var e,r,n;return e=t,(r=[{key:"initShortcuts",value:function(){var t=this,e=this.options.keyboard.shortcuts;if(e)if(Je(e))e.forEach((function(e){var r=e.keys,n=e.callback,o=e.action;return t.on(r,n,o)}));else{var r=e.keys,n=e.callback,o=e.action;this.on(r,n,o)}}},{key:"on",value:function(t,e,r){this.mousetrap.bind(this.getKeys(t),e,r)}},{key:"disabled",get:function(){return!0!==this.options.keyboard.enabled}},{key:"off",value:function(t,e){this.mousetrap.unbind(this.getKeys(t),e)}},{key:"enable",value:function(t){(this.disabled||t)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(t){var e=this;return(Array.isArray(t)?t:[t]).map((function(t){return e.formatkey(t)}))}},{key:"formatkey",value:function(t){return t.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&Km(e.prototype,r),n&&Km(e,n),t}(),Jm=qm,Qm=null;function $m(t,e){return t.x+=e,t.y+=e,t.text&&(t.text.x+=e,t.text.y+=e),t}function tO(t,e){return t.startPoint&&(t.startPoint.x+=e,t.startPoint.y+=e),t.endPoint&&(t.endPoint.x+=e,t.endPoint.y+=e),t.pointsList&&t.pointsList.length>0&&t.pointsList.forEach((function(t){t.x+=e,t.y+=e})),t.text&&(t.text.x+=e,t.text.y+=e),t}var eO=40;function rO(t){return(rO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function oO(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nO(Object(r),!0).forEach((function(e){aO(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nO(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function iO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aO(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var uO=function(){function t(e){var r,n,o,i,a,u,c=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),aO(this,"container",void 0),aO(this,"width",void 0),aO(this,"height",void 0),aO(this,"graphModel",void 0),aO(this,"history",void 0),aO(this,"viewMap",new Map),aO(this,"tool",void 0),aO(this,"keyboard",void 0),aO(this,"dnd",void 0),aO(this,"options",void 0),aO(this,"snaplineModel",void 0),aO(this,"components",[]),aO(this,"plugins",void 0),aO(this,"extension",{}),aO(this,"adapterIn",void 0),aO(this,"adapterOut",void 0),aO(this,"getView",(function(t){return c.viewMap.get(t)})),e=mp(e),this.options=e,this.container=e.container,this.plugins=e.plugins,this.graphModel=new xl(oO({},e)),this.tool=new Ym(this),this.history=new hm(this.graphModel.eventCenter),this.dnd=new bp({lf:this}),this.keyboard=new Jm({lf:this,keyboard:e.keyboard}),!1!==e.snapline&&(this.snaplineModel=new by(this.graphModel),r=this.graphModel.eventCenter,n=this.snaplineModel,r.on("node:mousemove",(function(t){var e=t.data;n.setNodeSnapLine(e)})),r.on("node:mouseup",(function(){n.clearSnapline()}))),o=this,i=this.graphModel,a=o.keyboard,u=a.options.keyboard,a.on(["cmd + c","ctrl + c"],(function(){if(u.enabled&&!i.textEditElement){var t=o.options.guards,e=i.getSelectElements(!1);return t&&t.beforeClone&&!t.beforeClone(e)?(Qm=null,!1):((Qm=e).nodes.forEach((function(t){return $m(t,eO)})),Qm.edges.forEach((function(t){return tO(t,eO)})),!1)}})),a.on(["cmd + v","ctrl + v"],(function(){if(u.enabled&&!i.textEditElement){if(Qm&&(Qm.nodes||Qm.edges)){o.clearSelectElements();var t=o.addElements(Qm);if(!t)return;t.nodes.forEach((function(t){return o.selectElementById(t.id,!0)})),t.edges.forEach((function(t){return o.selectElementById(t.id,!0)})),Qm.nodes.forEach((function(t){return $m(t,eO)})),Qm.edges.forEach((function(t){return tO(t,eO)}))}return!1}})),a.on(["cmd + z","ctrl + z"],(function(){if(u.enabled&&!i.textEditElement)return o.undo(),!1})),a.on(["cmd + y","ctrl + y"],(function(){if(u.enabled&&!i.textEditElement)return o.redo(),!1})),a.on(["backspace"],(function(){if(u.enabled&&!i.textEditElement){var t=i.getSelectElements(!0);return o.clearSelectElements(),t.edges.forEach((function(t){return o.deleteEdge(t.id)})),t.nodes.forEach((function(t){return o.deleteNode(t.id)})),!1}})),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(e.disabledPlugins)}var e,r,n;return e=t,r=[{key:"register",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("string"==typeof t){var n={BaseEdge:$g,BaseEdgeModel:Pc,BaseNode:sv,BaseNodeModel:yd,RectNode:vv,RectNodeModel:Xh,CircleNode:xv,CircleNodeModel:Md,PolygonNode:Cv,PolygonNodeModel:jh,TextNode:ug,TextNodeModel:ey,LineEdge:lb,LineEdgeModel:Fc,DiamondNode:Fv,DiamondNodeModel:Kd,PolylineEdge:Pb,PolylineEdgeModel:es,BezierEdge:Ib,BezierEdgeModel:rd,EllipseNode:Qv,EllipseNodeModel:sh,HtmlNode:vg,HtmlNodeModel:py,
// mobx,
h:$.g,type:t};this.viewMap.forEach((function(t){var e=t.extendKey;e&&(n[e]=t)})),this.graphModel.modelMap.forEach((function(t){var e=t.extendKey;e&&(n[e]=t)}));var o=e(n),i=o.view,a=o.model,u=i;r&&!u.isObervered&&(u.isObervered=!0,u=Q(u)),this.setView(t,u),this.graphModel.setModel(t,a)}else this.registerElement(t)}},{key:"registerElement",value:function(t){var e=t.view;!1===t.isObserverView||e.isObervered||(e.isObervered=!0,e=Q(e)),this.setView(t.type,e),this.graphModel.setModel(t.type,t.model)}
/**
               * 批量注册
               * @param elements 注册的元素
               */},{key:"batchRegister",value:function(){var t=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e){t.registerElement(e)}))}},{key:"defaultRegister",value:function(){this.registerElement({view:vv,model:Xh,type:"rect"}),this.registerElement({type:"circle",view:xv,model:Md}),this.registerElement({type:"polygon",view:Cv,model:jh}),this.registerElement({type:"line",view:lb,model:Fc}),this.registerElement({type:"polyline",view:Pb,model:es}),this.registerElement({type:"bezier",view:Ib,model:rd}),this.registerElement({type:"text",view:ug,model:ey}),this.registerElement({type:"ellipse",view:Qv,model:sh}),this.registerElement({type:"diamond",view:Fv,model:Kd}),this.registerElement({type:"html",view:vg,model:py})}
/**
               * 将图形选中
               * @param id 选择元素ID
               * @param multiple 是否允许多选，如果为true，不会将上一个选中的元素重置
               * @param toFront 是否将选中的元素置顶，默认为true
               */},{key:"selectElementById",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.graphModel.selectElementById(t,e),!e&&r&&this.graphModel.toFront(t)}
/**
               * 定位到画布视口中心
               * 支持用户传入图形当前的坐标或id，可以通过type来区分是节点还是边的id，也可以不传（兜底）
               * @param focusOnArgs.id 如果传入的是id, 则画布视口中心移动到此id的元素中心点。
               * @param focusOnArgs.coordinate 如果传入的是坐标，则画布视口中心移动到此坐标。
               */},{key:"focusOn",value:function(t){var e=this.graphModel.transformModel,r=t.coordinate,n=t.id;if(!r){var o=this.getNodeModelById(n);o&&(r=o.getData());var i=this.getEdgeModelById(n);i&&(r=i.textPosition)}var a=r,u=a.x,c=a.y;e.focusOn(u,c,this.graphModel.width,this.graphModel.height)}
/**
               * 设置主题样式
               * @param { object } style 自定义主题样式
               * todo docs link
               */},{key:"setTheme",value:function(t){this.graphModel.setTheme(t)}
/**
               * 重新设置画布的宽高
               * 不传会自动计算画布宽高
               */},{key:"resize",value:function(t,e){this.graphModel.resize(t,e),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}
/**
               * 设置默认的边类型。
               * 也就是设置在节点直接有用户手动绘制的连线类型。
               * @param type Options.EdgeType
               */},{key:"setDefaultEdgeType",value:function(t){this.graphModel.setDefaultEdgeType(t)}
/**
               * 更新节点或边的文案
               * @param id 节点或者边id
               * @param value 文案内容
               */},{key:"updateText",value:function(t,e){this.graphModel.updateText(t,e)}
/**
               * 删除元素，在不确定当前id是节点还是边时使用
               * @param id 元素id
               */},{key:"deleteElement",value:function(t){var e,r,n,o=this.getModelById(t);return!!o&&null!==(r=null===(n=(aO(e={},ai.NODE,this.deleteNode),aO(e,ai.EDGE,this.deleteEdge),e)[o.BaseType])||void 0===n?void 0:n.call(this,t))&&void 0!==r&&r}
/**
               * 获取节点或边对象
               * @param id id
               */},{key:"getModelById",value:function(t){return this.graphModel.getElement(t)}
/**
               * 获取节点或边的数据
               * @param id id
               */},{key:"getDataById",value:function(t){return this.graphModel.getElement(t).getData()}
/**
               * 修改指定节点类型
               * @param id 节点id
               * @param type 节点类型
               */},{key:"changeNodeType",value:function(t,e){this.graphModel.changeNodeType(t,e)}
/**
               * 切换边的类型
               * @param id 边Id
               * @param type 边类型
               */},{key:"changeEdgeType",value:function(t,e){this.graphModel.changeEdgeType(t,e)}
/**
               * 获取节点连接的所有边的model
               * @param nodeId 节点ID
               * @returns model数组
               */},{key:"getNodeEdges",value:function(t){return this.graphModel.getNodeEdges(t)}
/**
               * 添加节点
               * @param nodeConfig 节点配置
               */},{key:"addNode",value:function(t){return this.graphModel.addNode(t)}
/**
               * 删除节点
               * @param {string} nodeId 节点Id
               */},{key:"deleteNode",value:function(t){var e=this.graphModel.getNodeModelById(t);if(!e)return!1;var r=e.getData(),n=this.options.guards,o=!n||!n.beforeDelete||n.beforeDelete(r);return o&&this.graphModel.deleteNode(t),o}
/**
               * 克隆节点
               * @param nodeId 节点Id
               */},{key:"cloneNode",value:function(t){var e=this.graphModel.getNodeModelById(t).getData(),r=this.options.guards;if(!r||!r.beforeClone||r.beforeClone(e))return this.graphModel.cloneNode(t)}
/**
               * 修改节点的id， 如果不传新的id，会内部自动创建一个。
               * @param { string } oldId 将要被修改的id
               * @param { string } newId 可选，修改后的id
               * @returns 修改后的节点id, 如果传入的oldId不存在，返回空字符串
               */},{key:"changeNodeId",value:function(t,e){return this.graphModel.changeNodeId(t,e)}
/**
               * 获取节点对象
               * @param nodeId 节点Id
               */},{key:"getNodeModelById",value:function(t){return this.graphModel.getNodeModelById(t)}
/**
               * 获取节点数据
               * @param nodeId 节点
               */},{key:"getNodeDataById",value:function(t){return this.graphModel.getNodeModelById(t).getData()}
/**
               * 给两个节点之间添加一条边
               * @example
               * lf.addEdge({
               *   type: 'polygon'
               *   sourceNodeId: 'node_id_1',
               *   targetNodeId: 'node_id_2',
               * })
               * @param {object} edgeConfig
               */},{key:"addEdge",value:function(t){return this.graphModel.addEdge(t)}
/**
               * 删除边
               * @param {string} edgeId 边Id
               */},{key:"deleteEdge",value:function(t){var e=this.options.guards,r=this.graphModel.edgesMap[t];if(!r)return!1;var n=r.model.getData(),o=!e||!e.beforeDelete||e.beforeDelete(n);return o&&this.graphModel.deleteEdgeById(t),o}
/**
               * 删除指定类型的边, 基于边起点和终点，可以只传其一。
               * @param config.sourceNodeId 边的起点节点ID
               * @param config.targetNodeId 边的终点节点ID
               */},{key:"deleteEdgeByNodeId",value:function(t){var e=t.sourceNodeId,r=t.targetNodeId;e&&r?this.graphModel.deleteEdgeBySourceAndTarget(e,r):e?this.graphModel.deleteEdgeBySource(e):r&&this.graphModel.deleteEdgeByTarget(r)}
/**
               * 修改边的id， 如果不传新的id，会内部自动创建一个。
               * @param { string } oldId 将要被修改的id
               * @param { string } newId 可选，修改后的id
               * @returns 修改后的节点id, 如果传入的oldId不存在，返回空字符串
               */},{key:"changeEdgeId",value:function(t,e){return this.graphModel.changeEdgeId(t,e)}
/**
               * 基于边Id获取边的model
               * @param edgeId 边的Id
               * @return model
               */},{key:"getEdgeModelById",value:function(t){var e;return null===(e=this.graphModel.edgesMap[t])||void 0===e?void 0:e.model}
/**
               * 获取满足条件边的model
               * @param edgeFilter 过滤条件
               * @example
               * 获取所有起点为节点A的边的model
               * lf.getEdgeModels({
               *   sourceNodeId: 'nodeA_id'
               * })
               * 获取所有终点为节点B的边的model
               * lf.getEdgeModels({
               *   targetNodeId: 'nodeB_id'
               * })
               * 获取起点为节点A，终点为节点B的边
               * lf.getEdgeModels({
               *   sourceNodeId: 'nodeA_id',
               *   targetNodeId: 'nodeB_id'
               * })
               * @return model数组
               */},{key:"getEdgeModels",value:function(t){var e=this.graphModel.edges,r=t.sourceNodeId,n=t.targetNodeId;if(r&&n){var o=[];return e.forEach((function(t){t.sourceNodeId===r&&t.targetNodeId===n&&o.push(t)})),o}if(r){var i=[];return e.forEach((function(t){t.sourceNodeId===r&&i.push(t)})),i}if(n){var a=[];return e.forEach((function(t){t.targetNodeId===n&&a.push(t)})),a}return[]}
/**
               * 基于id获取边数据
               * @param edgeId 边Id
               * @returns EdgeData
               */},{key:"getEdgeDataById",value:function(t){var e;return null===(e=this.getEdgeModelById(t))||void 0===e?void 0:e.getData()}
/**
               * 获取所有以此节点为终点的边
               */},{key:"getNodeIncomingEdge",value:function(t){return this.graphModel.getNodeIncomingEdge(t)}
/**
               * 获取所有以此节点为起点的边
               */},{key:"getNodeOutgoingEdge",value:function(t){return this.graphModel.getNodeOutgoingEdge(t)}
/**
               * 获取节点连接到的所有起始节点
               */},{key:"getNodeIncomingNode",value:function(t){return this.graphModel.getNodeIncomingNode(t)}
/**
               * 获取节点连接到的所有目标节点
               */},{key:"getNodeOutgoingNode",value:function(t){return this.graphModel.getNodeOutgoingNode(t)}
/**
               * 显示节点、连线文本编辑框
               * @param id 元素id
               */},{key:"editText",value:function(t){this.graphModel.editText(t)}
/**
               * 设置元素的自定义属性
               * @see todo docs link
               * @param id 元素的id
               * @param properties 自定义属性
               */},{key:"setProperties",value:function(t,e){var r;null===(r=this.graphModel.getElement(t))||void 0===r||r.setProperties(gc(e))}},{key:"deleteProperty",value:function(t,e){var r;null===(r=this.graphModel.getElement(t))||void 0===r||r.deleteProperty(e)}
/**
               * 获取元素的自定义属性
               * @param id 元素的id
               * @returns 自定义属性
               */},{key:"getProperties",value:function(t){var e;return null===(e=this.graphModel.getElement(t))||void 0===e?void 0:e.getProperties()}
/**
               * 将某个元素放置到顶部。
               * 如果堆叠模式为默认模式，则将原置顶元素重新恢复原有层级。
               * 如果堆叠模式为递增模式，则将需指定元素zIndex设置为当前最大zIndex + 1。
               * @see todo link 堆叠模式
               * @param id 元素Id
               */},{key:"toFront",value:function(t){this.graphModel.toFront(t)}
/**
               * 设置元素的zIndex.
               * 注意：默认堆叠模式下，不建议使用此方法。
               * @see todo link 堆叠模式
               * @param id 元素id
               * @param zIndex zIndex的值，可以传数字，也支持传入'top' 和 'bottom'
               */},{key:"setElementZIndex",value:function(t,e){return this.graphModel.setElementZIndex(t,e)}
/**
               * 添加多个元素, 包括边和节点。
               */},{key:"addElements",value:function(t){for(var e=this,r=t.nodes,n=t.edges,o={},i={nodes:[],edges:[]},a=0;a<r.length;a++){var u=r[a],c=u.id,s=this.addNode(u);if(!s)return;c&&(o[c]=s.id),i.nodes.push(s)}return n.forEach((function(t){var r=t.sourceNodeId,n=t.targetNodeId;o[r]&&(r=o[r]),o[n]&&(n=o[n]);var a=e.graphModel.addEdge(oO(oO({},t),{},{sourceNodeId:r,targetNodeId:n}));i.edges.push(a)})),i}
/**
               * 获取指定区域内的所有元素，此区域必须是DOM层。
               * 例如鼠标绘制选区后，获取选区内的所有元素。
               * @see todo 分层
               * @param leftTopPoint 区域左上角坐标, dom层坐标
               * @param rightBottomPoint 区域右下角坐标，dom层坐标
               */},{key:"getAreaElement",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.graphModel.getAreaElement(t,e,r,n,o).map((function(t){return t.getData()}))}
/**
               * 获取选中的元素数据
               * @param isIgnoreCheck 是否包括sourceNode和targetNode没有被选中的边,默认包括。
               * 注意：复制的时候不能包括此类边, 因为复制的时候不允许悬空的边。
               */},{key:"getSelectElements",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.graphModel.getSelectElements(t)}
/**
               * 将所有选中的元素设置为非选中
               */},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}
/**
               * 获取流程绘图数据
               * 注意: getGraphData返回的数据受到adapter影响，所以其数据格式不一定是logicflow内部图数据格式。
               * 如果实现通用插件，请使用getGraphRawData
               */},{key:"getGraphData",value:function(){var t=this.graphModel.modelToGraphData();return this.adapterOut?this.adapterOut(t):t}
/**
               * 获取流程绘图原始数据
               * 在存在adapter时，可以使用getGraphRawData获取图原始数据
               */},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}
/**
               * 清空画布
               */},{key:"clearData",value:function(){this.graphModel.clearData()}
/**
               * 更新流程图编辑相关设置
               * @param {object} config 编辑配置
               * @see todo docs link
               */},{key:"updateEditConfig",value:function(t){this.graphModel.editConfigModel.updateEditConfig(t)}
/**
               * 获取流程图当前编辑相关设置
               * @see todo docs link
               */},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}
/**
               * 获取事件位置相对于画布左上角的坐标
               * 画布所在的位置可以是页面任何地方，原生事件返回的坐标是相对于页面左上角的，该方法可以提供以画布左上角为原点的准确位置。
               * @see todo link
               * @param {number} x 事件x坐标
               * @param {number} y 事件y坐标
               * @returns {object} Point 事件位置的坐标
               * @returns {object} Point.domOverlayPosition HTML层上的坐标
               * @returns {object} Point.canvasOverlayPosition SVG层上的坐标
               */},{key:"getPointByClient",value:function(t,e){return this.graphModel.getPointByClient({x:t,y:e})}
/**
               * 历史记录操作
               * 返回上一步
               */},{key:"undo",value:function(){if(this.history.undoAble()){var t=gc(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}}
/**
               * 历史记录操作
               * 恢复下一步
               */},{key:"redo",value:function(){if(this.history.redoAble()){var t=gc(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}}
/**
               * 放大缩小图形
               * @param zoomSize 放大缩小的值，支持传入0-n之间的数字。小于1表示缩小，大于1表示放大。也支持传入true和false按照内置的刻度放大缩小
               * @param point 缩放的原点
               * @returns {string} -放大缩小的比例
               */},{key:"zoom",value:function(t,e){return this.graphModel.transformModel.zoom(t,e)}
/**
               * 重置图形的放大缩写比例为默认
               */},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}
/**
               * 设置图形缩小时，能缩放到的最小倍数。参数为0-1自己。默认0.2
               * @param size 图形缩小的最小值
               */},{key:"setZoomMiniSize",value:function(t){this.graphModel.transformModel.setZoomMiniSize(t)}
/**
               * 设置图形放大时，能放大到的最大倍数，默认16
               * @param size 图形放大的最大值
               */},{key:"setZoomMaxSize",value:function(t){this.graphModel.transformModel.setZoomMaxSize(t)}
/**
               * 获取缩放的值和平移的值。
               */},{key:"getTransform",value:function(){var t=this.graphModel.transformModel;return{SCALE_X:t.SCALE_X,SCALE_Y:t.SCALE_Y,TRANSLATE_X:t.TRANSLATE_X,TRANSLATE_Y:t.TRANSLATE_Y}}
/**
               * 平移图
               * @param x 向x轴移动距离
               * @param y 向y轴移动距离
               */},{key:"translate",value:function(t,e){this.graphModel.transformModel.translate(t,e)}
/**
               * 还原图形为初始位置
               */},{key:"resetTranslate",value:function(){var t=this.graphModel.transformModel,e=t.TRANSLATE_X,r=t.TRANSLATE_Y;this.translate(-e,-r)}
/**
               * 图形画布居中显示
               */},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}
/**
               * 图形适应屏幕大小
               * @param verticalOffset number 距离盒子上下的距离， 默认为20
               * @param horizontalOffset number 距离盒子左右的距离， 默认为20
               */},{key:"fitView",value:function(t,e){void 0===e&&(e=t),this.graphModel.fitView(t,e)}
/**
               * 开启边的动画
               * @param edgeId any
               */},{key:"openEdgeAnimation",value:function(t){this.graphModel.openEdgeAnimation(t)}
/**
               * 关闭边的动画
               * @param edgeId any
               */},{key:"closeEdgeAnimation",value:function(t){this.graphModel.closeEdgeAnimation(t)}
// 事件系统----------------------------------------------
/**
               * 监听事件
               * 事件详情见 @see todo
               * 支持同时监听多个事件
               * @example
               * lf.on('node:click,node:contextmenu', (data) => {
               * });
               */},{key:"on",value:function(t,e){this.graphModel.eventCenter.on(t,e)}
/**
               * 撤销监听事件
               */},{key:"off",value:function(t,e){this.graphModel.eventCenter.off(t,e)}
/**
               * 监听事件，只监听一次
               */},{key:"once",value:function(t,e){this.graphModel.eventCenter.once(t,e)}
/**
               * 触发监听事件
               */},{key:"emit",value:function(t,e){this.graphModel.eventCenter.emit(t,e)}
// 插件系统----------------------------------------------
/**
               * 添加扩展, 待讨论，这里是不是静态方法好一些？
               * 重复添加插件的时候，把上一次添加的插件的销毁。
               * @param plugin 插件
               */},{key:"installPlugins",value:function(){var e,r=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(null!==(e=this.plugins)&&void 0!==e?e:t.extensions).forEach((function(t){var e=t.pluginName||t.name;-1===n.indexOf(e)&&r.installPlugin(t)}))}
/**
               * 加载插件-内部方法
               */},{key:"installPlugin",value:function(e){if("object"===rO(e)){var r=e.install,n=e.render;return r&&r.call(e,this,t),n&&this.components.push(n.bind(e)),void(this.extension[e.pluginName]=e)}var o=e,i=new o({lf:this,LogicFlow:t});i.render&&this.components.push(i.render.bind(i)),this.extension[o.pluginName]=i}
/**
               * 修改对应元素 model 中的属性
               * 注意：此方法慎用，除非您对logicflow内部有足够的了解。
               * 大多数情况下，请使用setProperties、updateText、changeNodeId等方法。
               * 例如直接使用此方法修改节点的id,那么就是会导致连接到此节点的边的sourceNodeId出现找不到的情况。
               * @param {string} id 元素id
               * @param {object} attributes 需要更新的属性
               */},{key:"updateAttributes",value:function(t,e){this.graphModel.updateAttributes(t,e)}
/**
               * 内部保留方法
               * 创建一个fakerNode，用于dnd插件拖动节点进画布的时候使用。
               */},{key:"createFakerNode",value:function(t){var e=this.graphModel.modelMap.get(t.type);if(e){var r=new e(oO(oO({},t),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(r),r}console.warn("不存在为".concat(t.type,"类型的节点"))}
/**
               * 内部保留方法
               * 移除fakerNode
               */},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}
/**
               * 内部保留方法
               * 用于fakerNode显示对齐线
               */},{key:"setNodeSnapLine",value:function(t){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(t)}
/**
               * 内部保留方法
               * 用于fakerNode移除对齐线
               */},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}
/**
               * 内部保留方法
               * 用于fakerNode移除对齐线
               */},{key:"setView",value:function(t,e){this.viewMap.set(t,e)}},{key:"renderRawData",value:function(t){this.graphModel.graphDataToModel(gc(t)),!1!==this.options.history&&this.history.watch(this.graphModel),Object($.j)(Object($.g)(dp,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(ci.GRAPH_RENDERED,this.graphModel.modelToGraphData())}
/**
               * 渲染图
               * @example
               * lf.render({
               *   nodes: [
               *     {
               *       id: 'node_1',
               *       type: 'rect',
               *       x: 100,
               *       y: 100
               *     },
               *     {
               *       id: 'node_2',
               *       type: 'circel',
               *       x: 300,
               *       y: 200
               *     }
               *   ],
               *   edges: [
               *     {
               *       sourceNodeId: 'node_1',
               *       targetNodeId: 'node_2',
               *       type: 'polyline'
               *     }
               *   ]
               * })
               * @param graphData 图数据
               */},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.adapterIn&&(t=this.adapterIn(t)),this.renderRawData(t)}
/**
               * 内部保留方法
               * 获取指定类型的view
               */}],n=[{key:"use",value:function(t){var e=t.pluginName;e||(console.warn("请给插件".concat(t.name||t.constructor.name,"指定pluginName!")),e=t.name);var r=this.extensions.get(e);r&&r.destroy&&r.destroy(),this.extensions.set(e,t)}}],r&&iO(e.prototype,r),n&&iO(e,n),t}();function cO(t){return Q(t)}aO(uO,"extensions",new Map),e.default=uO}
/******/])},p.exports=l();const d=t(f);var h,y,v=(h=function(t){var e=t.exports=function(t,r){if(r||(r=16),void 0===t&&(t=128),t<=0)return"0";for(var n=Math.log(Math.pow(2,t))/Math.log(r),o=2;n===1/0;o*=2)n=Math.log(Math.pow(2,t/o))/Math.log(r)*o;var i=n-Math.floor(n),a="";for(o=0;o<Math.floor(n);o++)a=Math.floor(Math.random()*r).toString(r)+a;if(i){var u=Math.pow(r,i);a=Math.floor(Math.random()*u).toString(r)+a}var c=parseInt(a,r);return c!==1/0&&c>=Math.pow(2,t)?e(t,r):a};e.rack=function(t,r,n){var o=function(o){var a=0;do{if(a++>10){if(!n)throw new Error("too many ID collisions, use more bits");t+=n}var u=e(t,r)}while(Object.hasOwnProperty.call(i,u));return i[u]=o,u},i=o.hats={};return o.get=function(t){return o.hats[t]},o.set=function(t,e){return o.hats[t]=e,o},o.bits=t||128,o.base=r||16,o}},h(y={exports:{}},y.exports),y.exports);function g(t){if(!(this instanceof g))return new g(t);t=t||[128,36,1],this._seed=t.length?v.rack(t[0],t[1],t[2]):t}g.prototype.next=function(t){return this._seed(t||!0)},g.prototype.nextPrefixed=function(t,e){var r;do{r=t+this.next(!0)}while(this.assigned(r));return this.claim(r,e),r},g.prototype.claim=function(t,e){this._seed.set(t,e||!0)},g.prototype.assigned=function(t){return this._seed.get(t)||!1},g.prototype.unclaim=function(t){delete this._seed.hats[t]},g.prototype.clear=function(){var t,e=this._seed.hats;for(t in e)this.unclaim(t)};var b=new g([32,32,1]);function m(){return b.next()}var O,_=globalThis&&globalThis.__extends||(O=function(t,e){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});!function(t){function e(e,r){return e.id||(e.id="Event_"+m()),e.text||(e.text=""),e.text&&"string"==typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),t.call(this,e,r)||this}_(e,t),e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedTargetRules=function(){var e=t.prototype.getConnectedTargetRules.call(this);return e.push({message:"起始节点不能作为边的终点",validate:function(){return!1}}),e},e.extendKey="StartEventModel"}(f.CircleNodeModel),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}_(e,t),e.extendKey="StartEventNode"}(f.CircleNode);var w=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),x=globalThis&&globalThis.__assign||function(){return x=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},x.apply(this,arguments)};!function(t){function e(e,r){return e.id||(e.id="Event_"+m()),e.text||(e.text=""),e.text&&"string"==typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),t.call(this,e,r)||this}w(e,t),e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedSourceRules=function(){var e=t.prototype.getConnectedSourceRules.call(this);return e.push({message:"结束节点不能作为边的起点",validate:function(){return!1}}),e},e.extendKey="EndEventModel"}(f.CircleNodeModel),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}w(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var e=this.props.model,r=e.getNodeStyle(),n=e.x,o=e.y,i=e.r,a=t.prototype.getShape.call(this);return f.h("g",{},a,f.h("circle",x(x({},r),{cx:n,cy:o,r:i-5})))},e.extendKey="EndEventView"}(f.CircleNode);var E=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),j=globalThis&&globalThis.__assign||function(){return j=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},j.apply(this,arguments)};!function(t){function e(e,r){var n=this;return e.id||(e.id="Gateway_"+m()),e.text||(e.text=""),e.text&&"string"==typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),(n=t.call(this,e,r)||this).points=[[25,0],[50,25],[25,50],[0,25]],n}E(e,t),e.extendKey="ExclusiveGatewayModel"}(f.PolygonNodeModel),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}E(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t.x,r=t.y,n=t.width,o=t.height,i=t.points,a=t.getNodeStyle();return f.h("g",{transform:"matrix(1 0 0 1 "+(e-n/2)+" "+(r-o/2)+")"},f.h("polygon",j(j({},a),{x:e,y:r,points:i})),f.h("path",j({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},a)))},e.extendKey="ExclusiveGatewayNode"}(f.PolygonNode);var S=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),P=globalThis&&globalThis.__assign||function(){return P=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},P.apply(this,arguments)};!function(t){function e(e,r){return e.id||(e.id="Activity_"+m()),t.call(this,e,r)||this}S(e,t),e.extendKey="UserTaskModel"}(f.RectNodeModel),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}S(e,t),e.prototype.getLabelShape=function(){var t=this.props.model,e=t.x,r=t.y,n=t.width,o=t.height,i=t.getNodeStyle();return f.h("svg",{x:e-n/2+5,y:r-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},f.h("path",{fill:i.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},e.prototype.getShape=function(){var t=this.props.model,e=t.x,r=t.y,n=t.width,o=t.height,i=t.radius,a=t.getNodeStyle();return f.h("g",{},[f.h("rect",P(P({},a),{x:e-n/2,y:r-o/2,rx:i,ry:i,width:n,height:o})),this.getLabelShape()])},e.extendKey="UserTaskNode"}(f.RectNode);var A=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),k=globalThis&&globalThis.__assign||function(){return k=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},k.apply(this,arguments)};!function(t){function e(e,r){return e.id||(e.id="Activity_"+m()),t.call(this,e,r)||this}A(e,t),e.extendKey="ServiceTaskModel"}(f.RectNodeModel),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}A(e,t),e.prototype.getLabelShape=function(){var t=this.props.model,e=t.x,r=t.y,n=t.width,o=t.height,i=t.getNodeStyle();return f.h("svg",{x:e-n/2+5,y:r-o/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},f.h("path",{fill:i.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},e.prototype.getShape=function(){var t=this.props.model,e=t.x,r=t.y,n=t.width,o=t.height,i=t.radius,a=t.getNodeStyle();return f.h("g",{},[f.h("rect",k({x:e-n/2,y:r-o/2,rx:i,ry:i,width:n,height:o},a)),this.getLabelShape()])},e.extendKey="ServiceTaskNode"}(f.RectNode);var M=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){function e(e,r){return e.id||(e.id="Flow_"+m()),t.call(this,e,r)||this}M(e,t),e.extendKey="SequenceFlowModel"}(f.PolylineEdgeModel),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}M(e,t),e.extendKey="SequenceFlowEdge"}(f.PolylineEdge);var T=40,D=40,N=40,C=40,R=40,I=40,L=100,z=80,B=100,H=80,F=new g([32,32,1]);function G(){return F.next()}var X=function(){};(X.ObjTree=function(){return this}).VERSION="0.23",X.ObjTree.prototype.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',X.ObjTree.prototype.attr_prefix="-",X.ObjTree.prototype.parseXML=function(t){var e;if(window.DOMParser){var r=new DOMParser,n=r.parseFromString(t,"application/xml");if(!n)return;e=n.documentElement}else window.ActiveXObject&&((r=new ActiveXObject("Microsoft.XMLDOM")).async=!1,r.loadXML(t),e=r.documentElement);if(e)return this.parseDOM(e)},X.ObjTree.prototype.parseHTTP=function(t,e,r){var n,o={};for(var i in e)o[i]=e[i];if(o.method||(void 0===o.postBody&&void 0===o.postbody&&void 0===o.parameters?o.method="get":o.method="post"),r){o.asynchronous=!0;var a=this,u=r,c=o.onComplete;o.onComplete=function(t){var e;t&&t.responseXML&&t.responseXML.documentElement&&(e=a.parseDOM(t.responseXML.documentElement)),u(e,t),c&&c(t)}}else o.asynchronous=!1;if("undefined"!=typeof HTTP&&HTTP.Request)o.uri=t,(s=new HTTP.Request(o))&&(n=s.transport);else if("undefined"!=typeof Ajax&&Ajax.Request){var s;(s=new Ajax.Request(t,o))&&(n=s.transport)}return r?n:n&&n.responseXML&&n.responseXML.documentElement?this.parseDOM(n.responseXML.documentElement):void 0},X.ObjTree.prototype.parseDOM=function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var r=this.parseElement(t);if(this.__force_array[t.nodeName]&&(r=[r]),11!=t.nodeType){var n={};n[t.nodeName]=r,r=n}return r}},X.ObjTree.prototype.parseElement=function(t){if(7!=t.nodeType){if(3==t.nodeType||4==t.nodeType){if(null==t.nodeValue.match(/[^\x00-\x20]/))return;return t.nodeValue}var e,r={};if(t.attributes&&t.attributes.length){e={};for(var n=0;n<t.attributes.length;n++){if("string"==typeof(a=t.attributes[n].nodeName))(u=t.attributes[n].nodeValue)&&(void 0===r[a=this.attr_prefix+a]&&(r[a]=0),r[a]++,this.addNode(e,a,r[a],u))}}if(t.childNodes&&t.childNodes.length){var o=!0;e&&(o=!1);for(n=0;n<t.childNodes.length&&o;n++){var i=t.childNodes[n].nodeType;3!=i&&4!=i&&(o=!1)}if(o){e||(e="");for(n=0;n<t.childNodes.length;n++)e+=t.childNodes[n].nodeValue}else{e||(e={});for(n=0;n<t.childNodes.length;n++){var a,u;if("string"==typeof(a=t.childNodes[n].nodeName))(u=this.parseElement(t.childNodes[n]))&&(void 0===r[a]&&(r[a]=0),r[a]++,this.addNode(e,a,r[a],u))}}}return e}},X.ObjTree.prototype.addNode=function(t,e,r,n){this.__force_array[e]?(1==r&&(t[e]=[]),t[e][t[e].length]=n):1==r?t[e]=n:2==r?t[e]=[t[e],n]:t[e][t[e].length]=n},X.ObjTree.prototype.writeXML=function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e},X.ObjTree.prototype.hash_to_xml=function(t,e){var r=[],n=[];for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];o.charAt(0)!=this.attr_prefix?void 0===i||null==i?r[r.length]="<"+o+" />":"object"==typeof i&&i.constructor==Array?r[r.length]=this.array_to_xml(o,i):r[r.length]="object"==typeof i?this.hash_to_xml(o,i):this.scalar_to_xml(o,i):n[n.length]=" "+o.substring(1)+'="'+this.xml_escape(i)+'"'}var a=n.join(""),u=r.join("");return void 0===t||null==t||(u=r.length>0?u.match(/\n/)?"<"+t+a+">\n"+u+"</"+t+">\n":"<"+t+a+">"+u+"</"+t+">\n":"<"+t+a+" />\n"),u},X.ObjTree.prototype.array_to_xml=function(t,e){for(var r=[],n=0;n<e.length;n++){var o=e[n];void 0===o||null==o?r[r.length]="<"+t+" />":"object"==typeof o&&o.constructor==Array?r[r.length]=this.array_to_xml(t,o):r[r.length]="object"==typeof o?this.hash_to_xml(t,o):this.scalar_to_xml(t,o)}return r.join("")},X.ObjTree.prototype.scalar_to_xml=function(t,e){return"#text"==t?this.xml_escape(e):"<"+t+">"+this.xml_escape(e)+"</"+t+">\n"},X.ObjTree.prototype.xml_escape=function(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var U,Y,V=globalThis&&globalThis.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};(Y=U||(U={})).START="bpmn:startEvent",Y.END="bpmn:endEvent",Y.GATEWAY="bpmn:exclusiveGateway",Y.USER="bpmn:userTask",Y.SYSTEM="bpmn:serviceTask",Y.FLOW="bpmn:sequenceFlow";var W=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"];function K(t){var e={};return Object.entries(t).forEach((function(t){var r=V(t,2),n=r[0],o=r[1];"object"!=typeof o?0===n.indexOf("-")?e[n]=o:e["-"+n]=o:e[n]=K(o)})),e}function Z(t){var e={};return Object.entries(t).forEach((function(t){var r=V(t,2),n=r[0],o=r[1];"string"==typeof o?0===n.indexOf("-")?e[n.substr(1)]=o:e[n]=o:e[n]="object"==typeof o?Z(o):o})),e}function q(t){var e=[],r=[],n=t["bpmn:definitions"];if(n){var o=n["bpmn:process"];Object.keys(o).forEach((function(t){if(0===t.indexOf("bpmn:")){var i=o[t];if(t===U.FLOW){var a=n["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];r=function(t,e){var r=[];if(Array.isArray(t))t.forEach((function(t){var n;n=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,r.push(Q(n,t))}));else{var n=void 0;n=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,r.push(Q(n,t))}return r}(i,a)}else{var u=n["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];e=e.concat(function(t,e,r){var n=[];if(Array.isArray(t))t.forEach((function(t){var o=J(Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,r,t);n.push(o)}));else{var o=J(Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,r,t);n.push(o)}return n}(i,u,t))}}}))}return{nodes:e,edges:r}}function J(t,e,r){var n,o,i=Number(t["dc:Bounds"]["-x"]),a=Number(t["dc:Bounds"]["-y"]),u=r["-name"],c=$.shapeConfigMap.get(e);if(c&&(i+=c.width/2,a+=c.height/2),Object.entries(r).forEach((function(t){var e=V(t,2),r=e[0],o=e[1];-1===W.indexOf(r)&&(n||(n={}),n[r]=o)})),n&&(n=Z(n)),u&&(o={x:i,y:a,value:u},t["bpmndi:BPMNLabel"]&&t["bpmndi:BPMNLabel"]["dc:Bounds"])){var s=t["bpmndi:BPMNLabel"]["dc:Bounds"];o.x=Number(s["-x"])+Number(s["-width"])/2,o.y=Number(s["-y"])+Number(s["-height"])/2}var l={id:t["-bpmnElement"],type:e,x:i,y:a,properties:n};return o&&(l.text=o),l}function Q(t,e){var r,n,o=e["-name"];if(o){var i=t["bpmndi:BPMNLabel"]["dc:Bounds"],a=0;o.split("\n").forEach((function(t){a<t.length&&(a=t.length)})),r={value:o,x:Number(i["-x"])+10*a/2,y:Number(i["-y"])+7}}Object.entries(e).forEach((function(t){var e=V(t,2),r=e[0],o=e[1];-1===W.indexOf(r)&&(n||(n={}),n[r]=o)})),n&&(n=Z(n));var u={id:e["-id"],type:U.FLOW,pointsList:t["di:waypoint"].map((function(t){return{x:Number(t["-x"]),y:Number(t["-y"])}})),sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:n};return r&&(u.text=r),u}var $={pluginName:"bpmn-adapter",install:function(t){t.adapterIn=this.adapterIn,t.adapterOut=this.adapterOut},shapeConfigMap:new Map,setCustomShape:function(t,e){this.shapeConfigMap.set(t,e)},adapterOut:function(t){var e={"-id":"Process_"+G(),"-isExecutable":"false"};!function(t,e){var r=new Map;e.nodes.forEach((function(e){var n,o={"-id":e.id};if((null===(n=e.text)||void 0===n?void 0:n.value)&&(o["-name"]=e.text.value),e.properties){var i=K(e.properties);Object.assign(o,i)}r.set(e.id,o),t[e.type]?Array.isArray(t[e.type])?t[e.type].push(o):t[e.type]=[t[e.type],o]:t[e.type]=o}));var n=e.edges.map((function(t){var e,n,o=r.get(t.targetNodeId);o["bpmn:incoming"]?Array.isArray(o["bpmn:incoming"])?o["bpmn:incoming"].push(t.id):o["bpmn:incoming"]=[o["bpmn:incoming"],t.id]:o["bpmn:incoming"]=t.id;var i=r.get(t.sourceNodeId);i["bpmn:outgoing"]?Array.isArray(i["bpmn:outgoing"])?i["bpmn:outgoing"].push(t.id):i["bpmn:outgoing"]=[i["bpmn:outgoing"],t.id]:i["bpmn:outgoing"]=t.id;var a={"-id":t.id,"-sourceRef":t.sourceNodeId,"-targetRef":t.targetNodeId};if((null===(e=t.text)||void 0===e?void 0:e.value)&&(a["-name"]=null===(n=t.text)||void 0===n?void 0:n.value),t.properties){var u=K(t.properties);Object.assign(a,u)}return a}));t[U.FLOW]=n}(e,t);var r={"-id":"BPMNPlane_1","-bpmnElement":e["-id"]};return function(t,e){t["bpmndi:BPMNEdge"]=e.edges.map((function(t){var e,r=t.id,n={"-id":r+"_di","-bpmnElement":r,"di:waypoint":t.pointsList.map((function(t){return{"-x":t.x,"-y":t.y}}))};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(n["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),n})),t["bpmndi:BPMNShape"]=e.nodes.map((function(t){var e,r=t.id,n=100,o=80,i=t.x,a=t.y,u=$.shapeConfigMap.get(t.type);u&&(n=u.width,o=u.height);var c={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":i-=n/2,"-y":a-=o/2,"-width":n,"-height":o}};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),c}))}(r,t),{"bpmn:definitions":{"-id":"Definitions_"+G(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://bpmn.io/schema/bpmn","-exporter":"bpmn-js (https://demo.bpmn.io)","-exporterVersion":"7.3.0","bpmn:process":e,"bpmndi:BPMNDiagram":{"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":r}}}},adapterIn:function(t){if(t)return q(t)}};$.shapeConfigMap.set(U.START,{width:T,height:D}),$.shapeConfigMap.set(U.END,{width:N,height:C}),$.shapeConfigMap.set(U.GATEWAY,{width:R,height:I}),$.shapeConfigMap.set(U.SYSTEM,{width:L,height:z}),$.shapeConfigMap.set(U.USER,{width:B,height:H});var tt,et,rt=globalThis&&globalThis.__assign||function(){return rt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},rt.apply(this,arguments)};globalThis&&globalThis.__read,(et=tt||(tt={})).HORIZONTAL="horizontal",et.VERTICAL="vertical";globalThis&&globalThis.__read;globalThis&&globalThis.__spread;var nt=globalThis&&globalThis.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ot=globalThis&&globalThis.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(nt(arguments[e]));return t},it=
/** @class */function(){function t(t){var e=this,r=t.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"缩小流程图",text:"缩小",onClick:function(){e.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"放大流程图",text:"放大",onClick:function(){e.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"恢复流程原有尺寸",text:"适应",onClick:function(){e.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"回到上一步",text:"上一步",onClick:function(){e.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"移到下一步",text:"下一步",onClick:function(){e.lf.redo()}}],this.lf=r}return t.prototype.render=function(t,e){this.destroy();var r=this.getControlTool();this.toolEl=r,e.appendChild(r),this.domContainer=e},t.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},t.prototype.addItem=function(t){this.controlItems.push(t)},t.prototype.removeItem=function(t){var e=this.controlItems.findIndex((function(e){return e.key===t}));return this.controlItems.splice(e,1)[0]},t.prototype.getControlTool=function(){var t=this,e="lf-control-item",r="lf-control-item disabled",n=document.createElement("div"),o=[];return n.className="lf-control",this.controlItems.forEach((function(n){var i=document.createElement("div"),a=document.createElement("i"),u=document.createElement("span");switch(i.className=r,n.onClick&&(i.onclick=n.onClick.bind(null,t.lf)),n.onMouseEnter&&(i.onmouseenter=n.onMouseEnter.bind(null,t.lf)),n.onMouseLeave&&(i.onmouseleave=n.onMouseLeave.bind(null,t.lf)),a.className=n.iconClass,u.className="lf-control-text",u.title=n.title,u.innerText=n.text,i.append(a,u),n.text){case"上一步":t.lf.on("history:change",(function(t){var n=t.data.undoAble;i.className=n?e:r}));break;case"下一步":t.lf.on("history:change",(function(t){var n=t.data.redoAble;i.className=n?e:r}));break;default:i.className=e}o.push(i)})),n.append.apply(n,ot(o)),n},t.pluginName="control",t}();globalThis&&globalThis.__read;globalThis&&globalThis.__spread,globalThis&&globalThis.__read;var at=
/** @class */function(){function t(t){var e=this,r=t.lf;this.lf=r,this.lf.setPatternItems=function(t){e.setPatternItems(t)}}return t.prototype.render=function(t,e){var r=this;this.destroy(),this.shapeList&&0!==this.shapeList.length?(this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach((function(t){r.panelEl.appendChild(r.createDndItem(t))})),e.appendChild(this.panelEl),this.domContainer=e):this.domContainer=e},t.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},t.prototype.setPatternItems=function(t){this.shapeList=t,this.domContainer&&this.render(this.lf,this.domContainer)},t.prototype.createDndItem=function(t){var e=this,r=document.createElement("div");r.className=t.className?"lf-dnd-item "+t.className:"lf-dnd-item";var n=document.createElement("div");if(n.className="lf-dnd-shape",t.icon&&(n.style.backgroundImage="url("+t.icon+")"),r.appendChild(n),t.label){var o=document.createElement("div");o.innerText=t.label,o.className="lf-dnd-text",r.appendChild(o)}return r.onmousedown=function(){t.type&&e.lf.dnd.startDrag({type:t.type,properties:t.properties,text:t.text}),t.callback&&t.callback(e.lf,e.domContainer)},r},t.pluginName="dndPanel",t}(),ut=
/** @class */function(){function t(t){var e=this,r=t.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(t){var r=e.lf.getPointByClient(t.clientX,t.clientY).domOverlayPosition,n=r.x,o=r.y;e.endPoint={x:n,y:o};var i=e.startPoint,a=i.x,u=i.y,c=e.wrapper.style,s=a,l=u,f=n-a,p=o-u;n<a&&(s=n,f=a-n),o<u&&(l=o,p=u-o),c.left=s+"px",c.top=l+"px",c.width=f+"px",c.height=p+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",e.__draw),document.removeEventListener("mouseup",e.__drawOff),e.wrapper.oncontextmenu=null,e.__domContainer.removeChild(e.wrapper);var t=e.startPoint,r=t.x,n=t.y,o=e.endPoint,i=o.x,a=o.y;if(!(Math.abs(i-r)<10&&Math.abs(a-n)<10)){var u=[Math.min(r,i),Math.min(n,a)],c=[Math.max(r,i),Math.max(n,a)],s=e.lf.graphModel.getAreaElement(u,c,e.isWholeEdge,e.isWholeNode,!0),l=e.lf.graphModel.group;s.forEach((function(t){l&&l.getNodeGroup(t.id)||e.lf.selectElementById(t.id,!0)})),e.lf.emit("selection:selected",s)}},this.lf=r;var n=r.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=n,r.openSelectionSelect=function(){e.openSelectionSelect()},r.closeSelectionSelect=function(){e.closeSelectionSelect()}}return t.prototype.render=function(t,e){var r=this;this.__domContainer=e,t.on("blank:mousedown",(function(n){var o=n.e;if(t.getEditConfig().stopMoveGraph&&!r.__disabled){var i=t.getPointByClient(o.clientX,o.clientY).domOverlayPosition,a=i.x,u=i.y;r.startPoint={x:a,y:u},r.endPoint={x:a,y:u};var c=document.createElement("div");c.className="lf-selection-select",c.oncontextmenu=function(t){t.preventDefault()},c.style.top=r.startPoint.y+"px",c.style.left=r.startPoint.x+"px",e.appendChild(c),r.wrapper=c,document.addEventListener("mousemove",r.__draw),document.addEventListener("mouseup",r.__drawOff)}}))},t.prototype.setSelectionSense=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this.isWholeEdge=t,this.isWholeNode=e},t.prototype.openSelectionSelect=function(){this.lf.getEditConfig().stopMoveGraph||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},t.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},t.prototype.open=function(){this.__disabled=!1},t.prototype.close=function(){this.__disabled=!0},t.pluginName="selectionSelect",t}(),ct=globalThis&&globalThis.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},st=
/** @class */function(){function t(t){var e=this,r=t.lf,n=t.LogicFlow;this.__lf=null,this.__container=null,this.__miniMapWrap=null,this.__miniMapContainer=null,this.__lfMap=null,this.__viewport=null,this.__width=150,this.__height=220,this.__miniMapWidth=450,this.__miniMapHeight=660,this.__viewPortTop=0,this.__viewPortLeft=0,this.__startPosition=null,this.__viewPortScale=1,this.__viewPortWidth=150,this.__viewPortHeight=75,this.__resetDataX=0,this.__resetDataY=0,this.__LogicFlow=null,this.__isShow=!1,this.__disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(t,r){e.__setView(),e.__isShow||e.__createMiniMap(t,r),e.__isShow=!0},this.hide=function(){e.__isShow&&e.__removeMiniMap(),e.__isShow=!1},this.__startDrag=function(t){document.addEventListener("mousemove",e.__drag),document.addEventListener("mouseup",e.__drop),e.__startPosition={x:t.x,y:t.y}},this.moveViewport=function(t,r){var n=e.__viewport.style;e.__viewPortTop=t,e.__viewPortLeft=r,n.top=e.__viewPortTop+"px",n.left=e.__viewPortLeft+"px"},this.__drag=function(t){var r=e.__viewPortTop+t.y-e.__startPosition.y,n=e.__viewPortLeft+t.x-e.__startPosition.x;e.moveViewport(r,n),e.__startPosition={x:t.x,y:t.y};var o=(e.__viewPortLeft+e.__viewPortWidth/2)/e.__viewPortScale,i=(e.__viewPortTop+e.__viewPortHeight/2)/e.__viewPortScale;e.__lf.focusOn({coordinate:{x:o+e.__resetDataX,y:i+e.__resetDataY}})},this.__drop=function(){document.removeEventListener("mousemove",e.__drag),document.removeEventListener("mouseup",e.__drop);var t=e.__viewPortTop,r=e.__viewPortLeft;e.__viewPortLeft>e.__width&&(r=e.__width-e.__viewPortWidth),e.__viewPortTop>e.__height&&(t=e.__height-e.__viewPortHeight),e.__viewPortLeft<-e.__width&&(r=0),e.__viewPortTop<-e.__height&&(t=0),e.moveViewport(t,r)},this.__lf=r,this.__miniMapWidth=r.graphModel.width,this.__miniMapHeight=220*r.graphModel.width/150,this.__LogicFlow=n,this.__init()}return t.prototype.render=function(t,e){var r=this;this.__container=e,this.__lf.on("history:change",(function(){r.__isShow&&r.__setView()})),this.__lf.on("blank:drop",(function(){r.__isShow&&r.__setView()}))},t.prototype.init=function(t){this.__disabledPlugins=this.__disabledPlugins.concat(t.disabledPlugins||[])},t.prototype.__init=function(){var t=document.createElement("div");t.className="lf-mini-map-graph",t.style.width=this.__width+"px",t.style.height=this.__height+"px",this.__lfMap=new this.__LogicFlow({width:this.__lf.graphModel.width,height:220*this.__lf.graphModel.width/150,container:t,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.__disabledPlugins}),this.__lfMap.adapterIn=function(t){return t},this.__lfMap.adapterOut=function(t){return t},this.__miniMapWrap=t,this.__createViewPort()},t.prototype.__createMiniMap=function(t,e){var r=document.createElement("div"),n=this.__miniMapWrap;r.appendChild(n),void 0!==t&&void 0!==e&&(r.style.left=t+"px",r.style.top=e+"px"),r.style.position="absolute",r.className="lf-mini-map",this.__container.appendChild(r),this.__miniMapWrap.appendChild(this.__viewport);var o=document.createElement("div");o.className="lf-mini-map-header",o.innerText="导航",r.appendChild(o);var i=document.createElement("span");i.className="lf-mini-map-close",i.addEventListener("click",this.hide),r.appendChild(i),this.__miniMapContainer=r},t.prototype.__removeMiniMap=function(){this.__container.removeChild(this.__miniMapContainer)},t.prototype.__getBounds=function(t){var e=0,r=this.__miniMapWidth,n=0,o=this.__miniMapHeight,i=t.nodes;return i&&i.length>0&&i.forEach((function(t){var i=t.x,a=t.y,u=t.width,c=void 0===u?200:u,s=t.height,l=void 0===s?200:s,f=i-c/2,p=i+c/2,d=a-l/2,h=a+l/2;e=f<e?f:e,r=p>r?p:r,n=d<n?d:n,o=h>o?h:o})),{left:e,top:n,bottom:o,right:r}},t.prototype.__resetData=function(t){var e=t.nodes,r=t.edges,n=0,o=0;return e&&e.length>0&&(e.forEach((function(t){var e=t.x,r=t.y,i=t.width,a=void 0===i?200:i,u=t.height,c=e-a/2,s=r-(void 0===u?200:u)/2;n=c<n?c:n,o=s<o?s:o})),(n<0||o<0)&&(this.__resetDataX=n,this.__resetDataY=o,e.forEach((function(t){t.x=t.x-n,t.y=t.y-o,t.text&&(t.text.x=t.text.x-n,t.text.y=t.text.y-o)})),r.forEach((function(t){t.startPoint&&(t.startPoint.x=t.startPoint.x-n,t.startPoint.y=t.startPoint.y-o),t.endPoint&&(t.endPoint.x=t.endPoint.x-n,t.endPoint.y=t.endPoint.y-o),t.text&&(t.text.x=t.text.x-n,t.text.y=t.text.y-o),t.pointsList&&t.pointsList.forEach((function(t){t.x=t.x-n,t.y=t.y-o}))})))),t},t.prototype.__setView=function(){var t,e,r=this.__resetData(this.__lf.getGraphRawData()),n=this.__lf.viewMap,o=this.__lf.graphModel.modelMap,i=this.__lfMap.viewMap;try{for(var a=ct(n.keys()),u=a.next();!u.done;u=a.next()){var c=u.value;i.has(c)||(this.__lfMap.setView(c,n.get(c)),this.__lfMap.graphModel.modelMap.set(c,o.get(c)))}}catch(b){t={error:b}}finally{try{u&&!u.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}this.__lfMap.render(r);var s=this.__getBounds(r),l=s.left,f=s.top,p=s.right,d=s.bottom,h=this.__width/(p-l),y=this.__height/(d-f),v=this.__miniMapWrap.firstChild.style,g=Math.min(h,y);v.transform="matrix("+g+", 0, 0, "+g+", 0, 0)",v.transformOrigin="left top",v.height=d-Math.min(f,0)+"px",v.width=p-Math.min(l,0)+"px",this.__viewPortScale=g,this.__setViewPort(g,{left:l,top:f,right:p,bottom:d})},t.prototype.__setViewPort=function(t,e){var r=e.left,n=e.right;e.top,e.bottom;var o=this.__viewport.style;o.width=this.__width-4+"px",o.height=(this.__width-4)/(this.__lf.graphModel.width/this.__lf.graphModel.height)+"px";var i=this.__lf.getTransform(),a=i.TRANSLATE_X,u=i.TRANSLATE_Y,c=n-r,s=(this.__width-4)/(c/this.__lf.graphModel.width),l=s/(this.__lf.graphModel.width/this.__lf.graphModel.height);this.__viewPortTop=u>0?0:-u*t,this.__viewPortLeft=a>0?0:-a*t,this.__viewPortWidth=s,this.__viewPortHeight=l,o.top=this.__viewPortTop+"px",o.left=this.__viewPortLeft+"px",o.width=s+"px",o.height=l+"px"},t.prototype.__createViewPort=function(){var t=document.createElement("div");t.className="lf-minimap-viewport",t.addEventListener("mousedown",this.__startDrag),this.__viewport=t},t.pluginName="miniMap",t}(),lt=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ft=globalThis&&globalThis.__assign||function(){return ft=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ft.apply(this,arguments)},pt=globalThis&&globalThis.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}lt(e,t),e.prototype.pointFilter=function(t){for(var e=t,r=1;r<e.length-1;){var n=pt(e[r-1],2),o=n[0],i=n[1],a=pt(e[r],2),u=a[0],c=a[1],s=pt(e[r+1],2),l=s[0],f=s[1];o===u&&u===l||i===c&&c===f?e.splice(r,1):r++}return e},e.prototype.getEdge=function(){for(var t=this.props.model,e=t.points,r=t.isAnimation,n=t.arrowConfig,o=t.radius,i=void 0===o?5:o,a=t.getEdgeStyle(),u=t.getEdgeAnimationStyle(),c=this.pointFilter(e.split(" ").map((function(t){return t.split(",").map((function(t){return Number(t)}))}))),s=pt(c[0],2),l="M"+s[0]+" "+s[1],p=1;p<c.length-1;p++){var d=pt(c[p-1],2),h=d[0],y=d[1],v=pt(c[p],2),g=v[0],b=v[1],m=pt(c[p+1],2),O=m[0],_=m[1];if(g===h&&b!==y)l=l+" L "+g+" "+(b>y?b-i:b+i);if(b===y&&g!==h)l=l+" L "+(g>h?g-i:g+i)+" "+b;if(l=l+" Q "+g+" "+b,g===O&&b!==_)l=l+" "+g+" "+(b>_?b-i:b+i);if(b===_&&g!==O)l=l+" "+(g>O?g-i:g+i)+" "+b}var w=pt(c[c.length-1],2),x=w[0],E=w[1],j=ft(ft(ft({d:l=l+" L "+x+" "+E,style:r?u:{}},a),n),{fill:"none"});return f.h("path",ft({d:l},j))}}(f.PolylineEdge),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}lt(e,t)}(f.PolylineEdgeModel);var dt,ht,yt=globalThis&&globalThis.__assign||function(){return yt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},yt.apply(this,arguments)};function vt(t){var e=t.x,r=t.y,n=t.width,o=t.height,i=t.radius,a=t.className,u=e-n/2,c=r-o/2,s=yt(yt({
// default
width:10,height:10,cx:0,cy:0,rx:i||0,ry:i||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+a},t),{x:u,y:c});return f.h("rect",yt({},s))}function gt(t){var e=t.x,r=t.y,n=t.width,o=t.height;return{minX:e-n/2,minY:r-o/2,maxX:e+n/2,maxY:r+o/2}}function bt(t){var e=gt(t),r=t.radius,n=e.minX,o=e.minY,i=e.maxX,a=e.maxY;return[{x:n+r,y:o+r},{x:i-r,y:o+r},{x:i-r,y:a-r},{x:n+r,y:a-r}]}function mt(t){var e=t.point,r=t.beforeNode,n=t.afterNode,o=e.x,i=e.y,a={x:o,y:i},u=r.radius,c=gt(r),s=gt(n);if(o===c.minX){a.x=s.minX;var l=(i-r.y)/(r.height/2-u);a.y=l?n.y+(n.height/2-u)*l:n.y}else if(o===c.maxX){a.x=s.maxX;l=(i-r.y)/(r.height/2-u);a.y=l?n.y+(n.height/2-u)*l:n.y}else if(i===c.minY){a.y=s.minY;l=(o-r.x)/(r.width/2-u);a.x=l?n.x+(n.width/2-u)*l:n.x}else if(i===c.maxY){a.y=s.maxY;l=(o-r.x)/(r.width/2-u);a.x=l?n.x+(n.width/2-u)*l:n.x}else{var f=bt(r),p=bt(n),d=gt(r),h=d.minX,y=d.minY,v=d.maxX,g=d.maxY,b=-1;if(o-h<u&&i-y<u?b=0:v-o<u&&i-y<u?b=1:v-o<u&&g-i<u?b=2:o-h<u&&y-i<u&&(b=3),b>-1){var m=Math.atan2(i-f[b].y,o-f[b].x);a.x=p[b].x+u*Math.cos(m),a.y=p[b].y+u*Math.sin(m)}}return a}function Ot(t){var e,r,n=t.point,o=t.beforeNode,i=t.afterNode,a=i.rx,u=i.ry,c=(n.y-o.y)/(n.x-o.x),s=a,l=u;return c>=1/0?(e=0,r=l):c<=-1/0?(e=0,r=-l):n.x-o.x>0?(e=s*l/Math.sqrt(l*l+s*s*c*c),r=s*l*c/Math.sqrt(l*l+s*s*c*c)):(e=-s*l/Math.sqrt(l*l+s*s*c*c),r=-s*l*c/Math.sqrt(l*l+s*s*c*c)),{x:e+i.x,y:r+i.y}}function _t(t){var e,r=t.point,n=t.beforeNode,o=t.afterNode,i=r.x-n.x,a=r.y-n.y,u=n.rx,c=n.ry,s=Math.sqrt((u-Math.abs(i))*(u-Math.abs(i))+a*a)/Math.sqrt(u*u+c*c),l=o.rx,f=o.ry,p=Math.sqrt((l*l+f*f)*s*s*(l*l/(l*l+f*f))),d=p*(f/l);return e=a>0?d:-d,{x:(i>=0?l-p:p-l)+o.x,y:e+o.y}}vt.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""},(ht=dt||(dt={})).NODE="node",ht.CIRCLE_NODE="circle-node",ht.POLYGON_NODE="polygon-node",ht.RECT_NODE="rect-node",ht.HTML_NODE="html-node",ht.TEXT_NODE="text-node",ht.ELLIPSE_NODE="ellipse-node",ht.DIAMOND_NODE="diamond-node",ht.EDGE="edge",ht.LINE_EDGE="line-edge",ht.POLYLINE_EDGE="polyline-edge",ht.BEZIER_EDGE="bezier-edge",ht.GRAPH="graph";var wt=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xt=globalThis&&globalThis.__assign||function(){return xt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},xt.apply(this,arguments)},Et=globalThis&&globalThis.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},jt=f.LogicFlowUtil.StepDrag,St=
/** @class */function(t){function e(e){var r=t.call(this)||this;return r.updatePosition=function(t){var e=t.deltaX,n=t.deltaY,o=r.nodeModel,i=o.x,a=o.y;r.nodeModel.x=i+e/2,r.nodeModel.y=a+n/2,r.nodeModel.moveText(e/2,n/2)},r.getResize=function(t){var e=t.index,r=t.deltaX,n=t.deltaY,o=t.width,i=t.height,a=t.PCTResizeInfo,u=t.pct,c=void 0===u?1:u,s={width:o,height:i,deltaX:r,deltaY:n};if(a){var l=0,f=0;switch(e){case 0:f=(-1*r-n)/4;break;case 1:f=(r-n)/4;break;case 2:f=(r+n)/4;break;case 3:f=(-1*r+n)/4}0!==f&&(l=Math.round(f/a.ResizeBasis.basisHeight*1e5)/1e3),a.ResizePCT.widthPCT=Math.max(Math.min(a.ResizePCT.widthPCT+l,a.ScaleLimit.maxScaleLimit),a.ScaleLimit.minScaleLimit),a.ResizePCT.hightPCT=Math.max(Math.min(a.ResizePCT.hightPCT+l,a.ScaleLimit.maxScaleLimit),a.ScaleLimit.minScaleLimit);var p=Math.round(a.ResizePCT.widthPCT*a.ResizeBasis.basisWidth/100),d=Math.round(a.ResizePCT.hightPCT*a.ResizeBasis.basisHeight/100);switch(e){case 0:r=o-p,n=i-d;break;case 1:r=p-o,n=i-d;break;case 2:r=p-o,n=d-i;break;case 3:r=o-p,n=d-i}return s.width=p,s.height=d,s.deltaX=r/c,s.deltaY=n/c,s}switch(e){case 0:s.width=o-r*c,s.height=i-n*c;break;case 1:s.width=o+r*c,s.height=i-n*c;break;case 2:s.width=o+r*c,s.height=i+n*c;break;case 3:s.width=o-r*c,s.height=i+n*c}return s},r.updateRect=function(t){var e=t.deltaX,n=t.deltaY,o=r.nodeModel,i=o.id,a=o.x,u=o.y,c=o.width,s=o.height,l=o.radius,f=o.PCTResizeInfo,p=r.index,d=r.getResize({index:p,deltaX:e,deltaY:n,width:c,height:s,PCTResizeInfo:f,pct:1}),h=r.nodeModel,y=h.minWidth,v=h.minHeight,g=h.maxWidth,b=h.maxHeight;if(d.width<y||d.width>g||d.height<v||d.height>b)r.dragHandler.cancelDrag();else{r.updatePosition({deltaX:d.deltaX,deltaY:d.deltaY}),r.nodeModel.width=d.width,r.nodeModel.height=d.height,r.nodeModel.setProperties({nodeSize:{width:d.width,height:d.height}});var m,O=r.getNodeEdges(i),_={x:a,y:u,width:c,height:s,radius:l},w={x:r.nodeModel.x,y:r.nodeModel.y,width:r.nodeModel.width,height:r.nodeModel.height,radius:l},x={point:"",beforeNode:_,afterNode:w};O.sourceEdges.forEach((function(t){x.point=t.startPoint,m=mt(x),t.updateStartPoint(m)})),O.targetEdges.forEach((function(t){x.point=t.endPoint,m=mt(x),t.updateEndPoint(m)})),r.eventEmit({beforeNode:_,afterNode:w})}},r.updateEllipse=function(t){var e=t.deltaX,n=t.deltaY,o=r.nodeModel,i=o.id,a=o.rx,u=o.ry,c=o.x,s=o.y,l=o.PCTResizeInfo,f=r.index,p=a,d=u,h=r.getResize({index:f,deltaX:e,deltaY:n,width:p,height:d,PCTResizeInfo:l,pct:.5}),y=r.nodeModel,v=y.minWidth,g=y.minHeight,b=y.maxWidth,m=y.maxHeight;if(h.width<v/2||h.width>b/2||h.height<g/2||h.height>m/2)r.dragHandler.cancelDrag();else{r.updatePosition({deltaX:h.deltaX,deltaY:h.deltaY}),r.nodeModel.rx=h.width,r.nodeModel.ry=h.height,r.nodeModel.setProperties({nodeSize:{rx:h.width,ry:h.height}});var O,_=r.getNodeEdges(i),w={x:c,y:s},x={rx:h.width,ry:h.height,x:r.nodeModel.x,y:r.nodeModel.y},E={point:{},beforeNode:w,afterNode:x};_.sourceEdges.forEach((function(t){E.point=t.startPoint,O=Ot(E),t.updateStartPoint(O)})),_.targetEdges.forEach((function(t){E.point=t.endPoint,O=Ot(E),t.updateEndPoint(O)})),r.eventEmit({beforeNode:xt(xt({},w),{rx:a,ry:u}),afterNode:x})}},r.updateDiamond=function(t){var e=t.deltaX,n=t.deltaY,o=r.nodeModel,i=o.id,a=o.rx,u=o.ry,c=o.x,s=o.y,l=o.PCTResizeInfo,f=r.index,p=a,d=u,h=r.getResize({index:f,deltaX:e,deltaY:n,width:p,height:d,PCTResizeInfo:l,pct:.5}),y=r.nodeModel,v=y.minWidth,g=y.minHeight,b=y.maxWidth,m=y.maxHeight;if(h.width<v/2||h.width>b/2||h.height<g/2||h.height>m/2)r.dragHandler.cancelDrag();else{r.updatePosition({deltaX:h.deltaX,deltaY:h.deltaY}),r.nodeModel.rx=h.width,r.nodeModel.ry=h.height,r.nodeModel.setProperties({nodeSize:{rx:h.width,ry:h.height}});var O,_={x:c,y:s,rx:a,ry:u},w={rx:h.width,ry:h.height,x:r.nodeModel.x,y:r.nodeModel.y},x={point:{},beforeNode:_,afterNode:w},E=r.getNodeEdges(i);E.sourceEdges.forEach((function(t){x.point=t.startPoint,O=_t(x),t.updateStartPoint(O)})),E.targetEdges.forEach((function(t){x.point=t.endPoint,O=_t(x),t.updateEndPoint(O)})),r.eventEmit({beforeNode:_,afterNode:w})}},r.eventEmit=function(t){var e=t.beforeNode,n=t.afterNode,o=r.nodeModel,i=o.id,a=o.modelType,u=o.type,c=xt({id:i,modelType:a,type:u},e),s=xt({id:i,modelType:a,type:u},n);r.graphModel.eventCenter.emit("node:resize",{oldNodeSize:c,newNodeSize:s})},r.onDraging=function(t){var e,n=t.deltaX,o=t.deltaY,i=r.graphModel.transformModel,a=r.nodeModel.modelType;n=(e=Et(i.fixDeltaXY(n,o),2))[0],o=e[1],a===dt.RECT_NODE||a===dt.HTML_NODE?r.updateRect({deltaX:n,deltaY:o}):a===dt.ELLIPSE_NODE?r.updateEllipse({deltaX:n,deltaY:o}):a===dt.DIAMOND_NODE&&r.updateDiamond({deltaX:n,deltaY:o})},r.onDragEnd=function(){var t=r.graphModel.gridSize,e=void 0===t?1:t,n=e*Math.round(r.nodeModel.x/e),o=e*Math.round(r.nodeModel.y/e);r.nodeModel.moveTo(n,o)},r.index=e.index,r.nodeModel=e.model,r.graphModel=e.graphModel,r.state={},r.dragHandler=new jt({onDraging:r.onDraging,onDragEnd:r.onDragEnd,step:1}),r}return wt(e,t),e.prototype.getNodeEdges=function(t){for(var e=this.graphModel.edges,r=[],n=[],o=0;o<e.length;o++){var i=e[o];i.sourceNodeId===t?r.push(i):e[o].targetNodeId===t&&n.push(i)}return{sourceEdges:r,targetEdges:n}},e.prototype.render=function(){var t=this.props,e=t.x,r=t.y,n=t.index,o=t.model.getControlPointStyle();return u("g",{className:"lf-resize-control-"+n},u(vt,xt({className:"lf-node-control"},{x:e,y:r},o,{onMouseDown:this.dragHandler.handleMouseDown})))},e}(c),Pt=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),At=globalThis&&globalThis.__assign||function(){return At=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},At.apply(this,arguments)},kt=
/** @class */function(t){function e(){var e=t.call(this)||this;return e.state={},e}return Pt(e,t),e.prototype.getResizeControl=function(){var t=this.props,e=t.model,r=t.graphModel,n=e.x,o=e.y,i=e.width,a=e.height,c={minX:n-i/2,minY:o-a/2,maxX:n+i/2,maxY:o+a/2},s=c.minX,l=c.minY,f=c.maxX,p=c.maxY;return[
// 左上角
{x:s,y:l},
// 右上角
{x:f,y:l},
// 右下角
{x:f,y:p},
// 左下角
{x:s,y:p}].map((function(t,n){return u(St,At({index:n},t,{model:e,graphModel:r}))}))},e.prototype.getGroupSolid=function(){var t=this.props.model,e=t.x,r=t.y,n=t.width,o=t.height,i=t.getResizeOutlineStyle();return u(vt,At({fill:"none"},i,{x:e,y:r,width:n,height:o}))},e.prototype.render=function(){return u("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},e}(c),Mt=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tt=
/** @class */function(t){function e(e,r){var n=t.call(this,e,r)||this,o=n.properties.nodeSize;return o&&(n.width=o.width,n.height=o.height),n}return Mt(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return this.graphModel.editConfigModel.isSilentMode||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.resize=function(t,e){console.log(t,e)},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={basisWidth:this.width,basisHeight:this.height},r={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:{widthPCT:100,hightPCT:100},ResizeBasis:e,ScaleLimit:r}}else delete this.PCTResizeInfo},e}(f.RectNodeModel),Dt={type:"rect",view:
/** @class */function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mt(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,r=t.graphModel;return f.h(kt,{model:e,graphModel:r})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,e=t.model.isSelected,r=t.graphModel.editConfigModel.isSilentMode;return f.h("g",null,this.getResizeShape(),e&&!r?this.getControlGroup():"")},e}(f.RectNode),model:Tt},Nt=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){function e(e,r){var n=t.call(this,e,r)||this,o=n.properties.nodeSize;return o&&(n.rx=o.rx,n.ry=o.ry),n}Nt(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return this.graphModel.editConfigModel.isSilentMode||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={basisWidth:this.rx,basisHeight:this.ry},r={maxScaleLimit:Math.min(this.maxWidth/(2*this.rx)*100,this.maxHeight/(2*this.ry)*100),minScaleLimit:Math.max(this.minWidth/(2*this.rx)*100,this.minHeight/(2*this.ry)*100)};this.PCTResizeInfo={ResizePCT:{widthPCT:100,hightPCT:100},ResizeBasis:e,ScaleLimit:r}}else delete this.PCTResizeInfo}}(f.EllipseNodeModel),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Nt(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,r=t.graphModel;return f.h(kt,{model:e,graphModel:r})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,e=t.model,r=t.graphModel.editConfigModel.isSilentMode;return f.h("g",null,this.getResizeShape(),e.isSelected&&!r?this.getControlGroup():"")}}(f.EllipseNode);var Ct=globalThis&&globalThis.__assign||function(){return Ct=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ct.apply(this,arguments)};function Rt(t){var e=t.fillOpacity,r=void 0===e?1:e,n=t.strokeWidth,o=void 0===n?1:n,i=t.strokeOpacity,a=void 0===i?1:i,u=t.fill,c=void 0===u?"transparent":u,s=t.stroke,l=void 0===s?"#000":s,p=t.points,d=t.className,h={fill:c,fillOpacity:r,strokeWidth:o,stroke:l,strokeOpacity:a,points:"",className:void 0===d?"lf-basic-shape":d};return h.points=p.map((function(t){return t.join(",")})).join(" "),f.h("polygon",Ct({},h))}var It=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lt=globalThis&&globalThis.__assign||function(){return Lt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Lt.apply(this,arguments)};!function(t){function e(e,r){var n=t.call(this,e,r)||this,o=n.properties.nodeSize;return o&&(n.rx=o.rx,n.ry=o.ry),n}It(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return this.graphModel.editConfigModel.isSilentMode||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={basisWidth:this.rx,basisHeight:this.ry},r={maxScaleLimit:Math.min(this.maxWidth/(2*this.rx)*100,this.maxHeight/(2*this.ry)*100),minScaleLimit:Math.max(this.minWidth/(2*this.rx)*100,this.minHeight/(2*this.ry)*100)};this.PCTResizeInfo={ResizePCT:{widthPCT:100,hightPCT:100},ResizeBasis:e,ScaleLimit:r}}else delete this.PCTResizeInfo}}(f.DiamondNodeModel),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}It(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,r=t.graphModel;return f.h(kt,{model:e,graphModel:r})},e.prototype.getResizeShape=function(){var t=this.props.model,e=t.points,r=t.getNodeStyle();return f.h("g",null,f.h(Rt,Lt({},r,{points:e})))},e.prototype.getShape=function(){var t=this.props,e=t.model.isSelected,r=t.graphModel.editConfigModel.isSilentMode;return f.h("g",null,this.getResizeShape(),e&&!r?this.getControlGroup():"")}}(f.DiamondNode);var zt=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){function e(e,r){var n=t.call(this,e,r)||this,o=n.properties.nodeSize;return o&&(n.width=o.width,n.height=o.height),n}zt(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return this.graphModel.editConfigModel.isSilentMode||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={basisWidth:this.width,basisHeight:this.height},r={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:{widthPCT:100,hightPCT:100},ResizeBasis:e,ScaleLimit:r}}else delete this.PCTResizeInfo}}(f.HtmlNodeModel),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}zt(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,r=t.graphModel;return f.h(kt,{model:e,graphModel:r})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,e=t.model.isSelected,r=t.graphModel.editConfigModel.isSilentMode;return f.h("g",null,this.getResizeShape(),e&&!r?this.getControlGroup():"")}}(f.HtmlNode);var Bt=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ht=globalThis&&globalThis.__assign||function(){return Ht=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ht.apply(this,arguments)},Ft=globalThis&&globalThis.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Gt=globalThis&&globalThis.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ft(arguments[e]));return t},Xt=500,Ut=300;!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isGroup=!0,e.unfoldedWidth=Xt,e.unfoldedHight=Ut,e}Bt(e,t),e.prototype.initNodeData=function(e){var r=this;t.prototype.initNodeData.call(this,e);var n=[];Array.isArray(e.children)&&(n=e.children),this.children=new Set(n),this.width=Xt,this.height=Ut,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=-1e4,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,void 0===this.properties.isFolded&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout((function(){r.isFolded&&r.foldGroup(r.isFolded)}))},e.prototype.getResizeOutlineStyle=function(){var e=t.prototype.getResizeOutlineStyle.call(this);return e.stroke="none",e},e.prototype.foldGroup=function(t){var e=this;this.setProperty("isFolded",t),this.isFolded=t,t?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach((function(n){var o=e.graphModel.getElement(n);o.visible=!t,r=r.concat(o.incoming.edges.concat(o.outgoing.edges))})),this.foldEdge(t,r)},e.prototype.getAnchorStyle=function(e){var r=t.prototype.getAnchorStyle.call(this,e);return r.stroke="transparent",r.fill="transparent",r.hover.fill="transparent",r.hover.stroke="transparent",r},e.prototype.foldEdge=function(t,e){var r=this;e.forEach((function(e,n){var o=e.id,i=e.sourceNodeId,a=e.targetNodeId,u=e.startPoint,c=e.endPoint,s=e.type,l=e.properties,f=e.text,p={id:o+"__"+n,sourceNodeId:i,targetNodeId:a,startPoint:u,endPoint:c,type:s,properties:l,text:null==f?void 0:f.value};e.virtual&&r.graphModel.deleteEdgeById(e.id);var d=r.graphModel.group.getNodeGroup(a);d||(d=r.graphModel.getNodeModelById(a));var h=r.graphModel.group.getNodeGroup(i);h||(h=r.graphModel.getNodeModelById(i)),t&&!1!==e.visible&&(r.children.has(i)||r.id===i?(p.startPoint=void 0,p.sourceNodeId=r.id):(p.endPoint=void 0,p.targetNodeId=r.id),d.id===r.id&&h.id===r.id||r.createVirtualEdge(p),e.visible=!1),t||!1!==e.visible||(d&&d.isGroup&&d.isFolded?(p.targetNodeId=d.id,p.endPoint=void 0,r.createVirtualEdge(p)):h&&h.isGroup&&h.isFolded?(p.sourceNodeId=h.id,p.startPoint=void 0,r.createVirtualEdge(p)):e.visible=!0)}))},e.prototype.createVirtualEdge=function(t){t.pointsList=void 0;var e=this.graphModel.addEdge(t);e.virtual=!0,e.text.editable=!1,e.isFoldedEdge=!0},e.prototype.isInRange=function(t){var e=t.x1,r=t.y1,n=t.x2,o=t.y2;return e>=this.x-this.width/2&&n<=this.x+this.width/2&&r>=this.y-this.height/2&&o<=this.y+this.height/2},e.prototype.isAllowMoveTo=function(t){var e=t.x1,r=t.y1,n=t.x2,o=t.y2;return{x:e>=this.x-this.width/2&&n<=this.x+this.width/2,y:r>=this.y-this.height/2&&o<=this.y+this.height/2}},e.prototype.setAllowAppendChild=function(t){this.setProperty("groupAddable",t)},e.prototype.addChild=function(t){this.children.add(t)},e.prototype.removeChild=function(t){this.children.delete(t)},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},e.prototype.getData=function(){var e=t.prototype.getData.call(this);e.children=Gt(this.children);var r=e.properties;return delete r.groupAddable,delete r.isFolded,e},e.prototype.getHistoryData=function(){var e=t.prototype.getData.call(this);e.children=Gt(this.children),e.isGroup=!0;var r=e.properties;return delete r.groupAddable,r.isFolded&&(e.x=e.x+this.unfoldedWidth/2-this.foldedWidth/2,e.y=e.y+this.unfoldedHight/2-this.foldedHeight/2),e},e.prototype.isAllowAppendIn=function(t){return!0},e.prototype.toBack=function(){this.zIndex--}}(Dt.model),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Bt(e,t),e.prototype.getControlGroup=function(){var e=this.props.model,r=e.resizable,n=e.properties;return r&&!n.isFolded?t.prototype.getControlGroup.call(this):null},e.prototype.getAddableShape=function(){var t=this.props.model,e=t.width,r=t.height,n=t.x,o=t.y,i=t.radius;if(!t.properties.groupAddable)return null;var a=this.props.model.getNodeStyle().strokeWidth,u=this.props.model.getAddableOutlineStyle(),c=e+a+8,s=r+a+8;return f.h("rect",Ht(Ht({},u),{width:c,height:s,x:n-c/2,y:o-s/2,rx:i,ry:i}))},e.prototype.getFoldIcon=function(){var t=this.props.model,e=t.x-t.width/2+5,r=t.y-t.height/2+5;if(!t.foldable)return null;var n=f.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:t.properties.isFolded?"M "+(e+3)+","+(r+6)+" "+(e+11)+","+(r+6)+" M"+(e+7)+","+(r+2)+" "+(e+7)+","+(r+10):"M "+(e+3)+","+(r+6)+" "+(e+11)+","+(r+6)+" "});return f.h("g",{},[f.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:t.x-t.width/2+5,y:t.y-t.height/2+5,onClick:function(){t.foldGroup(!t.properties.isFolded)}}),n])},e.prototype.getResizeShape=function(){return f.h("g",{},[this.getAddableShape(),t.prototype.getResizeShape.call(this),this.getFoldIcon()])}}(Dt.view);globalThis&&globalThis.__read;globalThis&&globalThis.__spread;var Yt=globalThis&&globalThis.__assign||function(){return Yt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Yt.apply(this,arguments)},Vt=globalThis&&globalThis.__assign||function(){return Vt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Vt.apply(this,arguments)};globalThis&&globalThis.__read;globalThis&&globalThis.__spread;const Wt=a(e({__name:"LogicFlow",setup(t){const e=r(),a={nodes:[{id:"node_id_1",type:"rect",x:400,y:100,text:{x:400,y:100,value:"节点1"},properties:{}},{id:"node_id_2",type:"circle",x:500,y:300,text:{x:500,y:300,value:"节点2"},properties:{}}],edges:[{id:"edge_id",type:"polyline",sourceNodeId:"node_id_1",targetNodeId:"node_id_2",text:{x:439,y:200,value:"连线"},startPoint:{x:400,y:140},endPoint:{x:500,y:250},pointsList:[{x:400,y:140},{x:400,y:200},{x:500,y:200},{x:500,y:250}],properties:{}}]};return n((()=>{(()=>{const t=new d({container:e.value,grid:!0,plugins:[at,ut,it,st],animation:!0});t.setPatternItems([{label:"选区",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAOVJREFUOBGtVMENwzAIjKP++2026ETdpv10iy7WFbqFyyW6GBywLCv5gI+Dw2Bluj1znuSjhb99Gkn6QILDY2imo60p8nsnc9bEo3+QJ+AKHfMdZHnl78wyTnyHZD53Zzx73MRSgYvnqgCUHj6gwdck7Zsp1VOrz0Uz8NbKunzAW+Gu4fYW28bUYutYlzSa7B84Fh7d1kjLwhcSdYAYrdkMQVpsBr5XgDGuXwQfQr0y9zwLda+DUYXLaGKdd2ZTtvbolaO87pdo24hP7ov16N0zArH1ur3iwJpXxm+v7oAJNR4JEP8DoAuSFEkYH7cAAAAASUVORK5CYII=",callback:()=>{t.openSelectionSelect(),t.once("selection:selected",(()=>{t.closeSelectionSelect()}))}},{type:"circle",text:"开始",label:"开始节点",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"rect",label:"用户任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAEFVwZaAAAABGdBTUEAALGPC/xhBQAAAqlJREFUOBF9VM9rE0EUfrMJNUKLihGbpLGtaCOIR8VjQMGDePCgCCIiCNqzCAp2MyYUCXhUtF5E0D+g1t48qAd7CCLqQUQKEWkStcEfVGlLdp/fm3aW2QQdyLzf33zz5m2IsAZ9XhDpyaaIZkTS4ASzK41TFao88GuJ3hsr2pAbipHxuSYyKRugagICGANkfFnNh3HeE2N0b3nN2cgnpcictw5veJIzxmDamSlxxQZicq/mflxhbaH8BLRbuRwNtZp0JAhoplVRUdzmCe/vO27wFuuA3S5qXruGdboy5/PRGFsbFGKo/haRtQHIrM83bVeTrOgNhZReWaYGnE4aUQgTJNvijJFF4jQ8BxJE5xfKatZWmZcTQ+BVgh7s8SgPlCkcec4mGTmieTP4xd7PcpIEg1TX6gdeLW8rTVMVLVvb7ctXoH0Cydl2QOPJBG21STE5OsnbweVYzAnD3A7PVILuY0yiiyDwSm2g441r6rMSgp6iK42yqroI2QoXeJVeA+YeZSa47gZdXaZWQKTrG93rukk/l2Al6Kzh5AZEl7dDQy+JjgFahQjRopSxPbrbvK7GRe9ePWBo1wcU7sYrFZtavXALwGw/7Dnc50urrHJuTPSoO2IMV3gUQGNg87IbSOIY9BpiT9HV7FCZ94nPXb3MSnwHn/FFFE1vG6DTby+r31KAkUktB3Qf6ikUPWxW1BkXSPQeMHHiW0+HAd2GelJsZz1OJegCxqzl+CLVHa/IibuHeJ1HAKzhuDR+ymNaRFM+4jU6UWKXorRmbyqkq/D76FffevwdCp+jN3UAN/C9JRVTDuOxC/oh+EdMnqIOrlYteKSfadVRGLJFJPSB/ti/6K8f0CNymg/iH2gO/f0DwE0yjAFO6l8JaR5j0VPwPwfaYHqOqrCI319WzwhwzNW/aQAAAABJRU5ErkJggg==",className:"important-node"},{type:"rect",label:"系统任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAEFVwZaAAAABGdBTUEAALGPC/xhBQAAAqlJREFUOBF9VM9rE0EUfrMJNUKLihGbpLGtaCOIR8VjQMGDePCgCCIiCNqzCAp2MyYUCXhUtF5E0D+g1t48qAd7CCLqQUQKEWkStcEfVGlLdp/fm3aW2QQdyLzf33zz5m2IsAZ9XhDpyaaIZkTS4ASzK41TFao88GuJ3hsr2pAbipHxuSYyKRugagICGANkfFnNh3HeE2N0b3nN2cgnpcictw5veJIzxmDamSlxxQZicq/mflxhbaH8BLRbuRwNtZp0JAhoplVRUdzmCe/vO27wFuuA3S5qXruGdboy5/PRGFsbFGKo/haRtQHIrM83bVeTrOgNhZReWaYGnE4aUQgTJNvijJFF4jQ8BxJE5xfKatZWmZcTQ+BVgh7s8SgPlCkcec4mGTmieTP4xd7PcpIEg1TX6gdeLW8rTVMVLVvb7ctXoH0Cydl2QOPJBG21STE5OsnbweVYzAnD3A7PVILuY0yiiyDwSm2g441r6rMSgp6iK42yqroI2QoXeJVeA+YeZSa47gZdXaZWQKTrG93rukk/l2Al6Kzh5AZEl7dDQy+JjgFahQjRopSxPbrbvK7GRe9ePWBo1wcU7sYrFZtavXALwGw/7Dnc50urrHJuTPSoO2IMV3gUQGNg87IbSOIY9BpiT9HV7FCZ94nPXb3MSnwHn/FFFE1vG6DTby+r31KAkUktB3Qf6ikUPWxW1BkXSPQeMHHiW0+HAd2GelJsZz1OJegCxqzl+CLVHa/IibuHeJ1HAKzhuDR+ymNaRFM+4jU6UWKXorRmbyqkq/D76FffevwdCp+jN3UAN/C9JRVTDuOxC/oh+EdMnqIOrlYteKSfadVRGLJFJPSB/ti/6K8f0CNymg/iH2gO/f0DwE0yjAFO6l8JaR5j0VPwPwfaYHqOqrCI319WzwhwzNW/aQAAAABJRU5ErkJggg==",className:"import_icon"},{type:"diamond",label:"条件判断",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAAHeEJUAAAAABGdBTUEAALGPC/xhBQAAAvVJREFUOBGNVEFrE0EU/mY3bQoiFlOkaUJrQUQoWMGePLX24EH0IIoHKQiCV0G8iE1covgLiqA/QTzVm1JPogc9tIJYFaQtlhQxqYjSpunu+L7JvmUTU3AgmTfvffPNN++9WSA1DO182f6xwILzD5btfAoQmwL5KJEwiQyVbSVZ0IgRyV6PTpIJ81E5ZvqfHQR0HUOBHW4L5Et2kQ6Zf7iAOhTFAA8s0pEP7AXO1uAA52SbqGk6h/6J45LaLhO64ByfcUzM39V7ZiAdS2yCePPEIQYvTUHqM/n7dgQNfBKWPjpF4ISk8q3J4nB11qw6X8l+FsF3EhlkEMfrjIer3wJTLwS2aCNcj4DbGxXTw00JmAuO+Ni6bBxVUCvS5d9aa04+so4pHW5jLTywuXAL7jJ+D06sl82Sgl2JuVBQn498zkc2bGKxULHjCnSMadBKYDYYHAtsby1EQ5lNGrQd4Y3v4Zo0XdGEmDno46yCM9Tk+RiJmUYHS/aXHPNTcjxcbTFna000PFJHIVZ5lFRqRpJWk9/+QtlOUYJj9HG5pVFEU7zqIYDVsw2s+AJaD8wTd2umgSCCyUxgGsS1Y6TBwXQQTFuZaHcd8gAGioE90hlsY+wMcs30RduYtxanjMGal8H5dMW67dmT1JFtYUEe8LiQLRsPZ6IIc7A4J5tqco3T0pnv/4u0kyzrYUq7gASuEyI8VXKvB9Odytv6jS/PNaZBln0nioJG/AVQRZvApOdhjj3Jt8QC8Im09SafwdBdvIpztpxWxpeKCC+EsFdS8DCyuCn2munFpL7ctHKp+Xc5cMybeIyMAN33SPL3ZR9QV1XVwLyzHm6Iv0/yeUuUb7PPlZC4D4HZkeu6dpF4v9j9MreGtMbxMMRLIcjJic9yHi7WQ3yVKzZVWUr5UrViJvn1FfUlwe/KYVfYyWRLSGNu16hR01U9IacajXPei0wx/5BqgInvJN+MMNtNme7ReU9SBbgntovn0kKHpFg7UogZvaZiOue/q1SBo9ktHzQAAAAASUVORK5CYII="},{type:"circle",text:"结束",label:"结束节点",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAA1BJREFUOBFtVE1IVUEYPXOf+tq40Y3vPcmFIdSjIorWoRG0ERWUgnb5FwVhYQSl72oUoZAboxKNFtWiwKRN0M+jpfSzqJAQclHo001tKkjl3emc8V69igP3znzfnO/M9zcDcKT67azmjYWTwl9Vn7Vumeqzj1DVb6cleQY4oAVnIOPb+mKAGxQmKI5CWNJ2aLPatxWa3aB9K7/fB+/Z0jUF6TmMlFLQqrkECWQzOZxYGjTlOl8eeKaIY5yHnFn486xBustDjWT6dG7pmjHOJd+33t0iitTPkK6tEvjxq4h2MozQ6WFSX/LkDUGfFwfhEZj1Auz/U4pyAi5Sznd7uKzznXeVHlI/Aywmk6j7fsUsEuCGADrWARXXwjxWQsUbIupDHJI7kF5dRktg0eN81IbiZXiTESic50iwS+t1oJgL83jAiBupLDCQqwziaWSoAFSeIR3P5Xv5az00wyIn35QRYTwdSYbz8pH8fxUUAtxnFvYmEmgI0wYXUXcCCSpeEVpXlsRhBnCEATxWylL9+EKCAYhe1NGstUa6356kS9NVvt3DU2fd+Wtbm/+lSbylJqsqkSm9CRhvoJVlvKPvF1RKY/FcPn5j4UfIMLn8D4UYb54BNsilTDXKnF4CfTobA0FpoW/LSp306wkXM+XaOJhZaFkcNM82ASNAWMrhrUbRfmyeI1FvRBTpN06WKxa9BK0o2E4Pd3zfBBEwPsv9sQBnmLVbLEIZ/Xe9LYwJu/Er17W6HYVBc7vmuk0xUQ+pqxdom5Fnp55SiytXLPYoMXNM4u4SNSCFWnrVIzKG3EGyMXo6n/BQOe+bX3FClY4PwydVhthOZ9NnS+ntiLh0fxtlUJHAuGaFoVmttpVMeum0p3WEXbcll94l1wM/gZ0Ccczop77VvN2I7TlsZCsuXf1WHvWEhjO8DPtyOVg2/mvK9QqboEth+7pD6NUQC1HN/TwvydGBARi9MZSzLE4b8Ru3XhX2PBxf8E1er2A6516o0w4sIA+lwURhAON82Kwe2iDAC1Watq4XHaGQ7skLcFOtI5lDxuM2gZe6WFIotPAhbaeYlU4to5cuarF1QrcZ/lwrLaCJl66JBocYZnrNlvm2+MBCTmUymPrYZVbjdlr/BxlMjmNmNI3SAAAAAElFTkSuQmCC"}]),t.render(a)})()})),(t,r)=>(o(),i("div",{class:"container",ref_key:"container",ref:e},null,512))}}),[["__scopeId","data-v-9dc8f172"]]);export{Wt as default};
