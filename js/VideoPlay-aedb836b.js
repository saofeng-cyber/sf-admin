import{a2 as e,a as t,r as n,o as i,f as r,s as o,j as a,y as s,w as l,W as u}from"./index-f20dec1b.js";import{E as c}from"./el-link-80c026fe.js";function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,S(i.key),i)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=k(e);if(t){var r=k(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return C(this,n)}}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},x.apply(this,arguments)}function T(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function S(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var P=function(e){return e&&e.Math==Math&&e},A=
// eslint-disable-next-line es/no-global-this -- safe
P("object"==typeof globalThis&&globalThis)||P("object"==typeof window&&window)||// eslint-disable-next-line no-restricted-globals -- safe
P("object"==typeof self&&self)||P("object"==typeof e&&e)||// eslint-disable-next-line no-new-func -- fallback
function(){return this}()||Function("return this")(),I={},L=function(e){try{return!!e()}catch(t){return!0}},R=!L((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),O=!L((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),D=O,N=Function.prototype.call,M=D?N.bind(N):function(){return N.apply(N,arguments)},F={},U={}.propertyIsEnumerable,H=Object.getOwnPropertyDescriptor,j=H&&!U.call({1:2},1);F.f=j?function(e){var t=H(this,e);return!!t&&t.enumerable}:U;var B,G,V=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},W=O,K=Function.prototype,z=K.call,Y=W&&K.bind.bind(z,z),X=W?Y:function(e){return function(){return z.apply(e,arguments)}},q=X,$=q({}.toString),J=q("".slice),Z=function(e){return J($(e),8,-1)},Q=L,ee=Z,te=Object,ne=X("".split),ie=Q((function(){return!te("z").propertyIsEnumerable(0)}))?function(e){return"String"==ee(e)?ne(e,""):te(e)}:te,re=function(e){return null==e},oe=re,ae=TypeError,se=function(e){if(oe(e))throw ae("Can't call method on "+e);return e},le=ie,ue=se,ce=function(e){return le(ue(e))},he="object"==typeof document&&document.all,fe={all:he,IS_HTMLDDA:void 0===he&&void 0!==he},de=fe.all,pe=fe.IS_HTMLDDA?function(e){return"function"==typeof e||e===de}:function(e){return"function"==typeof e},ge=pe,ve=fe.all,ye=fe.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:ge(e)||e===ve}:function(e){return"object"==typeof e?null!==e:ge(e)},me=A,ke=pe,be=function(e){return ke(e)?e:void 0},we=function(e,t){return arguments.length<2?be(me[e]):me[e]&&me[e][t]},Ce=X({}.isPrototypeOf),_e="undefined"!=typeof navigator&&String(navigator.userAgent)||"",xe=A,Te=_e,Ee=xe.process,Se=xe.Deno,Pe=Ee&&Ee.versions||Se&&Se.version,Ae=Pe&&Pe.v8;Ae&&(G=(B=Ae.split("."))[0]>0&&B[0]<4?1:+(B[0]+B[1])),!G&&Te&&(!(B=Te.match(/Edge\/(\d+)/))||B[1]>=74)&&(B=Te.match(/Chrome\/(\d+)/))&&(G=+B[1]);var Ie=G,Le=Ie,Re=L,Oe=!!Object.getOwnPropertySymbols&&!Re((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||// Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances
!Symbol.sham&&Le&&Le<41})),De=Oe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ne=we,Me=pe,Fe=Ce,Ue=Object,He=De?function(e){return"symbol"==typeof e}:function(e){var t=Ne("Symbol");return Me(t)&&Fe(t.prototype,Ue(e))},je=String,Be=function(e){try{return je(e)}catch(t){return"Object"}},Ge=pe,Ve=Be,We=TypeError,Ke=function(e){if(Ge(e))return e;throw We(Ve(e)+" is not a function")},ze=Ke,Ye=re,Xe=function(e,t){var n=e[t];return Ye(n)?void 0:ze(n)},qe=M,$e=pe,Je=ye,Ze=TypeError,Qe={},et={get exports(){return Qe},set exports(e){Qe=e}},tt=A,nt=Object.defineProperty,it=function(e,t){try{nt(tt,e,{value:t,configurable:!0,writable:!0})}catch(n){tt[e]=t}return t},rt=it,ot="__core-js_shared__",at=A[ot]||rt(ot,{}),st=at;(et.exports=function(e,t){return st[e]||(st[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.29.0",mode:"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"});var lt=se,ut=Object,ct=function(e){return ut(lt(e))},ht=ct,ft=X({}.hasOwnProperty),dt=Object.hasOwn||function(e,t){return ft(ht(e),t)},pt=X,gt=0,vt=Math.random(),yt=pt(1..toString),mt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+yt(++gt+vt,36)},kt=Qe,bt=dt,wt=mt,Ct=Oe,_t=De,xt=A.Symbol,Tt=kt("wks"),Et=_t?xt.for||xt:xt&&xt.withoutSetter||wt,St=function(e){return bt(Tt,e)||(Tt[e]=Ct&&bt(xt,e)?xt[e]:Et("Symbol."+e)),Tt[e]},Pt=M,At=ye,It=He,Lt=Xe,Rt=function(e,t){var n,i;if("string"===t&&$e(n=e.toString)&&!Je(i=qe(n,e)))return i;if($e(n=e.valueOf)&&!Je(i=qe(n,e)))return i;if("string"!==t&&$e(n=e.toString)&&!Je(i=qe(n,e)))return i;throw Ze("Can't convert object to primitive value")},Ot=TypeError,Dt=St("toPrimitive"),Nt=function(e,t){if(!At(e)||It(e))return e;var n,i=Lt(e,Dt);if(i){if(void 0===t&&(t="default"),n=Pt(i,e,t),!At(n)||It(n))return n;throw Ot("Can't convert object to primitive value")}return void 0===t&&(t="number"),Rt(e,t)},Mt=Nt,Ft=He,Ut=function(e){var t=Mt(e,"string");return Ft(t)?t:t+""},Ht=ye,jt=A.document,Bt=Ht(jt)&&Ht(jt.createElement),Gt=function(e){return Bt?jt.createElement(e):{}},Vt=Gt,Wt=!R&&!L((function(){return 7!=Object.defineProperty(Vt("div"),"a",{get:function(){return 7}}).a})),Kt=R,zt=M,Yt=F,Xt=V,qt=ce,$t=Ut,Jt=dt,Zt=Wt,Qt=Object.getOwnPropertyDescriptor;I.f=Kt?Qt:function(e,t){if(e=qt(e),t=$t(t),Zt)try{return Qt(e,t)}catch(n){}if(Jt(e,t))return Xt(!zt(Yt.f,e,t),e[t])};var en={},tn=R&&L((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),nn=ye,rn=String,on=TypeError,an=function(e){if(nn(e))return e;throw on(rn(e)+" is not an object")},sn=R,ln=Wt,un=tn,cn=an,hn=Ut,fn=TypeError,dn=Object.defineProperty,pn=Object.getOwnPropertyDescriptor,gn="enumerable",vn="configurable",yn="writable";en.f=sn?un?function(e,t,n){if(cn(e),t=hn(t),cn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&yn in n&&!n[yn]){var i=pn(e,t);i&&i[yn]&&(e[t]=n.value,n={configurable:vn in n?n[vn]:i[vn],enumerable:gn in n?n[gn]:i[gn],writable:!1})}return dn(e,t,n)}:dn:function(e,t,n){if(cn(e),t=hn(t),cn(n),ln)try{return dn(e,t,n)}catch(i){}if("get"in n||"set"in n)throw fn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var mn=en,kn=V,bn=R?function(e,t,n){return mn.f(e,t,kn(1,n))}:function(e,t,n){return e[t]=n,e},wn={},Cn={get exports(){return wn},set exports(e){wn=e}},_n=R,xn=dt,Tn=Function.prototype,En=_n&&Object.getOwnPropertyDescriptor,Sn=xn(Tn,"name"),Pn={EXISTS:Sn,PROPER:Sn&&"something"===function(){}.name,CONFIGURABLE:Sn&&(!_n||_n&&En(Tn,"name").configurable)},An=pe,In=at,Ln=X(Function.toString);An(In.inspectSource)||(In.inspectSource=function(e){return Ln(e)});var Rn,On,Dn,Nn=In.inspectSource,Mn=pe,Fn=A.WeakMap,Un=Mn(Fn)&&/native code/.test(String(Fn)),Hn=mt,jn=Qe("keys"),Bn=function(e){return jn[e]||(jn[e]=Hn(e))},Gn={},Vn=Un,Wn=A,Kn=ye,zn=bn,Yn=dt,Xn=at,qn=Bn,$n=Gn,Jn="Object already initialized",Zn=Wn.TypeError,Qn=Wn.WeakMap;if(Vn||Xn.state){var ei=Xn.state||(Xn.state=new Qn);ei.get=ei.get,ei.has=ei.has,ei.set=ei.set,Rn=function(e,t){if(ei.has(e))throw Zn(Jn);return t.facade=e,ei.set(e,t),t},On=function(e){return ei.get(e)||{}},Dn=function(e){return ei.has(e)}}else{var ti=qn("state");$n[ti]=!0,Rn=function(e,t){if(Yn(e,ti))throw Zn(Jn);return t.facade=e,zn(e,ti,t),t},On=function(e){return Yn(e,ti)?e[ti]:{}},Dn=function(e){return Yn(e,ti)}}var ni={set:Rn,get:On,has:Dn,enforce:function(e){return Dn(e)?On(e):Rn(e,{})},getterFor:function(e){return function(t){var n;if(!Kn(t)||(n=On(t)).type!==e)throw Zn("Incompatible receiver, "+e+" required");return n}}},ii=X,ri=L,oi=pe,ai=dt,si=R,li=Pn.CONFIGURABLE,ui=Nn,ci=ni.enforce,hi=ni.get,fi=String,di=Object.defineProperty,pi=ii("".slice),gi=ii("".replace),vi=ii([].join),yi=si&&!ri((function(){return 8!==di((function(){}),"length",{value:8}).length})),mi=String(String).split("String"),ki=Cn.exports=function(e,t,n){"Symbol("===pi(fi(t),0,7)&&(t="["+gi(fi(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!ai(e,"name")||li&&e.name!==t)&&(si?di(e,"name",{value:t,configurable:!0}):e.name=t),yi&&n&&ai(n,"arity")&&e.length!==n.arity&&di(e,"length",{value:n.arity});try{n&&ai(n,"constructor")&&n.constructor?si&&di(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(r){}var i=ci(e);return ai(i,"source")||(i.source=vi(mi,"string"==typeof t?t:"")),e};Function.prototype.toString=ki((function(){return oi(this)&&hi(this).source||ui(this)}),"toString");var bi=pe,wi=en,Ci=wn,_i=it,xi=function(e,t,n,i){i||(i={});var r=i.enumerable,o=void 0!==i.name?i.name:t;if(bi(n)&&Ci(n,o,i),i.global)r?e[t]=n:_i(t,n);else{try{i.unsafe?e[t]&&(r=!0):delete e[t]}catch(a){}r?e[t]=n:wi.f(e,t,{value:n,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return e},Ti={},Ei=Math.ceil,Si=Math.floor,Pi=Math.trunc||function(e){var t=+e;return(t>0?Si:Ei)(t)},Ai=function(e){var t=+e;return t!=t||0===t?0:Pi(t)},Ii=Ai,Li=Math.max,Ri=Math.min,Oi=function(e,t){var n=Ii(e);return n<0?Li(n+t,0):Ri(n,t)},Di=Ai,Ni=Math.min,Mi=function(e){return e>0?Ni(Di(e),9007199254740991):0},Fi=Mi,Ui=function(e){return Fi(e.length)},Hi=ce,ji=Oi,Bi=Ui,Gi=function(e){return function(t,n,i){var r,o=Hi(t),a=Bi(o),s=ji(i,a);if(e&&n!=n){for(;a>s;)if((r=o[s++])!=r)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},Vi={
// `Array.prototype.includes` method
// https://tc39.es/ecma262/#sec-array.prototype.includes
includes:Gi(!0),
// `Array.prototype.indexOf` method
// https://tc39.es/ecma262/#sec-array.prototype.indexof
indexOf:Gi(!1)},Wi=dt,Ki=ce,zi=Vi.indexOf,Yi=Gn,Xi=X([].push),qi=function(e,t){var n,i=Ki(e),r=0,o=[];for(n in i)!Wi(Yi,n)&&Wi(i,n)&&Xi(o,n);for(;t.length>r;)Wi(i,n=t[r++])&&(~zi(o,n)||Xi(o,n));return o},$i=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ji=qi,Zi=$i.concat("length","prototype");Ti.f=Object.getOwnPropertyNames||function(e){return Ji(e,Zi)};var Qi={};Qi.f=Object.getOwnPropertySymbols;var er=we,tr=Ti,nr=Qi,ir=an,rr=X([].concat),or=er("Reflect","ownKeys")||function(e){var t=tr.f(ir(e)),n=nr.f;return n?rr(t,n(e)):t},ar=dt,sr=or,lr=I,ur=en,cr=L,hr=pe,fr=/#|\.prototype\./,dr=function(e,t){var n=gr[pr(e)];return n==yr||n!=vr&&(hr(t)?cr(t):!!t)},pr=dr.normalize=function(e){return String(e).replace(fr,".").toLowerCase()},gr=dr.data={},vr=dr.NATIVE="N",yr=dr.POLYFILL="P",mr=dr,kr=A,br=I.f,wr=bn,Cr=xi,_r=it,xr=function(e,t,n){for(var i=sr(t),r=ur.f,o=lr.f,a=0;a<i.length;a++){var s=i[a];ar(e,s)||n&&ar(n,s)||r(e,s,o(t,s))}},Tr=mr,Er=function(e,t){var n,i,r,o,a,s=e.target,l=e.global,u=e.stat;if(n=l?kr:u?kr[s]||_r(s,{}):(kr[s]||{}).prototype)for(i in t){if(o=t[i],r=e.dontCallGetSet?(a=br(n,i))&&a.value:n[i],!Tr(l?i:s+(u?".":"#")+i,e.forced)&&void 0!==r){if(typeof o==typeof r)continue;xr(o,r)}(e.sham||r&&r.sham)&&wr(o,"sham",!0),Cr(n,i,o,e)}},Sr=Z,Pr=X,Ar=function(e){if("Function"===Sr(e))return Pr(e)},Ir=Ke,Lr=O,Rr=Ar(Ar.bind),Or=function(e,t){return Ir(e),void 0===t?e:Lr?Rr(e,t):function(){return e.apply(t,arguments)}},Dr=Z,Nr=Array.isArray||function(e){return"Array"==Dr(e)},Mr={};Mr[St("toStringTag")]="z";var Fr="[object z]"===String(Mr),Ur=Fr,Hr=pe,jr=Z,Br=St("toStringTag"),Gr=Object,Vr="Arguments"==jr(function(){return arguments}()),Wr=Ur?jr:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Gr(e),Br))?n:Vr?jr(t):"Object"==(i=jr(t))&&Hr(t.callee)?"Arguments":i},Kr=X,zr=L,Yr=pe,Xr=Wr,qr=Nn,$r=function(){},Jr=[],Zr=we("Reflect","construct"),Qr=/^\s*(?:class|function)\b/,eo=Kr(Qr.exec),to=!Qr.exec($r),no=function(e){if(!Yr(e))return!1;try{return Zr($r,Jr,e),!0}catch(t){return!1}},io=function(e){if(!Yr(e))return!1;switch(Xr(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return to||!!eo(Qr,qr(e))}catch(t){return!0}};io.sham=!0;var ro=!Zr||zr((function(){var e;return no(no.call)||!no(Object)||!no((function(){e=!0}))||e}))?io:no,oo=Nr,ao=ro,so=ye,lo=St("species"),uo=Array,co=function(e){var t;return oo(e)&&(t=e.constructor,(ao(t)&&(t===uo||oo(t.prototype))||so(t)&&null===(t=t[lo]))&&(t=void 0)),void 0===t?uo:t},ho=function(e,t){return new(co(e))(0===t?0:t)},fo=Or,po=ie,go=ct,vo=Ui,yo=ho,mo=X([].push),ko=function(e){var t=1==e,n=2==e,i=3==e,r=4==e,o=6==e,a=7==e,s=5==e||o;return function(l,u,c,h){for(var f,d,p=go(l),g=po(p),v=fo(u,c),y=vo(g),m=0,k=h||yo,b=t?k(l,y):n||a?k(l,0):void 0;y>m;m++)if((s||m in g)&&(d=v(f=g[m],m,p),e))if(t)b[m]=d;else if(d)switch(e){case 3:return!0;case 5:return f;case 6:return m;case 2:mo(b,f)}else switch(e){case 4:return!1;case 7:mo(b,f)}return o?-1:i||r?r:b}},bo={
// `Array.prototype.forEach` method
// https://tc39.es/ecma262/#sec-array.prototype.foreach
forEach:ko(0),
// `Array.prototype.map` method
// https://tc39.es/ecma262/#sec-array.prototype.map
map:ko(1),
// `Array.prototype.filter` method
// https://tc39.es/ecma262/#sec-array.prototype.filter
filter:ko(2),
// `Array.prototype.some` method
// https://tc39.es/ecma262/#sec-array.prototype.some
some:ko(3),
// `Array.prototype.every` method
// https://tc39.es/ecma262/#sec-array.prototype.every
every:ko(4),
// `Array.prototype.find` method
// https://tc39.es/ecma262/#sec-array.prototype.find
find:ko(5),
// `Array.prototype.findIndex` method
// https://tc39.es/ecma262/#sec-array.prototype.findIndex
findIndex:ko(6),
// `Array.prototype.filterReject` method
// https://github.com/tc39/proposal-array-filtering
filterReject:ko(7)},wo={},Co=qi,_o=$i,xo=Object.keys||function(e){return Co(e,_o)},To=R,Eo=tn,So=en,Po=an,Ao=ce,Io=xo;wo.f=To&&!Eo?Object.defineProperties:function(e,t){Po(e);for(var n,i=Ao(t),r=Io(t),o=r.length,a=0;o>a;)So.f(e,n=r[a++],i[n]);return e};var Lo,Ro=we("document","documentElement"),Oo=an,Do=wo,No=$i,Mo=Gn,Fo=Ro,Uo=Gt,Ho="prototype",jo="script",Bo=Bn("IE_PROTO"),Go=function(){},Vo=function(e){return"<"+jo+">"+e+"</"+jo+">"},Wo=function(e){e.write(Vo("")),e.close();var t=e.parentWindow.Object;return e=null,t},Ko=function(){try{Lo=new ActiveXObject("htmlfile")}catch(r){}var e,t,n;Ko="undefined"!=typeof document?document.domain&&Lo?Wo(Lo):(t=Uo("iframe"),n="java"+jo+":",t.style.display="none",Fo.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(Vo("document.F=Object")),e.close(),e.F):Wo(Lo);for(var i=No.length;i--;)delete Ko[Ho][No[i]];return Ko()};Mo[Bo]=!0;var zo=Object.create||function(e,t){var n;return null!==e?(Go[Ho]=Oo(e),n=new Go,Go[Ho]=null,n[Bo]=e):n=Ko(),void 0===t?n:Do.f(n,t)},Yo=St,Xo=zo,qo=en.f,$o=Yo("unscopables"),Jo=Array.prototype;null==Jo[$o]&&qo(Jo,$o,{configurable:!0,value:Xo(null)});var Zo=function(e){Jo[$o][e]=!0},Qo=Er,ea=bo.find,ta=Zo,na="find",ia=!0;na in[]&&Array(1)[na]((function(){ia=!1})),Qo({target:"Array",proto:!0,forced:ia},{find:function(e){return ea(this,e,arguments.length>1?arguments[1]:void 0)}}),ta(na);var ra=Wr,oa=Fr?{}.toString:function(){return"[object "+ra(this)+"]"};Fr||xi(Object.prototype,"toString",oa,{unsafe:!0});var aa=TypeError,sa=function(e){if(e>9007199254740991)throw aa("Maximum allowed index exceeded");return e},la=Ut,ua=en,ca=V,ha=function(e,t,n){var i=la(t);i in e?ua.f(e,i,ca(0,n)):e[i]=n},fa=L,da=Ie,pa=St("species"),ga=function(e){return da>=51||!fa((function(){var t=[];return(t.constructor={})[pa]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},va=Er,ya=L,ma=Nr,ka=ye,ba=ct,wa=Ui,Ca=sa,_a=ha,xa=ho,Ta=ga,Ea=Ie,Sa=St("isConcatSpreadable"),Pa=Ea>=51||!ya((function(){var e=[];return e[Sa]=!1,e.concat()[0]!==e})),Aa=function(e){if(!ka(e))return!1;var t=e[Sa];return void 0!==t?!!t:ma(e)};va({target:"Array",proto:!0,arity:1,forced:!Pa||!Ta("concat")},{
// eslint-disable-next-line no-unused-vars -- required for `.length`
concat:function(e){var t,n,i,r,o,a=ba(this),s=xa(a,0),l=0;for(t=-1,i=arguments.length;t<i;t++)if(Aa(o=-1===t?a:arguments[t]))for(r=wa(o),Ca(l+r),n=0;n<r;n++,l++)n in o&&_a(s,l,o[n]);else Ca(l+1),_a(s,l++,o);return s.length=l,s}});var Ia={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},La=Gt("span").classList,Ra=La&&La.constructor&&La.constructor.prototype,Oa=Ra===Object.prototype?void 0:Ra,Da=L,Na=function(e,t){var n=[][e];return!!n&&Da((function(){n.call(null,t||function(){return 1},1)}))},Ma=bo.forEach,Fa=A,Ua=Ia,Ha=Oa,ja=Na("forEach")?[].forEach:function(e){return Ma(this,e,arguments.length>1?arguments[1]:void 0)},Ba=bn,Ga=function(e){if(e&&e.forEach!==ja)try{Ba(e,"forEach",ja)}catch(t){e.forEach=ja}};for(var Va in Ua)Ua[Va]&&Ga(Fa[Va]&&Fa[Va].prototype);Ga(Ha);var Wa=ct,Ka=xo;Er({target:"Object",stat:!0,forced:L((function(){Ka(1)}))},{keys:function(e){return Ka(Wa(e))}});var za=X([].slice),Ya=Er,Xa=Nr,qa=ro,$a=ye,Ja=Oi,Za=Ui,Qa=ce,es=ha,ts=St,ns=za,is=ga("slice"),rs=ts("species"),os=Array,as=Math.max;Ya({target:"Array",proto:!0,forced:!is},{slice:function(e,t){var n,i,r,o=Qa(this),a=Za(o),s=Ja(e,a),l=Ja(void 0===t?a:t,a);if(Xa(o)&&(n=o.constructor,(qa(n)&&(n===os||Xa(n.prototype))||$a(n)&&null===(n=n[rs]))&&(n=void 0),n===os||void 0===n))return ns(o,s,l);for(i=new(void 0===n?os:n)(as(l-s,0)),r=0;s<l;s++,r++)s in o&&es(i,r,o[s]);return i.length=r,i}});var ss,ls,us=Wr,cs=String,hs=function(e){if("Symbol"===us(e))throw TypeError("Cannot convert a Symbol value to a string");return cs(e)},fs=an,ds=function(){var e=fs(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},ps=L,gs=A.RegExp,vs=ps((function(){var e=gs("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),ys=vs||ps((function(){return!gs("a","y").sticky})),ms=vs||ps((function(){var e=gs("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),ks={BROKEN_CARET:ms,MISSED_STICKY:ys,UNSUPPORTED_Y:vs},bs=L,ws=A.RegExp,Cs=bs((function(){var e=ws(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),_s=L,xs=A.RegExp,Ts=_s((function(){var e=xs("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),Es=M,Ss=X,Ps=hs,As=ds,Is=ks,Ls=zo,Rs=ni.get,Os=Cs,Ds=Ts,Ns=Qe("native-string-replace",String.prototype.replace),Ms=RegExp.prototype.exec,Fs=Ms,Us=Ss("".charAt),Hs=Ss("".indexOf),js=Ss("".replace),Bs=Ss("".slice),Gs=(ls=/b*/g,Es(Ms,ss=/a/,"a"),Es(Ms,ls,"a"),0!==ss.lastIndex||0!==ls.lastIndex),Vs=Is.BROKEN_CARET,Ws=void 0!==/()??/.exec("")[1];(Gs||Ws||Vs||Os||Ds)&&(Fs=function(e){var t,n,i,r,o,a,s,l=this,u=Rs(l),c=Ps(e),h=u.raw;if(h)return h.lastIndex=l.lastIndex,t=Es(Fs,h,c),l.lastIndex=h.lastIndex,t;var f=u.groups,d=Vs&&l.sticky,p=Es(As,l),g=l.source,v=0,y=c;if(d&&(p=js(p,"y",""),-1===Hs(p,"g")&&(p+="g"),y=Bs(c,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==Us(c,l.lastIndex-1))&&(g="(?: "+g+")",y=" "+y,v++),n=new RegExp("^(?:"+g+")",p)),Ws&&(n=new RegExp("^"+g+"$(?!\\s)",p)),Gs&&(i=l.lastIndex),r=Es(Ms,d?n:l,y),d?r?(r.input=Bs(r.input,v),r[0]=Bs(r[0],v),r.index=l.lastIndex,l.lastIndex+=r[0].length):l.lastIndex=0:Gs&&r&&(l.lastIndex=l.global?r.index+r[0].length:i),Ws&&r&&r.length>1&&Es(Ns,r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r&&f)for(r.groups=a=Ls(null),o=0;o<f.length;o++)a[(s=f[o])[0]]=r[s[1]];return r});var Ks=Fs;Er({target:"RegExp",proto:!0,forced:/./.exec!==Ks},{exec:Ks});var zs,Ys,Xs=Er,qs=M,$s=pe,Js=an,Zs=hs,Qs=(zs=!1,(Ys=/[ac]/).exec=function(){return zs=!0,/./.exec.apply(this,arguments)},!0===Ys.test("abc")&&zs),el=/./.test;Xs({target:"RegExp",proto:!0,forced:!Qs},{test:function(e){var t=Js(this),n=Zs(e),i=t.exec;if(!$s(i))return qs(el,t,n);var r=qs(i,t,n);return null!==r&&(Js(r),!0)}});var tl=Er,nl=ie,il=ce,rl=Na,ol=X([].join);tl({target:"Array",proto:!0,forced:nl!=Object||!rl("join",",")},{join:function(e){return ol(il(this),void 0===e?",":e)}});var al=R,sl=Nr,ll=TypeError,ul=Object.getOwnPropertyDescriptor,cl=al&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),hl=Be,fl=TypeError,dl=function(e,t){if(!delete e[t])throw fl("Cannot delete property "+hl(t)+" of "+hl(e))},pl=Er,gl=ct,vl=Oi,yl=Ai,ml=Ui,kl=cl?function(e,t){if(sl(e)&&!ul(e,"length").writable)throw ll("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},bl=sa,wl=ho,Cl=ha,_l=dl,xl=ga("splice"),Tl=Math.max,El=Math.min;pl({target:"Array",proto:!0,forced:!xl},{splice:function(e,t){var n,i,r,o,a,s,l=gl(this),u=ml(l),c=vl(e,u),h=arguments.length;for(0===h?n=i=0:1===h?(n=0,i=u-c):(n=h-2,i=El(Tl(yl(t),0),u-c)),bl(u+n-i),r=wl(l,i),o=0;o<i;o++)(a=c+o)in l&&Cl(r,o,l[a]);if(r.length=i,n<i){for(o=c;o<u-i;o++)s=o+n,(a=o+i)in l?l[s]=l[a]:_l(l,s);for(o=u;o>u-i+n;o--)_l(l,o-1)}else if(n>i)for(o=u-i;o>c;o--)s=o+n-1,(a=o+i-1)in l?l[s]=l[a]:_l(l,s);for(o=0;o<n;o++)l[o+c]=arguments[o+2];return kl(l,u-i+n),r}});var Sl,Pl,Al,Il,Ll="undefined"!=typeof process&&"process"==Z(process),Rl=X,Ol=Ke,Dl=pe,Nl=String,Ml=TypeError,Fl=function(e,t,n){try{return Rl(Ol(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(i){}},Ul=an,Hl=function(e){if("object"==typeof e||Dl(e))return e;throw Ml("Can't set "+Nl(e)+" as a prototype")},jl=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Fl(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(i){}return function(n,i){return Ul(n),Hl(i),t?e(n,i):n.__proto__=i,n}}():void 0),Bl=en.f,Gl=dt,Vl=St("toStringTag"),Wl=function(e,t,n){e&&!n&&(e=e.prototype),e&&!Gl(e,Vl)&&Bl(e,Vl,{configurable:!0,value:t})},Kl=wn,zl=en,Yl=function(e,t,n){return n.get&&Kl(n.get,t,{getter:!0}),n.set&&Kl(n.set,t,{setter:!0}),zl.f(e,t,n)},Xl=we,ql=Yl,$l=R,Jl=St("species"),Zl=function(e){var t=Xl(e);$l&&t&&!t[Jl]&&ql(t,Jl,{configurable:!0,get:function(){return this}})},Ql=Ce,eu=TypeError,tu=function(e,t){if(Ql(t,e))return e;throw eu("Incorrect invocation")},nu=ro,iu=Be,ru=TypeError,ou=an,au=function(e){if(nu(e))return e;throw ru(iu(e)+" is not a constructor")},su=re,lu=St("species"),uu=function(e,t){var n,i=ou(e).constructor;return void 0===i||su(n=ou(i)[lu])?t:au(n)},cu=O,hu=Function.prototype,fu=hu.apply,du=hu.call,pu="object"==typeof Reflect&&Reflect.apply||(cu?du.bind(fu):function(){return du.apply(fu,arguments)}),gu=TypeError,vu=function(e,t){if(e<t)throw gu("Not enough arguments");return e},yu=/(?:ipad|iphone|ipod).*applewebkit/i.test(_e),mu=A,ku=pu,bu=Or,wu=pe,Cu=dt,_u=L,xu=Ro,Tu=za,Eu=Gt,Su=vu,Pu=yu,Au=Ll,Iu=mu.setImmediate,Lu=mu.clearImmediate,Ru=mu.process,Ou=mu.Dispatch,Du=mu.Function,Nu=mu.MessageChannel,Mu=mu.String,Fu=0,Uu={},Hu="onreadystatechange";_u((function(){Sl=mu.location}));var ju=function(e){if(Cu(Uu,e)){var t=Uu[e];delete Uu[e],t()}},Bu=function(e){return function(){ju(e)}},Gu=function(e){ju(e.data)},Vu=function(e){mu.postMessage(Mu(e),Sl.protocol+"//"+Sl.host)};Iu&&Lu||(Iu=function(e){Su(arguments.length,1);var t=wu(e)?e:Du(e),n=Tu(arguments,1);return Uu[++Fu]=function(){ku(t,void 0,n)},Pl(Fu),Fu},Lu=function(e){delete Uu[e]},Au?Pl=function(e){Ru.nextTick(Bu(e))}:Ou&&Ou.now?Pl=function(e){Ou.now(Bu(e))}:Nu&&!Pu?(Il=(Al=new Nu).port2,Al.port1.onmessage=Gu,Pl=bu(Il.postMessage,Il)):mu.addEventListener&&wu(mu.postMessage)&&!mu.importScripts&&Sl&&"file:"!==Sl.protocol&&!_u(Vu)?(Pl=Vu,mu.addEventListener("message",Gu,!1)):Pl=Hu in Eu("script")?function(e){xu.appendChild(Eu("script"))[Hu]=function(){xu.removeChild(this),ju(e)}}:function(e){setTimeout(Bu(e),0)});var Wu={set:Iu,clear:Lu},Ku=function(){this.head=null,this.tail=null};Ku.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var zu,Yu,Xu,qu,$u,Ju=Ku,Zu=/ipad|iphone|ipod/i.test(_e)&&"undefined"!=typeof Pebble,Qu=/web0s(?!.*chrome)/i.test(_e),ec=A,tc=Or,nc=I.f,ic=Wu.set,rc=Ju,oc=yu,ac=Zu,sc=Qu,lc=Ll,uc=ec.MutationObserver||ec.WebKitMutationObserver,cc=ec.document,hc=ec.process,fc=ec.Promise,dc=nc(ec,"queueMicrotask"),pc=dc&&dc.value;if(!pc){var gc=new rc,vc=function(){var e,t;for(lc&&(e=hc.domain)&&e.exit();t=gc.get();)try{t()}catch(n){throw gc.head&&zu(),n}e&&e.enter()};oc||lc||sc||!uc||!cc?!ac&&fc&&fc.resolve?((qu=fc.resolve(void 0)).constructor=fc,$u=tc(qu.then,qu),zu=function(){$u(vc)}):lc?zu=function(){hc.nextTick(vc)}:(ic=tc(ic,ec),zu=function(){ic(vc)}):(Yu=!0,Xu=cc.createTextNode(""),new uc(vc).observe(Xu,{characterData:!0}),zu=function(){Xu.data=Yu=!Yu}),pc=function(e){gc.head||zu(),gc.add(e)}}var yc=pc,mc=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}},kc=A.Promise,bc="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,wc=!bc&&!Ll&&"object"==typeof window&&"object"==typeof document,Cc=A,_c=kc,xc=pe,Tc=mr,Ec=Nn,Sc=St,Pc=wc,Ac=bc,Ic=Ie;_c&&_c.prototype;var Lc=Sc("species"),Rc=!1,Oc=xc(Cc.PromiseRejectionEvent),Dc={CONSTRUCTOR:Tc("Promise",(function(){var e=Ec(_c),t=e!==String(_c);if(!t&&66===Ic)return!0;if(!Ic||Ic<51||!/native code/.test(e)){var n=new _c((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};if((n.constructor={})[Lc]=i,!(Rc=n.then((function(){}))instanceof i))return!0}return!t&&(Pc||Ac)&&!Oc})),REJECTION_EVENT:Oc,SUBCLASSING:Rc},Nc={},Mc=Ke,Fc=TypeError,Uc=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw Fc("Bad Promise constructor");t=e,n=i})),this.resolve=Mc(t),this.reject=Mc(n)};Nc.f=function(e){return new Uc(e)};var Hc,jc,Bc,Gc=Er,Vc=Ll,Wc=A,Kc=M,zc=xi,Yc=jl,Xc=Wl,qc=Zl,$c=Ke,Jc=pe,Zc=ye,Qc=tu,eh=uu,th=Wu.set,nh=yc,ih=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(n){}},rh=mc,oh=Ju,ah=ni,sh=kc,lh=Nc,uh="Promise",ch=Dc.CONSTRUCTOR,hh=Dc.REJECTION_EVENT,fh=Dc.SUBCLASSING,dh=ah.getterFor(uh),ph=ah.set,gh=sh&&sh.prototype,vh=sh,yh=gh,mh=Wc.TypeError,kh=Wc.document,bh=Wc.process,wh=lh.f,Ch=wh,_h=!!(kh&&kh.createEvent&&Wc.dispatchEvent),xh="unhandledrejection",Th=function(e){var t;return!(!Zc(e)||!Jc(t=e.then))&&t},Eh=function(e,t){var n,i,r,o=t.value,a=1==t.state,s=a?e.ok:e.fail,l=e.resolve,u=e.reject,c=e.domain;try{s?(a||(2===t.rejection&&Lh(t),t.rejection=1),!0===s?n=o:(c&&c.enter(),n=s(o),c&&(c.exit(),r=!0)),n===e.promise?u(mh("Promise-chain cycle")):(i=Th(n))?Kc(i,n,l,u):l(n)):u(o)}catch(h){c&&!r&&c.exit(),u(h)}},Sh=function(e,t){e.notified||(e.notified=!0,nh((function(){for(var n,i=e.reactions;n=i.get();)Eh(n,e);e.notified=!1,t&&!e.rejection&&Ah(e)})))},Ph=function(e,t,n){var i,r;_h?((i=kh.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),Wc.dispatchEvent(i)):i={promise:t,reason:n},!hh&&(r=Wc["on"+e])?r(i):e===xh&&ih("Unhandled promise rejection",n)},Ah=function(e){Kc(th,Wc,(function(){var t,n=e.facade,i=e.value;if(Ih(e)&&(t=rh((function(){Vc?bh.emit("unhandledRejection",i,n):Ph(xh,n,i)})),e.rejection=Vc||Ih(e)?2:1,t.error))throw t.value}))},Ih=function(e){return 1!==e.rejection&&!e.parent},Lh=function(e){Kc(th,Wc,(function(){var t=e.facade;Vc?bh.emit("rejectionHandled",t):Ph("rejectionhandled",t,e.value)}))},Rh=function(e,t,n){return function(i){e(t,i,n)}},Oh=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Sh(e,!0))},Dh=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw mh("Promise can't be resolved itself");var i=Th(t);i?nh((function(){var n={done:!1};try{Kc(i,t,Rh(Dh,n,e),Rh(Oh,n,e))}catch(r){Oh(n,r,e)}})):(e.value=t,e.state=1,Sh(e,!1))}catch(r){Oh({done:!1},r,e)}}};if(ch&&(yh=(vh=function(e){Qc(this,yh),$c(e),Kc(Hc,this);var t=dh(this);try{e(Rh(Dh,t),Rh(Oh,t))}catch(n){Oh(t,n)}}).prototype,(Hc=function(e){ph(this,{type:uh,done:!1,notified:!1,parent:!1,reactions:new oh,rejection:!1,state:0,value:void 0})}).prototype=zc(yh,"then",(function(e,t){var n=dh(this),i=wh(eh(this,vh));return n.parent=!0,i.ok=!Jc(e)||e,i.fail=Jc(t)&&t,i.domain=Vc?bh.domain:void 0,0==n.state?n.reactions.add(i):nh((function(){Eh(i,n)})),i.promise})),jc=function(){var e=new Hc,t=dh(e);this.promise=e,this.resolve=Rh(Dh,t),this.reject=Rh(Oh,t)},lh.f=wh=function(e){return e===vh||undefined===e?new jc(e):Ch(e)},Jc(sh)&&gh!==Object.prototype)){Bc=gh.then,fh||zc(gh,"then",(function(e,t){var n=this;return new vh((function(e,t){Kc(Bc,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete gh.constructor}catch(sP){}Yc&&Yc(gh,yh)}Gc({global:!0,constructor:!0,wrap:!0,forced:ch},{Promise:vh}),Xc(vh,uh,!1),qc(uh);var Nh={},Mh=Nh,Fh=St("iterator"),Uh=Array.prototype,Hh=function(e){return void 0!==e&&(Mh.Array===e||Uh[Fh]===e)},jh=Wr,Bh=Xe,Gh=re,Vh=Nh,Wh=St("iterator"),Kh=function(e){if(!Gh(e))return Bh(e,Wh)||Bh(e,"@@iterator")||Vh[jh(e)]},zh=M,Yh=Ke,Xh=an,qh=Be,$h=Kh,Jh=TypeError,Zh=function(e,t){var n=arguments.length<2?$h(e):t;if(Yh(n))return Xh(zh(n,e));throw Jh(qh(e)+" is not iterable")},Qh=M,ef=an,tf=Xe,nf=function(e,t,n){var i,r;ef(e);try{if(!(i=tf(e,"return"))){if("throw"===t)throw n;return n}i=Qh(i,e)}catch(sP){r=!0,i=sP}if("throw"===t)throw n;if(r)throw i;return ef(i),n},rf=Or,of=M,af=an,sf=Be,lf=Hh,uf=Ui,cf=Ce,hf=Zh,ff=Kh,df=nf,pf=TypeError,gf=function(e,t){this.stopped=e,this.result=t},vf=gf.prototype,yf=function(e,t,n){var i,r,o,a,s,l,u,c=n&&n.that,h=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),g=rf(t,c),v=function(e){return i&&df(i,"normal",e),new gf(!0,e)},y=function(e){return h?(af(e),p?g(e[0],e[1],v):g(e[0],e[1])):p?g(e,v):g(e)};if(f)i=e.iterator;else if(d)i=e;else{if(!(r=ff(e)))throw pf(sf(e)+" is not iterable");if(lf(r)){for(o=0,a=uf(e);a>o;o++)if((s=y(e[o]))&&cf(vf,s))return s;return new gf(!1)}i=hf(e,r)}for(l=f?e.next:i.next;!(u=of(l,i)).done;){try{s=y(u.value)}catch(sP){df(i,"throw",sP)}if("object"==typeof s&&s&&cf(vf,s))return s}return new gf(!1)},mf=St("iterator"),kf=!1;try{var bf=0,wf={next:function(){return{done:!!bf++}},return:function(){kf=!0}};wf[mf]=function(){return this},Array.from(wf,(function(){throw 2}))}catch(sP){}var Cf=kc,_f=Dc.CONSTRUCTOR||!function(e,t){if(!t&&!kf)return!1;var n=!1;try{var i={};i[mf]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(sP){}return n}((function(e){Cf.all(e).then(void 0,(function(){}))})),xf=M,Tf=Ke,Ef=Nc,Sf=mc,Pf=yf;Er({target:"Promise",stat:!0,forced:_f},{all:function(e){var t=this,n=Ef.f(t),i=n.resolve,r=n.reject,o=Sf((function(){var n=Tf(t.resolve),o=[],a=0,s=1;Pf(e,(function(e){var l=a++,u=!1;s++,xf(n,t,e).then((function(e){u||(u=!0,o[l]=e,--s||i(o))}),r)})),--s||i(o)}));return o.error&&r(o.value),n.promise}});var Af=Er,If=Dc.CONSTRUCTOR,Lf=kc,Rf=we,Of=pe,Df=xi,Nf=Lf&&Lf.prototype;if(Af({target:"Promise",proto:!0,forced:If,real:!0},{catch:function(e){return this.then(void 0,e)}}),Of(Lf)){var Mf=Rf("Promise").prototype.catch;Nf.catch!==Mf&&Df(Nf,"catch",Mf,{unsafe:!0})}var Ff=M,Uf=Ke,Hf=Nc,jf=mc,Bf=yf;Er({target:"Promise",stat:!0,forced:_f},{race:function(e){var t=this,n=Hf.f(t),i=n.reject,r=jf((function(){var r=Uf(t.resolve);Bf(e,(function(e){Ff(r,t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}});var Gf=M,Vf=Nc;Er({target:"Promise",stat:!0,forced:Dc.CONSTRUCTOR},{reject:function(e){var t=Vf.f(this);return Gf(t.reject,void 0,e),t.promise}});var Wf=an,Kf=ye,zf=Nc,Yf=Er,Xf=Dc.CONSTRUCTOR,qf=function(e,t){if(Wf(e),Kf(t)&&t.constructor===e)return t;var n=zf.f(e);return(0,n.resolve)(t),n.promise};we("Promise"),Yf({target:"Promise",stat:!0,forced:Xf},{resolve:function(e){return qf(this,e)}});var $f=R,Jf=Pn.EXISTS,Zf=X,Qf=Yl,ed=Function.prototype,td=Zf(ed.toString),nd=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,id=Zf(nd.exec);$f&&!Jf&&Qf(ed,"name",{configurable:!0,get:function(){try{return id(nd,td(this))[1]}catch(sP){return""}}}),Er({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var rd=A,od=pe,ad=ye,sd=jl,ld=function(e,t,n){var i,r;
// it can work only with native `setPrototypeOf`
return sd&&// we haven't completely correct pre-ES6 way for getting `new.target`, so use this
od(i=t.constructor)&&i!==n&&ad(r=i.prototype)&&r!==n.prototype&&sd(e,r),e},ud=X(1..valueOf),cd="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",hd=se,fd=hs,dd=cd,pd=X("".replace),gd=RegExp("^["+dd+"]+"),vd=RegExp("(^|[^"+dd+"])["+dd+"]+$"),yd=function(e){return function(t){var n=fd(hd(t));return 1&e&&(n=pd(n,gd,"")),2&e&&(n=pd(n,vd,"$1")),n}},md={
// `String.prototype.{ trimLeft, trimStart }` methods
// https://tc39.es/ecma262/#sec-string.prototype.trimstart
start:yd(1),
// `String.prototype.{ trimRight, trimEnd }` methods
// https://tc39.es/ecma262/#sec-string.prototype.trimend
end:yd(2),
// `String.prototype.trim` method
// https://tc39.es/ecma262/#sec-string.prototype.trim
trim:yd(3)},kd=Er,bd=R,wd=A,Cd=rd,_d=X,xd=mr,Td=dt,Ed=ld,Sd=Ce,Pd=He,Ad=Nt,Id=L,Ld=Ti.f,Rd=I.f,Od=en.f,Dd=ud,Nd=md.trim,Md="Number",Fd=wd[Md];Cd[Md];var Ud=Fd.prototype,Hd=wd.TypeError,jd=_d("".slice),Bd=_d("".charCodeAt),Gd=function(e){var t=Ad(e,"number");return"bigint"==typeof t?t:Vd(t)},Vd=function(e){var t,n,i,r,o,a,s,l,u=Ad(e,"number");if(Pd(u))throw Hd("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=Nd(u),43===(t=Bd(u,0))||45===t){if(88===(n=Bd(u,2))||120===n)return NaN}else if(48===t){switch(Bd(u,1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+u}for(a=(o=jd(u,2)).length,s=0;s<a;s++)if((l=Bd(o,s))<48||l>r)return NaN;return parseInt(o,i)}return+u},Wd=xd(Md,!Fd(" 0o1")||!Fd("0b1")||Fd("+0x1")),Kd=function(e){return Sd(Ud,e)&&Id((function(){Dd(e)}))},zd=function(e){var t=arguments.length<1?0:Fd(Gd(e));return Kd(this)?Ed(Object(t),this,zd):t};zd.prototype=Ud,Wd&&(Ud.constructor=zd),kd({global:!0,constructor:!0,wrap:!0,forced:Wd},{Number:zd});Wd&&function(e,t){for(var n,i=bd?Ld(t):
// ES3:
"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),r=0;i.length>r;r++)Td(t,n=i[r])&&!Td(e,n)&&Od(e,n,Rd(t,n))}(Cd[Md],Fd);var Yd=bo.map;Er({target:"Array",proto:!0,forced:!ga("map")},{map:function(e){return Yd(this,e,arguments.length>1?arguments[1]:void 0)}});var Xd,qd,$d,Jd=!L((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Zd=dt,Qd=pe,ep=ct,tp=Jd,np=Bn("IE_PROTO"),ip=Object,rp=ip.prototype,op=tp?ip.getPrototypeOf:function(e){var t=ep(e);if(Zd(t,np))return t[np];var n=t.constructor;return Qd(n)&&t instanceof n?n.prototype:t instanceof ip?rp:null},ap=L,sp=pe,lp=ye,up=op,cp=xi,hp=St("iterator"),fp=!1;[].keys&&("next"in($d=[].keys())?(qd=up(up($d)))!==Object.prototype&&(Xd=qd):fp=!0),(!lp(Xd)||ap((function(){var e={};return Xd[hp].call(e)!==e})))&&(Xd={}),sp(Xd[hp])||cp(Xd,hp,(function(){return this}));var dp={IteratorPrototype:Xd,BUGGY_SAFARI_ITERATORS:fp},pp=dp.IteratorPrototype,gp=zo,vp=V,yp=Wl,mp=Nh,kp=function(){return this},bp=function(e,t,n,i){var r=t+" Iterator";return e.prototype=gp(pp,{next:vp(+!i,n)}),yp(e,r,!1),mp[r]=kp,e},wp=Er,Cp=M,_p=pe,xp=bp,Tp=op,Ep=jl,Sp=Wl,Pp=bn,Ap=xi,Ip=Nh,Lp=Pn.PROPER,Rp=Pn.CONFIGURABLE,Op=dp.IteratorPrototype,Dp=dp.BUGGY_SAFARI_ITERATORS,Np=St("iterator"),Mp="keys",Fp="values",Up="entries",Hp=function(){return this},jp=function(e,t,n,i,r,o,a){xp(n,t,i);var s,l,u,c=function(e){if(e===r&&g)return g;if(!Dp&&e in d)return d[e];switch(e){case Mp:case Fp:case Up:return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",f=!1,d=e.prototype,p=d[Np]||d["@@iterator"]||r&&d[r],g=!Dp&&p||c(r),v="Array"==t&&d.entries||p;if(v&&(s=Tp(v.call(new e)))!==Object.prototype&&s.next&&(Tp(s)!==Op&&(Ep?Ep(s,Op):_p(s[Np])||Ap(s,Np,Hp)),Sp(s,h,!0)),Lp&&r==Fp&&p&&p.name!==Fp&&(Rp?Pp(d,"name",Fp):(f=!0,g=function(){return Cp(p,this)})),r)if(l={values:c(Fp),keys:o?g:c(Mp),entries:c(Up)},a)for(u in l)(Dp||f||!(u in d))&&Ap(d,u,l[u]);else wp({target:t,proto:!0,forced:Dp||f},l);return d[Np]!==g&&Ap(d,Np,g,{name:r}),Ip[t]=g,l},Bp=function(e,t){return{value:e,done:t}},Gp=ce,Vp=Zo,Wp=Nh,Kp=ni,zp=en.f,Yp=jp,Xp=Bp,qp=R,$p="Array Iterator",Jp=Kp.set,Zp=Kp.getterFor($p),Qp=Yp(Array,"Array",(function(e,t){Jp(this,{type:$p,target:Gp(e),
// target
index:0,
// next index
kind:t})}),(function(){var e=Zp(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,Xp(void 0,!0)):Xp("keys"==n?i:"values"==n?t[i]:[i,t[i]],!1)}),"values"),eg=Wp.Arguments=Wp.Array;if(Vp("keys"),Vp("values"),Vp("entries"),qp&&"values"!==eg.name)try{zp(eg,"name",{value:"values"})}catch(sP){}var tg=A,ng=Ia,ig=Oa,rg=Qp,og=bn,ag=St,sg=ag("iterator"),lg=ag("toStringTag"),ug=rg.values,cg=function(e,t){if(e){if(e[sg]!==ug)try{og(e,sg,ug)}catch(sP){e[sg]=ug}if(e[lg]||og(e,lg,t),ng[t])for(var n in rg)if(e[n]!==rg[n])try{og(e,n,rg[n])}catch(sP){e[n]=rg[n]}}};for(var hg in ng)cg(tg[hg]&&tg[hg].prototype,hg);cg(ig,"DOMTokenList");var fg=bo.filter;Er({target:"Array",proto:!0,forced:!ga("filter")},{filter:function(e){return fg(this,e,arguments.length>1?arguments[1]:void 0)}});var dg=R,pg=X,gg=M,vg=L,yg=xo,mg=Qi,kg=F,bg=ct,wg=ie,Cg=Object.assign,_g=Object.defineProperty,xg=pg([].concat),Tg=!Cg||vg((function(){if(dg&&1!==Cg({b:1},Cg(_g({},"a",{enumerable:!0,get:function(){_g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=Cg({},e)[n]||yg(Cg({},t)).join("")!=i}))?function(e,t){for(var n=bg(e),i=arguments.length,r=1,o=mg.f,a=kg.f;i>r;)for(var s,l=wg(arguments[r++]),u=o?xg(yg(l),o(l)):yg(l),c=u.length,h=0;c>h;)s=u[h++],dg&&!gg(a,l,s)||(n[s]=l[s]);return n}:Cg,Eg=Tg;Er({target:"Object",stat:!0,arity:2,forced:Object.assign!==Eg},{assign:Eg});var Sg={};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,i,o,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new r(i,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,a=new Array(o);r<o;r++)a[r]=i[r].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},s.prototype.emit=function(e,t,i,r,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,r),!0;case 5:return c.fn.call(c.context,t,i,r,o),!0;case 6:return c.fn.call(c.context,t,i,r,o,a),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,d=c.length;for(u=0;u<d;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,i);break;case 4:c[u].fn.call(c[u].context,t,i,r);break;default:if(!l)for(f=1,l=new Array(h-1);f<h;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,i,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||r&&!s.once||i&&s.context!==i||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||r&&!s[l].once||i&&s[l].context!==i)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}({get exports(){return Sg},set exports(e){Sg=e}});const Pg=Sg;var Ag=Ar,Ig=xi,Lg=Ks,Rg=L,Og=St,Dg=bn,Ng=Og("species"),Mg=RegExp.prototype,Fg=function(e,t,n,i){var r=Og(e),o=!Rg((function(){var t={};return t[r]=function(){return 7},7!=""[e](t)})),a=o&&!Rg((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Ng]=function(){return n},n.flags="",n[r]=/./[r]),n.exec=function(){return t=!0,null},n[r](""),!t}));if(!o||!a||n){var s=Ag(/./[r]),l=t(r,""[e],(function(e,t,n,i,r){var a=Ag(e),l=t.exec;return l===Lg||l===Mg.exec?o&&!r?{done:!0,value:s(t,n,i)}:{done:!0,value:a(n,t,i)}:{done:!1}}));Ig(String.prototype,e,l[0]),Ig(Mg,r,l[1])}i&&Dg(Mg[r],"sham",!0)},Ug=X,Hg=Ai,jg=hs,Bg=se,Gg=Ug("".charAt),Vg=Ug("".charCodeAt),Wg=Ug("".slice),Kg=function(e){return function(t,n){var i,r,o=jg(Bg(t)),a=Hg(n),s=o.length;return a<0||a>=s?e?"":void 0:(i=Vg(o,a))<55296||i>56319||a+1===s||(r=Vg(o,a+1))<56320||r>57343?e?Gg(o,a):i:e?Wg(o,a,a+2):r-56320+(i-55296<<10)+65536}},zg={
// `String.prototype.codePointAt` method
// https://tc39.es/ecma262/#sec-string.prototype.codepointat
codeAt:Kg(!1),
// `String.prototype.at` method
// https://github.com/mathiasbynens/String.prototype.at
charAt:Kg(!0)},Yg=zg.charAt,Xg=function(e,t,n){return t+(n?Yg(e,t).length:1)},qg=M,$g=an,Jg=pe,Zg=Z,Qg=Ks,ev=TypeError,tv=function(e,t){var n=e.exec;if(Jg(n)){var i=qg(n,e,t);return null!==i&&$g(i),i}if("RegExp"===Zg(e))return qg(Qg,e,t);throw ev("RegExp#exec called on incompatible receiver")},nv=M,iv=an,rv=re,ov=Mi,av=hs,sv=se,lv=Xe,uv=Xg,cv=tv;Fg("match",(function(e,t,n){return[
// `String.prototype.match` method
// https://tc39.es/ecma262/#sec-string.prototype.match
function(t){var n=sv(this),i=rv(t)?void 0:lv(t,e);return i?nv(i,t,n):new RegExp(t)[e](av(n))},
// `RegExp.prototype[@@match]` method
// https://tc39.es/ecma262/#sec-regexp.prototype-@@match
function(e){var i=iv(this),r=av(e),o=n(t,i,r);if(o.done)return o.value;if(!i.global)return cv(i,r);var a=i.unicode;i.lastIndex=0;for(var s,l=[],u=0;null!==(s=cv(i,r));){var c=av(s[0]);l[u]=c,""===c&&(i.lastIndex=uv(r,ov(i.lastIndex),a)),u++}return 0===u?null:l}]}));var hv=ye,fv=Z,dv=St("match"),pv=function(e){var t;return hv(e)&&(void 0!==(t=e[dv])?!!t:"RegExp"==fv(e))},gv=M,vv=dt,yv=Ce,mv=ds,kv=RegExp.prototype,bv=function(e){var t=e.flags;return void 0!==t||"flags"in kv||vv(e,"flags")||!yv(kv,e)?t:gv(mv,e)},wv=en.f,Cv=R,_v=A,xv=X,Tv=mr,Ev=ld,Sv=bn,Pv=Ti.f,Av=Ce,Iv=pv,Lv=hs,Rv=bv,Ov=ks,Dv=function(e,t,n){n in e||wv(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})},Nv=xi,Mv=L,Fv=dt,Uv=ni.enforce,Hv=Zl,jv=Cs,Bv=Ts,Gv=St("match"),Vv=_v.RegExp,Wv=Vv.prototype,Kv=_v.SyntaxError,zv=xv(Wv.exec),Yv=xv("".charAt),Xv=xv("".replace),qv=xv("".indexOf),$v=xv("".slice),Jv=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Zv=/a/g,Qv=/a/g,ey=new Vv(Zv)!==Zv,ty=Ov.MISSED_STICKY,ny=Ov.UNSUPPORTED_Y,iy=Cv&&(!ey||ty||jv||Bv||Mv((function(){return Qv[Gv]=!1,Vv(Zv)!=Zv||Vv(Qv)==Qv||"/a/i"!=Vv(Zv,"i")})));if(Tv("RegExp",iy)){for(var ry=function(e,t){var n,i,r,o,a,s,l=Av(Wv,this),u=Iv(e),c=void 0===t,h=[],f=e;if(!l&&u&&c&&e.constructor===ry)return e;if((u||Av(Wv,e))&&(e=e.source,c&&(t=Rv(f))),e=void 0===e?"":Lv(e),t=void 0===t?"":Lv(t),f=e,jv&&"dotAll"in Zv&&(i=!!t&&qv(t,"s")>-1)&&(t=Xv(t,/s/g,"")),n=t,ty&&"sticky"in Zv&&(r=!!t&&qv(t,"y")>-1)&&ny&&(t=Xv(t,/y/g,"")),Bv&&(o=function(e){for(var t,n=e.length,i=0,r="",o=[],a={},s=!1,l=!1,u=0,c="";i<=n;i++){if("\\"===(t=Yv(e,i)))t+=Yv(e,++i);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:zv(Jv,$v(e,i+1))&&(i+=2,l=!0),r+=t,u++;continue;case">"===t&&l:if(""===c||Fv(a,c))throw new Kv("Invalid capture group name");a[c]=!0,o[o.length]=[c,u],l=!1,c="";continue}l?c+=t:r+=t}return[r,o]}(e),e=o[0],h=o[1]),a=Ev(Vv(e,t),l?this:Wv,ry),(i||r||h.length)&&(s=Uv(a),i&&(s.dotAll=!0,s.raw=ry(function(e){for(var t,n=e.length,i=0,r="",o=!1;i<=n;i++)"\\"!==(t=Yv(e,i))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),r+=t):r+="[\\s\\S]":r+=t+Yv(e,++i);return r}(e),n)),r&&(s.sticky=!0),h.length&&(s.groups=h)),e!==f)try{Sv(a,"source",""===f?"(?:)":f)}catch(sP){}return a},oy=Pv(Vv),ay=0;oy.length>ay;)Dv(ry,Vv,oy[ay++]);Wv.constructor=ry,ry.prototype=Wv,Nv(_v,"RegExp",ry,{constructor:!0})}Hv("RegExp");var sy=R,ly=ks.MISSED_STICKY,uy=Z,cy=Yl,hy=ni.get,fy=RegExp.prototype,dy=TypeError;sy&&ly&&cy(fy,"sticky",{configurable:!0,get:function(){if(this!==fy){if("RegExp"===uy(this))return!!hy(this).sticky;throw dy("Incompatible receiver, RegExp required")}}});var py=Pn.PROPER,gy=xi,vy=an,yy=hs,my=L,ky=bv,by="toString",wy=RegExp.prototype[by],Cy=my((function(){return"/a/b"!=wy.call({source:"a",flags:"b"})})),_y=py&&wy.name!=by;(Cy||_y)&&gy(RegExp.prototype,by,(function(){var e=vy(this);return"/"+yy(e.source)+"/"+yy(ky(e))}),{unsafe:!0});var xy=Oi,Ty=Ui,Ey=ha,Sy=Array,Py=Math.max,Ay=function(e,t,n){for(var i=Ty(e),r=xy(t,i),o=xy(void 0===n?i:n,i),a=Sy(Py(o-r,0)),s=0;r<o;r++,s++)Ey(a,s,e[r]);return a.length=s,a},Iy=pu,Ly=M,Ry=X,Oy=Fg,Dy=an,Ny=re,My=pv,Fy=se,Uy=uu,Hy=Xg,jy=Mi,By=hs,Gy=Xe,Vy=Ay,Wy=tv,Ky=Ks,zy=L,Yy=ks.UNSUPPORTED_Y,Xy=4294967295,qy=Math.min,$y=[].push,Jy=Ry(/./.exec),Zy=Ry($y),Qy=Ry("".slice),em=!zy((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));Oy("split",(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||// eslint-disable-next-line regexp/no-empty-group -- required for testing
4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||// eslint-disable-next-line regexp/no-empty-capturing-group, regexp/no-empty-group -- required for testing
".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=By(Fy(this)),r=void 0===n?Xy:n>>>0;if(0===r)return[];if(void 0===e)return[i];if(!My(e))return Ly(t,i,e,r);for(var o,a,s,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,h=new RegExp(e.source,u+"g");(o=Ly(Ky,h,i))&&!((a=h.lastIndex)>c&&(Zy(l,Qy(i,c,o.index)),o.length>1&&o.index<i.length&&Iy($y,l,Vy(o,1)),s=o[0].length,c=a,l.length>=r));)h.lastIndex===o.index&&h.lastIndex++;return c===i.length?!s&&Jy(h,"")||Zy(l,""):Zy(l,Qy(i,c)),l.length>r?Vy(l,0,r):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:Ly(t,this,e,n)}:t,[
// `String.prototype.split` method
// https://tc39.es/ecma262/#sec-string.prototype.split
function(t,n){var r=Fy(this),o=Ny(t)?void 0:Gy(t,e);return o?Ly(o,t,r,n):Ly(i,By(r),t,n)},
// `RegExp.prototype[@@split]` method
// https://tc39.es/ecma262/#sec-regexp.prototype-@@split
// NOTE: This cannot be properly polyfilled in engines that don't support
// the 'y' flag.
function(e,r){var o=Dy(this),a=By(e),s=n(i,o,a,r,i!==t);if(s.done)return s.value;var l=Uy(o,RegExp),u=o.unicode,c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Yy?"g":"y"),h=new l(Yy?"^(?:"+o.source+")":o,c),f=void 0===r?Xy:r>>>0;if(0===f)return[];if(0===a.length)return null===Wy(h,a)?[a]:[];for(var d=0,p=0,g=[];p<a.length;){h.lastIndex=Yy?0:p;var v,y=Wy(h,Yy?Qy(a,p):a);if(null===y||(v=qy(jy(h.lastIndex+(Yy?p:0)),a.length))===d)p=Hy(a,p,u);else{if(Zy(g,Qy(a,d,p)),g.length===f)return g;for(var m=1;m<=y.length-1;m++)if(Zy(g,y[m]),g.length===f)return g;p=d=v}}return Zy(g,Qy(a,d)),g}]}),!em,Yy);var tm=X,nm=ct,im=Math.floor,rm=tm("".charAt),om=tm("".replace),am=tm("".slice),sm=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,lm=/\$([$&'`]|\d{1,2})/g,um=pu,cm=M,hm=X,fm=Fg,dm=L,pm=an,gm=pe,vm=re,ym=Ai,mm=Mi,km=hs,bm=se,wm=Xg,Cm=Xe,_m=function(e,t,n,i,r,o){var a=n+e.length,s=i.length,l=lm;return void 0!==r&&(r=nm(r),l=sm),om(o,l,(function(o,l){var u;switch(rm(l,0)){case"$":return"$";case"&":return e;case"`":return am(t,0,n);case"'":return am(t,a);case"<":u=r[am(l,1,-1)];break;default:var c=+l;if(0===c)return o;if(c>s){var h=im(c/10);return 0===h?o:h<=s?void 0===i[h-1]?rm(l,1):i[h-1]+rm(l,1):o}u=i[c-1]}return void 0===u?"":u}))},xm=tv,Tm=St("replace"),Em=Math.max,Sm=Math.min,Pm=hm([].concat),Am=hm([].push),Im=hm("".indexOf),Lm=hm("".slice),Rm="$0"==="a".replace(/./,"$0"),Om=!!/./[Tm]&&""===/./[Tm]("a","$0"),Dm=!dm((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));fm("replace",(function(e,t,n){var i=Om?"$":"$0";return[
// `String.prototype.replace` method
// https://tc39.es/ecma262/#sec-string.prototype.replace
function(e,n){var i=bm(this),r=vm(e)?void 0:Cm(e,Tm);return r?cm(r,e,i,n):cm(t,km(i),e,n)},
// `RegExp.prototype[@@replace]` method
// https://tc39.es/ecma262/#sec-regexp.prototype-@@replace
function(e,r){var o=pm(this),a=km(e);if("string"==typeof r&&-1===Im(r,i)&&-1===Im(r,"$<")){var s=n(t,o,a,r);if(s.done)return s.value}var l=gm(r);l||(r=km(r));var u=o.global;if(u){var c=o.unicode;o.lastIndex=0}for(var h=[];;){var f=xm(o,a);if(null===f)break;if(Am(h,f),!u)break;""===km(f[0])&&(o.lastIndex=wm(a,mm(o.lastIndex),c))}for(var d,p="",g=0,v=0;v<h.length;v++){for(var y=km((f=h[v])[0]),m=Em(Sm(ym(f.index),a.length),0),k=[],b=1;b<f.length;b++)Am(k,void 0===(d=f[b])?d:String(d));var w=f.groups;if(l){var C=Pm([y],k,m,a);void 0!==w&&Am(C,w);var _=km(um(r,void 0,C))}else _=_m(y,a,m,k,w,r);m>=g&&(p+=Lm(a,g,m)+_,g=m+y.length)}return p+Lm(a,g)}]}),!Dm||!Rm||Om);var Nm=Pn.PROPER,Mm=L,Fm=cd,Um=md.trim;Er({target:"String",proto:!0,forced:function(e){return Mm((function(){return!!Fm[e]()||"âÂá "!=="âÂá "[e]()||Nm&&Fm[e].name!==e}))}("trim")},{trim:function(){return Um(this)}});var Hm=Ay,jm=Math.floor,Bm=function(e,t){var n=e.length,i=jm(n/2);return n<8?Gm(e,t):Vm(e,Bm(Hm(e,0,i),t),Bm(Hm(e,i),t),t)},Gm=function(e,t){for(var n,i,r=e.length,o=1;o<r;){for(i=o,n=e[o];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==o++&&(e[i]=n)}return e},Vm=function(e,t,n,i){for(var r=t.length,o=n.length,a=0,s=0;a<r||s<o;)e[a+s]=a<r&&s<o?i(t[a],n[s])<=0?t[a++]:n[s++]:a<r?t[a++]:n[s++];return e},Wm=Bm,Km=_e.match(/firefox\/(\d+)/i),zm=!!Km&&+Km[1],Ym=/MSIE|Trident/.test(_e),Xm=_e.match(/AppleWebKit\/(\d+)\./),qm=!!Xm&&+Xm[1],$m=Er,Jm=X,Zm=Ke,Qm=ct,ek=Ui,tk=dl,nk=hs,ik=L,rk=Wm,ok=Na,ak=zm,sk=Ym,lk=Ie,uk=qm,ck=[],hk=Jm(ck.sort),fk=Jm(ck.push),dk=ik((function(){ck.sort(void 0)})),pk=ik((function(){ck.sort(null)})),gk=ok("sort"),vk=!ik((function(){if(lk)return lk<70;if(!(ak&&ak>3)){if(sk)return!0;if(uk)return uk<603;var e,t,n,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)ck.push({k:t+i,v:n})}for(ck.sort((function(e,t){return t.v-e.v})),i=0;i<ck.length;i++)t=ck[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));$m({target:"Array",proto:!0,forced:dk||!pk||!gk||!vk},{sort:function(e){void 0!==e&&Zm(e);var t=Qm(this);if(vk)return void 0===e?hk(t):hk(t,e);var n,i,r=[],o=ek(t);for(i=0;i<o;i++)i in t&&fk(r,t[i]);for(rk(r,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:nk(t)>nk(n)?1:-1}}(e)),n=ek(r),i=0;i<n;)t[i]=r[i++];for(;i<o;)tk(t,i++);return t}});var yk="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,mk={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},kk="%c[xgplayer]",bk={config:{debug:yk?3:0},logInfo:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.config.debug>=3&&(t=console).log.apply(t,[kk,mk.info,e].concat(i))},logWarn:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.config.debug>=1&&(t=console).warn.apply(t,[kk,mk.warn,e].concat(i))},logError:function(e){var t;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];(t=console)[n].apply(t,[kk,mk.error,e].concat(r))}}};var wk=function(){function e(t){p(this,e),this.bufferedList=t}return v(e,[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),e}(),Ck={};function _k(e){var t=d(e);return null!==e&&("object"===t||"function"===t)}function xk(e,t,n){var i,r,o,a,s,l,u=0,c=!1,h=!1,f=!0,d=!t&&0!==t&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=i,o=r;return i=r=void 0,u=t,a=e.apply(o,n)}function g(e,t){return d?(window.cancelAnimationFrame(s),window.requestAnimationFrame(e)):setTimeout(e,t)}function v(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-u>=o}function y(){var e=Date.now();if(v(e))return m(e);s=g(y,function(e){var n=e-u,i=t-(e-l);return h?Math.min(i,o-n):i}(e))}function m(e){return s=void 0,f&&i?p(e):(i=r=void 0,a)}function k(){for(var e=Date.now(),n=v(e),o=arguments.length,f=new Array(o),d=0;d<o;d++)f[d]=arguments[d];if(i=f,r=this,l=e,n){if(void 0===s)return function(e){return u=e,s=g(y,t),c?p(e):a}(l);if(h)return s=g(y,t),p(l)}return void 0===s&&(s=g(y,t)),a}return t=+t||0,_k(n)&&(c=!!n.leading,o=(h="maxWait"in n)?Math.max(+n.maxWait||0,t):o,f="trailing"in n?!!n.trailing:f),k.cancel=function(){void 0!==s&&function(e){if(d)return window.cancelAnimationFrame(e);clearTimeout(e)}(s),u=0,i=l=r=s=void 0},k.flush=function(){return void 0===s?a:m(Date.now())},k.pending=function(){return void 0!==s},k}Ck.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(e);return r.className=i,r.innerHTML=t,Object.keys(n).forEach((function(t){var i=t,o=n[t];"video"===e||"audio"===e||"live-video"===e?o&&r.setAttribute(i,o):r.setAttribute(i,o)})),r},Ck.createDomFromHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var i=document.createElement("div");i.innerHTML=e;var r=i.children;return i=null,r.length>0?(r=r[0],n&&Ck.addClass(r,n),t&&Object.keys(t).forEach((function(e){r.setAttribute(e,t[e])})),r):null}catch(o){return bk.logError("util.createDomFromHtml",o),null}},Ck.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(i){var n=e.className&&"object"===d(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},Ck.addClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)}))}catch(n){Ck.hasClass(e,t)||(e.className&&"object"===d(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}},Ck.removeClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.remove(t)}))}catch(n){Ck.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===d(e.className)?e.setAttribute("class",e.getAttribute("class").replace(n," ")):e.className=e.className.replace(n," ")}))}},Ck.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach((function(t){Ck.hasClass(e,t)?Ck.removeClass(e,t):Ck.addClass(e,t)}))},Ck.classNames=function(){for(var e=arguments,t=[],n=function(n){"String"===Ck.typeOf(e[n])?t.push(e[n]):"Object"===Ck.typeOf(e[n])&&Object.keys(e[n]).map((function(i){e[n][i]&&t.push(i)}))},i=0;i<arguments.length;i++)n(i);return t.join(" ")},Ck.findDom=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{e=t.querySelector(n)}catch(i){bk.logError("util.findDom",i),0===n.indexOf("#")&&(e=t.getElementById(n.slice(1)))}return e},Ck.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},Ck.padStart=function(e,t,n){for(var i=String(n),r=t>>0,o=Math.ceil(r/i.length),a=[],s=String(e);o--;)a.push(i);return a.join("").substring(0,r-s.length)+s},Ck.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=Ck.padStart(Math.floor(e/3600),2,0),n=Ck.padStart(Math.floor((e-3600*t)/60),2,0),i=Ck.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,i]:[t,n,i]).join(":")},Ck.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},Ck.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},Ck.deepCopy=function(e,t){if("Object"===Ck.typeOf(t)&&"Object"===Ck.typeOf(e))return Object.keys(t).forEach((function(n){"Object"!==Ck.typeOf(t[n])||t[n]instanceof Node?"Array"===Ck.typeOf(t[n])?e[n]="Array"===Ck.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]||void 0===e[n]?e[n]=t[n]:Ck.deepCopy(e[n],t[n])})),e},Ck.deepMerge=function(e,t){return Object.keys(t).map((function(n){var i;"Array"===Ck.typeOf(t[n])&&"Array"===Ck.typeOf(e[n])?"Array"===Ck.typeOf(e[n])&&(i=e[n]).push.apply(i,T(t[n])):Ck.typeOf(e[n])!==Ck.typeOf(t[n])||null===e[n]||"Object"!==Ck.typeOf(e[n])||t[n]instanceof window.Node?null!==t[n]&&(e[n]=t[n]):Ck.deepMerge(e[n],t[n])})),e},Ck.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},Ck.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},Ck.setInterval=function(e,t,n,i){e._interval[t]||(e._interval[t]=window.setInterval(n.bind(e),i))},Ck.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},Ck.setTimeout=function(e,t,n){e._timers||(e._timers=[]);var i=setTimeout((function(){t(),Ck.clearTimeout(e,i)}),n);return e._timers.push(i),i},Ck.clearTimeout=function(e,t){var n=e._timers;if("Array"===Ck.typeOf(n)){for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1),clearTimeout(t);break}}else clearTimeout(t)},Ck.clearAllTimers=function(e){var t=e._timers;"Array"===Ck.typeOf(t)&&(t.map((function(e){clearTimeout(e)})),e._timerIds=[])},Ck.createImgBtn=function(e,t,n,i){var r,o,a,s=Ck.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));(s.style.backgroundImage='url("'.concat(t,'")'),n&&i)&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(n.indexOf(e)>-1&&i.indexOf(e)>-1)||(r=parseFloat(n.slice(0,n.indexOf(e)).trim()),o=parseFloat(i.slice(0,i.indexOf(e)).trim()),a=e,!1)})),s.style.width="".concat(r).concat(a),s.style.height="".concat(o).concat(a),s.style.backgroundSize="".concat(r).concat(a," ").concat(o).concat(a),s.style.margin="start"===e?"-".concat(o/2).concat(a," auto auto -").concat(r/2).concat(a):"auto 5px auto 5px");return s},Ck.Hex2RGBA=function(e,t){var n=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var i="#";e.replace(/[0-9A-F]/gi,(function(e){i+=e+e})),e=i}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,(function(e){n.push(parseInt(e,16))})),"rgba(".concat(n.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},Ck.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},Ck.checkIsFunction=function(e){return e&&"function"==typeof e},Ck.checkIsObject=function(e){return null!==e&&"object"===d(e)},Ck.hide=function(e){e.style.display="none"},Ck.show=function(e,t){e.style.display=t||"block"},Ck.isUndefined=function(e){if(null==e)return!0},Ck.setStyleFromCsstext=function(e,t){t&&("String"===Ck.typeOf(t)?t.replace(/\s+/g,"").split(";").map((function(t){if(t){var n=t.split(":");n.length>1&&(e.style[n[0]]=n[1])}})):Object.keys(t).map((function(n){e.style[n]=t[n]})))},Ck.filterStyleFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=e.style.cssText;if(!n)return{};var i=n.replace(/\s+/g,"").split(";"),r={},o={};return i.map((function(e){if(e){var n=e.split(":");n.length>1&&(!function(e,t){for(var n=0,i=t.length;n<i;n++)if(e.indexOf(t[n])>-1)return!0;return!1}(n[0],t)?o[n[0]]=n[1]:r[n[0]]=n[1])}})),e.setAttribute("style",""),Object.keys(o).map((function(t){e.style[t]=o[t]})),r},Ck.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var n=t.replace(/\s+/g,"").split(";"),i={};return n.map((function(e){if(e){var t=e.split(":");t.length>1&&(i[t[0]]=t[1])}})),i},Ck.preloadImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){var i=new window.Image;i.onload=function(e){i=null,t&&t(e)},i.onerror=function(e){i=null,n&&n(e)},i.src=e}},Ck.stopPropagation=function(e){e&&(e.stopPropagation(),e.cancelable&&e.preventDefault())},Ck.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},Ck.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},Ck.checkTouchSupport=function(){return"ontouchstart"in window},Ck.getBuffered2=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],i=0;i<e.length;i++)n.push({start:e.start(i)<.5?0:e.start(i),end:e.end(i)});n.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end}));var r=[];if(t)for(var o=0;o<n.length;o++){var a=r.length;if(a){var s=r[a-1].end;n[o].start-s<t?n[o].end>s&&(r[a-1].end=n[o].end):r.push(n[o])}else r.push(n[o])}else r=n;return new wk(r)},Ck.getEventPos=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},Ck.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},Ck.getHostFromUrl=function(e){if("String"!==Ck.typeOf(e))return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n},Ck.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)},Ck.isMSE=function(e){return!!(e&&e instanceof HTMLMediaElement)&&(/^blob/.test(e.currentSrc)||/^blob/.test(e.src))},Ck.generateSessionId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new Date).getTime();try{e=parseInt(e)}catch(n){e=0}return t+=e,window.performance&&"function"==typeof window.performance.now&&(t+=parseInt(window.performance.now())),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))},Ck.createEvent=function(e){var t;return"function"==typeof window.Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t};var Tk=/(Android)\s([\d.]+)/,Ek=/(Version)\/([\d.]+)/,Sk=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],Pk={get device(){return Pk.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(n){return t[n].test(e)})))[0]},get os(){if("undefined"==typeof navigator)return{};var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),a=/(?:iPhone)/.test(e)&&!o,s=!(a||i||n||o),l=/(?:iPad|PlayBook)/.test(e);return{isTablet:o,isPhone:a,isIpad:l,isIos:a||l,isAndroid:i,isPc:s,isSymbian:n,isWindowsPhone:t,isFireFox:r}},get osVersion(){if("undefined"==typeof navigator)return 0;var e=navigator.userAgent,t="",n=(t=/(?:iPhone)|(?:iPad|PlayBook)/.test(e)?Ek:Tk)?t.exec(e):[];if(n&&n.length>=3){var i=n[2].split(".");return i.length>0?parseInt(i[0]):0}return 0},get isWeixin(){if("undefined"==typeof navigator)return!1;return!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())},isSupportMP4:function(){var e={isSupport:!1,mime:""};if("undefined"==typeof document)return e;if(this.supportResult)return this.supportResult;var t=document.createElement("video");return"function"==typeof t.canPlayType&&Sk.map((function(n){"probably"===t.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(e.isSupport=!0,e.mime+="||".concat(n))})),this.supportResult=e,t=null,e},isHevcSupported:function(){return!("undefined"==typeof MediaSource||!MediaSource.isTypeSupported)&&(MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))},probeConfigSupported:function(e){var t={supported:!1,smooth:!1,powerEfficient:!1};if(!e||"undefined"==typeof navigator)return Promise.resolve(t);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(e);var n=e.video||{},i=e.audio||{};try{var r=MediaSource.isTypeSupported(n.contentType),o=MediaSource.isTypeSupported(i.contentType);return Promise.resolve({supported:r&&o,smooth:!1,powerEfficient:!1})}catch(a){return Promise.resolve(t)}}},Ak="3.0.0-next.50",Ik={1:"network",2:"network",3:"decoder",4:"format"},Lk=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};p(this,e);var i=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.media){var r=n.mediaError?n.mediaError:t.media.error||{},o=t.duration,a=t.currentTime,s=t.ended,l=t.src,u=t.currentSrc,c=t.media,h=c.readyState,f=c.networkState,d={playerVersion:Ak,currentTime:a,duration:o,ended:s,readyState:h,networkState:f,src:l||u,errorType:n.errorType,errorCode:n.errorCode||r.code,message:n.errorMessage||r.message,mediaError:r,originError:n.originError?n.originError.stack:"",host:Ck.getHostFromUrl(l||u)};return n.ext&&Object.keys(n.ext).map((function(e){d[e]=n.ext[e]})),d}if(arguments.length>1){for(var g={playerVersion:Ak,domain:document.domain},v=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],y=0;y<arguments.length;y++)g[v[y]]=arguments[y];return g.ex=i?(i[arguments[0]]||{}).msg:"",g}})),Rk="play",Ok="playing",Dk="ended",Nk="pause",Mk="error",Fk="seeking",Uk="seeked",Hk="timeupdate",jk="waiting",Bk="canplay",Gk="durationchange",Vk="volumechange",Wk="loadeddata",Kk="ratechange",zk="progress",Yk="loadstart",Xk="emptied",qk="focus",$k="blur",Jk="ready",Zk="urlNull",Qk="autoplay_started",eb="autoplay_was_prevented",tb="complete",nb="replay",ib="destroy",rb="urlchange",ob="download_speed_change",ab="fullscreen_change",sb="cssFullscreen_change",lb="mini_state_change",ub="definition_change",cb="after_definition_change",hb="video_resize",fb="pip_change",db="rotate",pb="screenShot",gb="playnext",vb="shortcut",yb="xglog",mb="user_action",kb="reset",bb=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],wb={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"};const Cb=Object.freeze(Object.defineProperty({__proto__:null,ABORT:"abort",AFTER_DEFINITION_CHANGE:cb,AUTOPLAY_PREVENTED:eb,AUTOPLAY_STARTED:Qk,BEFORE_DEFINITION_CHANGE:"before_definition_change",BUFFER_CHANGE:"bufferedChange",CANPLAY:Bk,CANPLAY_THROUGH:"canplaythrough",COMPLETE:tb,CSS_FULLSCREEN_CHANGE:sb,DEFINITION_CHANGE:ub,DESTROY:ib,DOWNLOAD_SPEED_CHANGE:ob,DURATION_CHANGE:Gk,EMPTIED:Xk,ENDED:Dk,ERROR:Mk,FULLSCREEN_CHANGE:ab,LOADED_DATA:Wk,LOAD_START:Yk,MINI_STATE_CHANGE:lb,PAUSE:Nk,PIP_CHANGE:fb,PLAY:Rk,PLAYER_BLUR:$k,PLAYER_FOCUS:qk,PLAYING:Ok,PLAYNEXT:gb,PROGRESS:zk,RATE_CHANGE:Kk,READY:Jk,REPLAY:nb,RESET:kb,RETRY:"retry",ROTATE:db,SCREEN_SHOT:pb,SEEKED:Uk,SEEKING:Fk,SEI_PARSED:"SEI_PARSED",SHORTCUT:vb,STALLED:"stalled",STATS_EVENTS:wb,SUSPEND:"suspend",TIME_UPDATE:Hk,URL_CHANGE:rb,URL_NULL:Zk,USER_ACTION:mb,VIDEO_EVENTS:bb,VIDEO_RESIZE:hb,VOLUME_CHANGE:Vk,WAITING:jk,XGLOG:yb},Symbol.toStringTag,{value:"Module"}));function _b(e,t){this&&this.emit&&("error"===e?this.errorHandler(e,t.error):this.emit(e,t))}var xb=function(e){m(n,Pg);var t=_(n);function n(e){var i;p(this,n),(i=t.call(this,e))._hasStart=!1,i._currentTime=0,i._duration=0,i._internalOp={},i._lastMuted=!1,i.vtype="MP4",i._rate=-1,i.mediaConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:0|e.tabindex,mediaType:e.mediaType||"video"},e.videoConfig,e.videoAttributes);var r=e["x5-video-player-type"]||e.x5VideoPlayerType;return Pk.isWeixin&&Pk.os.isAndroid&&r&&(i.mediaConfig["x5-video-player-type"]=r,delete i.mediaConfig.playsinline,delete i.mediaConfig["webkit-playsinline"],delete i.mediaConfig["x5-playsinline"]),e.loop&&(i.mediaConfig.loop="loop"),i.media=Ck.createDom(i.mediaConfig.mediaType,"",i.mediaConfig,""),e.defaultPlaybackRate&&(i.media.defaultPlaybackRate=i.media.playbackRate=e.defaultPlaybackRate),"Number"===Ck.typeOf(e.volume)&&(i.volume=e.volume),e.autoplayMuted&&(i.media.muted=!0,i._lastMuted=!0),e.autoplay&&(i.media.autoplay=!0),i._interval={},i.mediaEventMiddleware={},i.attachVideoEvents(),i}return v(n,[{key:"setEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(n){t.mediaEventMiddleware[n]=e[n]}))}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(e){delete t.mediaEventMiddleware[e]}))}},{key:"attachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers||(this._evHandlers=bb.map((function(t){var n="on".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));return"function"==typeof e[n]&&e.on(t,e[n]),y({},t,function(e,t){return function(n,i){var r={player:t,eventName:e,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:t.currentTime,duration:t.duration,paused:t.paused,ended:t.ended,isInternalOp:!!t._internalOp[n.type],muted:t.muted,volume:t.volume,host:Ck.getHostFromUrl(t.currentSrc),vtype:t.vtype};if(t.removeInnerOP(n.type),"timeupdate"===e&&(t._currentTime=t.media&&t.media.currentTime),"ratechange"===e){var o=t.media?t.media.playbackRate:0;if(o&&t._rate===o)return;t._rate=t.media&&t.media.playbackRate}if("durationchange"===e&&(t._duration=t.media.duration),"volumechange"===e&&(r.isMutedChange=t._lastMuted!==t.muted,t._lastMuted=t.muted),"error"===e&&(r.error=i||t.video.error),t.mediaEventMiddleware[e]){var a=_b.bind(t,e,r);try{t.mediaEventMiddleware[e].call(t,r,a)}catch(s){throw _b.call(t,e,r),s}}else _b.call(t,e,r)}}(t,e))}))),this._evHandlers.forEach((function(e){var n=Object.keys(e)[0];t.addEventListener(n,e[n],!1)}))}},{key:"detachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers.forEach((function(e){var n=Object.keys(e)[0];t.removeEventListener(n,e[n],!1)})),this._evHandlers.forEach((function(t){var n=Object.keys(t)[0],i="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof e[i]&&e.off(n,e[i])})),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,t){var n=this;e.removeAttribute("src"),t.forEach((function(e){n.media.appendChild(Ck.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||"")}))}));var i=e.children;if(i){this._videoSourceCount=i.length;for(var r=null,o=0;o<this._evHandlers.length;o++)if("error"===Object.keys(this._evHandlers[o])[0]){r=this._evHandlers[o];break}!this._sourceError&&(this._sourceError=function(e){if(n._videoSourceCount--,0===n._videoSourceCount){var t={code:4,message:"sources load error"};r?r.error(e,t):n.errorHandler("error",t)}});for(var a=0;a<i.length;a++)i[a].addEventListener("error",this._sourceError)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var n=0;n<t.length;n++)t[n].removeEventListener("error",this._sourceError);for(;t.length>0;)e.removeChild(t[0])}}},{key:"errorHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.media&&(this.media.error||t)){var n=this.media.error||t,i=n.code?Ik[n.code]:"other";n.message;this.media.currentSrc||(n={code:6,message:"empty_src"}),this.emit(e,new Lk(this,{errorType:i,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"destroy",value:function(){for(var e in this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null,this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media}},{key:"play",value:function(){return this.media?this.media.play():null}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return!!this.media&&this.media.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.media)return t;e||(e=this.media.buffered);var n=this.media.currentTime;if(e)for(var i=0,r=e.length;i<r&&(t[0]=e.start(i),t[1]=e.end(i),!(t[0]<=n&&n<=t[1]));i++);return t[0]-n<=0&&n-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.media&&this.media.autoplay},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?Ck.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var t=this.media.buffered;if(!t||0===t.length)return e;for(var n=0;n<t.length;n++)if((t.start(n)<=this.currentTime||t.start(n)<.1)&&t.end(n)>=this.currentTime)return{start:t.start(n),end:t.end(n)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?void 0!==this.media.currentTime?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return!!this.media&&this.media.defaultMuted},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.media&&this.media.ended}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){if(!this.media.error)return"";return["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.media.error.code-1]}},{key:"loop",get:function(){return!!this.media&&this.media.loop},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return!!this.media&&this.media.muted},set:function(e){this.media&&this.media.muted!==e&&(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return!this.media||this.media.paused}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){this.media&&e!==1/0&&(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return!!this.media&&this.media.preload},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return!!this.media&&this.media.seekable}},{key:"seeking",get:function(){return!!this.media&&this.media.seeking}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){this.media&&(this.emit(rb,e),this.emit(jk),this._currentTime=0,this._duration=0,/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src)?this.onWaiting():(this._detachSourceEvents(this.media),"Array"===Ck.typeOf(e)?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()))}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e!==1/0&&this.media&&(this.media.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];(i=x(k(n.prototype),"emit",this)).call.apply(i,[this,e,t].concat(o))}},{key:"on",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];(i=x(k(n.prototype),"on",this)).call.apply(i,[this,e,t].concat(o))}},{key:"once",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];(i=x(k(n.prototype),"once",this)).call.apply(i,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];(i=x(k(n.prototype),"off",this)).call.apply(i,[this,e,t].concat(o))}},{key:"offAll",value:function(){x(k(n.prototype),"removeAllListeners",this).call(this)}}]),n}(),Tb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};p(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return v(e,[{key:"openDB",value:function(e){var t=this,n=this,i=this.myDB.version||1,r=n.indexedDB.open(n.myDB.name,i);r.onerror=function(e){},r.onsuccess=function(i){t.myDB.db=i.target.result,e.call(n)},r.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=0;r<t.length;r++)(n=i.add(t[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=0;r<t.length;r++)(n=i.put(t[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,n){var i=this,r=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);r.onerror=function(){n.call(i,null)},r.onsuccess=function(e){var t=e.target.result;n.call(i,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),e}(),Eb=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Sb=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Pb=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],Ab="data-xgplayerid";function Ib(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];var a=t.call.apply(t,[e].concat(r));n&&"function"==typeof n&&(a&&a.then?a.then((function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];n.call.apply(n,[e].concat(i))})):n.call.apply(n,[e].concat(r)))}function Lb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[e]&&(this.__hooks[e]=null),function(){var i=arguments,r=this;if(n.pre)try{var o;(o=n.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(l){throw l.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(l.message),l}if(this.__hooks&&this.__hooks[e])try{var a,s=(a=this.__hooks[e]).call.apply(a,[this,this].concat(Array.prototype.slice.call(arguments)));s?s.then?s.then((function(e){!1!==e&&Ib.apply(void 0,[r,t,n.next].concat(T(i)))})).catch((function(e){throw e})):Ib.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments))):void 0===s&&Ib.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}catch(l){throw l.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(l.message),l}else Ib.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function Rb(e,t){var n=this.__hooks;if(n)return n.hasOwnProperty(e)?(n&&(n[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function Ob(e,t){var n=this.__hooks;n&&delete n[e]}function Db(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var t=this.plugins[e.toLowerCase()],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.useHooks&&t.useHooks.apply(t,i)}}function Nb(e){if(this.plugins&&this.plugins[e.toLowerCase()]){var t=this.plugins[e.toLowerCase()];if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.removeHooks&&t.removeHooks.apply(t,i)}}}function Mb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.__hooks={},t&&t.map((function(t){e.__hooks[t]=null})),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map((function(t){if(e.__hooks[t])return t}))}})}function Fb(e){e.__hooks=null}function Ub(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];if(!e.__hooks||!e.__hooks[t])return n.call.apply(n,[e,e].concat(r));var a,s=(a=e.__hooks[t]).call.apply(a,[e,e].concat(r));if(s&&s.then)s.then((function(t){return!1===t?null:n.call.apply(n,[e,e].concat(r))})).catch((function(e){console.warn("[runHooks]".concat(t," reject"),e.message)}));else if(!1!==s)return n.call.apply(n,[e,e].concat(r))}function Hb(e,t){bk.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var jb=function(){function e(t){p(this,e),Ck.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),Mb(this),this.__args=t,this.__events={},this.__onceEvents={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}return v(e,[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){e||(e=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=Ck.checkTouchSupport()?"touch":"mouse";return!this.playerConfig||"touch"!==this.playerConfig.domEventType&&"mouse"!==this.playerConfig.domEventType||(e=this.playerConfig.domEventType),e}},{key:"on",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach((function(e){n.__events[e]=t,n.player.on(e,t)})):Hb(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(this.__onceEvents[e]=t,this.player.once(e,t)):Array.isArray(e)&&e.forEach((function(i){n.__onceEvents[i]=t,n.player.once(e,t)})):Hb(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach((function(i){delete n.__events[e],n.player.off(i,t)})):Hb(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var e=this;["__events","__onceEvents"].forEach((function(t){Object.keys(e[t]).forEach((function(n){e[t][n]&&e.off(n,e[t][n]),n&&delete e[t][n]}))})),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(e){var t;if(this.player){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.player).emit.apply(t,[e].concat(i))}}},{key:"emitUserAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.player){var i=f(f({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(e,t,i)}}},{key:"hook",value:function(e,t){return Lb.call.apply(Lb,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return Rb.call.apply(Rb,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return Ob.call.apply(Ob,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(t.pluginName=n),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,n=this.pluginName;this.offAll(),Ck.clearAllTimers(this),Ck.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(t){e[t]=null})),t.unRegisterPlugin(n),Fb(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&Object.defineProperty(e,n,t[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),e}(),Bb=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var Gb=Element.prototype;Gb.matches=Gb.matchesSelector||Gb.mozMatchesSelector||Gb.msMatchesSelector||Gb.oMatchesSelector||Gb.webkitMatchesSelector}var Vb=function(e,t){for(;e&&e.nodeType!==Bb;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}};function Wb(e,t,n,i,r){var o=Kb.apply(this,arguments);return e.addEventListener(n,o,r),{destroy:function(){e.removeEventListener(n,o,r)}}}function Kb(e,t,n,i){return function(n){n.delegateTarget=Vb(n.target,t),n.delegateTarget&&i.call(e,n)}}var zb=function(e,t,n,i,r){return"function"==typeof e.addEventListener?Wb.apply(null,arguments):"function"==typeof n?Wb.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return Wb(e,t,n,i,r)})))},Yb={CONTROLS:"controls",ROOT:"root"},Xb={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function qb(e){return!!e&&(e.indexOf&&/^(?:http|data:|\/)/.test(e))}function $b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=null;if(e instanceof window.Element)return Ck.addClass(e,n),Object.keys(i).map((function(t){e.setAttribute(t,i[t])})),e;if(qb(e)||qb(e.url))return i.src=qb(e)?e:e.url||"",o=Ck.createDom(e.tag||"img","",i,"xg-img ".concat(n));if("function"==typeof e)try{return(o=e())instanceof window.Element?(Ck.addClass(o,n),Object.keys(i).map((function(e){o.setAttribute(e,i[e])})),o):(bk.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(r,"] is a function mast return an Element Object")),null)}catch(a){return bk.logError("Plugin named [".concat(r,"]:createIcon"),a),null}return"string"==typeof e?Ck.createDomFromHtml(e,i,n):(bk.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(r,"] is invalid")),null)}function Jb(e,t){var n=t.config.icons||t.playerConfig.icons;Object.keys(e).map((function(i){var r=e[i],o=r&&r.class?r.class:"",a=r&&r.attr?r.attr:{},s=null;n&&n[i]&&(o=function(e,t){return"object"===d(e)&&e.class&&"string"==typeof e.class?"".concat(t," ").concat(e.class):t}(n[i],o),a=function(e,t){return"object"===d(e)&&e.attr&&"object"===d(e.attr)&&Object.keys(e.attr).map((function(n){t[n]=e.attr[n]})),t}(n[i],a),s=$b(n[i],i,o,a,t.pluginName)),!s&&r&&(s=$b(r.icon?r.icon:r,a,o,{},t.pluginName)),t.icons[i]=s}))}var Zb=function(e){m(n,jb);var t=_(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p(this,n),(e=t.call(this,i)).__delegates=[],e}return v(n,[{key:"__init",value:function(e){if(x(k(n.prototype),"__init",this).call(this,e),e.root){var t=e.root,i=null;this.icons={},this.root=null,this.parent=null,Jb(this.registerIcons()||{},this),this.langText={};var r,o,a=this.registerLanguageTexts()||{};r=a,o=this,Object.keys(r).map((function(e){Object.defineProperty(o.langText,e,{get:function(){var t=o.lang,n=o.i18n;return n[e]?n[e]:r[e]&&r[e][t]||""}})}));var s="";try{s=this.render()}catch(c){throw bk.logError("Plugin:".concat(this.pluginName,":render"),c),new Error("Plugin:".concat(this.pluginName,":render:").concat(c.message))}if(s)(i=n.insert(s,t,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(i=Ck.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),t.appendChild(i)}this.root=i,this.parent=t;var l=this.config.attr||{},u=this.config.style||{};this.setAttr(l),this.setStyle(u),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var t=this.children();t&&"object"===d(t)&&Object.keys(t).length>0&&Object.keys(t).map((function(n){var i,r,o=n,a=t[o],s={root:e.root};"function"==typeof a?(i=e.config[o]||{},r=a):"object"===d(a)&&"function"==typeof a.plugin&&(i=a.options?Ck.deepCopy(e.config[o]||{},a.options):e.config[o]||{},r=a.plugin),s.config=i,void 0!==i.index&&(s.index=i.index),i.root&&(s.root=i.root),e.registerPlugin(r,s,o)}))}}},{key:"updateLang",value:function(e){e||(e=this.lang);var t=this.root,n=this.i18n,i=this.langText;t&&function e(t,n){for(var i=0;i<t.children.length;i++)t.children[i].children.length>0?e(t.children[i],n):n(t.children[i])}(t,(function(t){var r=t.getAttribute&&t.getAttribute("lang-key");if(r){var o=n[r.toUpperCase()]||i[r];o&&(t.innerHTML="function"==typeof o?o(e):o)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},i=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);var r=n[t]||i[t]||"";r&&(e.innerHTML=r)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root;var r=x(k(n.prototype),"registerPlugin",this).call(this,e,t,i);return this._children.push(r),r}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,i){var r=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){r.bindEL(e,t)})):this.bindEL(e,t);else{var o=n.delegate.call(this,this.root,e,t,i);this.__delegates=this.__delegates.concat(o)}}},{key:"unbind",value:function(e,t){var n=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){n.unbindEL(e,t)})):this.unbindEL(e,t);else for(var i="".concat(e,"_").concat(t),r=0;r<this.__delegates.length;r++)if(this.__delegates[r].key===i){this.__delegates[r].destroy(),this.__delegates.splice(r,1);break}}},{key:"setStyle",value:function(e,t){var n=this;if(this.root)return"String"===Ck.typeOf(e)?this.root.style[e]=t:void("Object"===Ck.typeOf(e)&&Object.keys(e).map((function(t){n.root.style[t]=e[t]})))}},{key:"setAttr",value:function(e,t){var n=this;if(this.root)return"String"===Ck.typeOf(e)?this.root.setAttribute(e,t):void("Object"===Ck.typeOf(e)&&Object.keys(e).map((function(t){n.root.setAttribute(t,e[t])})))}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(t&&t instanceof window.Element))return null;try{return"string"==typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(n){return bk.logError("Plugin:appendChild",n),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,t=this.player;this.__delegates.map((function(e){e.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(e){t.unRegisterPlugin(e.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),x(k(n.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(t){e[t]=null}))}}],[{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.children.length,r=Number(n),o=e instanceof window.Node;if(i){for(var a=0,s=null,l="";a<i;a++){s=t.children[a];var u=Number(s.getAttribute("data-index"));if(u>=r){l="beforebegin";break}u<r&&(l="afterend")}return o?"afterend"===l?t.appendChild(e):t.insertBefore(e,s):s.insertAdjacentHTML(l,e),"afterend"===l?t.children[t.children.length-1]:t.children[a]}return o?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[];if(e instanceof window.Node&&"function"==typeof i)if(Array.isArray(n))n.forEach((function(n){var a=zb(e,t,n,i,r);a.key="".concat(t,"_").concat(n),o.push(a)}));else{var a=zb(e,t,n,i,r);a.key="".concat(t,"_").concat(n),o.push(a)}return o}},{key:"ROOT_TYPES",get:function(){return Yb}},{key:"POSITIONS",get:function(){return Xb}}]),n}(),Qb=zg.charAt,ew=hs,tw=ni,nw=jp,iw=Bp,rw="String Iterator",ow=tw.set,aw=tw.getterFor(rw);nw(String,"String",(function(e){ow(this,{type:rw,string:ew(e),index:0})}),(function(){var e,t=aw(this),n=t.string,i=t.index;return i>=n.length?iw(void 0,!0):(e=Qb(n,i),t.index+=e.length,iw(e,!1))}));var sw=function(){function e(){var t=this;if(p(this,e),y(this,"__trigger",(function(e){var n=(new Date).getTime();t.timeStamp=n;for(var i=0;i<e.length;i++)t.__runHandler(e[i].target)})),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver(function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return _k(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),xk(e,t,{leading:i,trailing:r,maxWait:t})}(this.__trigger,100,{trailing:!0})),this.timeStamp=(new Date).getTime()}catch(n){console.error(n)}}return v(e,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var n=e.getAttribute(Ab),i=this.__handlers,r=-1,o=0;o<i.length;o++)i[o]&&e===i[o].target&&(r=o);r>-1?this.__handlers[r].handler=t:this.__handlers.push({target:e,handler:t,playerId:n})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(n,i){e===n.target&&(t=i)}));try{this.observer&&this.observer.unobserve(e)}catch(n){}this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,n=0;n<t.length;n++)if(t[n]&&e===t[n].target){try{t[n].handler(e)}catch(sP){console.error(sP)}return!0}return!1}}]),e}(),lw=null;var uw={pluginGroup:{},init:function(e){var t,n,i=e._pluginInfoId;i||(i=(new Date).getTime(),e._pluginInfoId=i),!e.config.closeResizeObserver&&(t=e.root,n=function(){e.resize()},lw||(lw=new sw),lw.addObserver(t,n)),0===Object.keys(this.pluginGroup).length&&(e.isUserActive=!0),this.pluginGroup[i]={_player:e,_originalOptions:e.config||{},_plugins:{}}},checkPlayerRoot:function(e){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),n=0;n<t.length;n++){var i=this.pluginGroup[t[n]]._player;if(i.root===e)return i}return null}return null},formatPluginInfo:function(e,t){var n=null,i=null;return e.plugin&&"function"==typeof e.plugin?(n=e.plugin,i=e.options):(n=e,i={}),t&&(i.config=t||{}),{PLUFGIN:n,options:i}},checkPluginIfExits:function(e,t){for(var n=0;n<t.length;n++)if(e.toLowerCase()===t[n].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(e,t){for(var n=Object.keys(t),i=null,r=0;r<n.length;r++)if(e.toLowerCase()===n[r].toLowerCase()){i=t[n[r]];break}return"Object"===Ck.typeOf(i)?{root:i.root,position:i.position}:{}},lazyRegister:function(e,t){var n=this,i=t.timeout||1500;return Promise.race([t.loader().then((function(t){var i;i=t&&t.__esModule?t.default:t,n.register(e,i,t.options)})),new Promise((function(e,t){setTimeout((function(){t(new Error("timeout"))}),i)}))])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var i=e._pluginInfoId;if(i&&this.pluginGroup[i]){this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins={});var r=this.pluginGroup[i]._plugins,o=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var a=n.pluginName||t.pluginName;if(!a)throw new Error("The property pluginName is necessary");if(!t.isSupported||t.isSupported(e.config.mediaType,e.config.codecType)){n.config||(n.config={});for(var s=Object.keys(o),l=0;l<s.length;l++)if(a.toLowerCase()===s[l].toLowerCase()){var u=o[s[l]];"Object"===Ck.typeOf(u)?n.config=Object.assign({},n.config,o[s[l]]):"Boolean"===Ck.typeOf(u)&&(n.config.disable=!u);break}t.defaultConfig&&Object.keys(t.defaultConfig).forEach((function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])})),n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{r[a.toLowerCase()]&&(this.unRegister(i,a.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(a,"] exist, destroy the old instance")));var c=new t(n);return r[a.toLowerCase()]=c,r[a.toLowerCase()].func=t,c&&"function"==typeof c.afterCreate&&c.afterCreate(),c}catch(h){throw console.error(h),h}}else console.warn("not supported plugin [".concat(a,"]"))}}},unRegister:function(e,t){e._pluginInfoId&&(e=e._pluginInfoId),t=t.toLowerCase();try{var n=this.pluginGroup[e]._plugins[t];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[e]._plugins[t])}catch(i){console.error("[unRegister:".concat(t,"] cgid:[").concat(e,"] error"),i)}},deletePlugin:function(e,t){var n=e._pluginInfoId;n&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[t]},getPlugins:function(e){var t=e._pluginInfoId;return t&&this.pluginGroup[t]?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){var n=e._pluginInfoId;if(!n||!this.pluginGroup[n])return null;var i=t.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(e){var t=this;function n(e){return e&&e.then?e:new Promise((function(e){e()}))}return new Promise((function(i){if(t.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then((function(){var r=e._pluginInfoId;if(t.pluginGroup[r]){var o=t.pluginGroup[r]._plugins,a=[];Object.keys(o).forEach((function(e){if(o[e]&&o[e].beforePlayerInit)try{var t=o[e].beforePlayerInit();a.push(n(t))}catch(i){throw a.push(n(null)),i}})),Promise.all([].concat(a)).then((function(){i()})).catch((function(e){console.error(e),i()}))}else i()}))}))},afterInit:function(e){var t=e._pluginInfoId;if(t&&this.pluginGroup[t]){var n=this.pluginGroup[t]._plugins;Object.keys(n).forEach((function(e){n[e]&&n[e].afterPlayerInit&&n[e].afterPlayerInit()}))}},setLang:function(e,t){var n=t._pluginInfoId;if(n&&this.pluginGroup[n]){var i=this.pluginGroup[n]._plugins;Object.keys(i).forEach((function(t){if(i[t].updateLang)i[t].updateLang(e);else try{i[t].lang=e}catch(sP){console.warn("".concat(t," setLang"))}}))}},reRender:function(e){var t=this,n=e._pluginInfoId;if(n&&this.pluginGroup[n]){var i=[],r=this.pluginGroup[n]._plugins;Object.keys(r).forEach((function(e){"controls"!==e&&r[e]&&(i.push({plugin:r[e].func,options:r[e].__args}),t.unRegister(n,e))})),i.forEach((function(n){t.register(e,n.plugin,n.options)}))}},onPluginsReady:function(e){var t=e._pluginInfoId;if(t&&this.pluginGroup[t]){var n=this.pluginGroup[t]._plugins||{};Object.keys(n).forEach((function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()}))}},setCurrentUserActive:function(e,t){if(this.pluginGroup[e]){if(!t)return this.pluginGroup[e]._player.isUserActive=t,e;for(var n=Object.keys(this.pluginGroup),i=0;i<n.length;i++){var r=this.pluginGroup[n[i]];r&&r._player&&(this.pluginGroup[n[i]]._player.isUserActive=!1)}return this.pluginGroup[e]._player.isUserActive=t,e}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var e=Object.keys(this.pluginGroup),t=0;t<e.length;t++){var n=this.pluginGroup[e[t]];if(n&&n._player&&n._player.isUserActive)return e[t]}return null}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){var n,i;n=e.root,lw.unObserver(n,i);for(var r=this.pluginGroup[t]._plugins,o=0,a=Object.keys(r);o<a.length;o++){var s=a[o];this.unRegister(t,s)}var l=e.isUseActive;if(delete this.pluginGroup[t],delete e._pluginInfoId,l){var u=Object.keys(this.pluginGroup);u.length>0&&this.setCurrentUserActive(u[u.length-1],!0)}}}},cw={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function hw(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(e=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),"zh-cn"===e&&(e="zh"),e),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}};var e}var fw=function(e){m(n,Zb);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"onMouseEnter",(function(t){var n=w(e),i=n.player;n.playerConfig.closeControlsBlur&&i.focus({autoHide:!1})})),y(w(e),"onMouseLeave",(function(){w(e).player.focus()})),e}return v(n,[{key:"beforeCreate",value:function(e){e.config.mode||"mobile"!==Pk.device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,t=this.config,n=t.disable,i=t.height,r=t.mode;if(!n){"flex"===r&&this.player.addClass(cw.FLEX_CONTROLS);var o={height:"".concat(i,"px")};Object.keys(o).map((function(t){e.root.style[t]=o[t]})),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(lb,(function(t){t?Ck.addClass(e.root,"mini-controls"):Ck.removeClass(e.root,"mini-controls")}));var a=this.playerConfig.isMobileSimulateMode;"mobile"!==Pk.device&&"mobile"!==a&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&Ck.addClass(this.root,cw.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){Ck.removeClass(this.root,cw.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){Ck.addClass(this.root,"show")}},{key:"hide",value:function(){Ck.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(this.root){var r=e.defaultConfig||{};if(!t.root){switch(t.position?t.position:t.config&&t.config.position?t.config.position:r.position){case Xb.CONTROLS_LEFT:t.root=this.left;break;case Xb.CONTROLS_RIGHT:t.root=this.right;break;case Xb.CONTROLS_CENTER:t.root=this.center;break;case Xb.CONTROLS:t.root=this.root;break;default:t.root=this.left}return x(k(n.prototype),"registerPlugin",this).call(this,e,t,i)}}}},{key:"destroy",value:function(){"mobile"!==Pk.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,n=e.autoHide,i=e.initShow;if(!e.disable){var r=Ck.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},y({},cw.CONTROLS_AUTOHIDE,n),{"xgplayer-controls-initshow":i||!n});return'<xg-controls class="'.concat(r,'" unselectable="on" onselectstart="return false">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),n}(),dw={lang:{},langKeys:[],textKeys:[]};function pw(e,t){return Object.keys(t).forEach((function(n){var i,r=Ck.typeOf(t[n]),o=Ck.typeOf(e[n]);"Array"===r?("Array"!==o&&(e[n]=[]),(i=e[n]).push.apply(i,T(t[n]))):"Object"===r?("Object"!==o&&(e[n]={}),pw(e[n],t[n])):e[n]=t[n]})),e}function gw(){Object.keys(dw.lang.en).map((function(e){dw.textKeys[e]=e}))}function vw(e,t){var n=e.LANG;if(t||(t=dw),t.lang){var i=e.TEXT||{};"zh"===n&&(n="zh-cn"),t.lang[n]?pw(t.lang[n],i):(t.langKeys.push(n),t.lang[n]=i),gw()}}vw({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var yw={get textKeys(){return dw.textKeys},get langKeys(){return dw.langKeys},get lang(){var e={};return dw.langKeys.map((function(t){e[t]=dw.lang[t]})),dw.lang["zh-cn"]&&(e.zh=dw.lang["zh-cn"]||{}),e},extend:function(e,t){var n=[];if(t||(t=dw),t.lang){n="Array"!==Ck.typeOf(e)?Object.keys(e).map((function(t){return{LANG:"zh"===t?"zh-cn":t,TEXT:e[t]}})):e;var i=t.lang;n.map((function(e){"zh"===e.LANG&&(e.LANG="zh-cn"),i[e.LANG]?pw(i[e.LANG]||{},e.TEXT||{}):vw(e,t)})),gw()}},use:vw,init:function(e){var t,n={lang:{},langKeys:[],textKeys:{},pId:e};return pw(n.lang,dw.lang),(t=n.langKeys).push.apply(t,T(dw.langKeys)),pw(n.textKeys,dw.textKeys),n}},mw={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},kw=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],bw=["play","pause","replay","retry"],ww=0,Cw=0,_w=function(e){m(n,xb);var t=_(n);function n(e){var i;p(this,n);var r,o=Ck.deepMerge(hw(),e);y(w(i=t.call(this,o)),"canPlayFunc",(function(){if(i.config){var e=i.config,t=e.autoplay,n=e.startTime,r=e.defaultPlaybackRate;bk.logInfo("player","canPlayFunc, startTime",n),n&&(i.currentTime=n>i.duration?i.duration:n,i.config.startTime=0),i.playbackRate=r,(t||i._useAutoplay)&&i.mediaPlay(),i.off(Bk,i.canPlayFunc),i.removeClass(cw.ENTER)}})),y(w(i),"onFullscreenChange",(function(e,t){var n=function(){Ck.setTimeout(w(i),(function(){i.resize()}),100)},r=Ck.getFullScreenEl();i._fullActionFrom?i._fullActionFrom="":i.emit(mb,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:i.currentTime,duration:i.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var o=function(e,t,n){if(e){var i=e.getAttribute(n);return!(!i||i!==t||"VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)}}(r,i.playerId,Ab);if(t||r&&(r===i._fullscreenEl||o))n(),!i.config.closeFocusVideoFocus&&i.media.focus(),i.fullscreen=!0,i.changeFullStyle(i.root,r,cw.FULLSCREEN),i.emit(ab,!0,i._fullScreenOffset),i.cssfullscreen&&i.exitCssFullscreen();else if(i.fullscreen){n();var a=w(i),s=a._fullScreenOffset;a.config.needFullscreenScroll?(window.scrollTo(s.left,s.top),Ck.setTimeout(w(i),(function(){i.fullscreen=!1,i._fullScreenOffset=null}),100)):(!i.config.closeFocusVideoFocus&&i.media.focus(),i.fullscreen=!1,i._fullScreenOffset=null),i.cssfullscreen?i.removeClass(cw.FULLSCREEN):i.recoverFullStyle(i.root,i._fullscreenEl,cw.FULLSCREEN),i._fullscreenEl=null,i.emit(ab,!1)}})),y(w(i),"_onWebkitbeginfullscreen",(function(e){i._fullscreenEl=i.media,i.onFullscreenChange(e,!0)})),y(w(i),"_onWebkitendfullscreen",(function(e){i.onFullscreenChange(e,!1)})),Mb(w(i),bw),i.config=o,i._pluginInfoId=Ck.generateSessionId(),(r=w(i)).logInfo=bk.logInfo.bind(r),r.logWarn=bk.logWarn.bind(r),r.logError=bk.logError.bind(r);var a=i.constructor.defaultPreset;if(i.config.presets.length){var s=i.config.presets.indexOf("default");s>=0&&a&&(i.config.presets[s]=a)}else a&&i.config.presets.push(a);if(i.userTimer=null,i.waitTimer=null,i._state=mw.INITIAL,i.isError=!1,i._hasStart=!1,i.isSeeking=!1,i.isCanplay=!1,i._useAutoplay=!1,i.rotateDeg=0,i.isActive=!1,i.fullscreen=!1,i.cssfullscreen=!1,i.isRotateFullscreen=!1,i._fullscreenEl=null,i._cssfullscreenEl=null,i.curDefinition=null,i._orgCss="",i._fullScreenOffset=null,i._videoHeight=0,i._videoWidth=0,i._accPlayed={t:0,acc:0,loopAcc:0},i.innerContainer=null,i.controls=null,i.topBar=null,i.root=null,i.__i18n=yw.init(i._pluginInfoId),Pk.os.isAndroid&&Pk.osVersion>0&&Pk.osVersion<6&&(i.config.autoplay=!1),i.database=new Tb,i.isUserActive=!1,!i._initDOM())return console.error(new Error("can't find the dom which id is ".concat(i.config.id," or this.config.el does not exist"))),C(i);var l=i.config,u=l.definition,c=void 0===u?{}:u;if(!l.url&&c.list&&c.list.length>0){var h=c.list.find((function(e){return e.definition&&e.definition===c.defaultDefinition}));h||(c.defaultDefinition=c.list[0].definition,h=c.list[0]),i.config.url=h.url,i.curDefinition=h}return i._bindEvents(),i._registerPresets(),i._registerPlugins(),uw.onPluginsReady(w(i)),i.getInitDefinition(),i.setState(mw.READY),Ck.setTimeout(w(i),(function(){i.emit(Jk)}),0),i.onReady&&i.onReady(),(i.config.videoInit||i.config.autoplay)&&(!i.hasStart||i.state<mw.ATTACHED)&&i.start(),i}return v(n,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var t=this.config.el;if(!t||1!==t.nodeType)return this.emit(Mk,new Lk("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=t}var n=uw.checkPlayerRoot(this.root);n&&(bk.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this.root.setAttribute(Ab,this.playerId),uw.init(this),this._initBaseDoms();var i=this.constructor.XgVideoProxy;if(i&&this.mediaConfig.mediaType===i.mediaType){var r=this.innerContainer||this.root;this.detachVideoEvents(this.media);var o=new i(r,this.config,this.mediaConfig);this.attachVideoEvents(o),this.media=o}if(this.media.setAttribute(Ab,this.playerId),this.config.controls){var a=this.config.controls.root||null,s=uw.register(this,fw,{root:a});this.controls=s}var l="mobile"===this.config.isMobileSimulateMode?"mobile":Pk.device;if(this.addClass("".concat(cw.DEFAULT," ").concat(cw.INACTIVE," xgplayer-").concat(l," ").concat(this.config.controls?"":cw.NO_CONTROLS)),this.config.autoplay?this.addClass(cw.ENTER):this.addClass(cw.NO_START),this.config.fluid){var u=this.config,c=u.width,h=u.height;"number"==typeof c&&"number"==typeof h||(c=600,h=337.5);var f={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*h/c,"%")};Object.keys(f).forEach((function(t){e.root.style[t]=f[t]}))}else["width","height"].forEach((function(t){e.config[t]&&("number"!=typeof e.config[t]?e.root.style[t]=e.config[t]:e.root.style[t]="".concat(e.config[t],"px"))}));return!0}},{key:"_initBaseDoms",value:function(){this.topBar=Ck.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=Ck.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=Ck.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=Ck.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.config.topBarAutoHide&&Ck.addClass(this.topBar,cw.TOP_BAR_AUTOHIDE),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach((function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])})),Eb.forEach((function(t){document&&document.addEventListener(t,e.onFullscreenChange)})),Pk.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(Wk,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(Rk,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Eb.forEach((function(t){document.removeEventListener(t,e.onFullscreenChange)})),this.playFunc&&this.off(Rk,this.playFunc),this.off(Bk,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(e){var t=this;if(this.media&&(e&&""!==e&&("Array"!==Ck.typeOf(e)||0!==e.length)||(e="",this.emit(Zk),bk.logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this._detachSourceEvents(this.media),"Array"===Ck.typeOf(e)&&e.length>0?this._attachSourceEvents(this.media,e):this.media.src&&this.media.src===e?e||this.media.removeAttribute("src"):this.media.src=e,"Number"===Ck.typeOf(this.config.volume)&&(this.volume=this.config.volume);var n=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!n.contains(this.media)&&n.insertBefore(this.media,n.firstChild);var i=this.media.readyState;bk.logInfo("_startInit readyState",i),this.config.autoplay&&(!/^blob/.test(this.media.currentSrc)&&!/^blob/.test(this.media.src)&&this.load(),(Pk.os.isIpad||Pk.os.isPhone)&&this.mediaPlay()),i>=2?this.canPlayFunc():this.once(Bk,this.canPlayFunc),(!this.hasStart||this.state<mw.ATTACHED)&&uw.afterInit(this),this.hasStart=!0,this.setState(mw.ATTACHED),Ck.setTimeout(this,(function(){t.emit(tb)}),0)}}},{key:"_registerPlugins",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._loadingPlugins=[];var n=this.config.ignores||[],i=this.config.plugins||[],r=this.config.i18n||[];t&&yw.extend(r,this.__i18n);var o=n.join("||").toLowerCase().split("||"),a=this.plugins;i.forEach((function(n){try{var i=n.plugin?n.plugin.pluginName:n.pluginName;if(i&&o.indexOf(i.toLowerCase())>-1)return null;if(!t&&a[i.toLowerCase()])return;if(n.lazy&&n.loader){var r=uw.lazyRegister(e,n);return void(n.forceBeforeInit&&(r.then((function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(r),1)})).catch((function(t){bk.logError("_registerPlugins:loadingPlugin",t),e._loadingPlugins.splice(e._loadingPlugins.indexOf(r),1)})),e._loadingPlugins.push(r)))}return e.registerPlugin(n)}catch(s){bk.logError("_registerPlugins:",s)}}))}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach((function(t){!function(e,t){var n,i,r=t.preset&&t.options?new t.preset(t.options,e.config):new t({},e.config),o=r.plugins,a=void 0===o?[]:o,s=r.ignores,l=void 0===s?[]:s,u=r.icons,c=void 0===u?{}:u,h=r.i18n,f=void 0===h?[]:h;e.config.plugins||(e.config.plugins=[]),e.config.ignores||(e.config.ignores=[]),(n=e.config.plugins).push.apply(n,T(a)),(i=e.config.ignores).push.apply(i,T(l)),Object.keys(c).map((function(t){e.config.icons[t]||(e.config.icons[t]=c[t])}));var d=e.config.i18n||[];f.push.apply(f,T(d)),e.config.i18n=f}(e,t)}))}},{key:"_getRootByPosition",value:function(e){var t=null;switch(e){case Xb.ROOT_RIGHT:t=this.rightBar;break;case Xb.ROOT_LEFT:t=this.leftBar;break;case Xb.ROOT_TOP:t=this.topBar;break;default:t=this.innerContainer||this.root}return t}},{key:"registerPlugin",value:function(e,t){var n=uw.formatPluginInfo(e,t),i=n.PLUFGIN,r=n.options,o=this.config.plugins;!uw.checkPluginIfExits(i.pluginName,o)&&o.push(i);var a=uw.getRootByConfig(i.pluginName,this.config);a.root&&(r.root=a.root),a.position&&(r.position=a.position);var s=r.position?r.position:r.config&&r.config.position||i.defaultConfig&&i.defaultConfig.position;return!r.root&&"string"==typeof s&&s.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(i,r,i.pluginName):(r.root||(r.root=this._getRootByPosition(s)),uw.register(this,i,r))}},{key:"deregister",value:function(e){"string"==typeof e?uw.unRegister(this,e):e instanceof jb&&uw.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.deregister(e),t&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var t;if("string"==typeof e?t=e:e instanceof jb&&(t=e.pluginName),t)for(var n=this.config.plugins.length-1;n>-1;n--){if(this.config.plugins[n].pluginName.toLowerCase()===t.toLowerCase()){this.config.plugins.splice(n,1);break}}}},{key:"plugins",get:function(){return uw.getPlugins(this)}},{key:"getPlugin",value:function(e){var t=uw.findPlugin(this,e);return t&&t.pluginName?t:null}},{key:"addClass",value:function(e){this.root&&(Ck.hasClass(this.root,e)||Ck.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&Ck.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return Ck.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;if(!(this.state>mw.ATTACHING))return e||this.config.url||this.getInitDefinition(),this.hasStart=!0,this.setState(mw.ATTACHING),this._registerPlugins(!1),uw.beforeInit(this).then((function(){if(t.config)return e||(e=t.url||t.config.url),t._startInit(e)})).catch((function(e){throw e.fileName="player",e.lineNumber="236",bk.logError("start:beforeInit:",e),e}))}},{key:"switchURL",value:function(e){var t=this,n=e;"Object"===Ck.typeOf(e)&&(n=e.url);var i=this.currentTime,r=this.paused&&!this.isError;return this.src=n,new Promise((function(e){var n=function(){t.currentTime=i,r&&t.once("canplay",(function(){t.pause()})),e()};Pk.os.isAndroid?t.once("timeupdate",(function(){n()})):t.once("canplay",(function(){n()})),t.play()}))}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(this.state<mw.ATTACHED)return this.removeClass(cw.NO_START),this.addClass(cw.ENTER),this.start(),void(this._useAutoplay=!0);this.state<mw.RUNNING&&(this.removeClass(cw.NO_START),!this.isCanplay&&this.addClass(cw.ENTER));var t=x(k(n.prototype),"play",this).call(this);return void 0!==t&&t&&t.then?t.then((function(){e.removeClass(cw.NOT_ALLOW_AUTOPLAY),e.addClass(cw.PLAYING),e.state<mw.RUNNING&&(bk.logInfo(">>>>playPromise.then"),e.setState(mw.RUNNING),e.emit(Qk))})).catch((function(t){if(bk.logWarn(">>>>playPromise.catch",t.name),e.media&&e.media.error)return e.onError(),void e.removeClass(cw.ENTER);"NotAllowedError"===t.name&&(e._errorTimer=Ck.setTimeout(e,(function(){e._errorTimer=null,e.emit(eb),e.addClass(cw.NOT_ALLOW_AUTOPLAY),e.removeClass(cw.ENTER),e.pause(),e.setState(mw.NOTALLOW)}),0))})):(bk.logWarn("video.play not return promise"),this.state<mw.RUNNING&&(this.setState(mw.RUNNING),this.removeClass(cw.NOT_ALLOW_AUTOPLAY),this.removeClass(cw.NO_START),this.removeClass(cw.ENTER),this.addClass(cw.PLAYING),this.emit(Qk))),t}},{key:"mediaPause",value:function(){x(k(n.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){x(k(n.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;this.removeClass(cw.PAUSED),Ub(this,"play",(function(){e.mediaPlay()}))}},{key:"pause",value:function(){var e=this;Ub(this,"pause",(function(){x(k(n.prototype),"pause",e).call(e)}))}},{key:"seek",value:function(e,t){var n=this;if(this.media&&!Number.isNaN(Number(e)||!this.hasStart)){var i=this.config,r=i.isSeekedPlay,o=i.seekedStatus,a=t||(r?"play":o);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this.once(Bk,(function(){switch(n.removeClass(cw.ENTER),n.isSeeking=!1,a){case"play":n.play();break;case"pause":n.pause();break;default:!n.paused&&n.play()}})),this.state<mw.RUNNING?(this.removeClass(cw.NO_START),this.addClass(cw.ENTER),this.currentTime=e,"play"===a&&this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,t=this.config,n=t.definition;!t.url&&n&&n.list&&n.list.length>0&&n.defaultDefinition&&n.list.map((function(t){t.definition===n.defaultDefinition&&(e.config.url=t.url,e.curDefinition=t)}))}},{key:"changeDefinition",value:function(e,t){var n=this,i=this.config.definition;if(Array.isArray(null==i?void 0:i.list)&&i.list.forEach((function(t){(null==e?void 0:e.definition)===t.definition&&(n.curDefinition=t)})),this.emit(ub,{from:t,to:e}),this.hasStart){var r=this.switchURL(e.url);r&&r.then?r.then((function(){n.emit(cb,{from:t,to:e})})):this.emit(cb,{from:t,to:e})}else this.config.url=e.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(Wk,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,t=[cw.NOT_ALLOW_AUTOPLAY,cw.PLAYING,cw.NO_START,cw.PAUSED,cw.REPLAY,cw.ENTER,cw.ENDED,cw.ERROR,cw.LOADING];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,t.forEach((function(t){e.removeClass(t)})),this.addClass(cw.ENTER),this.emit(kb)}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;if(this.resetState(),this.plugins&&(t.map((function(t){e.deregister(t)})),n)){var i=hw();Object.keys(this.config).keys((function(t){"undefined"===e.config[t]||"plugins"!==t&&"presets"!==t&&"el"!==t&&"id"!==t||(e.config[t]=i[t])}))}}},{key:"destroy",value:function(){var e=this,t=this.innerContainer,i=this.root,r=this.media;if(i&&r){if(this.hasStart=!1,this._useAutoplay=!1,i.removeAttribute(Ab),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),Ck.clearAllTimers(this),this.emit(ib),uw.destroy(this),Fb(this),x(k(n.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),t)for(var o=t.children,a=0;a<o.length;a++)t.removeChild(o[a]);!t&&r instanceof window.Node&&i.contains(r)&&i.removeChild(r),["topBar","leftBar","rightBar","innerContainer"].map((function(t){e[t]&&i.removeChild(e[t]),e[t]=null}));var s=i.className.split(" ");s.length>0?i.className=s.filter((function(e){return e.indexOf("xgplayer")<0})).join(" "):i.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach((function(t){e[t]=!1}))}}},{key:"replay",value:function(){var e=this;this.removeClass(cw.ENDED),this.currentTime=0,this.isSeeking=!1,Ub(this,"replay",(function(){e.once(Bk,(function(){var t=e.mediaPlay();t&&t.catch&&t.catch((function(e){console.log(e)}))})),e.play(),e.emit(nb),e.onPlay()}))}},{key:"retry",value:function(){var e=this;this.removeClass(cw.ERROR),this.addClass(cw.LOADING),Ub(this,"retry",(function(){var t=e.currentTime;e.src=e.config.url,!e.config.isLive&&(e.currentTime=t),e.once(Bk,(function(){e.mediaPlay()}))}))}},{key:"changeFullStyle",value:function(e,t,n,i){e&&(i||(i=cw.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=Ck.filterStyleFromText(e)),Ck.addClass(e,n),t&&t!==e&&!this._orgPCss&&(this._orgPCss=Ck.filterStyleFromText(t),Ck.addClass(t,i),t.setAttribute(Ab,this.playerId)))}},{key:"recoverFullStyle",value:function(e,t,n,i){i||(i=cw.PARENT_FULLSCREEN),this._orgCss&&(Ck.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),Ck.removeClass(e,n),t&&t!==e&&this._orgPCss&&(Ck.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",Ck.removeClass(t,i),t.removeAttribute(Ab))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,n=this.media;if(e||(e=t),this._fullScreenOffset={top:Ck.scrollTop(),left:Ck.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get",Ck.getFullScreenEl()!==this._fullscreenEl)try{for(var i=0;i<Sb.length;i++){var r=Sb[i];if(e[r]){var o="webkitRequestFullscreen"===r?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[r]();return o&&o.then?o:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(a){return Promise.reject(new Error("call getFullscreen fail"))}else this.onFullscreenChange()}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),this._fullscreenEl||Ck.getFullScreenEl()){this.root;var t=this.media;this._fullActionFrom="exit";try{for(var n=0;n<Pb.length;n++){var i=Pb[n];if(document[i]){var r=document[i]();return r&&r.then?r:Promise.resolve()}}return t&&t.webkitSupportsFullscreen?(t.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(o){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var t=e?"".concat(cw.INNER_FULLSCREEN," ").concat(cw.CSS_FULLSCREEN):cw.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,t);var n=this.config.fullscreen,i=void 0===n?{}:n;(!0===i.useCssFullscreen||"function"==typeof i.useCssFullscreen&&i.useCssFullscreen())&&(this.fullscreen=!0,this.emit(ab,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(sb,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(cw.INNER_FULLSCREEN," ").concat(cw.CSS_FULLSCREEN):cw.CSS_FULLSCREEN;if(this.fullscreen){var t=this.config.fullscreen,n=void 0===t?{}:t;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(ab,!1)):this.removeClass(e)}else this.recoverFullStyle(this.root,this._cssfullscreenEl,e);this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(sb,!1)}},{key:"getRotateFullscreen",value:function(e){this.cssfullscreen&&this.exitCssFullscreen(e);var t=e?"".concat(cw.INNER_FULLSCREEN," ").concat(cw.ROTATE_FULLSCREEN):cw.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,t,cw.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this.emit(ab,!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this._fullscreenEl!==this.root?"".concat(cw.INNER_FULLSCREEN," ").concat(cw.ROTATE_FULLSCREEN):cw.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,t,cw.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(ab,!1)}},{key:"setRotateDeg",value:function(e){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(qk,f({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit($k,f({paused:this.paused,ended:this.ended},e)):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoHide,i=void 0===n?!this.config.closePlayerBlur:n,r=t.delay,o=void 0===r?this.config.inactive:r;this.isActive=!0,this.removeClass(cw.INACTIVE),this.userTimer&&(Ck.clearTimeout(this,this.userTimer),this.userTimer=null),i?this.userTimer=Ck.setTimeout(this,(function(){e.userTimer=null,e.blur()}),o):this.userTimer&&(Ck.clearTimeout(this,this.userTimer),this.userTimer=null)}},{key:"onBlur",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).ignorePaused,t=void 0!==e&&e;if(this.isActive){var n=this.config.closePauseVideoFocus;this.isActive=!1,(t||n||!this.paused&&!this.ended)&&this.addClass(cw.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(cw.ENTER),this.removeClass(cw.LOADING),this.isCanplay=!0,this.waitTimer&&Ck.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1}},{key:"onPlay",value:function(){this.state===mw.ENDED&&this.setState(mw.RUNNING),this.removeClass(cw.PAUSED),this.ended&&this.removeClass(cw.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(cw.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(Ck.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(cw.ENDED),this.setState(mw.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(cw.NOT_ALLOW_AUTOPLAY),this.removeClass(cw.NO_START),this.removeClass(cw.ENTER),this.removeClass(cw.LOADING),this.addClass(cw.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(cw.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&Ck.clearTimeout(this,this.waitTimer),this.removeClass(cw.LOADING),this.removeClass(cw.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&Ck.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=Ck.setTimeout(this,(function(){e.addClass(cw.LOADING),Ck.clearTimeout(e,e.waitTimer),e.waitTimer=null}),200)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1,[cw.NO_START,cw.PAUSED,cw.ENDED,cw.ERROR,cw.REPLAY,cw.LOADING].forEach((function(t){e.removeClass(t)}))}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.resize(),(this.waitTimer||this.hasClass(cw.LOADING))&&this.media.readyState>2&&(this.removeClass(cw.LOADING),Ck.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<mw.RUNNING&&this.duration&&(this.setState(mw.RUNNING),this.emit(Qk)),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===Ck.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t,n){if(this.media&&t&&e){var i="String"===Ck.typeOf(e)?e:e.type||"";n.props&&"Array"!==Ck.typeOf(n.props)&&(n.props=[n.props]),this.emit(mb,f({eventType:i,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},n))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var t=(new Date).getTime()-this._accPlayed.t;this._accPlayed.acc+=t,this._accPlayed.t=0,("ended"===e||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var t=this.media.buffered;if(!t||0===t.length||!this.duration)return!0;for(var n=e||this.media.currentTime||.2,i=t.length,r=0;r<i;r++)if(t.start(r)<=n&&t.end(r)>n)return!0;return!1}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.media&&e&&e.h){var t=1/e.h,n=1!==t?"scale(".concat(t,")"):"",i=0,r=0;e.y&&(r=(100-100*e.h)/2-100*e.y),e.w&&e.x&&(i=(100-100*e.w)/2-100*e.x),n+=" translate(".concat(i,"%, ").concat(r,"%)"),this.media.style.transform=n,this.media.style.webkitTransform=n}}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).map((function(n){if("plugins"!==n){t.config[n]=e[n];var i=t.plugins[n.toLowerCase()];i&&"Function"===Ck.typeOf(i.setConfig)&&i.setConfig(e[n])}}))}},{key:"playNext",value:function(e){this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,this.play(),this.emit(gb,e)}},{key:"resize",value:function(){var e=this;if(this.media){var t=this.media,n=t.videoWidth,i=t.videoHeight,r=this.config,o=r.fitVideoSize,a=r.videoFillMode;if("fill"!==a&&"cover"!==a||this.setAttribute("data-xgfill",a),i&&n){this._videoHeight=i,this._videoWidth=n;var s=this.root.getBoundingClientRect(),l=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,u=s.width,c=s.height-l,h=parseInt(n/i*1e3,10),f=parseInt(u/c*1e3,10),d=u,p=c,g={};"auto"===o&&f>h||"fixWidth"===o?(p=u/h*1e3,this.config.fluid?g.paddingTop="".concat(100*p/d,"%"):g.height="".concat(p+l,"px")):("auto"===o&&f<h||"fixHeight"===o)&&(d=h*c/1e3,g.width="".concat(d,"px")),this.fullscreen||this.cssfullscreen||Object.keys(g).forEach((function(t){e.root.style[t]=g[t]})),("fillHeight"===a&&f<h||"fillWidth"===a&&f>h)&&this.setAttribute("data-xgfill","cover");var v={videoScale:h,vWidth:d,vHeight:p,cWidth:d,cHeight:p+l};this.emit(hb,v)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.media.updateObjectPosition?this.media.updateObjectPosition(e,t):this.media.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"setState",value:function(e){bk.logInfo("setState","state from:".concat(kw[this.state]," to:").concat(kw[e])),this._state=e}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,!1===e&&this.setState(mw.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===mw.RUNNING||this._state===mw.ENDED},set:function(e){e?this.setState(mw.RUNNING):this._state>=mw.RUNNING&&this.setState(mw.ATTACHED)}},{key:"definitionList",get:function(){return this.config&&this.config.definition&&this.config.definition.list||[]},set:function(e){var t=this,n=this.config.definition,i=null,r=null;n.list=e,this.emit("resourceReady",e),e.forEach((function(e){var o;(null===(o=t.curDefinition)||void 0===o?void 0:o.definition)===e.definition&&(i=e),n.defaultDefinition===e.definition&&(r=e)})),!r&&e.length>0&&(r=e[0]),i?this.changeDefinition(i):r&&this.changeDefinition(r)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var t=this.media.getVideoPlaybackQuality();return e.dropped=t.droppedVideoFrames||0,e.total=t.totalVideoFrames||0,e.corrupted=t.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){0!==yw.langKeys.filter((function(t){return t===e})).length||"zh"===e?(this.config.lang=e,uw.setLang(e,this)):console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(yw.langKeys.join(),"] "))}},{key:"i18n",get:function(){var e=this.config.lang;return"zh"===e&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return Ak}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){var e=x(k(n.prototype),"readyState",this);return this.i18n[e]||e}},{key:"error",get:function(){var e=x(k(n.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){var e=x(k(n.prototype),"networkState",this);return this.i18n[e]||e}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"avgSpeed",get:function(){return Cw},set:function(e){Cw=e}},{key:"realTimeSpeed",get:function(){return ww},set:function(e){ww=e}},{key:"hook",value:function(e,t){return Lb.call.apply(Lb,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return Rb.call.apply(Rb,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){return Ob.call.apply(Ob,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return Db.call.apply(Db,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return Nb.call.apply(Nb,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){"boolean"==typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),this.muted=t),uw.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return bk.config.debug},set:function(e){bk.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return uw.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,t){uw.setCurrentUserActive(e,t)}},{key:"isHevcSupported",value:function(){return Pk.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return Pk.probeConfigSupported(e)}},{key:"install",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]||(n.plugins[e]=t)}},{key:"use",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]=t}}]),n}();function xw(){
return(new Date).getTime()}y(_w,"defaultPreset",null),y(_w,"XgVideoProxy",null);var Tw={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},Ew=function(e){m(n,Zb);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"_onTimeupdate",(function(){e._state.isTimeUpdate=!0,e._state.autoplayStart&&(bk.logInfo("[xgLogger]".concat(e.player.playerId," _onTimeupdate")),e._sendFF("onTimeupdate"))})),y(w(e),"_onAutoplayStart",(function(){bk.logInfo("[xgLogger]".concat(e.player.playerId," _onAutoplayStart")),e._state.autoplayStart=!0,e.vt&&e._sendFF("onAutoplayStart")})),y(w(e),"_onReset",(function(){e._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},e.vt=0,e.pt=0,e.fvt=0,e._isSeeking=!1,e.seekingStart=0,e.waitingStart=0,e._isWaiting=!1,e._waitTimer&&Ck.clearTimeout(w(e),e._waitTimer),e._waittTimer&&Ck.clearTimeout(w(e),e._waittTimer),e._waitTimer=null,e._waittTimer=null,e._waitType=0})),y(w(e),"_onSeeking",(function(){e.seekingStart||(e.suspendWaitingStatus("seek"),e.seekingStart=xw(),e.emitLog(Tw.SEEK_START,{start:xw()}))})),y(w(e),"_onSeeked",(function(){e.suspendSeekingStatus("seeked")})),y(w(e),"_onWaitingLoadStart",(function(){e._isWaiting||e.vt||(e._isWaiting=!0,e.waitingStart=xw(),e._waitType=1,e.emitLog(Tw.WAIT_START,{start:e.waitingStart,type:1,endType:"loadstart"}))})),y(w(e),"_onWaiting",(function(){!e._isWaiting&&e.vt&&(e._isWaiting=!0,e._waitTimer=Ck.setTimeout(w(e),(function(){e._isWaiting&&(e.waitingStart=xw(),Ck.clearTimeout(w(e),e._waitTimer),e._waitTimer=null,e.vt?e.seekingStart?e._waitType=2:e._waitType=0:e._waitType=1,e._startWaitTimeout(),e.emitLog(Tw.WAIT_START,{start:e.waitingStart,type:e._waitType,endType:2===e._waitType?"seek":"playing"}))}),200))})),y(w(e),"_onError",(function(){e.suspendSeekingStatus("error"),e.suspendWaitingStatus("error")})),y(w(e),"_onPlaying",(function(){e._isWaiting&&e.suspendWaitingStatus("playing")})),e}return v(n,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.on(Yk,(function(){var t=e._state,n=t.autoplayStart,i=t.isFFSend;bk.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(n," isFFSend:").concat(i)),i||(!t.isLs&&e.emitLog(Tw.LOAD_START,{}),t.isLs=!0,t.isTimeUpdate=!1,t.isFFLoading=!0,e.pt=xw(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())})),this.on(Wk,(function(){e.vt=xw(),e.fvt=e.vt-e.pt;var t=e._state,n=t.isTimeUpdate,i=t.isFFSend,r=t.autoplayStart;bk.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate)),n&&r&&e._sendFF("loadedData"),i||e.emitLog(Tw.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")})),this.on(Fk,this._onSeeking),this.on(Uk,this._onSeeked),this.on(ib,(function(){e.endState("destroy")})),this.on(rb,(function(){e.endState("urlChange"),bk.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()})),this.on([Ok,Bk],this._onPlaying),this.on(jk,this._onWaiting),this.on(Mk,this._onError),this.on(kb,(function(){bk.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()}))}},{key:"_initOnceEvents",value:function(){this.off(Qk,this._onAutoplayStart),this.off(Hk,this._onTimeupdate),this.once(Qk,this._onAutoplayStart),this.once(Hk,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=xw();var t=this._state,n=t.isFFLoading,i=t.isFFSend;bk.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(n," !isFFSend:").concat(!i)),this.vt>0&&n&&!i&&(bk.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(Tw.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&Ck.clearTimeout(this,this._waittTimer),this._waittTimer=Ck.setTimeout(this,(function(){e.suspendWaitingStatus("timeout"),Ck.clearTimeout(e,e._waittTimer),e._waittTimer=null}),3e4)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var t=xw(),n=t-this.seekingStart;this.seekingStart=0,this.emitLog(Tw.SEEK_END,{end:t,costTime:n,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(Ck.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(Ck.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart){var t=xw()-this.waitingStart;this._isWaiting=!1,this.waitingStart=0,this.emitLog(Tw.WAIT_END,{costTime:t,type:this._waitType,endType:2===this._waitType?"seek":e})}}},{key:"emitLog",value:function(e,t){var n=this.player;this.emit(yb,f({t:xw(),host:Ck.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:e,currentTime:this.player.currentTime,readyState:n.media.readyState,networkState:n.media.networkState},t))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{}}}]),n}();function Sw(){return(new DOMParser).parseFromString('<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">\n  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Pw=function(e){m(n,Zb);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"registerIcons",value:function(){return{replay:Sw}}},{key:"afterCreate",value:function(){var e=this;Zb.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",(function(){e.player.replay()}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(Dk,(function(){if(e.playerConfig.loop||Ck.addClass(e.player.root,"replay"),!e.config.disable){e.show();var t=e.root.querySelector("path");if(t){var n=window.getComputedStyle(t).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;t.setAttribute("transform",n)}}})),this.on(Rk,(function(){e.hide()}))}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),Ck.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),n}(),Aw=function(e){m(n,Zb);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){Ck.addClass(this.root,"hide")}},{key:"show",value:function(){Ck.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){"string"==typeof e.player.config.poster&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(Dk,(function(){e.isEndedShow&&Ck.removeClass(e.root,"hide")})),this.config.hideCanplay?(this.once(Hk,(function(){e.onTimeUpdate()})),this.on(rb,(function(){Ck.removeClass(e.root,"hide"),Ck.addClass(e.root,"xg-showplay"),e.once(Hk,(function(){e.onTimeUpdate()}))}))):this.on(Rk,(function(){Ck.addClass(e.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?Ck.removeClass(this.root,"xg-showplay"):this.once(Hk,(function(){e.onTimeUpdate()}))}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,t=e.poster,n=e.hideCanplay,i=t?"background-image:url(".concat(t,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(i,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),n}();function Iw(){return(new DOMParser).parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Lw(){return(new DOMParser).parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Rw={};var Ow=function(e){m(n,Zb);var t=_(n);function n(e){var i;return p(this,n),y(w(i=t.call(this,e)),"onAutoplayStart",(function(){if(!i.autoPlayStart){var e="auto"===i.config.mode?"auto-hide":"hide";Ck.addClass(i.root,e),i.autoPlayStart=!0,i.onPlayPause("play")}})),i.autoPlayStart=!1,i}return v(n,[{key:"afterCreate",value:function(){var e=this,t=this.player,n=this.playerConfig;this.initIcons(),this.once(Jk,(function(){n&&(n.lang&&"en"===n.lang?Ck.addClass(t.root,"lang-is-en"):"jp"===n.lang&&Ck.addClass(t.root,"lang-is-jp"))})),this.on(Qk,this.onAutoplayStart),n.autoplay||this.show(),this.on(eb,(function(){var t="auto"===e.config.mode?"auto-hide":"hide";e.setAttr("data-state","play"),Ck.removeClass(e.root,t),e.show()})),this.on(Rk,(function(){e.onPlayPause("play")})),this.on(Nk,(function(){e.onPlayPause("pause")})),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(t){t.cancelable&&t.preventDefault(),t.stopPropagation();var n=e.player.paused;e.emitUserAction(t,"switch_play_pause",{props:"paused",from:n,to:!n})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:Iw,class:"xg-icon-play"},startPause:{icon:Lw,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){Ck.addClass(this.root,"hide")}},{key:"show",value:function(){Ck.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){Ck.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){Ck.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};Rw[e]&&window.clearTimeout(Rw[e].id),Rw[e]={},n.start&&n.start(),Rw[e].id=window.setTimeout((function(){n.end&&n.end(),window.clearTimeout(Rw[e].id),delete Rw[e]}),t)}("pauseplay",400,{start:function(){Ck.addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){Ck.removeClass(t.root,"interact"),!e&&t.hide()}})}},{key:"switchPausePlay",value:function(e){var t=this.player;(e.cancelable&&e.preventDefault(),e.stopPropagation(),t.state<mw.READY)||(this.player.paused||t.state!==mw.RUNNING?t.play():t.pause())}},{key:"onPlayPause",value:function(e){var t=this.config,n=this.player;if(!(n.state<mw.RUNNING)&&this.autoPlayStart){if("show"===t.mode)return this.switchStatus(),void this.show();if("auto"!==t.mode){if(t.isShowPause&&n.paused&&!n.ended||t.isShowEnd&&n.ended)return this.switchStatus(),void this.show();if(t.disableAnimate)return this.switchStatus(),void this.hide();if("play"===e)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}else this.switchStatus()}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Object.keys(Rw).map((function(e){window.clearTimeout(Rw[e].id),delete Rw[e]}))}},{key:"render",value:function(){var e=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(e,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),n}(),Dw=function(e){m(n,Zb);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"render",value:function(){var e=this.config.innerHtml,t=Ck.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)t.appendChild(e);else if(e&&"string"==typeof e)t.innerHTML=e;else{for(var n="",i=1;i<=12;i++)n+='<div class="xgplayer-enter-bar'.concat(i,'"></div>');t.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return t}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),n}(),Nw=function(e){m(n,Zb);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span></div>\n      </xg-icon>")}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_RIGHT,index:10}}}]),n}();function Mw(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!Number.isNaN(t)&&t}var Fw=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],Uw=Fw.length;function Hw(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"===d(e)&&e.nodeType){var t=function(e){return window.getComputedStyle(e)}(e);if("none"===t.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<Uw;t++)e[Fw[t]]=0;return e}();var n={};n.width=e.offsetWidth,n.height=e.offsetHeight;for(var i=n.isBorderBox="border-box"===t.boxSizing,r=0;r<Uw;r++){var o=Fw[r],a=t[o],s=parseFloat(a);n[o]=Number.isNaN(s)?0:s}var l=n.paddingLeft+n.paddingRight,u=n.paddingTop+n.paddingBottom,c=n.marginLeft+n.marginRight,h=n.marginTop+n.marginBottom,f=n.borderLeftWidth+n.borderRightWidth,p=n.borderTopWidth+n.borderBottomWidth,g=i,v=Mw(t.width);!1!==v&&(n.width=v+(g?0:l+f));var y=Mw(t.height);return!1!==y&&(n.height=y+(g?0:u+p)),n.innerWidth=n.width-(l+f),n.innerHeight=n.height-(u+p),n.outerWidth=n.width+c,n.outerHeight=n.height+h,n}}function jw(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.identifier===t)return i}}var Bw="dragStart",Gw="dragMove",Vw="dragEnded",Ww={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},Kw=function(e){m(n,Pg);var t=_(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,n),(i=t.call(this)).isEnabled=!0,i.isDragging=!1,i.isDown=!1,i.position={},i.downPoint={},i.dragPoint={x:0,y:0},i.startPos={x:0,y:0},i._root=e instanceof Element?e:document.querySelector(e),i._handlerDom=r.handle instanceof Element?r.handle:document.querySelector(r.handle),i._root&&i._handlerDom?(i._bindStartEvent(),i):C(i)}return v(n,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),Ww[this._startKey].map((function(t){e["on".concat(t)]=e["on".concat(t)].bind(e)}))}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var t=this;if(e){var n=Ww[this._startKey];n.map((function(e){window.addEventListener(e,t["on".concat(e)])})),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map((function(t){window.removeEventListener(t,e["on".concat(t)])})),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame((function(){e.animate()})))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var t=e.changedTouches[0];this.dragStart(e,t),this.touchIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var t=jw(e.changedTouches,this.touchIdentifier);t&&this.dragMove(e,t)}},{key:"ontouchend",value:function(e){var t=jw(e.changedTouches,this.touchIdentifier);t&&this.dragEnd(e,t),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var t=jw(e.changedTouches,this.touchIdentifier);t&&this.dragCancel(e,t)}},{key:"dragStart",value:function(e,t){if(this._root&&!this.isDown&&this.isEnabled){this.downPoint=t,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=Hw(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,t){this.isDragging=!0,this.animate(),this.emit(Bw,this.startPos)}},{key:"dragEnd",value:function(e,t){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(Vw)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,t){var n={x:t.pageX-this.downPoint.pageX,y:t.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(e,t),n}},{key:"dragMove",value:function(e,t){if(e=e||window.event,this.isDown){var n=this.startPos,i=n.x,r=n.y,o=this._dragPointerMove(e,t),a=o.x,s=o.y;a=this.checkContain("x",a,i),s=this.checkContain("y",s,r),this.position.x=i+a,this.position.y=r+s,this.dragPoint.x=a,this.dragPoint.y=s,this.emit(Gw,this.position)}}},{key:"dragCancel",value:function(e,t){this.dragEnd(e,t)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,t,n){return t+n<0?0-n:"x"===e&&t+n>this.startPos.maxX?this.startPos.maxX-n:"y"===e&&t+n>this.startPos.maxY?this.startPos.maxY-n:t}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),t=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(t)?0:t,this.position.y=Number.isNaN(n)?0:n,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var t=e.transform;if(0===t.indexOf("matrix")){var n=t.split(","),i=0===t.indexOf("matrix3d")?12:4,r=parseInt(n[i],10),o=parseInt(n[i+1],10);this.position.x+=r,this.position.y+=o}}},{key:"_getPositionCoord",value:function(e,t){if(-1!==e.indexOf("%")){var n=Hw(this._root.parentNode);return n?parseFloat(e)/100*n[t]:0}return parseInt(e,10)}}]),n}(),zw=function(e){m(n,Zb);var t=_(n);function n(e){var i;p(this,n),y(w(i=t.call(this,e)),"onCancelClick",(function(e){i.exitMini(),i.isClose=!0})),y(w(i),"onCenterClick",(function(e){var t=w(i).player;t.paused?t.play():t.pause()})),y(w(i),"onScroll",(function(e){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-i.pos.scrollY)<50)){var t=parseInt(Ck.getCss(i.player.root,"height"));t+=i.config.scrollTop,i.pos.scrollY=window.scrollY,window.scrollY>t+5?!i.isMini&&!i.isClose&&i.getMini():window.scrollY<=t&&(i.isMini&&i.exitMini(),i.isClose=!1)}})),i.isMini=!1,i.isClose=!1;var r=w(i).config;return i.pos={left:r.left<0?window.innerWidth-r.width-20:r.left,top:r.top<0?window.innerHeight-r.height-20:r.top,height:i.config.height,width:i.config.width,scrollY:window.scrollY||0},i.lastStyle=null,i}return v(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(Nk,(function(){e.setAttr("data-state","pause")})),this.on(Rk,(function(){e.setAttr("data-state","play")}))}},{key:"onPluginsReady",value:function(){var e=this,t=this.player;if(!this.config.disable){if(this.config.isShowIcon){var n={config:{onClick:function(){e.getMini()}}};t.controls.registerPlugin(Nw,n,Nw.pluginName)}var i=Ck.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",i,this.onCancelClick),this.bind(".play-icon",i,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new Kw(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:Iw,class:"xg-icon-play"},pause:{icon:Lw,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;this.lastStyle={},Ck.addClass(t.root,"xgplayer-mini"),["width","height","top","left"].map((function(t){e.lastStyle[t]=i.style[t],i.style[t]="".concat(e.pos[t],"px")})),n.fluid&&(i.style["padding-top"]=""),this.emit(lb,!0),t.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;Ck.removeClass(t.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map((function(t){i.style[t]=e.lastStyle[t]})),this.lastStyle=null,n.fluid&&(t.root.style.width="100%",t.root.style.height="0",t.root.style["padding-top"]="".concat(100*n.height/n.width,"%")),this.emit(lb,!1),this.isMini=t.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=Ck.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      <div lang-key="'.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,'</div>\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),n}(),Yw={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},Xw=["videoClick","videoDbClick"],qw=function(e){m(n,jb);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"onMouseMove",(function(t){var n=w(e),i=n.player,r=n.playerConfig;i.isActive||(i.focus({autoHide:!r.closeDelayBlur}),!r.closeFocusVideoFocus&&i.media.focus())})),y(w(e),"onMouseEnter",(function(t){var n=w(e),i=n.playerConfig,r=n.player;!i.closeFocusVideoFocus&&r.media.focus(),i.closeDelayBlur?r.focus({autoHide:!1}):r.focus()})),y(w(e),"onMouseLeave",(function(t){var n=e.playerConfig,i=n.closePlayerBlur,r=n.leavePlayerTime,o=n.closeDelayBlur;i||o||(r?e.player.focus({autoHide:!0,delay:r}):e.player.blur())})),y(w(e),"onVideoClick",(function(t){var n=w(e),i=n.player,r=n.playerConfig;t.target&&r.closeVideoClick||t.target!==i.root&&t.target!==i.media&&t.target!==i.innerContainer&&t.target!==i.media.__canvas||(t.preventDefault(),r.closeVideoStopPropagation||t.stopPropagation(),e._clickCount++,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),e.clickTimer=setTimeout((function(){e._clickCount&&(e._clickCount--,Ub(w(e),Xw[0],(function(t,n){e.switchPlayPause(n.e)}),{e:t,paused:i.paused}),clearTimeout(e.clickTimer),e.clickTimer=null)}),300))})),y(w(e),"onVideoDblClick",(function(t){var n=w(e),i=n.player;n.playerConfig.closeVideoDblclick||!t.target||t.target!==i.media&&t.target!==i.media.__canvas||(e._clickCount<2?e._clickCount=0:(e._clickCount=0,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),t.preventDefault(),t.stopPropagation(),Ub(w(e),Xw[1],(function(t,n){e.emitUserAction(n.e,"switch_fullscreen",{props:"fullscreen",from:i.fullscreen,to:!i.fullscreen}),i.fullscreen?i.exitFullscreen():i.getFullscreen()}),{e:t,fullscreen:i.fullscreen})))})),e}return v(n,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,Xw.map((function(t){e.__hooks[t]=null})),"mobile"===this.playerConfig.isMobileSimulateMode||"mobile"===Pk.device&&!Pk.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,t=this.player,n=t.video,i=t.root,r=this.playerConfig.enableContextmenu;i&&i.addEventListener("click",this.onVideoClick,!1),i&&i.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(Yw).map((function(t){i.addEventListener(t,e[Yw[t]],!1)})),r&&n&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:t.paused,to:!t.paused}),t.ended?t.duration!==1/0&&t.duration>0&&t.replay():t.paused?t.play():t.pause()}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,t=this.player,n=t.video,i=t.root;this.clickTimer&&clearTimeout(this.clickTimer),i.removeEventListener("click",this.onVideoClick,!1),i.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(Yw).map((function(t){i.removeEventListener(t,e[Yw[t]],!1)}))}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),n}(),$w=Ai,Jw=hs,Zw=se,Qw=RangeError,eC=Er,tC=X,nC=Ai,iC=ud,rC=function(e){var t=Jw(Zw(this)),n="",i=$w(e);if(i<0||i==1/0)throw Qw("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n},oC=L,aC=RangeError,sC=String,lC=Math.floor,uC=tC(rC),cC=tC("".slice),hC=tC(1..toFixed),fC=function(e,t,n){return 0===t?n:t%2==1?fC(e,t-1,n*e):fC(e*e,t/2,n)},dC=function(e,t,n){for(var i=-1,r=n;++i<6;)r+=t*e[i],e[i]=r%1e7,r=lC(r/1e7)},pC=function(e,t){for(var n=6,i=0;--n>=0;)i+=e[n],e[n]=lC(i/t),i=i%t*1e7},gC=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var i=sC(e[t]);n=""===n?i:n+uC("0",7-i.length)+i}return n};eC({target:"Number",proto:!0,forced:oC((function(){return"0.000"!==hC(8e-5,3)||"1"!==hC(.9,0)||"1.25"!==hC(1.255,2)||"1000000000000000128"!==hC(0xde0b6b3a7640080,0)}))||!oC((function(){hC({})}))},{toFixed:function(e){var t,n,i,r,o=iC(this),a=nC(e),s=[0,0,0,0,0,0],l="",u="0";if(a<0||a>20)throw aC("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return sC(o);if(o<0&&(l="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*fC(2,69,1))-69)<0?o*fC(2,-t,1):o/fC(2,t,1),n*=4503599627370496,(t=52-t)>0){for(dC(s,0,n),i=a;i>=7;)dC(s,1e7,0),i-=7;for(dC(s,fC(10,i,1),0),i=t-1;i>=23;)pC(s,1<<23),i-=23;pC(s,1<<i),dC(s,1,1),pC(s,2),u=gC(s)}else dC(s,0,n),dC(s,1<<-t,0),u=gC(s)+uC("0",a);return u=a>0?l+((r=u.length)<=a?"0."+uC("0",a-r)+u:cC(u,0,r-a)+"."+cC(u,r-a)):l+u}});var vC="press",yC="pressend",mC="doubleclick",kC="click",bC="touchmove",wC="touchstart",CC="touchend",_C={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},xC={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function TC(e){return e&&e.length>0?e[e.length-1]:null}function EC(e){var t=navigator.userAgent;/(?:iPhone|iPad)/.test(t)&&e.cancelable&&e.preventDefault()}var SC=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};p(this,e),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0},Object.keys(i).map((function(e){n.config[e]=i[e]})),this.root=t,this.events="mouse"===i.eventType?xC:_C,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return v(e,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(e){var t=this,n=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout((function(){t.trigger(vC,e),t._pos.press=!0,t.__clearPress()}),n.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(e){var t=this,n=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger(mC,e);this.dbIntrvalId=setTimeout((function(){t.__clearDb(),t._pos.start||t._pos.press||t._pos.moving||t.trigger(kC,e)}),n.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(e,t){this.__handlers[e]||(this.__handlers[e]=[]),this.__handlers[e].push(t)}},{key:"off",value:function(e,t){if(this.__handlers[e]){for(var n=this.__handlers[e],i=-1,r=0;r<n.length;r++)if(n[r]===t){i=r;break}i>=0&&this.__handlers[e].splice(i,1)}}},{key:"trigger",value:function(e,t){this.__handlers[e]&&this.__handlers[e].map((function(n){try{n(t)}catch(sP){console.error("trigger>>:".concat(e),sP)}}))}},{key:"onTouchStart",value:function(e){var t=this._pos,n=this.root;this.config.needPreventDefault&&EC(e);var i=TC(e.touches);t.x=i?parseInt(i.pageX,10):e.pageX,t.y=i?parseInt(i.pageX,10):e.pageX,t.start=!0,this.__setPress(e),n.addEventListener(this.events.end,this.onTouchEnd),n.addEventListener(this.events.cancel,this.onTouchCancel),n.addEventListener(this.events.move,this.onTouchMove),this.trigger(wC,e)}},{key:"onTouchCancel",value:function(e){this.onTouchEnd(e)}},{key:"onTouchEnd",value:function(e){var t=this._pos,n=this.root;this.config.needPreventDefault&&EC(e),this.__clearPress(),n.removeEventListener(this.events.cancel,this.onTouchCancel),n.removeEventListener(this.events.end,this.onTouchEnd),n.removeEventListener(this.events.move,this.onTouchMove),e.moving=t.moving,e.press=t.press,t.press&&this.trigger(yC,e),this.trigger(CC,e),!t.press&&!t.moving&&this.__setDb(e),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(e){var t=this._pos,n=this.config,i=TC(e.touches),r=i?parseInt(i.pageX,10):e.pageX,o=i?parseInt(i.pageY,10):e.pageX,a=r-t.x,s=o-t.y;Math.abs(s)<n.miniStep&&Math.abs(a)<n.miniStep||(this.__clearPress(),t.press&&this.trigger(yC,e),t.press=!1,t.moving=!0,this.trigger(bC,e))}},{key:"destroy",value:function(){var e=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map((function(n){e.root.removeEventListener("touchend",e[t[n]])}))}}]),e}();function PC(){return(new DOMParser).parseFromString('<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <path opacity="0.54"\n    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"\n    fill="white" />\n  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}var AC={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},IC=function(e){m(n,Zb);var t=_(n);function n(e){var i;return p(this,n),y(w(i=t.call(this,e)),"onTouchStart",(function(e){var t=w(i),n=t.player,r=t.config,o=t.pos,a=t.playerConfig,s=i.getTouche(e);if(s&&!r.disableGesture&&i.duration>0&&!n.ended){o.isStart=!0,Ck.checkIsFunction(a.disableSwipeHandler)&&a.disableSwipeHandler(),i.find(".xg-dur").innerHTML=Ck.format(i.duration);var l=i.root.getBoundingClientRect();90===n.rotateDeg?(o.top=l.left,o.left=l.top,o.width=l.height,o.height=l.width):(o.top=l.top,o.left=l.left,o.width=l.width,o.height=l.height);var u=parseInt(s.pageX-o.left,10),c=parseInt(s.pageY-o.top,10);o.x=90===n.rotateDeg?c:u,o.y=90===n.rotateDeg?u:c,o.scopeL=r.scopeL*o.width,o.scopeR=(1-r.scopeR)*o.width,o.scopeM1=o.width*(1-r.scopeM)/2,o.scopeM2=o.width-o.scopeM1}})),y(w(i),"onTouchMove",(function(e){var t=i.getTouche(e),n=w(i),r=n.pos,o=n.config,a=n.player;if(t&&!o.disableGesture&&i.duration&&r.isStart){var s=o.miniMoveStep,l=o.hideControlsActive,u=parseInt(t.pageX-r.left,10),c=parseInt(t.pageY-r.top,10),h=90===a.rotateDeg?c:u,f=90===a.rotateDeg?u:c;if(Math.abs(h-r.x)>s||Math.abs(f-r.y)>s){var d=h-r.x,p=f-r.y,g=r.scope;if(-1===g&&(0===(g=i.checkScope(h,f,d,p,r))&&(l?a.blur():a.focus({autoHide:!1}),!r.time&&(r.time=parseInt(1e3*a.currentTime,10)+1e3*i.timeOffset)),r.scope=g),-1===g||g>0&&!o.gestureY||0===g&&!o.gestureX)return;e.cancelable&&e.preventDefault(),i.executeMove(d,p,g,r.width,r.height),r.x=h,r.y=f}}})),y(w(i),"onTouchEnd",(function(e){var t=w(i),n=t.player,r=t.pos,o=t.playerConfig;r.isStart&&(r.scope>-1&&e.cancelable&&e.preventDefault(),i.endLastMove(r.scope),setTimeout((function(){n.getPlugin("progress")&&n.getPlugin("progress").resetSeekState()}),10),r.scope=-1,i.resetPos(),Ck.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),i.changeAction(AC.AUTO))})),y(w(i),"onRootTouchMove",(function(e){!i.config.disableGesture&&i.config.gestureX&&i.checkIsRootTarget(e)&&(e.stopPropagation(),i.pos.isStart?i.onTouchMove(e):i.onTouchStart(e))})),y(w(i),"onRootTouchEnd",(function(e){i.pos.isStart&&i.checkIsRootTarget(e)&&(e.stopPropagation(),i.onTouchEnd(e))})),i.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},i.timer=null,i}return v(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:PC,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this,t=this.playerConfig,n=this.config,i=this.player;!0===t.closeVideoDblclick&&(n.closedbClick=!0),this.resetPos(),Ck.isUndefined(t.disableGesture)||(n.disableGesture=!!t.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=Ck.createDom("xg-mask","",{},"xgmask"),i.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var r=this.domEventType;this.touch=new SC(this.root,{eventType:r,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",(function(e){e.preventDefault()})),i.root.addEventListener("touchmove",this.onRootTouchMove,!0),i.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(Gk,(function(){var t=e.player,n=e.config;1e3*t.duration<n.moveDuration&&(n.moveDuration=1e3*t.duration)})),this.on([Bk,Dk],(function(){var t=e.pos,n=t.time;!t.isStart&&n>0&&(e.pos.time=0)}));var o={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(o).map((function(t){e.touch.on(t,(function(n){e[o[t]](n)}))})),!n.disableActive){var a=i.plugins.progress;a&&(a.addCallBack("dragmove",(function(t){e.activeSeekNote(t.currentTime,t.forward)})),a.addCallBack("dragend",(function(){e.changeAction(AC.AUTO)})))}}},{key:"registerThumbnail",value:function(){var e=this.player.plugins.thumbnail;if(e&&e.usable){this.thumbnail=e.createThumbnail(null,"mobile-thumbnail");var t=this.find(".time-preview");t.insertBefore(this.thumbnail,t.children[0])}}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle,t=e.playedColor,n=e.progressColor;t&&(this.find(".xg-curbar").style.backgroundColor=t,this.find(".xg-cur").style.color=t),n&&(this.find(".xg-bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&Ck.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map((function(t){e.pos[t]=0}))):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var t=this.player;this.root.setAttribute("data-xg-action",e);var n=t.plugins.start;n&&n.recover()}},{key:"getTouche",value:function(e){this.player.rotateDeg;var t=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return{pageX:t.pageX,pageY:t.pageY}}},{key:"checkScope",value:function(e,t,n,i,r){var o=r.width,a=-1;if(e<0||e>o)return a;var s=0===i?Math.abs(n):Math.abs(n/i);return Math.abs(n)>0&&s>=1.73&&e>r.scopeM1&&e<r.scopeM2?a=0:(0===Math.abs(n)||s<=.57)&&(a=e<r.scopeL?1:e>r.scopeR?2:3),a}},{key:"executeMove",value:function(e,t,n,i,r){switch(n){case 0:this.updateTime(e/i*this.config.scopeM);break;case 1:this.updateBrightness(t/r);break;case 2:Pk.os.isIos||this.updateVolume(t/r)}}},{key:"endLastMove",value:function(e){var t=this,n=this.pos,i=this.player,r=this.config,o=(n.time-this.timeOffset)/1e3;if(0===e)i.seek(Number(o).toFixed(1)),r.hideControlsEnd?i.blur():i.focus(),this.timer=setTimeout((function(){t.pos.time=0}),500);this.changeAction(AC.AUTO)}},{key:"checkIsRootTarget",value:function(e){var t=this.player.plugins||{};return(!t.progress||!t.progress.root.contains(e.target))&&(t.start&&t.start.root.contains(e.target)||t.controls&&t.controls.root.contains(e.target))}},{key:"sendUseAction",value:function(e){var t=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t,to:!t})}},{key:"onClick",value:function(e){var t=this.player,n=this.config,i=this.playerConfig;t.state<mw.RUNNING?i.closeVideoClick||(this.sendUseAction(Ck.createEvent("click")),t.play()):!n.closedbClick||i.closeVideoClick?t.isActive?t.blur():t.focus():i.closeVideoClick||((t.isActive||n.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),t.focus())}},{key:"onDbClick",value:function(e){var t=this.config,n=this.player;!t.closedbClick&&n.state>=mw.RUNNING&&(this.sendUseAction(Ck.createEvent("dblclick")),this.switchPlayPause())}},{key:"onPress",value:function(e){var t=this.pos,n=this.config,i=this.player;n.disablePress||(t.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:i.playbackRate,to:n.pressRate}),i.playbackRate=n.pressRate,this.changeAction(AC.PLAYBACK))}},{key:"onPressEnd",value:function(e){var t=this.pos,n=this.config,i=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:i.playbackRate,to:t.rate}),i.playbackRate=t.rate,t.rate=1,this.changeAction(AC.AUTO))}},{key:"updateTime",value:function(e){var t=this.player,n=this.config,i=this.player.duration;e=Number(e.toFixed(4));var r=parseInt(e*n.moveDuration,10)+this.timeOffset;r=(r+=this.pos.time)<0?0:r>1e3*i?1e3*i-200:r,t.getPlugin("time")&&t.getPlugin("time").updateTime(r/1e3),t.getPlugin("progress")&&t.getPlugin("progress").updatePercent(r/1e3/this.duration,!0),this.activeSeekNote(r/1e3,e>0),n.isTouchingSeek&&t.seek(Number((r-this.timeOffset)/1e3).toFixed(1)),this.pos.time=r}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.player,n=this.pos;if(e=parseInt(100*e,10),n.volume+=e,!(Math.abs(n.volume)<10)){var i=parseInt(10*t.volume,10)-parseInt(n.volume/10,10);i=i>10?10:i<1?0:i,t.volume=i/10,n.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.pos,n=this.config,i=this.xgMask,r=t.light+.8*e;r=r>n.maxDarkness?n.maxDarkness:r<0?0:r,i&&(i.style.backgroundColor="rgba(0,0,0,".concat(r,")")),t.light=r}},{key:"activeSeekNote",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player,i=this.config,r=!(this.duration!==1/0&&this.duration>0);if(e&&"number"==typeof e&&!r&&!i.disableActive){e<0?e=0:e>n.duration&&(e=n.duration-.2),this.changeAction(AC.SEEKING);var o=n.plugins.start;o&&o.focusHide(),this.find(".xg-dur").innerHTML=Ck.format(this.duration),this.find(".xg-cur").innerHTML=Ck.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),t?Ck.removeClass(this.find(".xg-seek-show"),"xg-back"):Ck.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var t=this.player.plugins.thumbnail;t&&t.usable&&this.thumbnail&&t.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<mw.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(e,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),n}();function LC(e){e.preventDefault(),e.returnValue=!1}var RC=function(e){m(n,jb);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"onBodyKeyDown",(function(t){var n=t||window.event;if(e.player&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&!(e.config.disable||e.config.disableBodyTrigger||!e.checkIsVisible()||n.metaKey||n.altKey||n.ctrlKey)){var i,r,o=n.keyCode;return!(n.target!==document.body&&(!e.config.isGlobalTrigger||(i=n.target,r=i.tagName,"INPUT"===r||"TEXTAREA"===r||i.isContentEditable))||!e.checkCode(o,!0))&&(LC(n),e.handleKeyCode(o,t),!1)}})),y(w(e),"onKeydown",(function(t){var n=t||window.event;if(!(e.config.disable||e.config.disableRootTrigger||n.metaKey||n.altKey||n.ctrlKey)&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&(e.player.isUserActive||e.config.isIgnoreUserActive)){if(!n||37!==n.keyCode&&!e.checkCode(n.keyCode)||n.target!==e.player.root&&n.target!==e.player.video&&n.target!==e.player.controls.el)return!0;LC(n),e.handleKeyCode(n.keyCode,t)}})),e}return v(n,[{key:"mergekeyCodeMap",value:function(){var e=this,t=this.config.keyCodeMap;t&&Object.keys(t).map((function(n){e.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map((function(i){t[n][i]&&(e.keyCodeMap[n][i]=t[n][i])})):e.keyCodeMap[n]=t[n]}))}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"==typeof e&&(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),t=e.height,n=e.top,i=e.bottom,r=window.innerHeight;return!(n<0&&n<0-.9*t||i>0&&i-r>.9*t)}},{key:"checkCode",value:function(e,t){var n=this,i=!1;return Object.keys(this.keyCodeMap).map((function(r){n.keyCodeMap[r]&&e===n.keyCodeMap[r].keyCode&&!n.keyCodeMap[r].disable&&(i=!t||t&&!n.keyCodeMap[r].noBodyTarget)})),i}},{key:"downVolume",value:function(e){var t=this.player,n=parseFloat((t.volume-.1).toFixed(1)),i={volume:{from:t.volume,to:n}};this.emitUserAction(e,"change_volume",{props:i}),t.volume=n>=0?n:0}},{key:"upVolume",value:function(e){var t=this.player,n=parseFloat((t.volume+.1).toFixed(1)),i={volume:{from:t.volume,to:n}};this.emitUserAction(e,"change_volume",{props:i}),t.volume=n<=1?n:1}},{key:"seek",value:function(e){var t=this.player,n=t.currentTime,i=t.duration,r=n,o={currentTime:{from:n,to:r=n+this.seekStep<=i?n+this.seekStep:i-1}};this.emitUserAction(e,"seek",{props:o}),this.player.currentTime=r}},{key:"seekBack",value:function(e){var t=this.player.currentTime,n=0;t-this.seekStep>=0&&(n=t-this.seekStep);var i={currentTime:{from:t,to:n}};this.emitUserAction(e,"seek",{props:i}),this.player.currentTime=n}},{key:"playPause",value:function(e){var t=this.player;t&&(this.emitUserAction(e,"switch_play_pause"),t.paused?t.play():t.pause())}},{key:"exitFullscreen",value:function(e){var t=this.player,n=t.fullscreen,i=t.cssfullscreen;n&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:n,to:!n}),t.exitFullscreen()),i&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:i,to:!i}),t.exitCssFullscreen())}},{key:"handleKeyCode",value:function(e,t){var n=this;Object.keys(this.keyCodeMap).map((function(i){var r=n.keyCodeMap[i],o=r.action,a=r.keyCode,s=r.disable;a!==e||s||("function"==typeof o?o(t,n.player):"string"==typeof o&&"function"==typeof n[o]&&n[o](t,n.player),n.emit(vb,f({key:i,target:t.target},n.keyCodeMap[i])))}))}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),n}();function OC(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">\n  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>\n</svg>\n',"image/svg+xml").firstChild}var DC=function(e){m(n,Zb);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"registerIcons",value:function(){return{loadingIcon:OC}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:Xb.ROOT}}}]),n}(),NC=Er,MC=bo.findIndex,FC=Zo,UC="findIndex",HC=!0;UC in[]&&Array(1)[UC]((function(){HC=!1})),NC({target:"Array",proto:!0,forced:HC},{findIndex:function(e){return MC(this,e,arguments.length>1?arguments[1]:void 0)}}),FC(UC);var jC=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],BC=function(){function e(t){p(this,e),this.fragments=t.fragments||[],this.focusClass="inner-focus",this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0}return v(e,[{key:"updateDuration",value:function(e){var t=this;this.duration=parseInt(1e3*e);var n=0,i=this.fragments;this.fragments=i.map((function(e){return e.start=n,e.end=n+e.percent*t.duration,e.duration=e.percent*t.duration,n+=e.percent*t.duration,e}))}},{key:"updateProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,i=this.fragments,r=t.newIndex,o=t.curIndex,a=t.millisecond;r!==o&&n.map((function(t,n){n<r?t[e].style.width="100%":n>r&&(t[e].style.width=0)}));var s=i[r],l=0===a?0:(a-s.start)/s.duration;n[r][e].style.width=l<0?0:"".concat(100*l,"%")}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(t)}var n=this.playedIndex,i=this.cachedIndex;if("Undefined"!==Ck.typeOf(e.played)){var r=this.findIndex(1e3*e.played,n);this.updateProgress("played",{newIndex:r,curIndex:n,millisecond:parseInt(1e3*e.played,10)}),this.playedIndex=r}if("Undefined"!==Ck.typeOf(e.cached)){var o=this.findIndex(1e3*e.cached,i);this.updateProgress("cached",{newIndex:o,curIndex:i,millisecond:parseInt(1e3*e.cached,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(e,t){var n=this.fragments;return 1===n.length?0:(e>n[t].start&&e<n[t].end||this.fragments.map((function(n,i){e>n.start&&e<=n.end&&(t=i)})),t)}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(Ck.hasClass(e[t],this.focusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)Ck.removeClass(e[t],this.focusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return Ck.addClass(t[e],this.focusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"render",value:function(){var e=this,t=this.style.progressColor;return this.root=Ck.createDom("xg-inners","",{},"progress-list"),this.fragments&&(this.progressList=this.fragments.map((function(n){var i=Ck.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(n.percent):"flex: ".concat(n.percent)},"".concat(n.isFocus?"inner-focus":""," xgplayer-progress-inner"));return e.root.appendChild(i),jC.map((function(t){i.appendChild(Ck.createDom(t.tag,"",{style:t.styleKey?"background: ".concat(e.style[t.styleKey],"; width:0;"):"width:0;"},t.className))})),{cached:i.children[0],played:i.children[1]}}))),this.root}}]),e}(),GC=function(e){m(n,Zb);var t=_(n);function n(e){var i;return p(this,n),y(w(i=t.call(this,e)),"onMoveOnly",(function(e){var t=w(i),n=t.pos,r=t.config,o=t.player;Ck.event(e);var a=Ck.getEventPos(e,o.zoom),s=90===o.rotateDeg?a.clientY:a.clientX;if(!(n.moving&&Math.abs(n.x-s)<r.miniMoveStep)){n.moving=!0,n.x=s;var l=i.computeTime(e);i.triggerCallbacks("dragmove",l,e)}})),y(w(i),"onBodyClick",(function(e){e.preventDefault(),e.stopPropagation()})),y(w(i),"_mouseDownHandler",(function(e,t){i._state.time=t.currentTime,i.updateWidth(t.currentTime,t.percent,0)})),y(w(i),"_mouseUpHandler",(function(e,t){w(i).pos.moving&&i.updateWidth(t.currentTime,t.percent,2)})),y(w(i),"_mouseMoveHandler",(function(e,t){var n=w(i),r=n._state,o=n.pos,a=n.config,s=n.player;r.time<t.currentTime?t.forward=!0:t.forward=!1,r.time=t.currentTime,o.isDown&&!o.moving&&(o.moving=!0,a.isPauseMoving&&s.pause(),i.triggerCallbacks("dragstart",t,e)),i.updateWidth(t.currentTime,t.percent,1),i.triggerCallbacks("dragmove",t,e)})),y(w(i),"onMouseDown",(function(e){var t=w(i),n=t.player,r=t.pos,o=t.config,a=t.playerConfig,s=Ck.getEventPos(e,n.zoom),l=90===n.rotateDeg?s.clientY:s.clientX;if(!(n.isMini||o.closeMoveSeek||!a.allowSeekAfterEnded&&n.ended)){e.stopPropagation(),i.focus(),Ck.checkIsFunction(a.disableSwipeHandler)&&a.disableSwipeHandler(),Ck.checkIsFunction(o.onMoveStart)&&o.onMoveStart(),Ck.event(e),r.x=l,r.isDown=!0,r.moving=!1,n.focus({autoHide:!1}),i.isProgressMoving=!0,Ck.addClass(i.progressBtn,"active");var u=i.computeTime(e);return i._mouseDownHandlerHook(e,u),"touch"===i.domEventType?(i.root.addEventListener("touchmove",i.onMouseMove),i.root.addEventListener("touchend",i.onMouseUp)):(i.unbind("mousemove",i.onMoveOnly),document.addEventListener("mousemove",i.onMouseMove,!1),document.addEventListener("mouseup",i.onMouseUp,!1),n.root.addEventListener("click",i.onBodyClick,!1)),!0}})),y(w(i),"onMouseUp",(function(e){var t=w(i),n=t.player,r=t.config,o=t.pos,a=t.playerConfig,s=t._state;e.stopPropagation(),e.preventDefault(),Ck.checkIsFunction(a.enableSwipeHandler)&&a.enableSwipeHandler(),Ck.checkIsFunction(r.onMoveEnd)&&r.onMoveEnd(),Ck.event(e),Ck.removeClass(i.progressBtn,"active");var l=i.computeTime(e);o.moving?i.triggerCallbacks("dragend",l,e):i.triggerCallbacks("click",l,e),i._mouseUpHandlerHook(e,l),o.moving=!1,o.isDown=!1,o.x=0,o.y=0,s.time=0,"touch"===i.domEventType?(i.root.removeEventListener("touchmove",i.onMouseMove),i.root.removeEventListener("touchend",i.onMouseUp),i.blur()):(document.removeEventListener("mousemove",i.onMouseMove,!1),document.removeEventListener("mouseup",i.onMouseUp,!1),n.root.removeEventListener("click",i.onBodyClick,!1),o.isEnter?"mobile"!==a.isMobileSimulateMode&&i.bind("mousemove",i.onMoveOnly):i.onMouseLeave(e)),Ck.setTimeout(w(i),(function(){i.resetSeekState()}),10),n.focus()})),y(w(i),"onMouseMove",(function(e){var t=w(i),n=t.pos,r=t.player,o=t.config;Ck.checkTouchSupport()&&e.preventDefault(),Ck.event(e);var a=Ck.getEventPos(e,r.zoom),s=90===r.rotateDeg?a.clientY:a.clientX,l=Math.abs(n.x-s);if(!(n.moving&&l<o.miniMoveStep||!n.moving&&l<o.miniStartStep)){n.x=s;var u=i.computeTime(e);i._mouseMoveHandlerHook(e,u)}})),y(w(i),"onMouseOut",(function(e){i.triggerCallbacks("mouseout",null,e)})),y(w(i),"onMouseOver",(function(e){i.triggerCallbacks("mouseover",null,e)})),y(w(i),"onMouseEnter",(function(e){var t=w(i),n=t.player,r=t.pos;i.triggerCallbacks("mouseenter",null,e),r.isDown||r.isEnter||n.isMini||!n.config.allowSeekAfterEnded&&n.ended||(r.isEnter=!0,i.bind("mousemove",i.onMoveOnly),i.bind("mouseleave",i.onMouseLeave),i.focus())})),y(w(i),"onMouseLeave",(function(e){i.triggerCallbacks("mouseleave",null,e);var t=w(i),n=t.player,r=t.pos;r.isEnter=!1,n.isMini||(i.unbind("mousemove",i.onMoveOnly),r.isDown?i.unbind("mouseleave",i.onMouseLeave):i.blur())})),i.useable=!1,i.isProgressMoving=!1,i.__dragCallBacks=[],i._state={now:-1,direc:0,time:0},i._disableBlur=!1,i}return v(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=e}},{key:"createInner",value:function(){var e=this;this.innerList=new BC({fragments:this.config.fragments,style:this.playerConfig.commonStyle||{}}),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map((function(t){e[t]=e.innerList[t].bind(e.innerList)}))}},{key:"afterCreate",value:function(){var e=this;this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer"),this.createInner(),"mobile"===Pk.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(Gk,(function(){e.onMouseLeave()})),this.on(Hk,(function(){e.onTimeupdate()})),this.on(Uk,(function(){e.onTimeupdate(),e.onCacheUpdate()})),this.on(zk,(function(){e.onCacheUpdate()})),this.on(Dk,(function(){e.onCacheUpdate(),e._state.now=0})),this.on(Xk,(function(){e.onReset()})),this.bindDomEvents(),this.initCustomStyle())}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle.sliderBtnStyle,t=this.progressBtn;e&&("string"==typeof e?t.style.boxShadow=e:"object"===d(e)&&Object.keys(e).map((function(n){t.style[n]=e[n]})))}},{key:"triggerCallbacks",value:function(e,t,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map((function(i){if(i&&i.handler&&i.type===e)try{i.handler(t,n)}catch(sP){console.error("[XGPLAYER][triggerCallbacks] ".concat(i," error"),sP)}}))}},{key:"addCallBack",value:function(e,t){t&&"function"==typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"removeCallBack",value:function(e,t){var n=this.__dragCallBacks,i=-1;n.map((function(n,r){n&&n.type===e&&n.handler===t&&(i=r)})),i>-1&&n.splice(i,1)}},{key:"bindDomEvents",value:function(){var e=this.player,t=e.controls,n=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"===this.domEventType?(this.root.addEventListener("touchstart",this.onMouseDown),t&&(t.root&&t.root.addEventListener("touchmove",Ck.stopPropagation),t.center&&t.center.addEventListener("touchend",Ck.stopPropagation))):(this.bind("mousedown",this.onMouseDown),"mobile"!==n.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut))}},{key:"focus",value:function(){Ck.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),Ck.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,t,n){var i=this.config,r=this.player;if(!i.isCloseClickSeek||0!==n){var o=e>=r.duration?r.duration-i.endedDiff:Number(e).toFixed(1);this.updatePercent(t),this.updateTime(e),(1!==n||i.isDragingSeek&&"audio"!==r.config.mediaType)&&(this._state.now=o,this._state.direc=o>r.currentTime?0:1,r.seek(o))}}},{key:"computeTime",value:function(e){var t,n,i,r=this.player,o=this.root.getBoundingClientRect(),a=o.width,s=o.height,l=o.top,u=o.left,c=Ck.getEventPos(e,r.zoom);90===r.rotateDeg?(t=s,n=l,i=c.clientY):(t=a,n=u,i=c.clientX);var h=i-n,f=(h=h>t?t:h<0?0:h)/t;return{percent:f=f<0?0:f>1?1:f,currentTime:parseInt(f*this.duration*1e3,10)/1e3,offset:h,width:t,left:n,e:e}}},{key:"updateTime",value:function(e){var t=this.player,n=this.duration;e>n?e=n:e<0&&(e=0);var i=t.plugins.time;i&&i.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(100*e,"%"),this.innerList.update({played:e*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(){var e=this.player,t=this._state,n=this.duration;if(!(e.isSeeking||this.isProgressMoving||e.state<mw.RUNNING)){if(t.now>-1){var i=parseInt(1e3*t.now,10)-parseInt(1e3*e.currentTime,10);if(0===t.direc&&i>300||1===t.direc&&i>-300)return void(t.now=-1);t.now=-1}var r=this.timeOffset+e.currentTime;this.innerList.update({played:r},n),this.progressBtn.style.left="".concat(r/n*100,"%");var o=this.player.plugins.miniprogress;o&&o.update({played:r},n)}}},{key:"onCacheUpdate",value:function(){var e=this.player,t=this.duration,n=e.bufferedPoint;this.innerList.update({cached:n.end},t);var i=this.player.plugins.miniprogress;i&&i.update({cached:n.end},t)}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,t=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,"touch"===this.domEventType?(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),t&&(t.root&&t.root.removeEventListener("touchmove",Ck.stopPropagation),t.center&&t.center.removeEventListener("touchend",Ck.stopPropagation))):(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}}]),n}(),VC=function(e){m(n,Zb);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"_onMouseenter",(function(t){e.emit("icon_mouseenter",{pluginName:e.pluginName})})),y(w(e),"_onMouseLeave",(function(t){e.emit("icon_mouseleave",{pluginName:e.pluginName})})),e}return v(n,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave)}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),n}(),WC=function(e){m(n,VC);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"afterCreate",value:function(){var e=this;x(k(n.prototype),"afterCreate",this).call(this);var t=this.player;this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(Nk,(function(){e.animate(t.paused)})),this.on(Rk,(function(){e.animate(t.paused)})),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:Iw,class:"xg-icon-play"},pause:{icon:Lw,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t.paused,to:!t.paused}),t.ended?t.replay():t.paused?(t.play(),this.animate(!1)):(t.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){var t=this.i18nKeys;e?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),t.PLAY_TIPS)):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),t.PAUSE_TIPS))}},{key:"destroy",value:function(){x(k(n.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_LEFT,index:0,disable:!1}}}]),n}();function KC(){return(new DOMParser).parseFromString('<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',"image/svg+xml").firstChild}var zC=function(e){m(n,Zb);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(t){t.preventDefault(),t.stopPropagation(),e.config.onClick(t)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:KC,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){Ck.addClass(this.root,"show")}},{key:"hide",value:function(){Ck.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:Xb.ROOT_TOP,index:0}}}]),n}();function YC(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',"image/svg+xml").firstChild}function XC(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',"image/svg+xml").firstChild}var qC=function(e){m(n,VC);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"_onOrientationChange",(function(t){e.player.fullscreen&&e.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?e.player.setRotateDeg(0):e.player.setRotateDeg(90))})),e}return v(n,[{key:"afterCreate",value:function(){var e=this;x(k(n.prototype),"afterCreate",this).call(this);var t=this.config,i=this.playerConfig;if(!t.disable){t.target&&(this.playerConfig.fullscreenTarget=this.config.target);var r=Ck.getFullScreenEl();i.fullscreenTarget===r&&this.player.getFullscreen().catch((function(e){})),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(t){var n=e.player.fullscreen;e.emitUserAction(t,"switch_fullscreen",{prop:"fullscreen",from:n,to:!n})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(ab,(function(t){e.changeLangTextKey(e.find(".xg-tips"),t?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(t)})),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:zC,options:{config:{onClick:function(t){e.handleFullscreen(t)}}}})),"mobile"===Pk.device&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:YC,class:"xg-get-fullscreen"},exitFullscreen:{icon:XC,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){x(k(n.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon","mobile"===Pk.device?"touchend":"click",this.handleFullscreen),"mobile"===Pk.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this.player,n=this.config;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(t.fullscreen?t.exitCssFullscreen():t.getCssFullscreen(),this.animate(t.fullscreen)):n.rotateFullscreen?(t.fullscreen?t.exitRotateFullscreen():t.getRotateFullscreen(),this.animate(t.fullscreen)):n.switchCallback&&"function"==typeof n.switchCallback?n.switchCallback(t.fullscreen):t.fullscreen?t.exitFullscreen():t.getFullscreen().catch((function(e){}))}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){x(k(n.prototype),"show",this).call(this)}},{key:"hide",value:function(){x(k(n.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),n}(),$C=function(e){m(n,Zb);var t=_(n);function n(e){var i;return p(this,n),(i=t.call(this,e)).isActiving=!1,i}return v(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(Gk,(function(){e.onTimeUpdate()})),this.on(Hk,(function(){e.onTimeUpdate()})),this.on(Xk,(function(){e.onReset()})))}},{key:"show",value:function(){"flex"!==this.mode&&x(k(n.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(){var e=this.player;if(!(this.config.disable||this.isActiving||e.state<mw.RUNNING&&e.state!==mw.ATTACHED)){var t=this.currentTime+this.timeOffset;"flex"===this.mode?(this.centerCurDom.innerHTML=Ck.format(t),this.duration!==1/0&&this.duration>0&&(this.centerDurDom.innerHTML=Ck.format(this.duration))):(this.timeDom.innerHTML=Ck.format(t),this.duration!==1/0&&this.duration>0&&(this.durationDom.innerHTML=Ck.format(this.duration)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=Ck.format(0),this.centerDurDom.innerHTML=Ck.format(0)):(this.timeDom.innerHTML=Ck.format(0),this.durationDom.innerHTML=Ck.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(e.controls&&e.controls.center){var t=e.controls.center;this.centerCurDom=Ck.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=Ck.createDom("xg-icon","00:00",{},"xgplayer-time right"),t.children.length>0?t.insertBefore(this.centerCurDom,t.children[0]):t.appendChild(this.centerCurDom),t.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;this.duration===1/0||this.playerConfig.isLive?(Ck.hide(this.durationDom),Ck.hide(this.timeDom),Ck.hide(this.find(".time-separator")),Ck.show(this.find(".time-live-tag"))):Ck.hide(this.find(".time-live-tag")),e.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(e){e?(Ck.hide(this.durationDom),Ck.hide(this.timeDom),Ck.hide(this.find(".time-separator")),Ck.show(this.find(".time-live-tag"))):(Ck.hide(this.find(".time-live-tag")),Ck.show(this.find(".time-separator")),Ck.show(this.durationDom),Ck.show(this.timeDom))}},{key:"updateTime",value:function(e){this.isActiving=!0,!e&&0!==e||e>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=Ck.format(e):this.centerCurDom.innerHTML=Ck.format(e))}},{key:"resetActive",value:function(){var e=this,t=this.player,n=function(){e.isActiving=!1};this.off(Uk,n),t.isSeeking?this.once(Uk,n):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_LEFT,index:2,disable:!1}}}]),n}();function JC(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function ZC(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function QC(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',"image/svg+xml").firstChild}var e_=function(e){m(n,Zb);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"onBarMousedown",(function(t){var n=w(e).player,i=e.find(".xgplayer-bar");Ck.event(t);var r=i.getBoundingClientRect(),o=Ck.getEventPos(t,n.zoom),a=r.height-(o.clientY-r.top);if(o.h=a,o.barH=r.height,e.pos=o,!(a<-2))return e.updateVolumePos(a,t),document.addEventListener("mouseup",e.onBarMouseUp),e.isStart=!0,!1})),y(w(e),"onBarMouseMove",(function(t){if(e.isStart){var n=w(e),i=n.pos,r=n.player;t.preventDefault(),t.stopPropagation(),Ck.event(t);var o=Ck.getEventPos(t,r.zoom);e.isMoving=!0;var a=i.h-o.clientY+i.clientY;a>i.barH||e.updateVolumePos(a,t)}})),y(w(e),"onBarMouseUp",(function(t){Ck.event(t),document.removeEventListener("mouseup",e.onBarMouseUp),e.isStart=!1,e.isMoving=!1})),y(w(e),"onMouseenter",(function(t){e._timerId&&(Ck.clearTimeout(w(e),e._timerId),e._timerId=null),Ck.addClass(e.root,"slide-show"),e.emit("icon_mouseenter",{pluginName:e.pluginName})})),y(w(e),"onMouseleave",(function(t){e._timerId&&(Ck.clearTimeout(w(e),e._timerId),e._timerId=null),e._timerId=Ck.setTimeout(w(e),(function(){Ck.removeClass(e.root,"slide-show"),e.isStart&&e.onBarMouseUp(t),e._timerId=null}),100),e.emit("icon_mouseleave",{pluginName:e.pluginName})})),y(w(e),"onVolumeChange",(function(t){if(e.player){var n=e.player,i=n.muted,r=n.volume;e.isMoving||(e.find(".xgplayer-drag").style.height=i||0===r?"4px":"".concat(100*r,"%"),e.config.showValueLabel&&e.updateVolumeValue()),e.animate(i,r)}})),e}return v(n,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:ZC,class:"xg-volume-small"},volumeLarge:{icon:JC,class:"xg-volume"},volumeMuted:{icon:QC,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,!this.config.disable){this.initIcons();var t=this.playerConfig,n=t.commonStyle,i=t.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("mutedChange",(function(t){e.changeMuted(t)}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),"mobile"!==Pk.device&&"mobile"!==this.playerConfig.isMobileSimulateMode&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(Vk,this.onVolumeChange),this.once(Wk,this.onVolumeChange),"Number"!==Ck.typeOf(i)&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,t){var n=this.player,i=this.find(".xgplayer-drag"),r=this.find(".xgplayer-bar");if(r&&i){var o=parseInt(e/r.getBoundingClientRect().height*1e3,10);i.style.height="".concat(e,"px");var a=Math.max(Math.min(o/1e3,1),0),s={volume:{from:n.volume,to:a}};n.muted&&(s.muted={from:!0,to:!1}),this.emitUserAction(t,"change_volume",{muted:n.muted,volume:n.volume,props:s}),n.volume=Math.max(Math.min(o/1e3,1),0),n.muted&&(n.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,t=e.volume,n=e.muted,i=this.find(".xgplayer-value-label"),r=Math.max(Math.min(t,1),0);i.innerText=n?0:Math.ceil(100*r)}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var t=this.player;this.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:t.muted,volume:t.volume,props:{muted:{from:t.muted,to:!t.muted}}}),t.volume>0&&(t.muted=!t.muted),t.volume<.01&&(t.volume=this.config.miniVolume)}},{key:"animate",value:function(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===Pk.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,t=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(t?'<div class="xgplayer-value-label">'.concat(100*e,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*e,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),n}();function t_(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',"image/svg+xml").firstChild}var n_=function(e){m(n,VC);var t=_(n);function n(e){var i;return p(this,n),(i=t.call(this,e)).rotateDeg=i.config.rotateDeg||0,i}return v(n,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(x(k(n.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(hb,(function(){e.rotateDeg&&Ck.setTimeout(e,(function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)}),100)})),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){x(k(n.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,t){var n=this.player;e||(e=0);var i=this.player,r=i.root,o=i.innerContainer,a=this.player.media,s=r.offsetWidth,l=o&&t?o.offsetHeight:r.offsetHeight,u="100%",c="100%",h=0,f=0;.75!==e&&.25!==e||(u="".concat(l,"px"),c="".concat(s,"px"),h=-(l-s)/2,f=-(s-l)/2);var d="translate(".concat(h,"px,").concat(f,"px) rotate(").concat(e,"turn)"),p={transformOrigin:"center center",transform:d,webKitTransform:d,height:c,width:u},g=t?a:r,v=t?n.getPlugin("poster"):null;Object.keys(p).map((function(e){g.style[e]=p[e],v&&v.root&&(v.root.style[e]=p[e])}))}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.player;this.rotateDeg||(this.rotateDeg=0);var r=e?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*r*n)%1,this.updateRotateDeg(this.rotateDeg,t),i.emit(db,360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:t_}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.ROTATE_TIPS,'">\n      ').concat(this.i18n.ROTATE_TIPS,"\n      </div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),n}();function i_(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function r_(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}var o_="picture-in-picture",a_="inline",s_="fullscreen",l_=function(e){m(n,VC);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"switchPIP",(function(t){if(!e.isPIPAvailable())return!1;t.stopPropagation(),e.isPip?(e.exitPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!0,to:!1}),e.setAttr("data-state","normal")):4===e.player.media.readyState&&(e.requestPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!1,to:!0}),e.setAttr("data-state","pip"))})),e}return v(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(x(k(n.prototype),"afterCreate",this).call(this),this.pMode=a_,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(tb,(function(){e.config.showIcon&&(Ck.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))})))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:i_,class:"xg-get-pip"},pipIconExit:{icon:r_,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,t=this.player;this.leavePIPCallback=function(){var n=t.paused;Ck.setTimeout(e,(function(){!n&&t.mediaPlay()}),0),!n&&t.mediaPlay(),e.setAttr("data-state","normal"),t.emit(fb,!1)},this.enterPIPCallback=function(n){t.emit(fb,!0),e.pipWindow=n.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var i=t.media.webkitPresentationMode;e.pMode===s_&&i!==s_&&t.onFullscreenChange(null,!1),e.pMode=i,i===o_?e.enterPIPCallback(n):i===a_&&e.leavePIPCallback(n)},t.media&&(t.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),t.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(t.media)&&t.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,t=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var i=t.poster;return i&&(e.media.poster="String"===Ck.typeOf(i)?i:i.poster),n.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("picture-in-picture"):e.media.requestPictureInPicture(),!0}catch(r){return console.error("requestPiP",r),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(n.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(t){return console.error("exitPIP",t),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.media||e.media.webkitPresentationMode===o_}},{key:"isPIPAvailable",value:function(){var e=this.player.media;return("Boolean"!==Ck.typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled)&&("Boolean"===Ck.typeOf(e.disablePictureInPicture)&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&"Function"===Ck.typeOf(e.webkitSetPresentationMode))}},{key:"destroy",value:function(){x(k(n.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return"function"==typeof e.webkitSetPresentationMode}}]),n}();function u_(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',"image/svg+xml").firstChild}var c_=function(e){m(n,Zb);var t=_(n);function n(e){var i;return p(this,n),y(w(i=t.call(this,e)),"playNext",(function(e){var t=w(i).player;e.preventDefault(),e.stopPropagation(),i.idx+1<i.config.urlList.length?(i.idx++,i.nextHandler(i.config.urlList[i.idx],i.idx),t.emit(gb,i.idx+1)):(i.nextHandler(),t.emit(gb))})),i.idx=-1,i}return v(n,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:u_}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e="mobile"===Pk.device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var t=this.player;e&&(t.pause(),t.currentTime=0,t.switchURL?t.switchURL(e):t.src=e,t.config.url=e,t.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">'.concat(this.i18n.PLAYNEXT_TIPS,"</div>\n     </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),n}(),h_={};({get exports(){return h_},set exports(e){h_=e}}).exports=function e(t,n,i){var r,o,a=window,s="application/octet-stream",l=i||s,u=t,c=!n&&!i&&u,h=document.createElement("a"),f=function(e){return String(e)},d=a.Blob||a.MozBlob||a.WebKitBlob||f,p=n||"download";if(d=d.call?d.bind(a):Blob,"true"===String(this)&&(l=(u=[u,l])[0],u=u[1]),c&&c.length<2048&&(p=c.split("/").pop().split("?")[0],h.href=c,-1!==h.href.indexOf(c))){var g=new XMLHttpRequest;return g.open("GET",c,!0),g.responseType="blob",g.onload=function(t){e(t.target.response,p,s)},setTimeout((function(){g.send()}),0),g}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u)){if(!(u.length>2096103.424&&d!==f))return navigator.msSaveBlob?
// IE10 can't do a[download], only Blobs:
navigator.msSaveBlob(k(u),p):b(u);l=(u=k(u)).type||s}else if(/([\x80-\xff])/.test(u)){for(var v=0,y=new Uint8Array(u.length),m=y.length;v<m;++v)y[v]=u.charCodeAt(v);u=new d([y],{type:l})}function k(e){for(var t=e.split(/[:;,]/),n=t[1],i=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=i.length,o=0,a=new Uint8Array(r);o<r;++o)a[o]=i.charCodeAt(o);return new d([a],{type:n})}function b(e,t){if("download"in h)return h.href=e,h.setAttribute("download",p),h.className="download-js-link",h.innerHTML="downloading...",h.style.display="none",document.body.appendChild(h),setTimeout((function(){h.click(),document.body.removeChild(h),!0===t&&setTimeout((function(){a.URL.revokeObjectURL(h.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),n.src=e,setTimeout((function(){document.body.removeChild(n)}),333)}if(r=u instanceof d?u:new d([u],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(r,p);if(a.URL)b(a.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===f)try{return b("data:"+l+";base64,"+a.btoa(r))}catch(w){return b("data:"+l+","+encodeURIComponent(r))}(o=new FileReader).onload=function(e){b(this.result)},o.readAsDataURL(r)}return!0};const f_=h_;function d_(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',"image/svg+xml").firstChild}var p_=function(e){m(n,VC);var t=_(n);function n(e){var i;return p(this,n),y(w(i=t.call(this,e)),"download",(function(e){if(!i.isLock){i.emitUserAction(e,"download");var t=i.getAbsoluteURL(i.player.src);f_(t),i.isLock=!0,i.timer=window.setTimeout((function(){i.isLock=!1,window.clearTimeout(i.timer),i.timer=null}),300)}})),i.timer=null,i.isLock=!1,i}return v(n,[{key:"afterCreate",value:function(){x(k(n.prototype),"afterCreate",this).call(this),this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:d_}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'.concat(e,'">x</a>'),e=t.firstChild.href}return e}},{key:"destroy",value:function(){x(k(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   <div class="xg-tips" lang-key="'.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_RIGHT,index:3,disable:!0}}}]),n}(),g_=function(e){m(n,VC);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){x(k(n.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(t){e.fitVideo&&(e.width=t.vWidth,e.height=t.vHeight)},this.once(hb,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var n=document.createElement("a");n.href=e,n.download=t;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}},{key:"createCanvans",value:function(e,t){var n=document.createElement("canvas");this.canvasCtx=n.getContext("2d"),this.canvas=n,n.width=e||this.config.width,n.height=t||this.config.height}},{key:"onClickBtn",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then((function(e){t.emit(pb,e),t.saveScreenShot(e,t.config.name+t.config.format)}))}},{key:"shot",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},r=this.config,o=this.player,a=i.quality||r.quality,s=i.type||r.type;return new Promise((function(i,l){var u=null;o.media.canvas?u=o.media.canvas:(n.canvas?(n.canvas.width=e||r.width,n.canvas.height=t||r.height):n.createCanvans(e,t),n.canvasCtx.drawImage(o.media,0,0,e||r.width,t||r.height),u=n.canvas);var c=u.toDataURL(s,a).replace(s,"image/octet-stream");i(c=c.replace(/^data:image\/[^;]+/,"data:application/octet-stream"))}))}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){x(k(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(hb,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",t="SCREENSHOT";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(e,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</span>")," \n      </div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),n}(),v_=function(){function e(t){p(this,e),this.config=t.config,this.parent=t.root,this.root=Ck.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),t.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n="mobile"===Pk.device?"touchend":"click";this._delegates=Zb.delegate.call(this,this.root,"li",n,this.onItemClick)}return v(e,[{key:"renderItemList",value:function(e){var t=this,n=this.config,i=this.root;e?n.data=e:e=n.data,n.style&&Object.keys(n.style).map((function(e){i.style[e]=n[e]})),e.length>0&&(this.attrKeys=Object.keys(e[0])),this.root.innerHTML="",e.map((function(e,n){var i=e.selected?"option-item selected":"option-item";e["data-index"]=n,t.root.appendChild(Ck.createDom("li","<span>".concat(e.showText,"</span>"),e,i))}))}},{key:"onItemClick",value:function(e){e.delegateTarget||(e.delegateTarget=e.target);var t=e.delegateTarget;if(t&&Ck.hasClass(t,"selected"))return!1;var n="function"==typeof this.config.onItemClick?this.config.onItemClick:null,i=this.root.querySelector(".selected");Ck.addClass(t,"selected"),i&&Ck.removeClass(i,"selected"),n(e,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(e,t){if(!e||!t)return{};var n={};t.map((function(t){n[t]=e.getAttribute(t)}));var i=e.getAttribute("data-index");return i&&(n.index=Number(i)),n}},{key:"show",value:function(){Ck.removeClass(this.root,"hide"),Ck.addClass(this.root,"active")}},{key:"hide",value:function(){Ck.removeClass(this.root,"active"),Ck.addClass(this.root,"hide")}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map((function(e){e.destroy&&e.destroy()})),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),e}(),y_="mobile"===Pk.device,m_=function(e){m(n,Zb);var t=_(n);function n(e){var i;return p(this,n),y(w(i=t.call(this,e)),"onEnter",(function(e){e.preventDefault(),e.stopPropagation(),i.emit("icon_mouseenter",{pluginName:i.pluginName}),i.onToggle(!0)})),y(w(i),"onLeave",(function(e){e.preventDefault(),e.stopPropagation(),i.emit("icon_mouseleave",{pluginName:i.pluginName}),i.isActive&&i.onToggle(!1)})),i.isIcons=!1,i.isActive=!1,i.curValue=null,i.curIndex=0,i}return v(n,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,t=this.config;this.initIcons(),y_&&"middle"!==t.listType&&(t.listType="rightSide"),t.hidePortrait&&Ck.addClass(this.root,"portrait"),this.once(Bk,(function(){t.list&&t.list.length>0&&(e.renderItemList(t.list),e.show())})),y_&&this.on(qk,(function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)})),this.activeEvent=y_?"touchend":"mouseenter",this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,t=this.icons,n=Object.keys(t),i=!1;n.length>0&&(n.forEach((function(n){e.appendChild(".xgplayer-icon",t[n]),!i&&(i=t[n])})),this.isIcons=i),i||(this.appendChild(".xgplayer-icon",Ck.createDom("span","",{},"icon-text")),Ck.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||Ck.addClass(this.root,"show")}},{key:"hide",value:function(){Ck.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,t,n){if(void 0===e)return"";var i=this.config.list;!n&&(n=this.player.lang),t=!t||Ck.isUndefined(e[t])?"text":t,"number"==typeof e&&(e=i[e]);try{return"object"===d(e[t])?e[t][n]||e[t].zh:e[t]}catch(r){return console.warn(r),""}}},{key:"onToggle",value:function(e){if(e!==this.isActive){var t=this.player.controls,n=this.config.listType;e?("rightSide"===n?t.blur():t.focus(),this.optionsList&&this.optionsList.show()):("rightSide"===n?t.focus():t.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,t){e.preventDefault(),e.stopPropagation();var n=this.config,i=n.listType,r=n.list;(y_||"rightSide"===i)&&this.onToggle(!1),this.curIndex=t.to.index,this.curItem=r[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,t=e[this.curIndex<e.length?this.curIndex:0];t&&(this.find(".icon-text").innerHTML=this.getTextByLang(t,"iconText"))}}},{key:"renderItemList",value:function(e,t){var n=this,i=this.config,r=this.optionsList,o=this.player;if("number"==typeof t&&(this.curIndex=t,this.curItem=i.list[t]),r)return r.renderItemList(e),void this.changeCurrentText();var a={config:{data:e||[],className:"rightSide"===i.listType?"right-side":"",onItemClick:function(e,t){n.onItemClick(e,t)}},root:"rightSide"===i.listType?o.root:this.root};this.config.isShowIcon&&(this.optionsList=new v_(a),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon">\n    </div>\n   </xg-icon>')}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}]),n}(),k_=function(e){m(n,m_);var t=_(n);function n(e){var i;return p(this,n),(i=t.call(this,e)).curTime=0,i.isPaused=!0,i}return v(n,[{key:"beforeCreate",value:function(e){var t=e.config.list;Array.isArray(t)&&t.length>0&&(e.config.list=t.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})))}},{key:"afterCreate",value:function(){var e=this;x(k(n.prototype),"afterCreate",this).call(this),this.on("resourceReady",(function(t){e.changeDefinitionList(t)})),this.on(ub,(function(t){e.renderItemList(e.config.list,t.to)})),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||Ck.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,t=e.list,n=e.defaultDefinition;if(t.length>0){var i=null;t.map((function(e){e.definition===n&&(i=e)})),i||(i=t[0]),this.changeDefinition(i)}}},{key:"renderItemList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.list||[],i=arguments.length>1?arguments[1]:void 0,r=i&&i.definition?i.definition:this.config.defaultDefinition;i&&t.forEach((function(e){e.selected=!1}));var o=0,a=t.map((function(t,n){var i={url:t.url,definition:t.definition||"",showText:e.getTextByLang(t)||t.definition,selected:!1};return(t.selected||t.definition&&t.definition===r)&&(i.selected=!0,o=n),i}));x(k(n.prototype),"renderItemList",this).call(this,a,o)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,t){this.player.changeDefinition(e,t)}},{key:"onItemClick",value:function(e,t){var i=this.player.definitionList;x(k(n.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:t.from,to:t.to});for(var r=0;r<i.length;r++)t.to&&i[r].definition===t.to.definition&&(t.to.url=i[r].url),t.from&&i[r].definition===t.from.definition&&(t.from.url=i[r].url);this.player.changeDefinition(t.to,t.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}]),n}(),b_=function(e){m(n,m_);var t=_(n);function n(e){var i;return p(this,n),(i=t.call(this,e)).curRate=1,i}return v(n,[{key:"beforeCreate",value:function(e){var t=e.player.config.playbackRate,n=t?Array.isArray(t)?t:e.config.list:[];Array.isArray(n)&&(e.config.list=n.map((function(e){return"number"==typeof e?e={rate:e,text:"".concat(e,"x")}:!e.text&&e.rate&&(e.text="".concat(e.rate,"x")),e})))}},{key:"afterCreate",value:function(){var e=this;x(k(n.prototype),"afterCreate",this).call(this),this.on(Kk,(function(){e.curValue!==e.player.playbackRate&&e.renderItemList()})),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&x(k(n.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,t){x(k(n.prototype),"onItemClick",this).apply(this,arguments);var i=e.delegateTarget,r=Number(i.getAttribute("rate"));if(!r||r===this.curValue)return!1;var o={playbackRate:{from:this.player.playbackRate,to:r}};this.emitUserAction(e,"change_rate",{props:o}),this.curValue=r,this.player.playbackRate=r}},{key:"renderItemList",value:function(){var e=this,t=this.player.playbackRate||1;this.curValue=t;var i=-1,r=this.config.list.map((function(n,r){var o={rate:n.rate};return o.rate===t&&(o.selected=!0,i=r),o.showText=e.getTextByLang(n),o}));x(k(n.prototype),"renderItemList",this).call(this,r,i)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,t=e[this.curIndex<e.length?this.curIndex:0],n="";n=!t||this.curIndex<0?"".concat(this.player.playbackRate,"x"):this.getTextByLang(t,"iconText"),this.find(".icon-text").innerHTML=n}}},{key:"destroy",value:function(){x(k(n.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}]),n}();function w_(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function C_(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var __=function(e){m(n,VC);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.cssFullscreen&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;x(k(n.prototype),"afterCreate",this).call(this),this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(sb,(function(t){e.animate(t)})),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e.cssFullscreen),t.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:t}),t?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var t=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),e?t.EXITCSSFULLSCREEN_TIPS:t.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:w_,class:"xg-get-cssfull"},exitCssFullscreen:{icon:C_,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){x(k(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class=\'xgplayer-cssfullscreen\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.CSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:Xb.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),n}(),x_=function(e){m(n,Zb);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(Bk,(function(){e.handleCanPlay()})),this.on(Mk,(function(t){e.onError(t)}))}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleCanPlay",value:function(){Ck.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.player,n=e.errorType,i=t.errorNote?this.i18n[t.errorNote]:"";if(!i)switch(n){case"decoder":i=this.i18n.MEDIA_ERR_DECODE;break;case"network":i=this.i18n.MEDIA_ERR_NETWORK;break;default:i=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=i,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),n}(),T_=function(e){m(n,Zb);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],(function(t){(e.config.onClick||e.customOnClick)&&(t.preventDefault(),t.stopPropagation(),e.customOnClick?e.customOnClick(t):e.config.onClick(t))})),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var t=this;Object.keys(e).map((function(n){t.root.style[n]=e[n]}))}},{key:"show",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){this.customOnClick=i;var r=this.config.interval;if(this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),Ck.addClass(this.root,"show"),"arrow"===n.mode&&Ck.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof e?e:"".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),n.style&&this.setStyle(n.style),"boolean"==typeof n.autoHide?n.autoHide:this.config.autoHide){var o=n.interval||r;this.intervalId=setTimeout((function(){t.hide()}),o)}}}},{key:"hide",value:function(){Ck.removeClass(this.root,"show"),Ck.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(cw.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),n}(),E_={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function S_(e){Object.keys(E_).map((function(t){void 0===e[t]&&(e[t]=E_[t])}))}var P_={_updateDotDom:function(e,t){if(t){var n=this.calcuPosition(e.time,e.duration),i=e.style||{};i.left="".concat(n.left,"%"),i.width="".concat(n.width,"%"),t.setAttribute("data-text",e.text),t.setAttribute("data-time",e.time),n.isMini?Ck.addClass(t,"mini"):Ck.removeClass(t,"mini"),Object.keys(i).map((function(e){t.style[e]=i[e]}))}},initDots:function(){var e=this;this._ispots.map((function(t){e.createDot(t,!1)})),this.ispotsInit=!0},createDot:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player.plugins.progress;if(n&&(t&&(S_(e),this._ispots.push(e)),this.ispotsInit||!t)){var i=this.calcuPosition(e.time,e.duration),r=e.style||{};r.left="".concat(i.left,"%"),r.width="".concat(i.width,"%");var o="xgspot_".concat(e.id," xgplayer-spot");i.isMini&&(o+=" mini");var a=Ck.createDom("xg-spot",e.template||"",{"data-text":e.text,"data-time":e.time,"data-id":e.id},o);Object.keys(r).map((function(e){a.style[e]=r[e]})),n.outer&&n.outer.appendChild(a)}},findDot:function(e){if(this.player.plugins.progress){var t=this._ispots.filter((function(t,n){return t.id===e}));return t.length>0?t[0]:null}},updateDot:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.plugins.progress;if(n){var i=this.findDot(e.id);if(i&&Object.keys(e).map((function(t){i[t]=e[t]})),this.ispotsInit){var r=n.find('xg-spot[data-id="'.concat(e.id,'"]'));r&&(this._updateDotDom(e,r),t&&this.showDot(e.id))}}},deleteDot:function(e){var t=this._ispots,n=this.player.plugins.progress;if(n){for(var i=[],r=0;r<t.length;r++)t[r].id===e&&i.push(r);for(var o=i.length-1;o>=0;o--)if(t.splice(i[o],1),this.ispotsInit){var a=n.find('xg-spot[data-id="'.concat(e,'"]'));a&&a.parentElement.removeChild(a)}}},deleteAllDots:function(){var e=this.player.plugins.progress;if(e)if(this.ispotsInit){for(var t=e.root.getElementsByTagName("xg-spot"),n=t.length-1;n>=0;n--)e.outer.removeChild(t[n]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.player.plugins.progress;if(n)if(this.ispotsInit){this._ispots=[];var i=n.root.getElementsByTagName("xg-spot"),r=i.length;if(r>t.length)for(var o=r-1;o>t.length-1;o--)n.outer.removeChild(i[o]);t.forEach((function(t,n){n<r?(i[n].setAttribute("data-id","".concat(t.id)),e._ispots.push(t),e.updateDot(t)):e.createDot(t)}))}else this._ispots=t},updateDuration:function(){var e=this,t=this.player.plugins.progress;t&&this._ispots.forEach((function(n){var i=t.find('xg-spot[data-id="'.concat(n.id,'"]'));e._updateDotDom(n,i)}))},getAllDotsDom:function(){var e=this.player.plugins.progress;return e?e.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(e){var t=this.player.plugins.progress;if(t)return t.find('xg-spot[data-id="'.concat(e,'"]'))}};var A_={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver"},I_=function(e){m(n,Zb);var t=_(n);function n(e){var i;return p(this,n),y(w(i=t.call(this,e)),"onMousemove",(function(e){i.config.disable||(i._state.f||Ck.hasClass(e.target,"xg-spot-content"))&&(Ck.event(e),e.stopPropagation())})),y(w(i),"onMousedown",(function(e){i.config.disable||(i._state.f||Ck.hasClass(e.target,"xg-spot-content"))&&(Ck.event(e),e.stopPropagation())})),y(w(i),"onMouseup",(function(e){if(i.isDrag){var t=i.player.plugins.progress;t&&t.pos&&(t.onMouseUp(e),!t.pos.isEnter&&t.onMouseLeave(e))}})),y(w(i),"onDotMouseLeave",(function(e){if(!i.config.disable){i._curDot.removeEventListener("mouseleave",i.onDotMouseLeave),i.blurDot(e.target),i._curDot=null;var t=i.player.plugins.progress;t&&t.enableBlur(),i.show()}})),y(w(i),"onProgressMouseOver",(function(e,t){if(!i.config.disable&&Ck.hasClass(t.target,"xgplayer-spot")&&!i._curDot){i._curDot=t.target,i.focusDot(t.target),i._curDot.children.length>0&&i.hide();var n=i.player.plugins.progress;n&&n.disableBlur(),i._curDot.addEventListener("mouseleave",i.onDotMouseLeave)}})),i._ispots=[],i.videoPreview=null,i.videothumbnail=null,i.thumbnail=null,i.timeStr="",i._state={now:0,f:!1},i}return v(n,[{key:"beforeCreate",value:function(e){var t=e.player.plugins.progress;t&&(e.root=t.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",(function(t,n){n.time&&e.player.seek(n.time)})),this.transformTimeHook=this.hook("transformTime",(function(t){e.setTimeContent(Ck.format(t))})),function(e){var t=e.config,n=e.player;Object.keys(P_).map((function(t){e[t]=P_[t].bind(e)}));var i=n.config.progressDot||t.ispots||[];e._ispots=i.map((function(e){return S_(e),e})),e.ispotsInit=!1,e.on(Gk,(function(){e.ispotsInit?e.updateDuration():e.initDots()}))}(this),this.config.disable&&this.disable()}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).map((function(n){t.config[n]=e[n]}))}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,t=this.player.plugins.progress;if(t&&(Object.keys(A_).map((function(n){e[A_[n]]=e[A_[n]].bind(e),t.addCallBack(n,e[A_[n]])})),"mobile"!==Pk.device)){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var n=this.hook("previewClick",(function(){}));this.handlerPreviewClick=function(t){t.stopPropagation(),n(parseInt(1e3*e._state.now,10)/1e3,t)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,t){!this.config.disable&&this.player.duration&&this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){!this.config.disable&&this.player.duration&&(this.isDrag=!0,this.videoPreview&&Ck.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){!this.config.disable&&this.player.duration&&(this.isDrag=!1,this.videoPreview&&Ck.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,t){if(!this.config.disable&&Ck.hasClass(t.target,"xgplayer-spot")){t.stopPropagation(),t.preventDefault();var n={};["time","id","text"].map((function(e){n[e]=t.target.getAttribute("data-".concat(e))})),n.time&&(n.time=Number(n.time)),this.handlerSpotClick(t,n)}}},{key:"updateLinePos",value:function(e,t){var n,i,r=this.root,o=this.previewLine,a=this.timePoint,s="flex"===this.player.controls.mode,l=r.getBoundingClientRect().width,u=a.getBoundingClientRect().width,c=e-l/2;c<0&&!s?(c=0,n=e-l/2,!this.thumbnail&&(i=e-l/2-u/2)):c>t-l&&!s?(n=c-(t-l),!this.thumbnail&&(i=c-(t-l)-u/2),c=t-l):!this.thumbnail&&(i=-u/2),o.style.transform=void 0!==n?"translateX(".concat(n,"px)"):"",a.style.transform=void 0!==i?"translateX(".concat(i,"px)"):"",r.style.transform="translateX(".concat(c,"px)")}},{key:"updateTimeText",value:function(e){var t=this.timeText,n=this.timePoint;t.textContent=e,!this.thumbnail&&(n.textContent=e)}},{key:"updatePosition",value:function(e,t,n,i){var r=this.root,o=this.config,a=this._state;if(r){this.updateLinePos(e,t),a.now=n,this.transformTimeHook(n);var s=this.timeStr;i&&i.target&&Ck.hasClass(i.target,"xgplayer-spot")?(this.showTips(i.target.getAttribute("data-text"),!1,s),this.focusDot(i.target),a.f=!0,o.isFocusDots&&a.f&&(a.now=parseInt(i.target.getAttribute("data-time"),10))):o.defaultText?(a.f=!1,this.showTips(o.defaultText,!0,s)):(a.f=!1,this.hideTips("")),this.updateTimeText(s),this.updateThumbnails(a.now)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var t=this.player,n=this.videoPreview,i=t.plugins.thumbnail;if(i&&i.usable){this.thumbnail&&i.update(this.thumbnail,e,160,90);var r=n&&n.getBoundingClientRect();this.videothumbnail&&i.update(this.videothumbnail,e,r.width,r.height)}}},{key:"changeThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==Pk.device){var t=this.player,n=this.config,i=t.getPlugin("thumbnail");if(i.changeConfig(e),i&&i.usable&&n.isShowThumbnail){Ck.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.thumbnail&&r.removeChild(this.thumbnail),this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=Ck.createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else{Ck.addClass(this.root,"short-line no-thumbnail");var o=this.find(".xg-spot-thumbnail");this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.thumbnail&&o.removeChild(this.thumbnail),this.videothumbnail=null,this.thumbnail=null,this._hasThumnail=!1}}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==Pk.device){var t=this.player,n=this.config,i=t.getPlugin("thumbnail");if(i&&i.setConfig(e),i&&i.usable&&n.isShowThumbnail){Ck.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=Ck.createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else Ck.addClass(this.root,"short-line no-thumbnail")}}},{key:"calcuPosition",value:function(e,t){var n=this.player.plugins.progress,i=this.player,r=n.root.getBoundingClientRect().width,o=i.duration/r*6;return e+t>i.duration&&(t=i.duration-e),i.duration,i.duration,{left:e/i.duration*100,width:t/i.duration*100,isMini:t<o}}},{key:"showDot",value:function(e){var t=this.findDot(e);if(t){var n=this.root.getBoundingClientRect().width,i=t.time/this.player.duration*n;this.updatePosition(i,n,t.time)}}},{key:"focusDot",value:function(e,t){e&&(t||(t=e.getAttribute("data-id")),Ck.addClass(e,"active"),this._activeDotId=t)}},{key:"blurDot",value:function(e){if(!e){var t=this._activeDotId;e=this.getDotDom(t)}e&&(Ck.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Ck.addClass(this.root,"no-timepoint"),e&&(Ck.addClass(this.find(".xg-spot-content"),"show-text"),t&&"production"===this.config.mode?(Ck.addClass(this.root,"product"),this.tipText.textContent=e):(Ck.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(n," ").concat(e)))}},{key:"hideTips",value:function(){Ck.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",Ck.removeClass(this.find(".xg-spot-content"),"show-text"),Ck.removeClass(this.root,"product")}},{key:"hide",value:function(){Ck.addClass(this.root,"hide")}},{key:"show",value:function(){Ck.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,t=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(t.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,t=this.player.plugins.progress;t&&Object.keys(A_).map((function(n){t.removeCallBack(n,e[A_[n]])})),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===Pk.device||"mobile"===this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1}}}]),n}(),L_=function(e){m(n,Zb);var t=_(n);function n(e){var i;return p(this,n),(i=t.call(this,e)).ratio=1,i.interval=-1,i.preloadMark={},i}return v(n,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([Gk],(function(){var t=e.config,n=t.pic_num,i=t.interval;e.usable&&(e.interval=i>0?i:Math.round(1e3*e.player.duration/n)/1e3)}))}},{key:"setConfig",value:function(e){var t=this;e&&(Object.keys(e).map((function(n){t.config[n]=e[n]})),this.usable&&this.initThumbnail())}},{key:"usable",get:function(){var e=this.config,t=e.urls,n=e.pic_num;return t&&t.length>0&&n>0}},{key:"initThumbnail",value:function(){var e=this.config,t=e.width,n=e.height,i=e.pic_num,r=e.interval;this.ratio=t/n*100,this.interval=r>0?r:Math.round(1e3*this.player.duration/i)/1e3,this.preload(0)}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var t=this,n=this.config.urls,i=n.length;[e-1,e,e+1,e+2].map((function(e){!t.preloadMark[e]&&e>=0&&e<i&&(Ck.preloadImg(n[e]),t.preloadMark[e]=!0)}))}},{key:"getPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.config,r=i.pic_num,o=i.row,a=i.col,s=i.width,l=i.height,u=Math.ceil(e/this.interval),c=(u=u>r?r:u)<o*a?0:Math.ceil(u/(o*a))-1,h=u-c*(a*o),f=h>0?Math.ceil(h/a)-1:0,d=h>0?h-f*a-1:0,p=0,g=0;t&&n?t/n<s/l?g=(p=t)/(s/l):p=(g=n)*(s/l):g=(p=t||s)/(s/l);var v=this.getUrlByIndex(c);return{urlIndex:c,rowIndex:f,colIndex:d,url:v,height:g,width:p,style:{backgroundImage:"url(".concat(v,")"),backgroundSize:"".concat(p*a,"px auto"),backgroundPosition:"-".concat(d*p,"px -").concat(f*g,"px"),width:"".concat(p,"px"),height:"".concat(g,"px")}}}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=this.config,a=o.pic_num,s=o.urls;if(!(a<1)&&s&&0!==s.length){var l=this.getPosition(t,n,i);this.preload(l.urlIndex),Object.keys(l.style).map((function(t){e.style[t]=l.style[t]})),Object.keys(r).map((function(t){e.style[t]=r[t]}))}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,t){var n=Ck.createDom("xg-thumbnail","",{},"thumbnail ".concat(t));return e&&e.appendChild(n),n}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,width:160,height:90,scale:1,className:"",hidePortrait:!1}}}]),n}(),R_=function(e){m(n,Zb);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;t&&this.root&&(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/t*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/t*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),n}(),O_={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};var D_=null,N_=function(e){m(n,Zb);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"start",(function(){var t=e.player.media,n=function(){try{return window.performance.now()}catch(e){
return(new Date).getTime()}}(),i=e.checkVideoIsSupport(t);i&&e.canvasCtx&&(e.stop(),t.videoWidth&&t.videoHeight&&(e.videoPI=t.videoHeight>0?parseInt(t.videoWidth/t.videoHeight*100,10):0,(e.config.mode===O_.REAL_TIME||n-e.preTime>=e.interval)&&(t&&t.videoWidth&&e.update(i,e.videoPI),e.preTime=n)),e.frameId=Ck.requestAnimationFrame(e.start))})),y(w(e),"stop",(function(){e.frameId&&(Ck.cancelAnimationFrame(e.frameId),e.frameId=null)})),e}return v(n,[{key:"afterCreate",value:function(){var e=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),n.isSupport||(this.config.disable=!0);var t=this.config,i=t.disable,r=t.mode;i||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/this.config.frameRate,10),this.canvas=null,this.canvasCtx=null,this.once(tb,(function(){e.player&&(e.init(),e.player.paused||e.start())})),r!==O_.POSTER&&(r!==O_.FIRST_FRAME&&(this.on(Xk,(function(){e.stop()})),this.on(Rk,(function(){e.start()})),this.on(Nk,(function(){e.stop()}))),r===O_.FIRST_FRAME&&this.once(Hk,(function(){e.renderOnce()}))))}},{key:"init",value:function(){var e=this.player,t=this.config;this.canvasFilter=n.supportCanvasFilter();try{var i=this.config.isInnerRender&&e.innerContainer||e.root;i.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg"><canvas>\n        </canvas><xgmask></xgmask></div>'),this.root=i.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=t.filter,this.canvas.style.webkitFilter=t.filter),this.mask=this.find("xgmask"),t.addMask&&(this.mask.style.background=t.maskBg),this.canvasCtx=this.canvas.getContext("2d"),this.renderByPoster()}catch(r){bk.logError("plugin:DynamicBg",r)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var t=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(t&&("safari"!==Pk.browser||!/^blob/.test(t.currentSrc)&&!/^blob/.test(t.src)))return t;var n=t?t.tagName.toLowerCase():"";return"canvas"===n||"img"===n?t:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var t="String"===Ck.typeOf(e)?e:"String"===Ck.typeOf(e.poster)?e.poster:null;this.updateImg(t)}}},{key:"renderOnce",value:function(){var e=this.player.media;if(e.videoWidth&&e.videoHeight){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var t=this.checkVideoIsSupport(e);t&&e.videoWidth&&this.update(t,this.videoPI)}}},{key:"updateImg",value:function(e){var t=this;if(e){var n=this.canvas.getBoundingClientRect(),i=n.width,r=n.height,o=new window.Image;o.onload=function(){if(t.canvas&&!t.frameId&&!t.isStart){t.canvas.height=r,t.canvas.width=i;var e=parseInt(i/r*100,10);t.update(o,e),o=null}},o.src=e}}},{key:"update",value:function(e,t){if(this.canvas&&this.canvasCtx&&t)try{var n=this._pos,i=this.config,r=this.canvas.getBoundingClientRect(),o=r.width,a=r.height;if(o!==n.width||a!==n.height||n.pi!==t){var s=parseInt(o/a*100,10);n.pi=t,n.width=this.canvas.width=o,n.height=this.canvas.height=a;var l=a,u=o;s<t?u=parseInt(a*t/100,10):s>t&&(l=parseInt(100*o/t,10)),n.rwidth=u*i.multiple,n.rheight=l*i.multiple,n.x=(o-n.rwidth)/2,n.y=(a-n.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=i.filter),this.canvasCtx.drawImage(e,n.x,n.y,n.rwidth,n.rheight)}catch(c){bk.logError("plugin:DynamicBg",c)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof D_?D_:D_=function(){try{return!!document.createElement("canvas").getContext}catch(e){return!1}}()}},{key:"supportCanvasFilter",value:function(){return!("safari"===Pk.browser||"firefox"===Pk.browser)}}]),n}(),M_=Nr,F_=pe,U_=Z,H_=hs,j_=X([].push),B_=Er,G_=we,V_=pu,W_=M,K_=X,z_=L,Y_=pe,X_=He,q_=za,$_=function(e){if(F_(e))return e;if(M_(e)){for(var t=e.length,n=[],i=0;i<t;i++){var r=e[i];"string"==typeof r?j_(n,r):"number"!=typeof r&&"Number"!=U_(r)&&"String"!=U_(r)||j_(n,H_(r))}var o=n.length,a=!0;return function(e,t){if(a)return a=!1,t;if(M_(this))return t;for(var i=0;i<o;i++)if(n[i]===e)return t}}},J_=Oe,Z_=String,Q_=G_("JSON","stringify"),ex=K_(/./.exec),tx=K_("".charAt),nx=K_("".charCodeAt),ix=K_("".replace),rx=K_(1..toString),ox=/[\uD800-\uDFFF]/g,ax=/^[\uD800-\uDBFF]$/,sx=/^[\uDC00-\uDFFF]$/,lx=!J_||z_((function(){var e=G_("Symbol")();return"[null]"!=Q_([e])||"{}"!=Q_({a:e})||"{}"!=Q_(Object(e))})),ux=z_((function(){return'"\\udf06\\ud834"'!==Q_("\udf06\ud834")||'"\\udead"'!==Q_("\udead")})),cx=function(e,t){var n=q_(arguments),i=$_(t);if(Y_(i)||void 0!==e&&!X_(e))return n[1]=function(e,t){if(Y_(i)&&(t=W_(i,this,Z_(e),t)),!X_(t))return t},V_(Q_,null,n)},hx=function(e,t,n){var i=tx(n,t-1),r=tx(n,t+1);return ex(ax,e)&&!ex(sx,r)||ex(sx,e)&&!ex(ax,i)?"\\u"+rx(nx(e,0),16):e};Q_&&B_({target:"JSON",stat:!0,arity:3,forced:lx||ux},{
// eslint-disable-next-line no-unused-vars -- required for `.length`
stringify:function(e,t,n){var i=q_(arguments),r=V_(lx?cx:Q_,null,i);return ux&&"string"==typeof r?ix(r,ox,hx):r}});var fx=L,dx=R,px=St("iterator"),gx=!fx((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),!t.size&&!dx||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[px]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),vx=an,yx=nf,mx=Or,kx=M,bx=ct,wx=function(e,t,n,i){try{return i?t(vx(n)[0],n[1]):t(n)}catch(sP){yx(e,"throw",sP)}},Cx=Hh,_x=ro,xx=Ui,Tx=ha,Ex=Zh,Sx=Kh,Px=Array,Ax=X,Ix=2147483647,Lx=/[^\0-\u007E]/,Rx=/[.\u3002\uFF0E\uFF61]/g,Ox="Overflow: input needs wider integers to process",Dx=RangeError,Nx=Ax(Rx.exec),Mx=Math.floor,Fx=String.fromCharCode,Ux=Ax("".charCodeAt),Hx=Ax([].join),jx=Ax([].push),Bx=Ax("".replace),Gx=Ax("".split),Vx=Ax("".toLowerCase),Wx=function(e){return e+22+75*(e<26)},Kx=function(e,t,n){var i=0;for(e=n?Mx(e/700):e>>1,e+=Mx(e/t);e>455;)e=Mx(e/35),i+=36;return Mx(i+36*e/(e+38))},zx=function(e){var t=[];e=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=Ux(e,n++);if(r>=55296&&r<=56319&&n<i){var o=Ux(e,n++);56320==(64512&o)?jx(t,((1023&r)<<10)+(1023&o)+65536):(jx(t,r),n--)}else jx(t,r)}return t}(e);var n,i,r=e.length,o=128,a=0,s=72;for(n=0;n<e.length;n++)(i=e[n])<128&&jx(t,Fx(i));var l=t.length,u=l;for(l&&jx(t,"-");u<r;){var c=Ix;for(n=0;n<e.length;n++)(i=e[n])>=o&&i<c&&(c=i);var h=u+1;if(c-o>Mx((Ix-a)/h))throw Dx(Ox);for(a+=(c-o)*h,o=c,n=0;n<e.length;n++){if((i=e[n])<o&&++a>Ix)throw Dx(Ox);if(i==o){for(var f=a,d=36;;){var p=d<=s?1:d>=s+26?26:d-s;if(f<p)break;var g=f-p,v=36-p;jx(t,Fx(Wx(p+g%v))),f=Mx(g/v),d+=36}jx(t,Fx(Wx(f))),s=Kx(a,h,u==l),a=0,u++}}a++,o++}return Hx(t,"")},Yx=xi,Xx=Er,qx=A,$x=M,Jx=X,Zx=R,Qx=gx,eT=xi,tT=Yl,nT=function(e,t,n){for(var i in t)Yx(e,i,t[i],n);return e},iT=Wl,rT=bp,oT=ni,aT=tu,sT=pe,lT=dt,uT=Or,cT=Wr,hT=an,fT=ye,dT=hs,pT=zo,gT=V,vT=Zh,yT=Kh,mT=vu,kT=Wm,bT=St("iterator"),wT="URLSearchParams",CT=wT+"Iterator",_T=oT.set,xT=oT.getterFor(wT),TT=oT.getterFor(CT),ET=Object.getOwnPropertyDescriptor,ST=function(e){if(!Zx)return qx[e];var t=ET(qx,e);return t&&t.value},PT=ST("fetch"),AT=ST("Request"),IT=ST("Headers"),LT=AT&&AT.prototype,RT=IT&&IT.prototype,OT=qx.RegExp,DT=qx.TypeError,NT=qx.decodeURIComponent,MT=qx.encodeURIComponent,FT=Jx("".charAt),UT=Jx([].join),HT=Jx([].push),jT=Jx("".replace),BT=Jx([].shift),GT=Jx([].splice),VT=Jx("".split),WT=Jx("".slice),KT=/\+/g,zT=Array(4),YT=function(e){return zT[e-1]||(zT[e-1]=OT("((?:%[\\da-f]{2}){"+e+"})","gi"))},XT=function(e){try{return NT(e)}catch(sP){return e}},qT=function(e){var t=jT(e,KT," "),n=4;try{return NT(t)}catch(sP){for(;n;)t=jT(t,YT(n--),XT);return t}},$T=/[!'()~]|%20/g,JT={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ZT=function(e){return JT[e]},QT=function(e){return jT(MT(e),$T,ZT)},eE=rT((function(e,t){_T(this,{type:CT,iterator:vT(xT(e).entries),kind:t})}),"Iterator",(function(){var e=TT(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n}),!0),tE=function(e){this.entries=[],this.url=null,void 0!==e&&(fT(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===FT(e,0)?WT(e,1):e:dT(e)))};tE.prototype={type:wT,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,i,r,o,a,s,l=yT(e);if(l)for(n=(t=vT(e,l)).next;!(i=$x(n,t)).done;){if(o=(r=vT(hT(i.value))).next,(a=$x(o,r)).done||(s=$x(o,r)).done||!$x(o,r).done)throw DT("Expected sequence with length 2");HT(this.entries,{key:dT(a.value),value:dT(s.value)})}else for(var u in e)lT(e,u)&&HT(this.entries,{key:u,value:dT(e[u])})},parseQuery:function(e){if(e)for(var t,n,i=VT(e,"&"),r=0;r<i.length;)(t=i[r++]).length&&(n=VT(t,"="),HT(this.entries,{key:qT(BT(n)),value:qT(UT(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],i=0;i<t.length;)e=t[i++],HT(n,QT(e.key)+"="+QT(e.value));return UT(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var nE=function(){aT(this,iE);var e=_T(this,new tE(arguments.length>0?arguments[0]:void 0));Zx||(this.length=e.entries.length)},iE=nE.prototype;if(nT(iE,{
// `URLSearchParams.prototype.append` method
// https://url.spec.whatwg.org/#dom-urlsearchparams-append
append:function(e,t){mT(arguments.length,2);var n=xT(this);HT(n.entries,{key:dT(e),value:dT(t)}),Zx||this.length++,n.updateURL()},
// `URLSearchParams.prototype.delete` method
// https://url.spec.whatwg.org/#dom-urlsearchparams-delete
delete:function(e){mT(arguments.length,1);for(var t=xT(this),n=t.entries,i=dT(e),r=0;r<n.length;)n[r].key===i?GT(n,r,1):r++;Zx||(this.length=n.length),t.updateURL()},
// `URLSearchParams.prototype.get` method
// https://url.spec.whatwg.org/#dom-urlsearchparams-get
get:function(e){mT(arguments.length,1);for(var t=xT(this).entries,n=dT(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},
// `URLSearchParams.prototype.getAll` method
// https://url.spec.whatwg.org/#dom-urlsearchparams-getall
getAll:function(e){mT(arguments.length,1);for(var t=xT(this).entries,n=dT(e),i=[],r=0;r<t.length;r++)t[r].key===n&&HT(i,t[r].value);return i},
// `URLSearchParams.prototype.has` method
// https://url.spec.whatwg.org/#dom-urlsearchparams-has
has:function(e){mT(arguments.length,1);for(var t=xT(this).entries,n=dT(e),i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},
// `URLSearchParams.prototype.set` method
// https://url.spec.whatwg.org/#dom-urlsearchparams-set
set:function(e,t){mT(arguments.length,1);for(var n,i=xT(this),r=i.entries,o=!1,a=dT(e),s=dT(t),l=0;l<r.length;l++)(n=r[l]).key===a&&(o?GT(r,l--,1):(o=!0,n.value=s));o||HT(r,{key:a,value:s}),Zx||(this.length=r.length),i.updateURL()},
// `URLSearchParams.prototype.sort` method
// https://url.spec.whatwg.org/#dom-urlsearchparams-sort
sort:function(){var e=xT(this);kT(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},
// `URLSearchParams.prototype.forEach` method
forEach:function(e){for(var t,n=xT(this).entries,i=uT(e,arguments.length>1?arguments[1]:void 0),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},
// `URLSearchParams.prototype.keys` method
keys:function(){return new eE(this,"keys")},
// `URLSearchParams.prototype.values` method
values:function(){return new eE(this,"values")},
// `URLSearchParams.prototype.entries` method
entries:function(){return new eE(this,"entries")}},{enumerable:!0}),eT(iE,bT,iE.entries,{name:"entries"}),eT(iE,"toString",(function(){return xT(this).serialize()}),{enumerable:!0}),Zx&&tT(iE,"size",{get:function(){return xT(this).entries.length},configurable:!0,enumerable:!0}),iT(nE,wT),Xx({global:!0,constructor:!0,forced:!Qx},{URLSearchParams:nE}),!Qx&&sT(IT)){var rE=Jx(RT.has),oE=Jx(RT.set),aE=function(e){if(fT(e)){var t,n=e.body;if(cT(n)===wT)return t=e.headers?new IT(e.headers):new IT,rE(t,"content-type")||oE(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),pT(e,{body:gT(0,dT(n)),headers:gT(0,t)})}return e};if(sT(PT)&&Xx({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return PT(e,arguments.length>1?aE(arguments[1]):{})}}),sT(AT)){var sE=function(e){return aT(this,LT),new AT(e,arguments.length>1?aE(arguments[1]):{})};LT.constructor=sE,sE.prototype=LT,Xx({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:sE})}}var lE,uE=Er,cE=R,hE=gx,fE=A,dE=Or,pE=X,gE=xi,vE=Yl,yE=tu,mE=dt,kE=Tg,bE=function(e){var t=bx(e),n=_x(this),i=arguments.length,r=i>1?arguments[1]:void 0,o=void 0!==r;o&&(r=mx(r,i>2?arguments[2]:void 0));var a,s,l,u,c,h,f=Sx(t),d=0;if(!f||this===Px&&Cx(f))for(a=xx(t),s=n?new this(a):Px(a);a>d;d++)h=o?r(t[d],d):t[d],Tx(s,d,h);else for(c=(u=Ex(t,f)).next,s=n?new this:[];!(l=kx(c,u)).done;d++)h=o?wx(u,r,[l.value,d],!0):l.value,Tx(s,d,h);return s.length=d,s},wE=Ay,CE=zg.codeAt,_E=function(e){var t,n,i=[],r=Gx(Bx(Vx(e),Rx,"."),".");for(t=0;t<r.length;t++)n=r[t],jx(i,Nx(Lx,n)?"xn--"+zx(n):n);return Hx(i,".")},xE=hs,TE=Wl,EE=vu,SE={URLSearchParams:nE,getState:xT},PE=ni,AE=PE.set,IE=PE.getterFor("URL"),LE=SE.URLSearchParams,RE=SE.getState,OE=fE.URL,DE=fE.TypeError,NE=fE.parseInt,ME=Math.floor,FE=Math.pow,UE=pE("".charAt),HE=pE(/./.exec),jE=pE([].join),BE=pE(1..toString),GE=pE([].pop),VE=pE([].push),WE=pE("".replace),KE=pE([].shift),zE=pE("".split),YE=pE("".slice),XE=pE("".toLowerCase),qE=pE([].unshift),$E="Invalid scheme",JE="Invalid host",ZE="Invalid port",QE=/[a-z]/i,eS=/[\d+-.a-z]/i,tS=/\d/,nS=/^0x/i,iS=/^[0-7]+$/,rS=/^\d+$/,oS=/^[\da-f]+$/i,aS=/[\0\t\n\r #%/:<>?@[\\\]^|]/,sS=/[\0\t\n\r #/:<>?@[\\\]^|]/,lS=/^[\u0000-\u0020]+/,uS=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,cS=/[\t\n\r]/g,hS=function(e){var t,n,i,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)qE(t,e%256),e=ME(e/256);return jE(t,".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,r=0,o=0;o<8;o++)0!==e[o]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(t=i,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),i===n?(t+=n?":":"::",r=!0):(t+=BE(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},fS={},dS=kE({},fS,{" ":1,'"':1,"<":1,">":1,"`":1}),pS=kE({},dS,{"#":1,"?":1,"{":1,"}":1}),gS=kE({},pS,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),vS=function(e,t){var n=CE(e,0);return n>32&&n<127&&!mE(t,e)?e:encodeURIComponent(e)},yS={ftp:21,file:null,http:80,https:443,ws:80,wss:443},mS=function(e,t){var n;return 2==e.length&&HE(QE,UE(e,0))&&(":"==(n=UE(e,1))||!t&&"|"==n)},kS=function(e){var t;return e.length>1&&mS(YE(e,0,2))&&(2==e.length||"/"===(t=UE(e,2))||"\\"===t||"?"===t||"#"===t)},bS=function(e){return"."===e||"%2e"===XE(e)},wS={},CS={},_S={},xS={},TS={},ES={},SS={},PS={},AS={},IS={},LS={},RS={},OS={},DS={},NS={},MS={},FS={},US={},HS={},jS={},BS={},GS=function(e,t,n){var i,r,o,a=xE(e);if(t){if(r=this.parse(a))throw DE(r);this.searchParams=null}else{if(void 0!==n&&(i=new GS(n,!0)),r=this.parse(a,null,i))throw DE(r);(o=RE(new LE)).bindURL(this),this.searchParams=o}};GS.prototype={type:"URL",
// https://url.spec.whatwg.org/#url-parsing
// eslint-disable-next-line max-statements -- TODO
parse:function(e,t,n){var i,r,o,a,s,l=this,u=t||wS,c=0,h="",f=!1,d=!1,p=!1;for(e=xE(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=WE(e,lS,""),e=WE(e,uS,"$1")),e=WE(e,cS,""),i=bE(e);c<=i.length;){switch(r=i[c],u){case wS:if(!r||!HE(QE,r)){if(t)return $E;u=_S;continue}h+=XE(r),u=CS;break;case CS:if(r&&(HE(eS,r)||"+"==r||"-"==r||"."==r))h+=XE(r);else{if(":"!=r){if(t)return $E;h="",u=_S,c=0;continue}if(t&&(l.isSpecial()!=mE(yS,h)||"file"==h&&(l.includesCredentials()||null!==l.port)||"file"==l.scheme&&!l.host))return;if(l.scheme=h,t)return void(l.isSpecial()&&yS[l.scheme]==l.port&&(l.port=null));h="","file"==l.scheme?u=DS:l.isSpecial()&&n&&n.scheme==l.scheme?u=xS:l.isSpecial()?u=PS:"/"==i[c+1]?(u=TS,c++):(l.cannotBeABaseURL=!0,VE(l.path,""),u=HS)}break;case _S:if(!n||n.cannotBeABaseURL&&"#"!=r)return $E;if(n.cannotBeABaseURL&&"#"==r){l.scheme=n.scheme,l.path=wE(n.path),l.query=n.query,l.fragment="",l.cannotBeABaseURL=!0,u=BS;break}u="file"==n.scheme?DS:ES;continue;case xS:if("/"!=r||"/"!=i[c+1]){u=ES;continue}u=AS,c++;break;case TS:if("/"==r){u=IS;break}u=US;continue;case ES:if(l.scheme=n.scheme,r==lE)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=wE(n.path),l.query=n.query;else if("/"==r||"\\"==r&&l.isSpecial())u=SS;else if("?"==r)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=wE(n.path),l.query="",u=jS;else{if("#"!=r){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=wE(n.path),l.path.length--,u=US;continue}l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=wE(n.path),l.query=n.query,l.fragment="",u=BS}break;case SS:if(!l.isSpecial()||"/"!=r&&"\\"!=r){if("/"!=r){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,u=US;continue}u=IS}else u=AS;break;case PS:if(u=AS,"/"!=r||"/"!=UE(h,c+1))continue;c++;break;case AS:if("/"!=r&&"\\"!=r){u=IS;continue}break;case IS:if("@"==r){f&&(h="%40"+h),f=!0,o=bE(h);for(var g=0;g<o.length;g++){var v=o[g];if(":"!=v||p){var y=vS(v,gS);p?l.password+=y:l.username+=y}else p=!0}h=""}else if(r==lE||"/"==r||"?"==r||"#"==r||"\\"==r&&l.isSpecial()){if(f&&""==h)return"Invalid authority";c-=bE(h).length+1,h="",u=LS}else h+=r;break;case LS:case RS:if(t&&"file"==l.scheme){u=MS;continue}if(":"!=r||d){if(r==lE||"/"==r||"?"==r||"#"==r||"\\"==r&&l.isSpecial()){if(l.isSpecial()&&""==h)return JE;if(t&&""==h&&(l.includesCredentials()||null!==l.port))return;if(a=l.parseHost(h))return a;if(h="",u=FS,t)return;continue}"["==r?d=!0:"]"==r&&(d=!1),h+=r}else{if(""==h)return JE;if(a=l.parseHost(h))return a;if(h="",u=OS,t==RS)return}break;case OS:if(!HE(tS,r)){if(r==lE||"/"==r||"?"==r||"#"==r||"\\"==r&&l.isSpecial()||t){if(""!=h){var m=NE(h,10);if(m>65535)return ZE;l.port=l.isSpecial()&&m===yS[l.scheme]?null:m,h=""}if(t)return;u=FS;continue}return ZE}h+=r;break;case DS:if(l.scheme="file","/"==r||"\\"==r)u=NS;else{if(!n||"file"!=n.scheme){u=US;continue}if(r==lE)l.host=n.host,l.path=wE(n.path),l.query=n.query;else if("?"==r)l.host=n.host,l.path=wE(n.path),l.query="",u=jS;else{if("#"!=r){kS(jE(wE(i,c),""))||(l.host=n.host,l.path=wE(n.path),l.shortenPath()),u=US;continue}l.host=n.host,l.path=wE(n.path),l.query=n.query,l.fragment="",u=BS}}break;case NS:if("/"==r||"\\"==r){u=MS;break}n&&"file"==n.scheme&&!kS(jE(wE(i,c),""))&&(mS(n.path[0],!0)?VE(l.path,n.path[0]):l.host=n.host),u=US;continue;case MS:if(r==lE||"/"==r||"\\"==r||"?"==r||"#"==r){if(!t&&mS(h))u=US;else if(""==h){if(l.host="",t)return;u=FS}else{if(a=l.parseHost(h))return a;if("localhost"==l.host&&(l.host=""),t)return;h="",u=FS}continue}h+=r;break;case FS:if(l.isSpecial()){if(u=US,"/"!=r&&"\\"!=r)continue}else if(t||"?"!=r)if(t||"#"!=r){if(r!=lE&&(u=US,"/"!=r))continue}else l.fragment="",u=BS;else l.query="",u=jS;break;case US:if(r==lE||"/"==r||"\\"==r&&l.isSpecial()||!t&&("?"==r||"#"==r)){if(".."===(s=XE(s=h))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(l.shortenPath(),"/"==r||"\\"==r&&l.isSpecial()||VE(l.path,"")):bS(h)?"/"==r||"\\"==r&&l.isSpecial()||VE(l.path,""):("file"==l.scheme&&!l.path.length&&mS(h)&&(l.host&&(l.host=""),h=UE(h,0)+":"),VE(l.path,h)),h="","file"==l.scheme&&(r==lE||"?"==r||"#"==r))for(;l.path.length>1&&""===l.path[0];)KE(l.path);"?"==r?(l.query="",u=jS):"#"==r&&(l.fragment="",u=BS)}else h+=vS(r,pS);break;case HS:"?"==r?(l.query="",u=jS):"#"==r?(l.fragment="",u=BS):r!=lE&&(l.path[0]+=vS(r,fS));break;case jS:t||"#"!=r?r!=lE&&("'"==r&&l.isSpecial()?l.query+="%27":l.query+="#"==r?"%23":vS(r,fS)):(l.fragment="",u=BS);break;case BS:r!=lE&&(l.fragment+=vS(r,dS))}c++}},
// https://url.spec.whatwg.org/#host-parsing
parseHost:function(e){var t,n,i;if("["==UE(e,0)){if("]"!=UE(e,e.length-1))return JE;if(t=function(e){var t,n,i,r,o,a,s,l=[0,0,0,0,0,0,0,0],u=0,c=null,h=0,f=function(){return UE(e,h)};if(":"==f()){if(":"!=UE(e,1))return;h+=2,c=++u}for(;f();){if(8==u)return;if(":"!=f()){for(t=n=0;n<4&&HE(oS,f());)t=16*t+NE(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,u>6)return;for(i=0;f();){if(r=null,i>0){if(!("."==f()&&i<4))return;h++}if(!HE(tS,f()))return;for(;HE(tS,f());){if(o=NE(f(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;h++}l[u]=256*l[u]+r,2!=++i&&4!=i||u++}if(4!=i)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;l[u++]=t}else{if(null!==c)return;h++,c=++u}}if(null!==c)for(a=u-c,u=7;0!=u&&a>0;)s=l[u],l[u--]=l[c+a-1],l[c+--a]=s;else if(8!=u)return;return l}(YE(e,1,-1)),!t)return JE;this.host=t}else if(this.isSpecial()){if(e=_E(e),HE(aS,e))return JE;if(t=function(e){var t,n,i,r,o,a,s,l=zE(e,".");if(l.length&&""==l[l.length-1]&&l.length--,(t=l.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(r=l[i]))return e;if(o=10,r.length>1&&"0"==UE(r,0)&&(o=HE(nS,r)?16:8,r=YE(r,8==o?1:2)),""===r)a=0;else{if(!HE(10==o?rS:8==o?iS:oS,r))return e;a=NE(r,o)}VE(n,a)}for(i=0;i<t;i++)if(a=n[i],i==t-1){if(a>=FE(256,5-t))return null}else if(a>255)return null;for(s=GE(n),i=0;i<n.length;i++)s+=n[i]*FE(256,3-i);return s}(e),null===t)return JE;this.host=t}else{if(HE(sS,e))return JE;for(t="",n=bE(e),i=0;i<n.length;i++)t+=vS(n[i],fS);this.host=t}},
// https://url.spec.whatwg.org/#cannot-have-a-username-password-port
cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},
// https://url.spec.whatwg.org/#include-credentials
includesCredentials:function(){return""!=this.username||""!=this.password},
// https://url.spec.whatwg.org/#is-special
isSpecial:function(){return mE(yS,this.scheme)},
// https://url.spec.whatwg.org/#shorten-a-urls-path
shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&mS(e[0],!0)||e.length--},
// https://url.spec.whatwg.org/#concept-url-serializer
serialize:function(){var e=this,t=e.scheme,n=e.username,i=e.password,r=e.host,o=e.port,a=e.path,s=e.query,l=e.fragment,u=t+":";return null!==r?(u+="//",e.includesCredentials()&&(u+=n+(i?":"+i:"")+"@"),u+=hS(r),null!==o&&(u+=":"+o)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+jE(a,"/"):"",null!==s&&(u+="?"+s),null!==l&&(u+="#"+l),u},
// https://url.spec.whatwg.org/#dom-url-href
setHref:function(e){var t=this.parse(e);if(t)throw DE(t);this.searchParams.update()},
// https://url.spec.whatwg.org/#dom-url-origin
getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new VS(e.path[0]).origin}catch(sP){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+hS(this.host)+(null!==t?":"+t:""):"null"},
// https://url.spec.whatwg.org/#dom-url-protocol
getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(xE(e)+":",wS)},
// https://url.spec.whatwg.org/#dom-url-username
getUsername:function(){return this.username},setUsername:function(e){var t=bE(xE(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=vS(t[n],gS)}},
// https://url.spec.whatwg.org/#dom-url-password
getPassword:function(){return this.password},setPassword:function(e){var t=bE(xE(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=vS(t[n],gS)}},
// https://url.spec.whatwg.org/#dom-url-host
getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?hS(e):hS(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,LS)},
// https://url.spec.whatwg.org/#dom-url-hostname
getHostname:function(){var e=this.host;return null===e?"":hS(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,RS)},
// https://url.spec.whatwg.org/#dom-url-port
getPort:function(){var e=this.port;return null===e?"":xE(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=xE(e))?this.port=null:this.parse(e,OS))},
// https://url.spec.whatwg.org/#dom-url-pathname
getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+jE(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,FS))},
// https://url.spec.whatwg.org/#dom-url-search
getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=xE(e))?this.query=null:("?"==UE(e,0)&&(e=YE(e,1)),this.query="",this.parse(e,jS)),this.searchParams.update()},
// https://url.spec.whatwg.org/#dom-url-searchparams
getSearchParams:function(){return this.searchParams.facade},
// https://url.spec.whatwg.org/#dom-url-hash
getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=xE(e))?("#"==UE(e,0)&&(e=YE(e,1)),this.fragment="",this.parse(e,BS)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var VS=function(e){var t=yE(this,WS),n=EE(arguments.length,1)>1?arguments[1]:void 0,i=AE(t,new GS(e,!1,n));cE||(t.href=i.serialize(),t.origin=i.getOrigin(),t.protocol=i.getProtocol(),t.username=i.getUsername(),t.password=i.getPassword(),t.host=i.getHost(),t.hostname=i.getHostname(),t.port=i.getPort(),t.pathname=i.getPathname(),t.search=i.getSearch(),t.searchParams=i.getSearchParams(),t.hash=i.getHash())},WS=VS.prototype,KS=function(e,t){return{get:function(){return IE(this)[e]()},set:t&&function(e){return IE(this)[t](e)},configurable:!0,enumerable:!0}};if(cE&&(vE(WS,"href",KS("serialize","setHref")),vE(WS,"origin",KS("getOrigin")),vE(WS,"protocol",KS("getProtocol","setProtocol")),vE(WS,"username",KS("getUsername","setUsername")),vE(WS,"password",KS("getPassword","setPassword")),vE(WS,"host",KS("getHost","setHost")),vE(WS,"hostname",KS("getHostname","setHostname")),vE(WS,"port",KS("getPort","setPort")),vE(WS,"pathname",KS("getPathname","setPathname")),vE(WS,"search",KS("getSearch","setSearch")),vE(WS,"searchParams",KS("getSearchParams")),vE(WS,"hash",KS("getHash","setHash"))),gE(WS,"toJSON",(function(){return IE(this).serialize()}),{enumerable:!0}),gE(WS,"toString",(function(){return IE(this).serialize()}),{enumerable:!0}),OE){var zS=OE.createObjectURL,YS=OE.revokeObjectURL;zS&&gE(VS,"createObjectURL",dE(zS,OE)),YS&&gE(VS,"revokeObjectURL",dE(YS,OE))}TE(VS,"URL"),uE({global:!0,constructor:!0,forced:!hE,sham:!cE},{URL:VS});var XS="info",qS=wb,$S=function(e){m(n,jb);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"_recordUserActions",(function(t){var n=e._getTime(),i=Object.assign({},t,{msg:t.msg||t.action});e._stats[XS].push(f(f({type:"userAction"},n),{},{payload:i}))})),y(w(e),"_onReset",(function(){e.reset()})),y(w(e),"_recordInfo",(function(t){e.info(t)})),y(w(e),"_downloadStats",(function(){var t=e.getStats(),n=new Blob([JSON.stringify(t)],{type:"application/json"}),i=window.URL.createObjectURL(n),r=document.createElement("a");r.style.display="none",r.href=i,r.download="player.txt",r.disabled=!1,r.click()})),e}return v(n,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:(new Date).toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(mb,this._recordUserActions),this.on(qS.STATS_INFO,this._recordInfo),this.on(qS.STATS_DOWNLOAD,this._downloadStats),this.on(qS.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var t=this._getTime();this._stats[XS].push(f(f({},t),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var t=f({cat:"function",dur:Date.now()-e.startMs,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(t)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(y(e={},XS,[]),y(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player.media,t=[],n=0;n<e.buffered.length;n++)t.push({start:e.buffered.start(n),end:e.buffered.end(n)});var i={currentTime:e.currentTime,readyState:e.readyState,buffered:t,paused:e.paused,ended:e.ended};return this._stats.media=i,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){return this._stats[XS].map((function(e){var t=e.payload.data,n="";try{t instanceof Error?n=t.msg:void 0!==t&&(n=JSON.stringify(t))}catch(sP){console.log("err",sP)}return"[".concat(e.timeFormat,"] : ").concat(e.payload.msg," ").concat(n," ")}))}},{key:"_getProfile",value:function(){var e={traceEvents:[]};return this._stats[XS].forEach((function(t){t.payload.profile&&e.traceEvents.push(t.payload)})),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),n}(),JS=function(e){m(n,Zb);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"onGapJump",(function(){var t=w(e),i=t.player,r=t.config;if(i.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(i.media.seeking){if(!e.seekingEventReceived)return}else e.seekingEventReceived=!1;if(!i.media.paused||0===i.media.currentTime||!e.hasPlayed){var o=i.media.buffered,a=r.smallGapLimit||.5,s=r.gapDetectionThreshold||.3,l=i.media.currentTime,u=e._getIndex(o,l,s);if(null!==u&&0!==u){console.log("GapJump  bufferRange ",o.start(u),o.end(u));var c=o.start(u)+.1;if(!(c>i.media.duration)){var h=c-l,f=h<=a;h<n.BROWSER_GAP_TOLERANCE||f&&(!1!==r.useGapJump&&(i.media.currentTime=e.isSafari?c+.1:c),e.player&&e.player.emit("detectGap"),console.log("gapJump gapIndex",u," isGapSamll:",f," currentTime:",i.media.currentTime," jumpSize:",l-i.media.currentTime),.08!==c&&i&&i.emit("log",{type:"oneevent",end_type:"gap",vid:i.config.vid,ext:{video_postion:Math.floor(1e3*c)}}))}}}}})),e}return v(n,[{key:"afterCreate",value:function(){var e=this;!1!==this.config.useGapJump&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(jk,this.onGapJump),this.on(Rk,(function(){e.hasPlayed=!0})),this.on(Fk,(function(){e.seekingEventReceived=!0})))}},{key:"_getIndex",value:function(e,t,n){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var i=this._getBuffered(e),r=null,o=0;o<i.length;o++){if(i[o].start>t&&(0===o||i[o-1].end-t<=n)){r=o;break}}return r}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),n}();JS.BROWSER_GAP_TOLERANCE=.001;var ZS=function(e){m(n,Zb);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"onWaiting",(function(){var t=w(e).config;e.jumpCnt>t.jumpCntMax||e.timer||!1===t.useWaitingTimeoutJump||(e.timer=setTimeout(e.onJump,1e3*t.waitingTime))})),y(w(e),"onJump",(function(){var t=w(e),n=t.player,i=t.config;if(clearTimeout(e.timer),e.timer=null,!(e.jumpCnt>i.jumpCntMax||!1===i.useWaitingTimeoutJump||n.media.paused&&0!==n.media.currentTime&&e.hasPlayed)){e.jumpSize=i.jumpSize*(e.jumpCnt+1),e.jumpCnt===i.jumpSize&&e.jumpSize<6&&(e.jumpSize=6);var r=n.currentTime+e.jumpSize;r>n.media.duration||(console.log("waitintTimeout, currentTime:",n.currentTime,", jumpTo:",r),e.jumpCnt++,n.currentTime=r)}})),e}return v(n,[{key:"afterCreate",value:function(){var e=this,t=this.config,n=t.useWaitingTimeoutJump,i=t.jumpSize;!1!==n&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=i,this.on(jk,this.onWaiting),this.on([Ok,Bk],(function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize})),this.on(Rk,(function(){e.hasPlayed=!0})))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),n}(),QS=function(e){m(n,Zb);var t=_(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return y(w(e=t.call.apply(t,[this].concat(r))),"getSpeed",(function(t){if(e.speedListCache.length<=0)return 0;var n=0;return e.speedListCache.map((function(e){n+=e})),Math.floor(n/e.speedListCache.length)})),y(w(e),"_onRealSpeedChange",(function(t){t.speed&&e.appendList(t.speed)})),y(w(e),"testSpeed",(function(){if(clearTimeout(e.timer),e.timer=null,e.player&&e.config.openSpeed){var t=e.config,n=t.url,i=t.loadSize,r=t.testCnt,o=t.testTimeStep,a=n+(n.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(e.cnt>=r)){e.cnt++;try{var s=(new Date).getTime(),l=null,u=new XMLHttpRequest;e.xhr=u,u.open("GET",a);var c={},h=Math.floor(10*Math.random());c.Range="bytes="+h+"-"+(i+h),c&&Object.keys(c).forEach((function(e){u.setRequestHeader(e,c[e])})),u.onreadystatechange=function(){if(4===u.readyState){e.xhr=null,l=(new Date).getTime();var t=u.getResponseHeader("Content-Length")/1024*8,n=Math.round(1e3*t/(l-s));e.appendList(n),e.timer=setTimeout(e.testSpeed,o)}},u.send()}catch(f){console.error(f)}}}})),y(w(e),"appendList",(function(t){var n=e.config.saveSpeedMax;e.speedListCache.length>=n&&e.speedListCache.shift(),e.speedListCache.push(t),e.player&&(e.player.realTimeSpeed=t),e.updateSpeed()})),y(w(e),"updateSpeed",(function(){var t=e.getSpeed(),n=w(e).player;!n||n.avgSpeed&&t===n.avgSpeed||(n.avgSpeed=t,n.emit(ob,{speed:t,realTimeSpeed:n.realTimeSpeed}))})),e}return v(n,[{key:"afterCreate",value:function(){var e=this;this.speedListCache=[];var t=this.config,n=t.openSpeed,i=t.testTimeStep;this.timer=null,this.cnt=0,this.xhr=null,n&&(this.on("real_time_speed",this._onRealSpeedChange),this.on([Wk,nb],(function(){Ck.isMSE(e.player.video)||(e.speedListCache=[],e.cnt=0,e.timer=setTimeout(e.testSpeed,i))})))}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer)return clearTimeout(this.timer),void(this.timer=null);if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){clearTimeout(this.timer),this.timer=null,this.xhr&&4!==this.xhr.readyState&&(this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:204800,testTimeStep:3e3,url:"",saveSpeedMax:5}}}]),n}();yw.use({LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"è§é¢ä¸è½½éè¯¯"},mse:{code:2,msg:"æµè¿½å éè¯¯"},parse:{code:3,msg:"è§£æéè¯¯"},format:{code:4,msg:"æ ¼å¼éè¯¯"},decoder:{code:5,msg:"è§£ç éè¯¯"},runtime:{code:6,msg:"è¯­æ³éè¯¯"},timeout:{code:7,msg:"æ­æ¾è¶æ¶"},other:{code:8,msg:"å¶ä»éè¯¯"}},HAVE_NOTHING:"æ²¡æå³äºé³é¢/è§é¢æ¯å¦å°±ç»ªçä¿¡æ¯",HAVE_METADATA:"é³é¢/è§é¢çåæ°æ®å·²å°±ç»ª",HAVE_CURRENT_DATA:"å³äºå½åæ­æ¾ä½ç½®çæ°æ®æ¯å¯ç¨çï¼ä½æ²¡æè¶³å¤çæ°æ®æ¥æ­æ¾ä¸ä¸å¸§/æ¯«ç§",HAVE_FUTURE_DATA:"å½ååè³å°ä¸ä¸å¸§çæ°æ®æ¯å¯ç¨ç",HAVE_ENOUGH_DATA:"å¯ç¨æ°æ®è¶³ä»¥å¼å§æ­æ¾",NETWORK_EMPTY:"é³é¢/è§é¢å°æªåå§å",NETWORK_IDLE:"é³é¢/è§é¢æ¯æ´»å¨çä¸å·²éåèµæºï¼ä½å¹¶æªä½¿ç¨ç½ç»",NETWORK_LOADING:"æµè§å¨æ­£å¨ä¸è½½æ°æ®",NETWORK_NO_SOURCE:"æªæ¾å°é³é¢/è§é¢æ¥æº",MEDIA_ERR_ABORTED:"ååè¿ç¨è¢«ç¨æ·ä¸­æ­¢",MEDIA_ERR_NETWORK:"ç½ç»éè¯¯",MEDIA_ERR_DECODE:"è§£ç éè¯¯",MEDIA_ERR_SRC_NOT_SUPPORTED:"ä¸æ¯æçé³é¢/è§é¢æ ¼å¼",REPLAY:"éæ­",ERROR:"ç½ç»è¿æ¥ä¼¼ä¹åºç°äºé®é¢",PLAY_TIPS:"æ­æ¾",PAUSE_TIPS:"æå",PLAYNEXT_TIPS:"ä¸ä¸é",DOWNLOAD_TIPS:"ä¸è½½",ROTATE_TIPS:"æè½¬",RELOAD_TIPS:"éæ°è½½å¥",FULLSCREEN_TIPS:"è¿å¥å¨å±",EXITFULLSCREEN_TIPS:"éåºå¨å±",CSSFULLSCREEN_TIPS:"è¿å¥æ ·å¼å¨å±",EXITCSSFULLSCREEN_TIPS:"éåºæ ·å¼å¨å±",TEXTTRACK:"å­å¹",PIP:"ç»ä¸­ç»",SCREENSHOT:"æªå¾",LIVE:"æ­£å¨ç´æ­",OFF:"å³é­",OPEN:"å¼å¯",MINI_DRAG:"ç¹å»æä½å¯æå¨è§é¢",MINISCREEN:"å°å±å¹",REFRESH_TIPS:"è¯·è¯è¯",REFRESH:"å·æ°",FORWARD:"å¿«è¿ä¸­",LIVE_TIP:"ç´æ­"}});var eP=v((function e(t,n){var i,r,o;p(this,e);var a=n&&"mobile"===n.isMobileSimulateMode,s=n.isLive,l=[].concat(s?[]:[GC,R_,I_,$C],[WC,qC,n_,c_,k_,b_,p_,g_,e_,l_]),u=[Pw,Aw,Ow,DC,Dw,x_,T_,L_,zw];this.plugins=[$S,Ew].concat(T(l),u,[JS,ZS]);var c=a?"mobile":Pk.device;switch(c){case"pc":(i=this.plugins).push.apply(i,[RC,qw,__,QS]);break;case"mobile":(r=this.plugins).push.apply(r,[IC]);break;default:(o=this.plugins).push.apply(o,[RC,qw,__])}(Pk.os.isIpad||"pc"===c)&&this.plugins.push(N_),Pk.os.isIpad&&this.plugins.push(qw),this.ignores=[],this.i18n=[]})),tP=function(e){m(n,_w);var t=_(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n)}();y(tP,"defaultPreset",eP),y(tP,"Util",Ck),y(tP,"Sniffer",Pk),y(tP,"Errors",Lk),y(tP,"Events",Cb),y(tP,"Plugin",Zb),y(tP,"BasePlugin",jb),y(tP,"I18N",yw),y(tP,"STATE_CLASS",cw);const nP={class:"relative w-full h-full video rounded-2xl"},iP=a("div",{class:"mark_header font-bold text-[20px] text-white mb-4"}," è§é¢æ­æ¾å¨ ",-1),rP={class:"flex items-center w-full my-3"},oP=a("span",null,"å¯¹æ¥è¯´æï¼",-1),aP=t({__name:"VideoPlay",setup(e){const t=n();return i((()=>{(()=>{if(!t.value)return;const e={el:t.value,url:"https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/byted-player-videos/1.0.0/xgplayer-demo.mp4",width:"auto",autoplay:!1,loop:!0,volume:.1,videoInit:!0,download:!0,
//è®¾ç½®downloadæ§ä»¶æ¾ç¤º
rotate:{
//è§é¢æè½¬æé®éç½®é¡¹
innerRotate:!0,
//åªæè½¬åé¨video
clockwise:!1},playbackRate:[.5,.75,1,1.5,2]};new tP(e)})()})),(e,n)=>{const i=c;return r(),o("div",nP,[iP,a("div",{id:"video_content",ref_key:"videoRef",ref:t},null,512),a("div",rP,[oP,s(i,{type:"primary",class:"break-all",href:"http://v2.h5player.bytedance.com/gettingStarted/",target:"_blank"},{default:l((()=>[u(" http://v2.h5player.bytedance.com/gettingStarted/ ")])),_:1})])])}}});export{aP as default};
