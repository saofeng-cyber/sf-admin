var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,a=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&s(e,n,t[n]);if(o)for(var n of o(t))r.call(t,n)&&s(e,n,t[n]);return e},i=(e,o)=>t(e,n(o));import{r as u,O as c,a as d,ag as v,aL as b,ab as m,w as g,h as p,y as f,v as y,z as x,bF as w,bq as h,bz as C,D as k,a5 as L,I as O,bA as P,bx as A,bp as $,P as j,bG as B}from"./index-f20dec1b.js";function I(e){let t;const n=u(!1),o=c(i(a({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function l(){var e,t;null==(t=null==(e=L.$el)?void 0:e.parentNode)||t.removeChild(L.$el)}function r(){if(!n.value)return;const e=o.parent;n.value=!1,e.vLoadingAddClassList=void 0,function(){const e=o.parent,t=L.ns;if(!e.vLoadingAddClassList){let n=e.getAttribute("loading-number");n=Number.parseInt(n)-1,n?e.setAttribute("loading-number",n.toString()):(C(e,t.bm("parent","relative")),e.removeAttribute("loading-number")),C(e,t.bm("parent","hidden"))}l(),k.unmount()}()}const s=d({name:"ElLoading",setup(e,{expose:t}){const n=v("loading"),l=b();return t({ns:n,zIndex:l}),()=>{const e=o.spinner||o.svg,t=m("svg",a({class:"circular",viewBox:o.svgViewBox?o.svgViewBox:"0 0 50 50"},e?{innerHTML:e}:{}),[m("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),l=o.text?m("p",{class:n.b("text")},[o.text]):void 0;return m(x,{name:n.b("fade"),onAfterLeave:r},{default:g((()=>[p(f("div",{style:{backgroundColor:o.background||""},class:[n.b("mask"),o.customClass,o.fullscreen?"is-fullscreen":""]},[m("div",{class:n.b("spinner")},[t,l])]),[[y,o.visible]])]))})}}}),k=w(s),L=k.mount(document.createElement("div"));return i(a({},h(o)),{setText:function(e){o.text=e},removeElLoadingChild:l,close:function(){var l;e.beforeClose&&!e.beforeClose()||(n.value=!0,clearTimeout(t),t=window.setTimeout(r,400),o.visible=!1,null==(l=e.closed)||l.call(e))},handleAfterLeave:r,vm:L,get $el(){return L.$el}})}let V;const E=function(e={}){if(!k)return;const t=z(e);if(t.fullscreen&&V)return V;const n=I(i(a({},t),{closed:()=>{var e;null==(e=t.closed)||e.call(t),t.fullscreen&&(V=void 0)}}));T(t,t.parent,n),N(t,t.parent,n),t.parent.vLoadingAddClassList=()=>N(t,t.parent,n);let o=t.parent.getAttribute("loading-number");return o=o?`${Number.parseInt(o)+1}`:"1",t.parent.setAttribute("loading-number",o),t.parent.appendChild(n.$el),L((()=>n.visible.value=t.visible)),t.fullscreen&&(V=n),n},z=e=>{var t,n,o,l;let r;return r=O(e.target)?null!=(t=document.querySelector(e.target))?t:document.body:e.target||document.body,{parent:r===document.body||e.body?document.body:r,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:r===document.body&&(null==(n=e.fullscreen)||n),lock:null!=(o=e.lock)&&o,customClass:e.customClass||"",visible:null==(l=e.visible)||l,target:r}},T=(e,t,n)=>{return o=void 0,l=null,r=function*(){const{nextZIndex:o}=n.vm.zIndex,l={};if(e.fullscreen)n.originalPosition.value=P(document.body,"position"),n.originalOverflow.value=P(document.body,"overflow"),l.zIndex=o();else if(e.parent===document.body){n.originalPosition.value=P(document.body,"position"),yield L();for(const t of["top","left"]){const n="top"===t?"scrollTop":"scrollLeft";l[t]=e.target.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]-Number.parseInt(P(document.body,`margin-${t}`),10)+"px"}for(const t of["height","width"])l[t]=`${e.target.getBoundingClientRect()[t]}px`}else n.originalPosition.value=P(t,"position");for(const[e,t]of Object.entries(l))n.$el.style[e]=t},new Promise(((e,t)=>{var n=e=>{try{a(r.next(e))}catch(n){t(n)}},s=e=>{try{a(r.throw(e))}catch(n){t(n)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,s);a((r=r.apply(o,l)).next())}));var o,l,r},N=(e,t,n)=>{const o=n.vm.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?C(t,o.bm("parent","relative")):A(t,o.bm("parent","relative")),e.fullscreen&&e.lock?A(t,o.bm("parent","hidden")):C(t,o.bm("parent","hidden"))},S=Symbol("ElLoading"),q=(e,t)=>{var n,o,l,r;const s=t.instance,a=e=>$(t.value)?t.value[e]:void 0,i=t=>(e=>{const t=O(e)&&(null==s?void 0:s[e])||e;return t?u(t):t})(a(t)||e.getAttribute(`element-loading-${B(t)}`)),c=null!=(n=a("fullscreen"))?n:t.modifiers.fullscreen,d={text:i("text"),svg:i("svg"),svgViewBox:i("svgViewBox"),spinner:i("spinner"),background:i("background"),customClass:i("customClass"),fullscreen:c,target:null!=(o=a("target"))?o:c?void 0:e,body:null!=(l=a("body"))?l:t.modifiers.body,lock:null!=(r=a("lock"))?r:t.modifiers.lock};e[S]={options:d,instance:E(d)}},D={mounted(e,t){t.value&&q(e,t)},updated(e,t){const n=e[S];t.oldValue!==t.value&&(t.value&&!t.oldValue?q(e,t):t.value&&t.oldValue?$(t.value)&&((e,t)=>{for(const n of Object.keys(t))j(t[n])&&(t[n].value=e[n])})(t.value,n.options):null==n||n.instance.close())},unmounted(e){var t;null==(t=e[S])||t.instance.close()}};export{E as L,D as v};
